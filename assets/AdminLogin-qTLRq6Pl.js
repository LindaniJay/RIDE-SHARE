var H=Object.defineProperty;var B=(t,e,s)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var k=(t,e,s)=>B(t,typeof e!="symbol"?e+"":e,s);import{j as r}from"./query-CSyQ0w5Y.js";import{r as c,a as L}from"./vendor-CBH9K-97.js";import{c as W,b,o as q,s as S,d as y,a as E,e as G,f as J,g as K,h as Q}from"./index-CWJzhqZF.js";import{c as X}from"./router-BWB2dKYR.js";import{S as Y}from"./SEO-DI9WjlZ_.js";import"./ui-qr7cu0yN.js";const A=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,T=W,U=(t,e)=>s=>{var i;if((e==null?void 0:e.variants)==null)return T(t,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:o,defaultVariants:a}=e,n=Object.keys(o).map(l=>{const h=s==null?void 0:s[l],g=a==null?void 0:a[l];if(h===null)return null;const u=A(h)||A(g);return o[l][u]}),x=s&&Object.entries(s).reduce((l,h)=>{let[g,u]=h;return u===void 0||(l[g]=u),l},{}),d=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((l,h)=>{let{class:g,className:u,...p}=h;return Object.entries(p).every(v=>{let[j,w]=v;return Array.isArray(w)?w.includes({...a,...x}[j]):{...a,...x}[j]===w})?[...l,g,u]:l},[]);return T(t,n,d,s==null?void 0:s.class,s==null?void 0:s.className)},Z=U("rounded-xl border bg-white shadow-sm transition-all duration-200",{variants:{variant:{default:"border-gray-200",elevated:"border-gray-200 shadow-lg hover:shadow-xl",glass:"bg-white/10 backdrop-blur-md border-white/20 text-white",outlined:"border-2 border-gray-300",filled:"bg-gray-50 border-gray-200"},padding:{none:"p-0",sm:"p-4",md:"p-6",lg:"p-8"},hover:{true:"hover:shadow-md cursor-pointer",false:""}},defaultVariants:{variant:"default",padding:"md",hover:!1}}),I=c.forwardRef(({className:t,variant:e,padding:s,hover:i,asChild:o=!1,...a},n)=>{const x=o?L.Fragment:"div";return r.jsx(x,{ref:o?void 0:n,className:b(Z({variant:e,padding:s,hover:i,className:t})),...a})});I.displayName="Card";const O=c.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:b("flex flex-col space-y-1.5 p-6",t),...e}));O.displayName="CardHeader";const _=c.forwardRef(({className:t,...e},s)=>r.jsx("h3",{ref:s,className:b("text-lg font-semibold leading-none tracking-tight",t),...e}));_.displayName="CardTitle";const ee=c.forwardRef(({className:t,...e},s)=>r.jsx("p",{ref:s,className:b("text-sm text-gray-500",t),...e}));ee.displayName="CardDescription";const V=c.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:b("p-6 pt-0",t),...e}));V.displayName="CardContent";const re=c.forwardRef(({className:t,...e},s)=>r.jsx("div",{ref:s,className:b("flex items-center p-6 pt-0",t),...e}));re.displayName="CardFooter";const se=U("flex w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50 transition-colors duration-200",{variants:{variant:{default:"border-gray-300 focus:ring-blue-500",error:"border-red-500 focus:ring-red-500 focus:border-red-500",success:"border-green-500 focus:ring-green-500 focus:border-green-500",glass:"bg-white/10 backdrop-blur-md border-white/20 text-white placeholder:text-white/60 focus:ring-white/50"},size:{sm:"h-8 px-2 text-xs",md:"h-10 px-3 text-sm",lg:"h-12 px-4 text-base"}},defaultVariants:{variant:"default",size:"md"}}),C=c.forwardRef(({className:t,variant:e,size:s,label:i,error:o,helperText:a,leftIcon:n,rightIcon:x,required:d,id:l,...h},g)=>{const u=l||`input-${Math.random().toString(36).substr(2,9)}`,p=!!o,v=p?"error":e;return r.jsxs("div",{className:"w-full",children:[i&&r.jsxs("label",{htmlFor:u,className:"block text-sm font-medium text-gray-700 mb-1",children:[i,d&&r.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),r.jsxs("div",{className:"relative",children:[n&&r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx("span",{className:"text-gray-400","aria-hidden":"true",children:n})}),r.jsx("input",{id:u,className:b(se({variant:v,size:s,className:t}),n&&"pl-10",x&&"pr-10"),ref:g,"aria-invalid":p,"aria-describedby":o?`${u}-error`:a?`${u}-helper`:void 0,...h}),x&&r.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:r.jsx("span",{className:"text-gray-400","aria-hidden":"true",children:x})})]}),o&&r.jsx("p",{id:`${u}-error`,className:"mt-1 text-sm text-red-600",role:"alert",children:o}),a&&!o&&r.jsx("p",{id:`${u}-helper`,className:"mt-1 text-sm text-gray-500",children:a})]})});C.displayName="Input";const te=(t,e)=>{switch(e.type){case"SET_FIELD_VALUE":return{...t,fields:{...t.fields,[e.payload.name]:{...t.fields[e.payload.name],value:e.payload.value,touched:!0}},isDirty:!0};case"SET_FIELD_ERROR":return{...t,fields:{...t.fields,[e.payload.name]:{...t.fields[e.payload.name],error:e.payload.error}}};case"CLEAR_FIELD_ERROR":return{...t,fields:{...t.fields,[e.payload.name]:{...t.fields[e.payload.name],error:void 0}}};case"TOUCH_FIELD":return{...t,fields:{...t.fields,[e.payload.name]:{...t.fields[e.payload.name],touched:!0}}};case"SET_SUBMITTING":return{...t,isSubmitting:e.payload};case"RESET_FORM":return{fields:{},isValid:!0,isSubmitting:!1,isDirty:!1};case"SET_FORM_DATA":const s={};return Object.entries(e.payload).forEach(([i,o])=>{s[i]={name:i,value:o,touched:!1}}),{...t,fields:s,isDirty:!1};default:return t}},D=c.createContext(void 0),z=()=>{const t=c.useContext(D);if(!t)throw new Error("useForm must be used within a FormProvider");return t},ae=({children:t,initialValues:e={},onSubmit:s,validationSchema:i,className:o})=>{const[a,n]=c.useReducer(te,{fields:{},isValid:!0,isSubmitting:!1,isDirty:!1}),x=c.useCallback((f,m)=>{n({type:"SET_FIELD_VALUE",payload:{name:f,value:m}})},[]),d=c.useCallback((f,m)=>{n({type:"SET_FIELD_ERROR",payload:{name:f,error:m}})},[]),l=c.useCallback(f=>{n({type:"CLEAR_FIELD_ERROR",payload:{name:f}})},[]),h=c.useCallback(f=>{n({type:"TOUCH_FIELD",payload:{name:f}})},[]),g=c.useCallback(f=>{n({type:"SET_SUBMITTING",payload:f})},[]),u=c.useCallback(()=>{n({type:"RESET_FORM"})},[]),p=c.useCallback(f=>{var m;return(m=a.fields[f])==null?void 0:m.value},[a.fields]),v=c.useCallback(f=>{var m;return(m=a.fields[f])==null?void 0:m.error},[a.fields]),j=c.useCallback(f=>{var m;return((m=a.fields[f])==null?void 0:m.touched)||!1},[a.fields]),w=async f=>{if(f.preventDefault(),!a.isSubmitting){g(!0);try{const m={};if(Object.entries(a.fields).forEach(([N,F])=>{m[N]=F.value}),i){const N=i(m);if(Object.keys(N).length>0){Object.entries(N).forEach(([M,$])=>{d(M,$)}),g(!1);return}}await s(m)}catch(m){console.error("Form submission error:",m)}finally{g(!1)}}};L.useEffect(()=>{Object.keys(e).length>0&&n({type:"SET_FORM_DATA",payload:e})},[e]);const P={state:a,setFieldValue:x,setFieldError:d,clearFieldError:l,touchField:h,setSubmitting:g,resetForm:u,getFieldValue:p,getFieldError:v,isFieldTouched:j};return r.jsx(D.Provider,{value:P,children:r.jsx("form",{onSubmit:w,className:b("space-y-6",o),children:t})})},R=({name:t,children:e})=>{const{getFieldValue:s,getFieldError:i,isFieldTouched:o,setFieldValue:a,setFieldError:n,clearFieldError:x,touchField:d}=z(),l={value:s(t),error:i(t),touched:o(t),setValue:h=>a(t,h),setError:h=>n(t,h),clearError:()=>x(t),touch:()=>d(t)};return r.jsx(r.Fragment,{children:e(l)})},ie=({children:t,className:e})=>{const{state:s}=z();return r.jsx("button",{type:"submit",disabled:s.isSubmitting||!s.isValid,className:b("w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",e),children:s.isSubmitting?"Submitting...":t})};class ne{constructor(){k(this,"currentUser",null);k(this,"listeners",[]);q(y,async e=>{if(e)try{const s=await e.getIdToken(),i=await E.post("/auth/verify-firebase-token",{idToken:s});i.success?(this.currentUser=i.data.user,this.notifyListeners()):(console.error("Failed to verify Firebase token:",i.message),await this.signOut())}catch(s){console.error("Firebase auth error:",s),await this.signOut()}else this.currentUser=null,this.notifyListeners()})}async adminLogin(e,s){try{const o=await(await S(y,e,s)).user.getIdToken(),a=await E.post("/auth/verify-firebase-token",{idToken:o});if(a.success){const n=a.data.user;if(n.role!=="admin"&&!n.isAdmin)throw await this.signOut(),new Error("Access denied. Admin privileges required.");return this.currentUser=n,localStorage.setItem("authToken",a.data.accessToken),this.notifyListeners(),this.currentUser}else throw new Error(a.message||"Admin authentication failed")}catch(i){throw console.error("Admin login error:",i),i}}async signIn(e,s){try{const o=await(await S(y,e,s)).user.getIdToken(),a=await E.post("/auth/verify-firebase-token",{idToken:o});if(a.success)return this.currentUser=a.data.user,localStorage.setItem("authToken",a.data.accessToken),this.notifyListeners(),this.currentUser;throw new Error(a.message||"Authentication failed")}catch(i){throw console.error("Sign in error:",i),i}}async signUp(e,s,i,o,a="renter"){try{const n=await G(y,e,s);await J(n.user,{displayName:`${i} ${o}`});const x=await n.user.getIdToken(),d=await E.post("/auth/verify-firebase-token",{idToken:x});if(d.success)return this.currentUser=d.data.user,localStorage.setItem("authToken",d.data.accessToken),this.notifyListeners(),this.currentUser;throw new Error(d.message||"Registration failed")}catch(n){throw console.error("Sign up error:",n),n}}async signOut(){try{await K(y),this.currentUser=null,localStorage.removeItem("authToken"),this.notifyListeners()}catch(e){throw console.error("Sign out error:",e),e}}getCurrentUser(){return this.currentUser}isAuthenticated(){return this.currentUser!==null}isAdmin(){var e,s;return((e=this.currentUser)==null?void 0:e.role)==="admin"||((s=this.currentUser)==null?void 0:s.isAdmin)===!0}isHost(){var e;return((e=this.currentUser)==null?void 0:e.role)==="host"}isRenter(){var e;return((e=this.currentUser)==null?void 0:e.role)==="renter"}onAuthStateChange(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(s=>s!==e)}}notifyListeners(){this.listeners.forEach(e=>e(this.currentUser))}async getIdToken(){return y.currentUser?await y.currentUser.getIdToken():null}async refreshIdToken(){return y.currentUser?await y.currentUser.getIdToken(!0):null}}const oe=new ne,le=({onSuccess:t,className:e})=>{const[s,i]=c.useState(!1),o=X(),{error:a,success:n}=Q(),x=async d=>{i(!0);try{await oe.adminLogin(d.email,d.password),n("Admin login successful","Welcome to the admin dashboard"),t==null||t(),o("/dashboard")}catch(l){a("Admin login failed",l.message||"Invalid admin credentials")}finally{i(!1)}};return r.jsx("div",{className:`min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 ${e}`,children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Admin Access"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access the admin dashboard"})]}),r.jsxs(I,{className:"mt-8",children:[r.jsx(O,{children:r.jsx(_,{className:"text-center",children:"Administrator Login"})}),r.jsxs(V,{children:[r.jsx(ae,{onSubmit:x,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(R,{name:"email",children:({value:d,setValue:l,error:h,clearError:g,touch:u})=>r.jsx(C,{label:"Admin Email",type:"email",value:d||"",onChange:p=>{l(p.target.value),g()},onBlur:()=>u(),error:h,placeholder:"admin@rideshare.co.za",required:!0,leftIcon:r.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})})}),r.jsx(R,{name:"password",children:({value:d,setValue:l,error:h,clearError:g,touch:u})=>r.jsx(C,{label:"Password",type:"password",value:d||"",onChange:p=>{l(p.target.value),g()},onBlur:()=>u(),error:h,placeholder:"Enter admin password",required:!0,leftIcon:r.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})}),r.jsx(ie,{className:"w-full",children:s?"Signing in...":"Sign in as Admin"})]})}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-gray-300"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Admin Accounts"})})]}),r.jsxs("div",{className:"mt-4 text-xs text-gray-500 space-y-1",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Jonase:"})," Jonase@rideshare.co.za"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Toni:"})," Toni@rideshare.co.za"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Soso:"})," soso@rideshare.co.za"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Anitha:"})," Anitha@rideshare.co.za"]}),r.jsxs("p",{className:"mt-2 text-center",children:[r.jsx("strong",{children:"Password:"})," password123"]})]})]})]})]}),r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"text-sm text-gray-600",children:["Regular users should use"," ",r.jsx("button",{onClick:()=>o("/login"),className:"font-medium text-blue-600 hover:text-blue-500",children:"Firebase authentication"})]})})]})})},ge=()=>r.jsxs(r.Fragment,{children:[r.jsx(Y,{title:"Admin Login - RideShare SA",description:"Administrator access to RideShare SA dashboard",keywords:"admin login, administrator, dashboard, RideShare SA",url:"https://rideshare-sa.co.za/admin-login"}),r.jsx(le,{})]});export{ge as default};
