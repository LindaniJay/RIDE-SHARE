import{j as e}from"./query-CSyQ0w5Y.js";import{r as l}from"./vendor-CBH9K-97.js";import{c as P,L as S,R as $,a as R}from"./router-BWB2dKYR.js";import{u as V,I as A}from"./index-CO4Ilil0.js";import{G as E}from"./Glassmorphism-B6x2MkMT.js";import"./ui-qr7cu0yN.js";const b=({status:r,size:m="md",className:o=""})=>{const h=()=>{switch(r){case"approved":case"verified":case"confirmed":case"completed":return{bg:"bg-green-500/20",text:"text-green-300",border:"border-green-500/30",icon:"âœ“"};case"pending":return{bg:"bg-yellow-500/20",text:"text-yellow-300",border:"border-yellow-500/30",icon:"â³"};case"rejected":case"declined":case"cancelled":return{bg:"bg-red-500/20",text:"text-red-300",border:"border-red-500/30",icon:"âœ—"};case"unverified":return{bg:"bg-gray-500/20",text:"text-gray-300",border:"border-gray-500/30",icon:"â—‹"};default:return{bg:"bg-gray-500/20",text:"text-gray-300",border:"border-gray-500/30",icon:"?"}}},c=()=>{switch(m){case"sm":return"px-2 py-1 text-xs";case"md":return"px-3 py-1 text-sm";case"lg":return"px-4 py-2 text-base";default:return"px-3 py-1 text-sm"}},g=h();return e.jsxs("span",{className:`
        inline-flex items-center space-x-1 rounded-full font-medium border
        ${g.bg} ${g.text} ${g.border} ${c()}
        ${o}
      `,children:[e.jsx("span",{className:"text-xs",children:g.icon}),e.jsx("span",{className:"capitalize",children:r})]})},z=()=>{const[r,m]=l.useState({totalUsers:0,totalVehicles:0,totalBookings:0,totalRevenue:0,activeUsers:0,pendingBookings:0,supportTickets:0}),[o,h]=l.useState([]),[c,g]=l.useState([]),[N,v]=l.useState([]),[d,p]=l.useState([]),[f,y]=l.useState([]),[k,w]=l.useState(!0),[a,s]=l.useState("overview");l.useEffect(()=>{x()},[]);const x=async()=>{w(!0);try{const t=localStorage.getItem("token"),D=await fetch("/api/listings/admin/pending",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(D.ok){const T=await D.json();g(T.listings||[])}const U=await fetch("/api/listings?admin=true",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(U.ok){const B=(await U.json()).listings||[];m({totalUsers:6,totalVehicles:B.length,totalBookings:2,totalRevenue:2700,activeUsers:6,pendingBookings:B.filter(M=>M.status==="pending").length,supportTickets:0})}h([{id:"1",firstName:"Admin",lastName:"User",email:"admin@rentza.co.za",role:"admin",joinDate:"2024-01-01",isActive:!0,totalBookings:0,totalEarnings:0},{id:"2",firstName:"John",lastName:"Smith",email:"host1@rentza.co.za",role:"host",joinDate:"2024-01-15",isActive:!0,totalBookings:0,totalEarnings:0},{id:"3",firstName:"Sarah",lastName:"Johnson",email:"host2@rentza.co.za",role:"host",joinDate:"2024-02-20",isActive:!0,totalBookings:0,totalEarnings:0}]),v([{id:"1",vehicleName:"2020 Toyota Corolla - Clean & Reliable",renterName:"Mike Wilson",hostName:"John Smith",pickupDate:"2024-12-15",returnDate:"2024-12-17",totalAmount:1350,status:"confirmed",createdAt:"2024-12-10"},{id:"2",vehicleName:"2020 Toyota Corolla - Clean & Reliable",renterName:"Lisa Brown",hostName:"John Smith",pickupDate:"2024-12-20",returnDate:"2024-12-22",totalAmount:1350,status:"pending",createdAt:"2024-12-11"}]),p([{id:"1",type:"license",user:"John Doe",userEmail:"john@example.com",fileName:"driver_license.pdf",uploadedAt:"2024-12-01",status:"pending"},{id:"2",type:"id",user:"Jane Smith",userEmail:"jane@example.com",fileName:"id_document.pdf",uploadedAt:"2024-12-02",status:"pending"},{id:"3",type:"vehicle_insurance",user:"Mike Johnson",userEmail:"mike@example.com",fileName:"vehicle_insurance.pdf",uploadedAt:"2024-12-03",status:"pending"}]),y([{id:"1",type:"booking_dispute",title:"Vehicle damage claim",description:"Renter claims vehicle was damaged before rental",renter:"John Doe",host:"Jane Smith",status:"open",createdAt:"2024-12-01",priority:"high"},{id:"2",type:"payment_dispute",title:"Refund request",description:"Host requesting refund for cancelled booking",renter:"Mike Wilson",host:"Sarah Johnson",status:"in_progress",createdAt:"2024-12-02",priority:"medium"}])}catch(t){console.error("Error fetching admin data:",t)}finally{w(!1)}},j=t=>`R${t.toLocaleString()}`,i=t=>new Date(t).toLocaleDateString(),u=t=>{switch(t){case"active":case"confirmed":return"text-green-600 bg-green-100 dark:bg-green-900/20";case"pending":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20";case"cancelled":return"text-red-600 bg-red-100 dark:bg-red-900/20";default:return"text-gray-600 bg-gray-100 dark:bg-gray-700"}};return k?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-700 rounded w-1/3 mb-8"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[...Array(4)].map((t,D)=>e.jsx("div",{className:"h-32 bg-gray-300 dark:bg-gray-700 rounded-lg"},D))})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Admin Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage your RideShare SA platform"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-blue-600 text-xl",children:"ðŸ‘¥"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.totalUsers.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Users"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-green-600 text-xl",children:"ðŸš—"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.totalVehicles.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Vehicles"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-purple-600 text-xl",children:"ðŸ“‹"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.totalBookings.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Bookings"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-yellow-600 text-xl",children:"ðŸ’°"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:j(r.totalRevenue)}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Revenue"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.activeUsers.toLocaleString()})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-green-600 text-xl",children:"âœ…"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Pending Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.pendingBookings})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-yellow-600 text-xl",children:"â³"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Support Tickets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.supportTickets})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-red-600 text-xl",children:"ðŸŽ«"})})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:[{id:"overview",name:"Overview",icon:"ðŸ“Š"},{id:"users",name:"Users",icon:"ðŸ‘¥"},{id:"vehicles",name:"Vehicles",icon:"ðŸš—"},{id:"bookings",name:"Bookings",icon:"ðŸ“‹"},{id:"documents",name:"Documents",icon:"ðŸ“„"},{id:"disputes",name:"Disputes",icon:"âš–ï¸"},{id:"analytics",name:"Analytics",icon:"ðŸ“ˆ"}].map(t=>e.jsxs("button",{onClick:()=>s(t.id),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${a===t.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("span",{className:"mr-2",children:t.icon}),t.name]},t.id))})})}),a==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Bookings"}),e.jsx("div",{className:"space-y-4",children:N.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.vehicleName}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.renterName," â†’ ",t.hostName]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:j(t.totalAmount)}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${u(t.status)}`,children:t.status})]})]},t.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Platform Health"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Uptime"}),e.jsx("span",{className:"font-semibold text-green-600",children:"99.9%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Response Time"}),e.jsx("span",{className:"font-semibold text-green-600",children:"120ms"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Error Rate"}),e.jsx("span",{className:"font-semibold text-green-600",children:"0.1%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Active Sessions"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"1,247"})]})]})]})]}),a==="users"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"User Management"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Join Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bookings"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:o.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-primary-600 text-sm font-medium",children:t.firstName.charAt(0)})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[t.firstName," ",t.lastName]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300",children:t.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:i(t.joinDate)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.totalBookings}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${t.isActive?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-300"}`,children:t.isActive?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{className:"text-primary-600 hover:text-primary-900 mr-3",children:"Edit"}),e.jsx("button",{className:"text-red-600 hover:text-red-900",children:"Suspend"})]})]},t.id))})]})})]}),a==="vehicles"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Vehicle Management"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Vehicle"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Host"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Price/Day"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bookings"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Rating"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:c.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[t.make," ",t.model," ",t.year]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.hostName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.location}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:j(t.pricePerDay)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.totalBookings}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-yellow-400",children:"â­"}),e.jsx("span",{className:"ml-1",children:t.rating})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${u(t.status)}`,children:t.status})})]},t.id))})]})})]}),a==="bookings"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Booking Management"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Booking"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Renter"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Host"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Dates"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:N.map(t=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.vehicleName}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["#",t.id]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.renterName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.hostName}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[e.jsx("div",{children:i(t.pickupDate)}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:["to ",i(t.returnDate)]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:j(t.totalAmount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${u(t.status)}`,children:t.status})})]},t.id))})]})})]}),a==="documents"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Document Approval"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Review and approve user documents"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Document Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"File Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Uploaded"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map(t=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.user}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.userEmail})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white capitalize",children:t.type.replace("_"," ")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.fileName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:i(t.uploadedAt)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(b,{status:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"text-green-600 hover:text-green-900",children:"Approve"}),e.jsx("button",{className:"text-red-600 hover:text-red-900",children:"Reject"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:"View"})]})})]},t.id))})]})})]})}),a==="disputes"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Dispute Management"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Handle user disputes and issues"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Dispute"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Parties"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:f.map(t=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-xs truncate",children:t.description})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[e.jsx("div",{children:t.renter}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:["vs ",t.host]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white capitalize",children:t.type.replace("_"," ")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${t.priority==="high"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300":t.priority==="medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300":"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300"}`,children:t.priority})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(b,{status:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:"View Details"}),e.jsx("button",{className:"text-green-600 hover:text-green-900",children:"Resolve"})]})})]},t.id))})]})})]})}),a==="analytics"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"User Analytics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total Users"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:r.totalUsers})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Active Users"}),e.jsx("span",{className:"font-semibold text-green-600",children:r.activeUsers})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"New This Month"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"12"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Revenue Analytics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total Revenue"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:j(r.totalRevenue)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"This Month"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["R",Math.floor(r.totalRevenue*.3).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Growth Rate"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"+15.2%"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Platform Health"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"99.9%"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Uptime"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"120ms"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Avg Response Time"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:"1,247"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Active Sessions"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Monthly Revenue Chart"}),e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ“Š"}),e.jsx("p",{children:"Revenue chart would be displayed here"}),e.jsx("p",{className:"text-sm",children:"Integration with chart library needed"})]})})]})]})]})})},n=({children:r,className:m="",title:o,subtitle:h,icon:c,hover:g=!0})=>e.jsxs(E,{variant:"card",className:`rounded-2xl p-6 ${g?"hover:scale-105":""} ${m}`,shadow:!0,children:[(o||h||c)&&e.jsxs("div",{className:"flex items-center mb-4",children:[c&&e.jsx("div",{className:"w-12 h-12 bg-white/20 dark:bg-white/10 rounded-xl flex items-center justify-center mr-4",children:c}),e.jsxs("div",{children:[o&&e.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white mb-1",children:o}),h&&e.jsx("p",{className:"text-white/70 dark:text-white/60 text-sm",children:h})]})]}),r]}),L=({onUpload:r,documentType:m,acceptedTypes:o=["image/jpeg","image/png","image/jpg","application/pdf"],maxSize:h=5,className:c=""})=>{const[g,N]=l.useState(!1),[v,d]=l.useState(null),[p,f]=l.useState(null),y=l.useRef(null),k=i=>{i.preventDefault(),N(!0)},w=i=>{i.preventDefault(),N(!1)},a=i=>{i.preventDefault(),N(!1);const u=Array.from(i.dataTransfer.files);u.length>0&&s(u[0])},s=i=>{if(!o.includes(i.type)){alert(`Please upload a valid file type. Accepted types: ${o.join(", ")}`);return}if(i.size>h*1024*1024){alert(`File size must be less than ${h}MB`);return}if(d(i),i.type.startsWith("image/")){const u=new FileReader;u.onload=t=>{var D;f((D=t.target)==null?void 0:D.result)},u.readAsDataURL(i)}r(i,m)},x=i=>{const u=i.target.files;u&&u.length>0&&s(u[0])},j=()=>{d(null),f(null),y.current&&(y.current.value="")};return e.jsx("div",{className:`relative ${c}`,children:e.jsxs("div",{className:`border-2 border-dashed rounded-xl p-6 text-center transition-all duration-300 ${g?"border-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-blue-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,onDragOver:k,onDragLeave:w,onDrop:a,onClick:()=>{var i;return(i=y.current)==null?void 0:i.click()},children:[e.jsx("input",{ref:y,type:"file",accept:o.join(","),onChange:x,className:"hidden"}),v?e.jsx("div",{className:"space-y-4",children:p?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:p,alt:"Document preview",className:"w-full h-32 object-cover rounded-lg mx-auto"}),e.jsx("button",{onClick:i=>{i.stopPropagation(),j()},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm hover:bg-red-600",children:"Ã—"})]}):e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-600",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“„"}),e.jsx("span",{className:"font-medium",children:v.name}),e.jsx("button",{onClick:i=>{i.stopPropagation(),j()},className:"text-red-500 hover:text-red-600 ml-2",children:"Remove"})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-4xl text-gray-400",children:"ðŸ“"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:["Upload ",m]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Drag and drop your file here, or click to browse"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Max size: ",h,"MB â€¢ Accepted: ",o.join(", ")]})]})]})]})})},C=()=>{const[r,m]=l.useState([]),[o,h]=l.useState([]),[c,g]=l.useState({profile:"pending",license:"unverified",id:"unverified"}),[N,v]=l.useState(!0),[d,p]=l.useState("overview");l.useEffect(()=>{f()},[]);const f=async()=>{try{const a=localStorage.getItem("accessToken"),s=await fetch("/api/bookings",{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(s.ok){const x=await s.json();m(x.bookings||[])}g({profile:"approved",license:"pending",id:"unverified"}),h([{id:1,type:"license",name:"Driver License.pdf",status:"pending",uploadedAt:"2024-12-01"},{id:2,type:"id",name:"ID Document.pdf",status:"unverified",uploadedAt:null}])}catch(a){console.error("Error fetching renter data:",a)}finally{v(!1)}},y=(a,s)=>{console.log("Uploading document:",a.name,"Type:",s);const x={id:Date.now(),type:s,name:a.name,status:"pending",uploadedAt:new Date().toISOString()};h(j=>[...j,x])},k=r.filter(a=>a.status==="confirmed"||a.status==="pending"),w=r.filter(a=>a.status==="completed").reduce((a,s)=>a+s.totalPrice,0);return N?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-700 rounded w-1/3 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(3)].map((a,s)=>e.jsx("div",{className:"h-32 bg-gray-300 dark:bg-gray-700 rounded-lg"},s))})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Renter Dashboard"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>p("overview"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${d==="overview"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:"ðŸ“Š Overview"}),e.jsx("button",{onClick:()=>p("documents"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${d==="documents"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:"ðŸ“„ Documents"}),e.jsx("button",{onClick:()=>p("bookings"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${d==="bookings"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:"ðŸš— Bookings"}),e.jsx("button",{onClick:()=>p("payments"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${d==="payments"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:"ðŸ’³ Payments"})]})]}),d==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(n,{title:"Active Bookings",subtitle:"Current rentals",icon:"ðŸš—",className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:k.length}),e.jsx("div",{className:"text-white/70 text-sm",children:"Active now"})]}),e.jsxs(n,{title:"Total Spent",subtitle:"All time spending",icon:"ðŸ’°",className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:["R",w.toLocaleString()]}),e.jsx("div",{className:"text-white/70 text-sm",children:"Lifetime total"})]}),e.jsxs(n,{title:"Verification Status",subtitle:"Account verification",icon:"âœ…",className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:c.profile==="approved"?"âœ…":"â³"}),e.jsx("div",{className:"text-white/70 text-sm",children:c.profile==="approved"?"Verified":"Pending"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(n,{title:"Recent Bookings",subtitle:"Your latest vehicle rentals",icon:"ðŸ“‹",children:e.jsxs("div",{className:"space-y-3",children:[r.slice(0,3).map(a=>{var s,x;return e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:((s=a.listing)==null?void 0:s.title)||"Unknown Vehicle"}),e.jsxs("p",{className:"text-sm text-white/70",children:[(x=a.listing)==null?void 0:x.location," â€¢ ",new Date(a.startDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-white font-semibold",children:["R",a.totalPrice]}),e.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${a.status==="confirmed"?"bg-green-500/20 text-green-200 border border-green-400/30":a.status==="pending"?"bg-yellow-500/20 text-yellow-200 border border-yellow-400/30":a.status==="cancelled"?"bg-red-500/20 text-red-200 border border-red-400/30":"bg-gray-500/20 text-gray-200 border border-gray-400/30"}`,children:a.status})]})]},a.id)}),r.length===0&&e.jsx("p",{className:"text-white/60 text-center py-4",children:"No bookings yet"})]})}),e.jsx(n,{title:"Verification Status",subtitle:"Document verification progress",icon:"ðŸ“‹",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ‘¤"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Profile"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Basic information"})]})]}),e.jsx(b,{status:c.profile})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ†”"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Driver License"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Driving permit"})]})]}),e.jsx(b,{status:c.license})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ†”"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"ID Document"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Identity verification"})]})]}),e.jsx(b,{status:c.id})]})]})})]})]}),d==="documents"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(n,{title:"Document Upload",subtitle:"Upload your verification documents",icon:"ðŸ“„",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Driver License"}),e.jsx(L,{onUpload:a=>y(a,"license"),documentType:"Driver License",acceptedTypes:["image/jpeg","image/png","application/pdf"],maxSize:5})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"ID Document"}),e.jsx(L,{onUpload:a=>y(a,"id"),documentType:"ID Document",acceptedTypes:["image/jpeg","image/png","application/pdf"],maxSize:5})]})]})}),e.jsx(n,{title:"Uploaded Documents",subtitle:"Your submitted documents",icon:"ðŸ“",children:e.jsx("div",{className:"space-y-3",children:o.map(a=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“„"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:a.name}),e.jsx("p",{className:"text-white/70 text-sm",children:a.uploadedAt?`Uploaded ${new Date(a.uploadedAt).toLocaleDateString()}`:"Not uploaded"})]})]}),e.jsx(b,{status:a.status})]},a.id))})})]}),d==="bookings"&&e.jsx(n,{title:"My Bookings",subtitle:"All your vehicle rentals",icon:"ðŸš—",children:e.jsxs("div",{className:"space-y-4",children:[r.map(a=>{var s,x;return e.jsx("div",{className:"p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:((s=a.listing)==null?void 0:s.title)||"Unknown Vehicle"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-white/70",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",(x=a.listing)==null?void 0:x.location]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Dates:"})," ",new Date(a.startDate).toLocaleDateString()," - ",new Date(a.endDate).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Total:"})," R",a.totalPrice]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx(b,{status:a.status,className:"ml-2"})]})]})]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-500/20 text-blue-200 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"View Details"}),a.status==="pending"&&e.jsx("button",{className:"px-3 py-1 bg-red-500/20 text-red-200 rounded-lg text-sm hover:bg-red-500/30 transition-colors",children:"Cancel"})]})]})},a.id)}),r.length===0&&e.jsx("p",{className:"text-white/60 text-center py-8",children:"No bookings yet"})]})}),d==="payments"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(n,{title:"Payment History",subtitle:"Your transaction history",icon:"ðŸ’³",children:e.jsxs("div",{className:"space-y-4",children:[r.filter(a=>a.status==="completed").map(a=>{var s;return e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:((s=a.listing)==null?void 0:s.title)||"Vehicle Rental"}),e.jsx("p",{className:"text-white/70 text-sm",children:new Date(a.startDate).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white font-semibold",children:["R",a.totalPrice]}),e.jsx("p",{className:"text-green-400 text-sm",children:"âœ… Paid"})]})]},a.id)}),r.filter(a=>a.status==="completed").length===0&&e.jsx("p",{className:"text-white/60 text-center py-8",children:"No payment history yet"})]})}),e.jsx(n,{title:"Payment Methods",subtitle:"Manage your payment options",icon:"ðŸ’³",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ’³"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Credit Card"}),e.jsx("p",{className:"text-white/70 text-sm",children:"**** **** **** 1234"})]})]}),e.jsx("button",{className:"px-3 py-1 bg-blue-500/20 text-blue-200 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"Edit"})]})}),e.jsx("button",{className:"w-full p-4 border-2 border-dashed border-white/30 rounded-xl text-white/70 hover:border-white/50 hover:text-white transition-colors",children:"+ Add Payment Method"})]})})]})]})},I=()=>{const[r,m]=l.useState([]),[o,h]=l.useState([]),[c,g]=l.useState({total:0,thisMonth:0,lastMonth:0}),[N,v]=l.useState(!0),[d,p]=l.useState("overview");l.useEffect(()=>{f()},[]);const f=async()=>{try{const s=localStorage.getItem("accessToken"),x=await fetch("/api/listings/host/my-listings",{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(x.ok){const j=await x.json();m(j.listings||[])}h([{id:"1",vehicleName:"2020 Toyota Corolla",renterName:"John Doe",startDate:"2024-12-15",endDate:"2024-12-17",totalAmount:1350,status:"pending"},{id:"2",vehicleName:"2019 BMW X3",renterName:"Jane Smith",startDate:"2024-12-20",endDate:"2024-12-22",totalAmount:2400,status:"confirmed"}]),g({total:15750,thisMonth:3750,lastMonth:4200})}catch(s){console.error("Error fetching host data:",s)}finally{v(!1)}},y=(s,x)=>{h(j=>j.map(i=>i.id===s?{...i,status:x==="accept"?"confirmed":"rejected"}:i))},k=r.filter(s=>s.status==="approved"),w=r.filter(s=>s.status==="pending"),a=r.filter(s=>s.status==="declined");return N?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-700 rounded w-1/3 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(3)].map((s,x)=>e.jsx("div",{className:"h-32 bg-gray-300 dark:bg-gray-700 rounded-lg"},x))})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Host Dashboard"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>p("overview"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${d==="overview"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:"ðŸ“Š Overview"}),e.jsx("button",{onClick:()=>p("vehicles"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${d==="vehicles"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:"ðŸš— Vehicles"}),e.jsx("button",{onClick:()=>p("bookings"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${d==="bookings"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:"ðŸ“‹ Bookings"}),e.jsx("button",{onClick:()=>p("earnings"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${d==="earnings"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:"ðŸ’° Earnings"})]})]}),d==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(n,{title:"Approved Listings",subtitle:"Active vehicles",icon:"âœ…",className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:k.length}),e.jsx("div",{className:"text-white/70 text-sm",children:"Ready to rent"})]}),e.jsxs(n,{title:"Pending Approval",subtitle:"Awaiting review",icon:"â³",className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:w.length}),e.jsx("div",{className:"text-white/70 text-sm",children:"Under review"})]}),e.jsxs(n,{title:"Total Earnings",subtitle:"All time revenue",icon:"ðŸ’°",className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:["R",c.total.toLocaleString()]}),e.jsx("div",{className:"text-white/70 text-sm",children:"Lifetime total"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(n,{title:"Recent Bookings",subtitle:"Latest rental requests",icon:"ðŸ“‹",children:e.jsxs("div",{className:"space-y-3",children:[o.slice(0,3).map(s=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:s.vehicleName}),e.jsxs("p",{className:"text-sm text-white/70",children:[s.renterName," â€¢ ",new Date(s.startDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-white font-semibold",children:["R",s.totalAmount]}),e.jsx(b,{status:s.status})]})]},s.id)),o.length===0&&e.jsx("p",{className:"text-white/60 text-center py-4",children:"No bookings yet"})]})}),e.jsx(n,{title:"Listing Status",subtitle:"Vehicle approval status",icon:"ðŸ“Š",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:"âœ…"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Approved"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Ready to rent"})]})]}),e.jsx("span",{className:"text-white font-bold text-xl",children:k.length})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:"â³"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Pending"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Under review"})]})]}),e.jsx("span",{className:"text-white font-bold text-xl",children:w.length})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:"âŒ"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Declined"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Needs attention"})]})]}),e.jsx("span",{className:"text-white font-bold text-xl",children:a.length})]})]})})]})]}),d==="vehicles"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(n,{title:"Vehicle Management",subtitle:"Manage your vehicle listings",icon:"ðŸš—",children:e.jsxs("div",{className:"space-y-4",children:[r.map(s=>e.jsx("div",{className:"p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:s.title}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-white/70",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",s.location]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Price:"})," R",s.pricePerDay,"/day"]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx(b,{status:s.status,className:"ml-2"})]}),s.declineReason&&e.jsxs("p",{className:"text-red-400 text-sm mt-1",children:["Reason: ",s.declineReason]})]})]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-500/20 text-blue-200 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"Edit"}),e.jsx("button",{className:"px-3 py-1 bg-green-500/20 text-green-200 rounded-lg text-sm hover:bg-green-500/30 transition-colors",children:"View"})]})]})},s.id)),r.length===0&&e.jsx("p",{className:"text-white/60 text-center py-8",children:"No vehicles listed yet"})]})}),e.jsxs(n,{title:"Add New Vehicle",subtitle:"List a new vehicle for rent",icon:"âž•",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Vehicle Photos"}),e.jsx(L,{onUpload:s=>console.log("Uploading vehicle photo:",s.name),documentType:"Vehicle Photos",acceptedTypes:["image/jpeg","image/png"],maxSize:10})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Vehicle Documents"}),e.jsx(L,{onUpload:s=>console.log("Uploading vehicle document:",s.name),documentType:"Insurance & License",acceptedTypes:["image/jpeg","image/png","application/pdf"],maxSize:5})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{className:"w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-300",children:"+ Add New Vehicle Listing"})})]})]}),d==="bookings"&&e.jsx(n,{title:"Booking Requests",subtitle:"Manage rental requests",icon:"ðŸ“‹",children:e.jsxs("div",{className:"space-y-4",children:[o.map(s=>e.jsx("div",{className:"p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:s.vehicleName}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-white/70",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Renter:"})," ",s.renterName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Dates:"})," ",new Date(s.startDate).toLocaleDateString()," - ",new Date(s.endDate).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Total:"})," R",s.totalAmount]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx(b,{status:s.status,className:"ml-2"})]})]})]})]}),s.status==="pending"&&e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>y(s.id,"accept"),className:"px-4 py-2 bg-green-500/20 text-green-200 rounded-lg text-sm hover:bg-green-500/30 transition-colors",children:"Accept"}),e.jsx("button",{onClick:()=>y(s.id,"reject"),className:"px-4 py-2 bg-red-500/20 text-red-200 rounded-lg text-sm hover:bg-red-500/30 transition-colors",children:"Reject"})]})]})},s.id)),o.length===0&&e.jsx("p",{className:"text-white/60 text-center py-8",children:"No booking requests yet"})]})}),d==="earnings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(n,{title:"Total Earnings",subtitle:"All time revenue",icon:"ðŸ’°",className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:["R",c.total.toLocaleString()]}),e.jsx("div",{className:"text-white/70 text-sm",children:"Lifetime total"})]}),e.jsxs(n,{title:"This Month",subtitle:"Current month earnings",icon:"ðŸ“…",className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:["R",c.thisMonth.toLocaleString()]}),e.jsx("div",{className:"text-white/70 text-sm",children:"December 2024"})]}),e.jsxs(n,{title:"Last Month",subtitle:"Previous month earnings",icon:"ðŸ“Š",className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:["R",c.lastMonth.toLocaleString()]}),e.jsx("div",{className:"text-white/70 text-sm",children:"November 2024"})]})]}),e.jsx(n,{title:"Earnings Chart",subtitle:"Monthly revenue overview",icon:"ðŸ“ˆ",children:e.jsx("div",{className:"h-64 flex items-center justify-center text-white/60",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ“Š"}),e.jsx("p",{children:"Earnings chart would be displayed here"}),e.jsx("p",{className:"text-sm",children:"Integration with chart library needed"})]})})})]})]})},W=()=>{const{user:r}=V(),m=P();return l.useEffect(()=>{if(r)switch(localStorage.setItem("userRole",r.role),r.role){case"renter":m("/dashboard/renter",{replace:!0});break;case"host":m("/dashboard/host",{replace:!0});break;case"admin":m("/dashboard/admin",{replace:!0});break;default:m("/dashboard/renter",{replace:!0})}},[r,m]),e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Dashboard"}),e.jsxs("p",{className:"text-gray-300",children:["Welcome back, ",(r==null?void 0:r.firstName)||"User","!"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"glass-panel p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Navigation"}),e.jsxs("nav",{className:"space-y-2",children:[(r==null?void 0:r.role)==="renter"&&e.jsxs(S,{to:"/dashboard/renter",className:"glass-button flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white transition-all duration-300",children:[e.jsx(A,{name:"User",size:"sm"}),e.jsx("span",{children:"My Bookings"})]}),(r==null?void 0:r.role)==="host"&&e.jsxs(S,{to:"/dashboard/host",className:"glass-button flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white transition-all duration-300",children:[e.jsx(A,{name:"Car",size:"sm"}),e.jsx("span",{children:"My Listings"})]}),(r==null?void 0:r.role)==="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs(S,{to:"/dashboard/admin",className:"glass-button flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white transition-all duration-300",children:[e.jsx(A,{name:"User",size:"sm"}),e.jsx("span",{children:"Admin Panel"})]}),e.jsxs(S,{to:"/dashboard/renter",className:"glass-button flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white transition-all duration-300",children:[e.jsx(A,{name:"User",size:"sm"}),e.jsx("span",{children:"Renter View"})]}),e.jsxs(S,{to:"/dashboard/host",className:"glass-button flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white transition-all duration-300",children:[e.jsx(A,{name:"Car",size:"sm"}),e.jsx("span",{children:"Host View"})]})]})]})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs($,{children:[e.jsx(R,{path:"/",element:e.jsx(C,{})}),e.jsx(R,{path:"/renter",element:e.jsx(C,{})}),e.jsx(R,{path:"/host",element:e.jsx(I,{})}),e.jsx(R,{path:"/admin",element:e.jsx(z,{})})]})})]})]})})};export{W as default};
