const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./assets/SavedVehicles-BrR1wbEY.js","./assets/react-vendor-DFf_48ct.js","./assets/vendor-eiHq4GmM.js","./assets/admin-pages-DyRM6rtq.js","./assets/firebase-B6ibEfTD.js","./assets/utils-Bi8vyz5k.js","./assets/DocumentExpiryReminder-iSXq6qy_.js","./assets/Promotions-BpsNaGHj.js","./assets/RentalCalculator-CenJFjur.js"])))=>i.map(i=>d[i]);
import{u as e,m as t,a as s,I as i,G as a,b as r,S as l,_ as n,c,n as o,d,e as h,f as m,g as x,A as u,h as p}from"./admin-pages-DyRM6rtq.js";import{r as b,j as g,u as j}from"./react-vendor-DFf_48ct.js";import{t as w,c as f}from"./utils-Bi8vyz5k.js";import{l as v}from"./vendor-eiHq4GmM.js";function N(...e){return w(f(e))}const y=new class{storageKey="rideshare_bookings";getStoredBookings(){try{const e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}catch(e){return[]}}saveBookings(e){try{localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(t){}}async createBooking(e){const t={id:`booking_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,...e,status:"pending",createdAt:(new Date).toISOString(),paymentStatus:"pending"},s=[...this.getStoredBookings(),t];return this.saveBookings(s),window.dispatchEvent(new CustomEvent("bookingCreated",{detail:t})),t}async getRenterBookings(e){return this.getStoredBookings().filter(t=>t.renterId===e)}async updatePaymentStatus(e,t){const s=this.getStoredBookings(),i=s.findIndex(t=>t.id===e);if(-1===i)throw new Error("Booking not found");return s[i].paymentStatus=t,"paid"===t&&(s[i].status="confirmed"),this.saveBookings(s),window.dispatchEvent(new CustomEvent("bookingUpdated",{detail:s[i]})),s[i]}},k=({src:e,alt:t,className:s="",width:i,height:a,priority:r=!1,placeholder:l="empty",blurDataURL:n,sizes:c="100vw",quality:o=75})=>{const[d,h]=b.useState(!1),[m,x]=b.useState(r),[u,p]=b.useState(!1),j=b.useRef(null);return b.useEffect(()=>{if(r)return;const e=new IntersectionObserver(([t])=>{t.isIntersecting&&(x(!0),e.disconnect())},{threshold:.1,rootMargin:"50px"});return j.current&&e.observe(j.current),()=>e.disconnect()},[r]),u?g.jsx("div",{ref:j,className:`bg-gray-200 flex items-center justify-center ${s}`,style:{width:i,height:a},children:g.jsx("span",{className:"text-gray-400 text-sm",children:"Failed to load"})}):g.jsxs("div",{ref:j,className:`relative overflow-hidden ${s}`,children:["blur"===l&&n&&!d&&g.jsx("div",{className:"absolute inset-0 bg-cover bg-center filter blur-sm scale-110",style:{backgroundImage:`url(${n})`}}),!d&&!n&&g.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse"}),m&&g.jsx("img",{src:(e=>{if(e.startsWith("http")||e.includes("?"))return e;const t=new URLSearchParams;return i&&t.set("w",i.toString()),a&&t.set("h",a.toString()),o&&t.set("q",o.toString()),t.set("f","webp"),`${e}?${t.toString()}`})(e),alt:t,width:i,height:a,sizes:c,loading:r?"eager":"lazy",decoding:"async",onLoad:()=>{h(!0)},onError:()=>{p(!0)},className:"transition-opacity duration-300 "+(d?"opacity-100":"opacity-0"),style:{width:i,height:a}})]})},S=()=>g.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:g.jsxs("div",{className:"animate-pulse",children:[g.jsx("div",{className:"bg-white/20 rounded h-6 w-3/4 mb-4"}),g.jsx("div",{className:"bg-white/20 rounded h-4 w-1/2 mb-2"}),g.jsx("div",{className:"bg-white/20 rounded h-4 w-2/3"})]})}),C=()=>g.jsxs("div",{className:"space-y-6",children:[g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Array.from({length:3}).map((e,t)=>g.jsx(S,{},t))}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[g.jsx(S,{}),g.jsx(S,{})]})]}),P=b.lazy(()=>n(()=>Promise.resolve().then(()=>$),void 0,import.meta.url)),A=b.lazy(()=>n(()=>import("./SavedVehicles-BrR1wbEY.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),D=b.lazy(()=>n(()=>import("./DocumentExpiryReminder-iSXq6qy_.js"),__vite__mapDeps([6,1,2,3,4,5]),import.meta.url)),T=b.lazy(()=>n(()=>import("./Promotions-BpsNaGHj.js"),__vite__mapDeps([7,1,2,3,4,5]),import.meta.url)),z=b.lazy(()=>n(()=>import("./RentalCalculator-CenJFjur.js"),__vite__mapDeps([8,1,2,3,4,5]),import.meta.url)),I=b.lazy(()=>n(()=>Promise.resolve().then(()=>W),void 0,import.meta.url)),R=b.lazy(()=>n(()=>import("./admin-pages-DyRM6rtq.js").then(e=>e.q),__vite__mapDeps([3,1,2,4,5]),import.meta.url)),E=b.lazy(()=>n(()=>Promise.resolve().then(()=>Y),void 0,import.meta.url)),_=b.lazy(()=>n(()=>import("./admin-pages-DyRM6rtq.js").then(e=>e.r),__vite__mapDeps([3,1,2,4,5]),import.meta.url)),L=b.lazy(()=>n(()=>Promise.resolve().then(()=>Q),void 0,import.meta.url)),V=()=>{const{user:n}=e(),c=j(),[o,d]=b.useState("overview"),[h,m]=b.useState([]),[x,u]=b.useState([]),[p,w]=b.useState(!0),[f,v]=b.useState(!1),[N,V]=b.useState(null);b.useEffect(()=>{B();const e=()=>{B()},t=()=>{B()};return window.addEventListener("bookingCreated",e),window.addEventListener("bookingUpdated",t),()=>{window.removeEventListener("bookingCreated",e),window.removeEventListener("bookingUpdated",t)}},[n?.id]);const B=async()=>{try{if(n?.id){const e=await y.getRenterBookings(n.id);m(e);const t=e.map(e=>({id:`payment_${e.id}`,amount:e.totalPrice,status:"paid"===e.paymentStatus?"completed":"pending",method:"stripe",bookingId:e.id,createdAt:e.createdAt}));u(t)}else m(t.filter(e=>e.renterId===n?.id)),u(s.filter(e=>"booking"===e.type).map(e=>({id:e.id,amount:e.amount,status:e.status,method:"stripe",bookingId:e.bookingId||"",createdAt:e.date})))}catch(e){m(t.filter(e=>e.renterId===n?.id))}finally{w(!1)}},$=h.filter(e=>"confirmed"===e.status),M=x.filter(e=>"completed"===e.status).reduce((e,t)=>e+t.amount,0),U=e=>{V(e),v(!0)};return p?g.jsx(C,{}):g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-bold text-white",children:"Renter Dashboard"}),g.jsxs("p",{className:"text-white/70",children:["Welcome back, ",n?.firstName,"!"]})]}),g.jsxs("button",{onClick:()=>c("/search"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[g.jsx(i,{name:"Search",size:"sm",className:"mr-2"}),"Find Vehicles"]})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"overview",label:"Overview",icon:"BarChart"},{id:"account",label:"Account",icon:"User"},{id:"search",label:"Search & Browse",icon:"Search"},{id:"bookings",label:"Bookings",icon:"Calendar"},{id:"payments",label:"Payments",icon:"CreditCard"},{id:"communication",label:"Messages",icon:"MessageCircle"},{id:"analytics",label:"Analytics",icon:"TrendingUp"},{id:"saved",label:"Saved",icon:"Heart"},{id:"calculator",label:"Calculator",icon:"Calculator"},{id:"documents",label:"Documents",icon:"FileText"},{id:"promotions",label:"Promotions",icon:"Gift"},{id:"approvals",label:"Approval Requests",icon:"Clock"}].map(e=>g.jsxs("button",{onClick:()=>d(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all "+(o===e.id?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:[g.jsx(i,{name:e.icon,size:"sm"}),g.jsx("span",{children:e.label})]},e.id))}),g.jsxs("div",{className:"space-y-6",children:["overview"===o&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs(a,{title:"Active Bookings",subtitle:"Current rentals",icon:"Car",className:"text-center",children:[g.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:$.length}),g.jsx("div",{className:"text-white/70 text-sm",children:"Active now"})]}),g.jsxs(a,{title:"Total Spent",subtitle:"All time spending",icon:"DollarSign",className:"text-center",children:[g.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:["R",M.toLocaleString()]}),g.jsx("div",{className:"text-white/70 text-sm",children:"Lifetime total"})]}),g.jsxs(a,{title:"Saved Vehicles",subtitle:"Your favorites",icon:"Heart",className:"text-center",children:[g.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:r.savedVehicles}),g.jsx("div",{className:"text-white/70 text-sm",children:"Saved vehicles"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[g.jsx(a,{title:"Recent Bookings",icon:"Calendar",children:g.jsx("div",{className:"space-y-3",children:h.slice(0,3).map(e=>g.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white/5 rounded-lg",children:[g.jsx(k,{src:e.vehicleImage,alt:e.vehicleTitle,width:48,height:48,className:"w-12 h-12 rounded-lg object-cover"}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h4",{className:"text-white font-medium",children:e.vehicleTitle}),g.jsxs("p",{className:"text-white/70 text-sm",children:[new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]})]}),g.jsx(l,{status:e.status})]},e.id))})}),g.jsx(a,{title:"Quick Actions",icon:"Zap",children:g.jsxs("div",{className:"space-y-3",children:[g.jsxs("button",{onClick:()=>c("/search"),className:"w-full p-3 bg-blue-500/20 text-blue-200 rounded-lg hover:bg-blue-500/30 transition-colors text-left",children:[g.jsx(i,{name:"Search",size:"sm",className:"mr-2"}),"Search Vehicles"]}),g.jsxs("button",{onClick:()=>d("calculator"),className:"w-full p-3 bg-green-500/20 text-green-200 rounded-lg hover:bg-green-500/30 transition-colors text-left",children:[g.jsx(i,{name:"Calculator",size:"sm",className:"mr-2"}),"Calculate Rental Cost"]}),g.jsxs("button",{onClick:()=>d("saved"),className:"w-full p-3 bg-purple-500/20 text-purple-200 rounded-lg hover:bg-purple-500/30 transition-colors text-left",children:[g.jsx(i,{name:"Heart",size:"sm",className:"mr-2"}),"View Saved Vehicles"]})]})})]})]}),"account"===o&&g.jsx(b.Suspense,{fallback:g.jsx(S,{}),children:g.jsx(E,{})}),"search"===o&&g.jsxs("div",{className:"space-y-6",children:[g.jsx(a,{title:"Vehicle Search & Discovery",icon:"Search",children:g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Location"}),g.jsx("input",{type:"text",placeholder:"Enter city or area",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Vehicle Type"}),g.jsxs("select",{className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[g.jsx("option",{value:"",children:"All Types"}),g.jsx("option",{value:"sedan",children:"Sedan"}),g.jsx("option",{value:"suv",children:"SUV"}),g.jsx("option",{value:"hatchback",children:"Hatchback"}),g.jsx("option",{value:"convertible",children:"Convertible"})]})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Start Date"}),g.jsx("input",{type:"date",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"End Date"}),g.jsx("input",{type:"date",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),g.jsx("button",{onClick:()=>c("/search"),className:"w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Search Vehicles"})]})}),g.jsx(a,{title:"Browse by Category",icon:"Grid",children:g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:["Economy","Luxury","SUV","Convertible"].map(e=>g.jsxs("button",{onClick:()=>c("/search"),className:"p-4 bg-white/5 rounded-lg hover:bg-white/10 transition-colors text-center",children:[g.jsx(i,{name:"Car",size:"lg",className:"mx-auto mb-2 text-blue-400"}),g.jsx("span",{className:"text-white font-medium",children:e})]},e))})})]}),"bookings"===o&&g.jsx("div",{className:"space-y-6",children:g.jsx(a,{title:"Booking Management",icon:"Calendar",children:g.jsx("div",{className:"space-y-4",children:0===h.length?g.jsxs("div",{className:"text-center py-8",children:[g.jsx(i,{name:"Calendar",size:"lg",className:"text-white/50 mx-auto mb-4"}),g.jsx("p",{className:"text-white/70",children:"No bookings yet"}),g.jsx("button",{onClick:()=>c("/search"),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Start Booking"})]}):g.jsx("div",{className:"space-y-3",children:h.map(e=>g.jsx("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:g.jsxs("div",{className:"flex items-start justify-between",children:[g.jsxs("div",{className:"flex items-start space-x-3",children:[g.jsx(k,{src:e.vehicleImage,alt:e.vehicleTitle,width:64,height:64,className:"w-16 h-16 rounded-lg object-cover"}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-white font-semibold",children:e.vehicleTitle}),g.jsxs("p",{className:"text-white/70 text-sm",children:[e.vehicleMake," ",e.vehicleModel]}),g.jsxs("p",{className:"text-white/70 text-sm",children:[new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]}),g.jsxs("p",{className:"text-white/60 text-xs",children:["Host: ",e.hostName]})]})]}),g.jsxs("div",{className:"text-right",children:[g.jsx(l,{status:e.status}),g.jsxs("p",{className:"text-white font-semibold mt-2",children:["R",e.totalPrice.toLocaleString()]}),g.jsxs("p",{className:"text-white/60 text-xs mt-1",children:["Payment: ",e.paymentStatus]}),"confirmed"===e.status&&g.jsx("button",{className:"mt-2 px-3 py-1 bg-red-500/20 text-red-200 rounded-lg text-sm hover:bg-red-500/30 transition-colors",children:"Cancel"})]})]})},e.id))})})})}),"payments"===o&&g.jsxs("div",{className:"space-y-6",children:[g.jsx(a,{title:"Payment Methods",icon:"CreditCard",children:g.jsx("div",{className:"space-y-4",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[g.jsx("h4",{className:"text-white font-medium mb-2",children:"Stripe Payment"}),g.jsx("p",{className:"text-white/70 text-sm mb-3",children:"Secure credit card processing"}),g.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Setup Stripe"})]}),g.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[g.jsx("h4",{className:"text-white font-medium mb-2",children:"Payfast"}),g.jsx("p",{className:"text-white/70 text-sm mb-3",children:"South African payment gateway"}),g.jsx("button",{className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Setup Payfast"})]})]})})}),g.jsx(a,{title:"Payment History",icon:"CreditCard",children:g.jsx("div",{className:"space-y-3",children:0===x.length?g.jsxs("div",{className:"text-center py-8",children:[g.jsx(i,{name:"CreditCard",size:"lg",className:"text-white/50 mx-auto mb-4"}),g.jsx("p",{className:"text-white/70",children:"No payment history"})]}):x.map(e=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[g.jsxs("div",{children:[g.jsxs("p",{className:"text-white font-medium",children:["R",e.amount]}),g.jsx("p",{className:"text-white/70 text-sm",children:new Date(e.createdAt).toLocaleDateString()})]}),g.jsxs("div",{className:"text-right",children:[g.jsx(l,{status:e.status}),g.jsx("p",{className:"text-white/70 text-sm capitalize",children:e.method})]})]},e.id))})})]}),"communication"===o&&g.jsx(b.Suspense,{fallback:g.jsx(S,{}),children:g.jsx(I,{})}),"analytics"===o&&g.jsx(b.Suspense,{fallback:g.jsx(S,{}),children:g.jsx(R,{})}),"saved"===o&&g.jsx(b.Suspense,{fallback:g.jsx(S,{}),children:g.jsx(A,{userId:n?.id||"0"})}),"calculator"===o&&g.jsx("div",{className:"space-y-6",children:g.jsx(a,{title:"Rental Cost Calculator",icon:"Calculator",children:g.jsx(b.Suspense,{fallback:g.jsx(S,{}),children:g.jsx(z,{basePrice:500,onCalculate:(e,t)=>{}})})})}),"documents"===o&&g.jsxs("div",{className:"space-y-6",children:[g.jsx(b.Suspense,{fallback:g.jsx(S,{}),children:g.jsx(P,{label:"Upload Document",name:"document",onChange:()=>{}})}),g.jsx(b.Suspense,{fallback:g.jsx(S,{}),children:g.jsx(D,{userId:n?.id||"0"})}),g.jsx(a,{title:"Document Verification",icon:"FileText",children:g.jsxs("div",{className:"space-y-4",children:[g.jsx("p",{className:"text-white/70 text-sm",children:"Submit your documents for verification to access premium features and improve your booking success rate."}),g.jsxs("button",{onClick:()=>U("DocumentVerification"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center space-x-2",children:[g.jsx(i,{name:"Upload",size:"sm"}),g.jsx("span",{children:"Request Document Verification"})]})]})})]}),"promotions"===o&&g.jsx(b.Suspense,{fallback:g.jsx(S,{}),children:g.jsx(T,{userId:n?.id||"0"})}),"approvals"===o&&g.jsxs("div",{className:"space-y-6",children:[g.jsx(b.Suspense,{fallback:g.jsx(S,{}),children:g.jsx(_,{userRole:"renter"})}),g.jsx(a,{title:"Profile Verification",icon:"User",children:g.jsxs("div",{className:"space-y-4",children:[g.jsx("p",{className:"text-white/70 text-sm",children:"Get your profile verified to build trust with hosts and increase your booking success rate."}),g.jsxs("button",{onClick:()=>U("ProfileVerification"),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center space-x-2",children:[g.jsx(i,{name:"UserCheck",size:"sm"}),g.jsx("span",{children:"Request Profile Verification"})]})]})})]})]}),f&&N&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:g.jsx("div",{className:"w-full max-w-md",children:g.jsx(b.Suspense,{fallback:g.jsx(S,{}),children:g.jsx(L,{requestType:N,entityId:parseInt(n?.id||"0"),submittedBy:"renter",onSuccess:()=>{v(!1),V(null)},onCancel:()=>{v(!1),V(null)}})})})})]})},B=({label:e,name:t,value:s,onChange:i,accept:a="image/*,.pdf",required:r=!1,error:l,className:n,description:c})=>{const[o,d]=b.useState(!1),h=e=>{e&&i(e)};return g.jsxs("div",{className:N("space-y-2",n),children:[g.jsxs("label",{className:"block text-sm font-medium text-white/90",children:[e,r&&g.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),c&&g.jsx("p",{className:"text-xs text-white/70",children:c}),g.jsx("div",{className:N("relative border-2 border-dashed rounded-lg p-6 transition-all duration-300",o?"border-blue-400 bg-blue-500/10":"border-white/20 hover:border-white/40",l?"border-red-400 bg-red-500/10":"bg-white/5 backdrop-blur-md","hover:bg-white/10"),onDrop:e=>{e.preventDefault(),d(!1);const t=Array.from(e.dataTransfer.files);t.length>0&&h(t[0])},onDragOver:e=>{e.preventDefault(),d(!0)},onDragLeave:e=>{e.preventDefault(),d(!1)},children:s?g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("div",{className:"w-8 h-8 bg-green-500/20 rounded-lg flex items-center justify-center",children:g.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-white",children:s.name}),g.jsxs("p",{className:"text-xs text-white/70",children:[(s.size/1024/1024).toFixed(2)," MB"]})]})]}),g.jsx("button",{type:"button",onClick:()=>{i(void 0)},className:"text-red-400 hover:text-red-300 transition-colors",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"w-12 h-12 mx-auto mb-4 bg-white/10 rounded-lg flex items-center justify-center",children:g.jsx("svg",{className:"w-6 h-6 text-white/70",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),g.jsx("p",{className:"text-sm text-white/80 mb-2",children:o?"Drop your file here":"Drag and drop your file here"}),g.jsx("p",{className:"text-xs text-white/60 mb-4",children:"or click to browse (JPG, PNG, PDF up to 10MB)"}),g.jsx("input",{type:"file",name:t,accept:a,onChange:e=>{const t=e.target.files?.[0];t&&h(t)},className:"hidden",id:`file-input-${t}`,required:r}),g.jsxs("label",{htmlFor:`file-input-${t}`,className:"inline-flex items-center px-4 py-2 bg-white/10 hover:bg-white/20 text-white text-sm font-medium rounded-lg transition-all duration-300 cursor-pointer border border-white/20",children:[g.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Choose File"]})]})}),l&&g.jsx("p",{className:"text-xs text-red-400 mt-1",children:l})]})},$=Object.freeze(Object.defineProperty({__proto__:null,DocumentUpload:B,default:B},Symbol.toStringTag,{value:"Module"})),M=({onSubmit:e,onCancel:t,className:s=""})=>{const[a,r]=b.useState(1),[l,n]=b.useState({make:"",model:"",year:(new Date).getFullYear(),type:"car",pricePerDay:0,location:"",description:"",features:[],images:[],documents:{registration:void 0,roadworthy:void 0,insurance:void 0}}),[c,o]=b.useState(!1),[d,h]=b.useState(""),m=(e,t)=>{n(s=>({...s,[e]:t}))},x=(e,t)=>{n(s=>({...s,documents:{...s.documents,[e]:t}}))},u=e=>{switch(e){case 1:return!!(l.make&&l.model&&l.year&&l.type&&l.pricePerDay>0);case 2:return!(!l.location||!l.description);case 3:return l.images.length>0;case 4:return!!(l.documents?.registration&&l.documents?.roadworthy&&l.documents?.insurance);default:return!0}};return g.jsxs("div",{className:`space-y-6 ${s}`,children:[g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx(i,{name:(()=>{switch(a){case 1:return"Car";case 2:return"MapPin";case 3:return"Camera";case 4:return"FileText";default:return"Clipboard"}})(),size:"lg"}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-xl font-semibold text-white",children:(()=>{switch(a){case 1:return"Vehicle Details";case 2:return"Location & Description";case 3:return"Vehicle Photos";case 4:return"Required Documents";default:return"Vehicle Listing"}})()}),g.jsxs("p",{className:"text-white/70 text-sm",children:["Step ",a," of 4 - Submit your vehicle for admin approval"]})]})]}),g.jsxs("div",{className:"text-right",children:[g.jsx("div",{className:"text-sm text-white/70",children:"Progress"}),g.jsxs("div",{className:"text-lg font-semibold text-white",children:[Math.round(a/4*100),"%"]})]})]}),g.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:g.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:a/4*100+"%"}})})]}),1===a&&g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[g.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Vehicle Information"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Make *"}),g.jsx("input",{type:"text",value:l.make,onChange:e=>m("make",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Toyota",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Model *"}),g.jsx("input",{type:"text",value:l.model,onChange:e=>m("model",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Corolla",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Year *"}),g.jsx("input",{type:"number",value:l.year,onChange:e=>m("year",parseInt(e.target.value)),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",min:"1990",max:(new Date).getFullYear()+1,required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Price per Day (R) *"}),g.jsx("input",{type:"number",value:l.pricePerDay,onChange:e=>m("pricePerDay",parseFloat(e.target.value)),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",min:"0",step:"0.01",required:!0})]}),g.jsxs("div",{className:"md:col-span-2",children:[g.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Vehicle Type *"}),g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:[{value:"car",label:"Car",icon:"Car"},{value:"suv",label:"SUV",icon:"Truck"},{value:"bakkie",label:"Bakkie",icon:"Truck"},{value:"van",label:"Van",icon:"Truck"},{value:"motorcycle",label:"Motorcycle",icon:"Bike"}].map(e=>g.jsxs("button",{onClick:()=>m("type",e.value),className:"p-3 rounded-lg text-sm font-medium transition-all "+(l.type===e.value?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-white/10 text-white/70 border border-white/20 hover:bg-white/20"),children:[g.jsx(i,{name:e.icon,size:"sm",className:"mr-2"}),e.label]},e.value))})]})]})]}),2===a&&g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[g.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Location & Description"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Location *"}),g.jsx("input",{type:"text",value:l.location,onChange:e=>m("location",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Cape Town, Western Cape",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Description *"}),g.jsx("textarea",{value:l.description,onChange:e=>m("description",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",rows:4,placeholder:"Describe your vehicle, its condition, and any special features...",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Vehicle Features"}),g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[{id:"aircon",name:"Air Conditioning",category:"comfort"},{id:"bluetooth",name:"Bluetooth",category:"entertainment"},{id:"gps",name:"GPS Navigation",category:"convenience"},{id:"usb",name:"USB Charging",category:"convenience"},{id:"backup_camera",name:"Backup Camera",category:"safety"},{id:"parking_sensors",name:"Parking Sensors",category:"safety"},{id:"cruise_control",name:"Cruise Control",category:"comfort"},{id:"leather_seats",name:"Leather Seats",category:"comfort"}].map(e=>g.jsxs("label",{className:"flex items-center space-x-2 p-2 bg-white/5 rounded-lg hover:bg-white/10 transition-colors cursor-pointer",children:[g.jsx("input",{type:"checkbox",checked:l.features.some(t=>t.id===e.id),onChange:()=>(e=>{n(t=>({...t,features:t.features.some(t=>t.id===e.id)?t.features.filter(t=>t.id!==e.id):[...t.features,e]}))})(e),className:"w-4 h-4 text-blue-600 bg-white/10 border-white/20 rounded focus:ring-blue-500"}),g.jsx("span",{className:"text-sm text-white/90",children:e.name})]},e.id))})]})]})]}),3===a&&g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[g.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Vehicle Photos"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Upload Vehicle Photos *"}),g.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>(e=>{if(e){const t=Array.from(e);n(e=>({...e,images:[...e.images,...t]}))}})(e.target.files),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-500/20 file:text-blue-300 hover:file:bg-blue-500/30"}),g.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Upload multiple photos showing exterior, interior, and license disc"})]}),l.images.length>0&&g.jsxs("div",{children:[g.jsxs("p",{className:"text-sm text-white/70 mb-2",children:["Uploaded Photos (",l.images.length,"):"]}),g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:l.images.map((e,t)=>g.jsxs("div",{className:"relative",children:[g.jsx("img",{src:URL.createObjectURL(e),alt:`Vehicle photo ${t+1}`,className:"w-full h-20 object-cover rounded-lg"}),g.jsx("button",{onClick:()=>{const e=l.images.filter((e,s)=>s!==t);n(t=>({...t,images:e}))},className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]},t))})]})]})]}),4===a&&g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[g.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Required Documents"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[g.jsx(B,{label:"Vehicle Registration",name:"registration",value:l.documents?.registration,onChange:e=>x("registration",e),required:!0,description:"Official vehicle registration document"}),g.jsx(B,{label:"Roadworthy Certificate",name:"roadworthy",value:l.documents?.roadworthy,onChange:e=>x("roadworthy",e),required:!0,description:"Valid roadworthy certificate"}),g.jsx(B,{label:"Insurance Certificate",name:"insurance",value:l.documents?.insurance,onChange:e=>x("insurance",e),required:!0,description:"Comprehensive insurance certificate"})]})]}),d&&g.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:g.jsx("p",{className:"text-red-300 text-sm",children:d})}),g.jsxs("div",{className:"flex justify-between",children:[g.jsx("button",{onClick:()=>{r(e=>Math.max(e-1,1))},disabled:1===a,className:"px-6 py-2 rounded-lg font-medium transition-all "+(1===a?"bg-gray-500/20 text-gray-400 cursor-not-allowed":"bg-white/10 text-white hover:bg-white/20"),children:"Previous"}),g.jsxs("div",{className:"flex space-x-3",children:[g.jsx("button",{onClick:t,className:"px-6 py-2 bg-gray-500/20 text-gray-300 rounded-lg font-medium hover:bg-gray-500/30 transition-all",children:"Cancel"}),a<4?g.jsx("button",{onClick:()=>{u(a)?r(e=>Math.min(e+1,4)):h("Please fill in all required fields before proceeding.")},className:"px-6 py-2 bg-blue-500/20 text-blue-300 rounded-lg font-medium hover:bg-blue-500/30 transition-all",children:"Next"}):g.jsx("button",{onClick:async()=>{if(u(4)){o(!0),h("");try{await e(l)}catch(t){h("Failed to submit vehicle listing. Please try again.")}finally{o(!1)}}else h("Please complete all required fields and upload all documents.")},disabled:c,className:"px-6 py-2 rounded-lg font-medium transition-all "+(c?"bg-gray-500/20 text-gray-400 cursor-not-allowed":"bg-green-500/20 text-green-300 hover:bg-green-500/30"),children:c?"Submitting...":"Submit for Admin Approval"})]})]})]})},U=({hostId:e,className:t=""})=>{const[s,a]=b.useState([]),[r,l]=b.useState(!0),[n,c]=b.useState(!1),[o,d]=b.useState([]);b.useEffect(()=>{h()},[e]);const h=async()=>{try{const t=localStorage.getItem("authToken"),s=await fetch(`/api/hosts/${e}/fleet`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(s.ok){const e=await s.json();a(e.vehicles||[])}}catch(t){a([{id:"1",hostId:e,make:"Toyota",model:"Hilux",year:2022,type:"bakkie",pricePerDay:250,dailyRate:250,location:"Cape Town",images:["https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?w=400"],features:[],status:"approved",approvalStatus:"approved",description:"Perfect for your South African adventure!",fuelType:"petrol",transmission:"manual",seats:5,doors:4,isAvailable:!0,rating:4.8,reviewCount:24,createdAt:new Date,updatedAt:new Date},{id:"2",hostId:e,make:"BMW",model:"X3",year:2021,type:"suv",pricePerDay:400,dailyRate:400,location:"Johannesburg",images:["https://images.unsplash.com/photo-1549317336-206569e8475c?w=400"],features:[],status:"pending",approvalStatus:"pending",description:"Luxury SUV for city and country driving.",fuelType:"petrol",transmission:"automatic",seats:5,doors:4,isAvailable:!0,rating:4.9,reviewCount:12,createdAt:new Date,updatedAt:new Date}])}finally{l(!1)}},m=async t=>{if(0!==o.length)try{const s=localStorage.getItem("authToken");await fetch(`/api/hosts/${e}/fleet/bulk-action`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({vehicleIds:o,action:t})}),a(e=>{switch(t){case"activate":return e.map(e=>o.includes(e.id)?{...e,isAvailable:!0}:e);case"deactivate":return e.map(e=>o.includes(e.id)?{...e,isAvailable:!1}:e);case"delete":return e.filter(e=>!o.includes(e.id));default:return e}}),d([])}catch(s){}},x=e=>{switch(e){case"approved":return"text-green-400 bg-green-500/20 border-green-500/30";case"pending":return"text-yellow-400 bg-yellow-500/20 border-yellow-500/30";case"rejected":return"text-red-400 bg-red-500/20 border-red-500/30";default:return"text-gray-400 bg-gray-500/20 border-gray-500/30"}},u=e=>{switch(e){case"approved":return"CheckCircle";case"pending":return"Clock";case"rejected":return"XCircle";default:return"FileText"}};return r?g.jsx("div",{className:`space-y-4 ${t}`,children:[...Array(3)].map((e,t)=>g.jsx("div",{className:"animate-pulse",children:g.jsx("div",{className:"h-24 bg-white/10 rounded-lg"})},t))}):g.jsxs("div",{className:`space-y-4 ${t}`,children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Fleet Management"}),g.jsxs("p",{className:"text-white/70 text-sm",children:[s.length," vehicles in your fleet"]})]}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsxs("button",{onClick:()=>c(!n),className:"px-3 py-1 bg-blue-500/20 text-blue-300 rounded-lg text-sm hover:bg-blue-500/30 transition-colors flex items-center space-x-1",children:[g.jsx(i,{name:"Upload",size:"sm"}),g.jsx("span",{children:"Bulk Upload"})]}),g.jsx("button",{className:"px-3 py-1 bg-green-500/20 text-green-300 rounded-lg text-sm hover:bg-green-500/30 transition-colors",children:"+ Add Vehicle"})]})]}),o.length>0&&g.jsx("div",{className:"bg-blue-500/20 border border-blue-500/30 rounded-lg p-3",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("span",{className:"text-blue-300 text-sm",children:[o.length," vehicle(s) selected"]}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("button",{onClick:()=>m("activate"),className:"px-2 py-1 bg-green-500/20 text-green-300 rounded text-xs hover:bg-green-500/30 transition-colors",children:"Activate"}),g.jsx("button",{onClick:()=>m("deactivate"),className:"px-2 py-1 bg-yellow-500/20 text-yellow-300 rounded text-xs hover:bg-yellow-500/30 transition-colors",children:"Deactivate"}),g.jsx("button",{onClick:()=>m("delete"),className:"px-2 py-1 bg-red-500/20 text-red-300 rounded text-xs hover:bg-red-500/30 transition-colors",children:"Delete"})]})]})}),g.jsx("div",{className:"space-y-3",children:s.map(e=>g.jsx("div",{className:`p-4 rounded-lg border ${o.includes(e.id)?"bg-blue-500/20 border-blue-500/30":"bg-white/10 border-white/20"} hover:bg-white/20 transition-all duration-300`,children:g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx("input",{type:"checkbox",checked:o.includes(e.id),onChange:()=>{return t=e.id,void d(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"w-4 h-4 text-blue-600 bg-white/10 border-white/20 rounded focus:ring-blue-500"}),g.jsx("img",{src:e.images[0],alt:`${e.make} ${e.model}`,className:"w-16 h-16 object-cover rounded-lg"}),g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsxs("h4",{className:"text-lg font-semibold text-white",children:[e.year," ",e.make," ",e.model]}),g.jsxs("div",{className:`px-2 py-1 rounded-full text-xs border ${x(e.approvalStatus)} flex items-center space-x-1`,children:[g.jsx(i,{name:u(e.approvalStatus),size:"sm"}),g.jsx("span",{children:e.approvalStatus})]})]}),g.jsxs("div",{className:"flex items-center space-x-4 text-sm text-white/70",children:[g.jsxs("span",{className:"flex items-center space-x-1",children:[g.jsx(i,{name:"MapPin",size:"sm"}),g.jsx("span",{children:e.location})]}),g.jsxs("span",{className:"flex items-center space-x-1",children:[g.jsx(i,{name:"DollarSign",size:"sm"}),g.jsxs("span",{children:["R",e.pricePerDay,"/day"]})]}),g.jsxs("span",{className:"flex items-center space-x-1",children:[g.jsx(i,{name:"Star",size:"sm"}),g.jsxs("span",{children:[e.rating," (",e.reviewCount,")"]})]}),g.jsx("span",{className:e.isAvailable?"text-green-400":"text-red-400",children:e.isAvailable?"Available":"Unavailable"})]})]}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("button",{className:"px-3 py-1 bg-white/10 text-white rounded-lg text-sm hover:bg-white/20 transition-colors",children:"Edit"}),g.jsx("button",{className:"px-3 py-1 bg-white/10 text-white rounded-lg text-sm hover:bg-white/20 transition-colors",children:"View"})]})]})},e.id))}),0===s.length&&g.jsxs("div",{className:"text-center py-8",children:[g.jsx("div",{className:"mb-4",children:g.jsx(i,{name:"Car",size:"lg",className:"text-white/50 mx-auto"})}),g.jsx("p",{className:"text-white/70",children:"No vehicles in your fleet yet"}),g.jsx("p",{className:"text-white/50 text-sm",children:"Add your first vehicle to start earning!"})]})]})},O=({vehicleId:e,basePrice:t,onPriceUpdate:s,className:a=""})=>{const[r,l]=b.useState([]),[n,c]=b.useState(t),[o,d]=b.useState(!0);b.useEffect(()=>{h()},[e]),b.useEffect(()=>{m()},[r,t]);const h=async()=>{try{const t=localStorage.getItem("authToken"),s=await fetch(`/api/vehicles/${e}/pricing-rules`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(s.ok){const e=await s.json();l(e.rules||[])}}catch(t){l([{id:"1",name:"Weekend Premium",type:"time",conditions:{dayOfWeek:[0,6]},multiplier:1.5,isActive:!0},{id:"2",name:"Peak Hours",type:"time",conditions:{timeRange:{start:"07:00",end:"09:00"}},multiplier:1.3,isActive:!0},{id:"3",name:"High Demand",type:"demand",conditions:{demandLevel:"high"},multiplier:1.4,isActive:!0}])}finally{d(!1)}},m=()=>{let e=t;const i=new Date,a=i.getDay(),l=i.toTimeString().slice(0,5),n=r.filter(e=>{if(!e.isActive)return!1;switch(e.type){case"time":if(e.conditions.dayOfWeek?.includes(a))return!0;if(e.conditions.timeRange){const{start:t,end:s}=e.conditions.timeRange;return l>=t&&l<=s}return!1;case"demand":return"high"===e.conditions.demandLevel;default:return!1}}).reduce((e,t)=>Math.max(e,t.multiplier),1);e=Math.round(t*n),c(e),s(e)},x=e=>{l(t=>t.map(t=>t.id===e?{...t,isActive:!t.isActive}:t))};return o?g.jsx("div",{className:`space-y-4 ${a}`,children:g.jsxs("div",{className:"animate-pulse",children:[g.jsx("div",{className:"h-8 bg-white/10 rounded w-1/3 mb-4"}),g.jsx("div",{className:"h-32 bg-white/10 rounded-lg"})]})}):g.jsxs("div",{className:`space-y-4 ${a}`,children:[g.jsx("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Current Price"}),g.jsx("p",{className:"text-white/70 text-sm",children:"Based on active pricing rules"})]}),g.jsxs("div",{className:"text-right",children:[g.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["R",n]}),g.jsx("div",{className:"text-sm text-white/70",children:n>t?`+${Math.round((n-t)/t*100)}%`:"Base price"})]})]})}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium text-white/90 mb-3",children:"Active Pricing Rules"}),g.jsx("div",{className:"space-y-2",children:r.filter(e=>e.isActive).map(e=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-500/20 border border-green-500/30 rounded-lg",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx(i,{name:"Zap",size:"sm"}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-white",children:e.name}),g.jsxs("p",{className:"text-xs text-white/70",children:["time"===e.type&&"Time-based","demand"===e.type&&"Demand-based","seasonal"===e.type&&"Seasonal","event"===e.type&&"Event-based"]})]})]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsxs("span",{className:"text-sm text-green-300",children:["+",Math.round(100*(e.multiplier-1)),"%"]}),g.jsx("button",{onClick:()=>x(e.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"✕"})]})]},e.id))})]}),r.filter(e=>!e.isActive).length>0&&g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-medium text-white/90 mb-3",children:"Inactive Rules"}),g.jsx("div",{className:"space-y-2",children:r.filter(e=>!e.isActive).map(e=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 border border-white/10 rounded-lg",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx(i,{name:"Pause",size:"sm"}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-white/70",children:e.name}),g.jsxs("p",{className:"text-xs text-white/50",children:["time"===e.type&&"Time-based","demand"===e.type&&"Demand-based","seasonal"===e.type&&"Seasonal","event"===e.type&&"Event-based"]})]})]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx("button",{onClick:()=>x(e.id),className:"text-green-400 hover:text-green-300 transition-colors",children:g.jsx(i,{name:"Play",size:"sm"})}),g.jsx("button",{onClick:()=>{return t=e.id,void l(e=>e.filter(e=>e.id!==t));var t},className:"text-red-400 hover:text-red-300 transition-colors",children:g.jsx(i,{name:"Trash",size:"sm"})})]})]},e.id))})]}),g.jsx("button",{className:"w-full p-3 border-2 border-dashed border-white/30 rounded-lg text-white/70 hover:border-white/50 hover:text-white transition-colors",children:"+ Add New Pricing Rule"})]})},F=({bookingId:e,amount:t,onPaymentSuccess:s,onPaymentError:a})=>{const[r,l]=b.useState("stripe"),[n,c]=b.useState(!1),o=Math.round(.05*t),d=t+o;return g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[g.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Payment Details"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("span",{className:"text-white/70",children:"Base Amount"}),g.jsxs("span",{className:"text-white",children:["R",t.toLocaleString()]})]}),g.jsxs("div",{className:"flex justify-between items-center mb-2",children:[g.jsx("span",{className:"text-white/70",children:"Service Fee (5%)"}),g.jsxs("span",{className:"text-white",children:["R",o.toLocaleString()]})]}),g.jsx("div",{className:"border-t border-white/20 pt-2",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("span",{className:"text-white font-semibold",children:"Total"}),g.jsxs("span",{className:"text-white font-bold text-lg",children:["R",d.toLocaleString()]})]})})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("label",{className:"text-white font-medium",children:"Payment Method"}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsx("button",{onClick:()=>l("stripe"),className:"p-3 rounded-lg border-2 transition-all "+("stripe"===r?"border-blue-400 bg-blue-500/20":"border-white/20 bg-white/5 hover:bg-white/10"),children:g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(i,{name:"CreditCard",size:"sm"}),g.jsx("span",{className:"text-white text-sm",children:"Stripe"})]})}),g.jsx("button",{onClick:()=>l("payfast"),className:"p-3 rounded-lg border-2 transition-all "+("payfast"===r?"border-blue-400 bg-blue-500/20":"border-white/20 bg-white/5 hover:bg-white/10"),children:g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(i,{name:"CreditCard",size:"sm"}),g.jsx("span",{className:"text-white text-sm",children:"Payfast"})]})})]})]}),g.jsx("button",{onClick:"stripe"===r?async()=>{c(!0);try{const i=await fetch("/api/payments/stripe/create-intent",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({bookingId:e,amount:t,currency:"ZAR",paymentMethod:"stripe"})}),r=await i.json();r.success?setTimeout(()=>{s(r.paymentIntent),c(!1)},2e3):(a(r.error||"Payment failed"),c(!1))}catch(i){a("Network error"),c(!1)}}:async()=>{c(!0);try{const s=await fetch("/api/payments/payfast/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({bookingId:e,amount:t,currency:"ZAR",paymentMethod:"payfast"})}),i=await s.json();i.success?window.location.href=`${i.payfastUrl}?${new URLSearchParams(i.paymentData).toString()}`:(a(i.error||"Payment failed"),c(!1))}catch(s){a("Network error"),c(!1)}},disabled:n,className:"w-full py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:n?g.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[g.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),g.jsx("span",{children:"Processing..."})]}):`Pay R${d.toLocaleString()} with ${"stripe"===r?"Stripe":"Payfast"}`}),g.jsx("div",{className:"bg-green-500/10 border border-green-400/30 rounded-lg p-3",children:g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(i,{name:"Shield",size:"sm",className:"text-green-400"}),g.jsx("span",{className:"text-green-200 text-sm",children:"Your payment is secure and encrypted"})]})})]})]})};class q{static baseUrl="/api/messaging";static async sendMessage(e,t,s="text",i){try{const a=new FormData;a.append("content",t),a.append("messageType",s),i&&i.forEach(e=>{a.append("attachments",e)});const r=await fetch(`${this.baseUrl}/conversations/${e}/messages`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:a});if(!r.ok)throw new Error("Failed to send message");return await r.json()}catch(a){throw a}}static async getMessages(e,t=1,s=50){try{const i=await fetch(`${this.baseUrl}/conversations/${e}/messages?page=${t}&limit=${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!i.ok)throw new Error("Failed to fetch messages");return(await i.json()).messages}catch(i){throw i}}static async markMessageAsRead(e){try{await fetch(`${this.baseUrl}/messages/${e}/read`,{method:"PATCH",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}})}catch(t){}}static async getConversations(){try{const e=await fetch(`${this.baseUrl}/conversations`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!e.ok)throw new Error("Failed to fetch conversations");return(await e.json()).conversations}catch(e){throw e}}static async createConversation(e){try{const t=await fetch(`${this.baseUrl}/conversations`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({participantIds:e})});if(!t.ok)throw new Error("Failed to create conversation");return await t.json()}catch(t){throw t}}static async createSupportTicket(e){try{const t=await fetch(`${this.baseUrl}/support-tickets`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create support ticket");return await t.json()}catch(t){throw t}}static async getSupportTickets(e,t){try{const s=new URLSearchParams;e&&s.append("status",e),t&&s.append("priority",t);const i=await fetch(`${this.baseUrl}/support-tickets?${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(!i.ok)throw new Error("Failed to fetch support tickets");return(await i.json()).tickets}catch(s){throw s}}static async updateSupportTicket(e,t){try{const s=await fetch(`${this.baseUrl}/support-tickets/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify(t)});if(!s.ok)throw new Error("Failed to update support ticket");return await s.json()}catch(s){throw s}}static async addMessageToTicket(e,t){try{const s=await fetch(`${this.baseUrl}/support-tickets/${e}/messages`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({content:t})});if(!s.ok)throw new Error("Failed to add message to ticket");return await s.json()}catch(s){throw s}}}const H=new class{socket=null;baseUrl;constructor(){this.baseUrl="http://localhost:5001"}connect(e){this.socket?.connected||(this.socket=v(this.baseUrl,{auth:{token:e},transports:["websocket","polling"]}),this.socket.on("connect",()=>{}),this.socket.on("disconnect",()=>{}),this.socket.on("error",e=>{}))}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}subscribeToNotifications(e){this.socket&&this.socket.on("notification",e)}subscribeToAdminUpdates(e){this.socket&&this.socket.on("admin_update",e)}subscribeToRenterUpdates(e){this.socket&&this.socket.on("renter_update",e)}sendMessage(e){this.socket&&this.socket.emit("message",e)}joinRoom(e){this.socket&&this.socket.emit("join_room",e)}leaveRoom(e){this.socket&&this.socket.emit("leave_room",e)}},J=({conversationId:t,onConversationSelect:s})=>{const{user:a}=e(),[r,l]=b.useState([]),[n,c]=b.useState(null),[o,d]=b.useState([]),[h,m]=b.useState(""),[x,u]=b.useState(!0),[p,j]=b.useState(!1),w=b.useRef(null);b.useEffect(()=>{f(),H.subscribeToNotifications(e=>{"message"===e.type&&(f(),n&&v(n.id))})},[]),b.useEffect(()=>{if(t){const e=r.find(e=>e.id===t);e&&(c(e),v(t))}},[t,r]),b.useEffect(()=>{y()},[o]);const f=async()=>{try{u(!0);const e=await q.getConversations();l(e)}catch(e){}finally{u(!1)}},v=async e=>{try{const t=await q.getMessages(e);d(t)}catch(t){}},N=async()=>{if(h.trim()&&n&&!p)try{j(!0);const e=await q.sendMessage(n.id,h.trim());d(t=>[...t,e]),m(""),await f()}catch(e){}finally{j(!1)}},y=()=>{w.current?.scrollIntoView({behavior:"smooth"})};return x?g.jsx("div",{className:"flex items-center justify-center py-12",children:g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):g.jsxs("div",{className:"flex h-96 bg-white/5 rounded-xl overflow-hidden",children:[g.jsxs("div",{className:"w-1/3 border-r border-white/10",children:[g.jsx("div",{className:"p-4 border-b border-white/10",children:g.jsx("h3",{className:"text-lg font-semibold text-white",children:"Messages"})}),g.jsx("div",{className:"overflow-y-auto",children:r.map(e=>g.jsx("div",{onClick:()=>(e=>{c(e),v(e.id),s&&s(e.id)})(e),className:"p-4 border-b border-white/5 cursor-pointer hover:bg-white/5 transition-colors "+(n?.id===e.id?"bg-white/10":""),children:g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:g.jsx(i,{name:"User",size:"sm",className:"text-white"})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("p",{className:"text-white font-medium truncate",children:e.participants.filter(e=>e.id!==Number(a?.id)).map(e=>e.name).join(", ")}),e.unreadCount>0&&g.jsx("span",{className:"bg-blue-500 text-white text-xs rounded-full px-2 py-1",children:e.unreadCount})]}),e.lastMessage&&g.jsx("p",{className:"text-gray-400 text-sm truncate",children:e.lastMessage.content})]})]})},e.id))})]}),g.jsx("div",{className:"flex-1 flex flex-col",children:n?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"p-4 border-b border-white/10",children:g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:g.jsx(i,{name:"User",size:"sm",className:"text-white"})}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-white font-medium",children:n.participants.filter(e=>e.id!==Number(a?.id)).map(e=>e.name).join(", ")}),g.jsx("p",{className:"text-gray-400 text-sm",children:n.participants.filter(e=>e.id!==Number(a?.id)).map(e=>e.role).join(", ")})]})]})}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[o.map(e=>g.jsx("div",{className:"flex "+(e.senderId===Number(a?.id)?"justify-end":"justify-start"),children:g.jsxs("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg "+(e.senderId===Number(a?.id)?"bg-blue-500 text-white":"bg-white/10 text-white"),children:[g.jsx("p",{className:"text-sm",children:e.content}),g.jsx("p",{className:"text-xs mt-1 "+(e.senderId===Number(a?.id)?"text-blue-100":"text-gray-400"),children:new Date(e.timestamp).toLocaleTimeString()})]})},e.id)),g.jsx("div",{ref:w})]}),g.jsx("div",{className:"p-4 border-t border-white/10",children:g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("input",{type:"text",value:h,onChange:e=>m(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),N())},placeholder:"Type a message...",className:"flex-1 px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:p}),g.jsx("button",{onClick:N,disabled:!h.trim()||p,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:p?g.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):g.jsx(i,{name:"Send",size:"sm"})})]})})]}):g.jsx("div",{className:"flex-1 flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx(i,{name:"MessageCircle",size:"lg",className:"text-white/50 mx-auto mb-4"}),g.jsx("p",{className:"text-white/70",children:"Select a conversation to start messaging"})]})})})]})},W=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"})),Z=({value:e,onChange:t,placeholder:s="Enter password",label:a,error:r,showStrength:l=!1,className:n="",disabled:c=!1,required:o=!1})=>{const[d,h]=b.useState(!1),[m,x]=b.useState(!1),u=l?(e=>{if(!e)return{score:0,label:"",color:""};let t=0;return e.length>=8&&t++,/[a-z]/.test(e)&&t++,/[A-Z]/.test(e)&&t++,/[0-9]/.test(e)&&t++,/[^A-Za-z0-9]/.test(e)&&t++,t<=2?{score:t,label:"Weak",color:"text-red-400"}:t<=3?{score:t,label:"Fair",color:"text-yellow-400"}:t<=4?{score:t,label:"Good",color:"text-blue-400"}:{score:t,label:"Strong",color:"text-green-400"}})(e):null;return g.jsxs("div",{className:`space-y-2 ${n}`,children:[a&&g.jsxs("label",{className:"block text-sm font-medium text-white/80",children:[a,o&&g.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:d?"text":"password",value:e,onChange:e=>t(e.target.value),onFocus:()=>x(!0),onBlur:()=>x(!1),placeholder:s,disabled:c,className:`\n            w-full px-4 py-3 pr-12 bg-white/10 border rounded-xl text-white placeholder-white/50 \n            focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all duration-300\n            ${r?"border-red-400 focus:ring-red-500/50":"border-white/20 focus:border-blue-400 hover:border-white/30"}\n            ${c?"opacity-50 cursor-not-allowed":"hover:bg-white/15"}\n            ${m?"bg-white/15":""}\n            backdrop-blur-md\n          `}),g.jsx("button",{type:"button",onClick:()=>h(!d),disabled:c,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/50 hover:text-white/80 transition-colors disabled:cursor-not-allowed",children:g.jsx(i,{name:d?"EyeOff":"Eye",size:"sm"})})]}),l&&e&&g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx("div",{className:"flex-1 bg-white/10 rounded-full h-1",children:g.jsx("div",{className:"h-1 rounded-full transition-all duration-300 "+((u?.score||0)<=2?"bg-red-400":(u?.score||0)<=3?"bg-yellow-400":(u?.score||0)<=4?"bg-blue-400":"bg-green-400"),style:{width:20*(u?.score||0)+"%"}})}),g.jsx("span",{className:`text-xs font-medium ${u?.color||""}`,children:u?.label||""})]}),r&&g.jsxs("div",{className:"flex items-center space-x-1 text-red-400 text-xs",children:[g.jsx(i,{name:"AlertCircle",size:"xs"}),g.jsx("span",{children:r})]}),l&&g.jsx("div",{className:"text-xs text-white/60",children:g.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.jsxs("span",{className:"flex items-center space-x-1 "+(e.length>=8?"text-green-400":"text-white/40"),children:[g.jsx(i,{name:e.length>=8?"CheckCircle":"Circle",size:"xs"}),g.jsx("span",{children:"8+ chars"})]}),g.jsxs("span",{className:"flex items-center space-x-1 "+(/[a-z]/.test(e)?"text-green-400":"text-white/40"),children:[g.jsx(i,{name:/[a-z]/.test(e)?"CheckCircle":"Circle",size:"xs"}),g.jsx("span",{children:"lower"})]}),g.jsxs("span",{className:"flex items-center space-x-1 "+(/[A-Z]/.test(e)?"text-green-400":"text-white/40"),children:[g.jsx(i,{name:/[A-Z]/.test(e)?"CheckCircle":"Circle",size:"xs"}),g.jsx("span",{children:"UPPER"})]}),g.jsxs("span",{className:"flex items-center space-x-1 "+(/[0-9]/.test(e)?"text-green-400":"text-white/40"),children:[g.jsx(i,{name:/[0-9]/.test(e)?"CheckCircle":"Circle",size:"xs"}),g.jsx("span",{children:"123"})]}),g.jsxs("span",{className:"flex items-center space-x-1 "+(/[^A-Za-z0-9]/.test(e)?"text-green-400":"text-white/40"),children:[g.jsx(i,{name:/[^A-Za-z0-9]/.test(e)?"CheckCircle":"Circle",size:"xs"}),g.jsx("span",{children:"!@#"})]})]})})]})},G=()=>{const{user:t}=e(),[s,a]=b.useState("profile"),[r,l]=b.useState(!1),[n,c]=b.useState(""),[o,d]=b.useState(""),[h,m]=b.useState({firstName:t?.firstName||"",lastName:t?.lastName||"",email:t?.email||"",phone:t?.phoneNumber||""}),[x,u]=b.useState({currentPassword:"",newPassword:"",confirmPassword:""});return g.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[g.jsxs("div",{className:"mb-8",children:[g.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Profile Settings"}),g.jsx("p",{className:"text-white/70",children:"Manage your account settings and preferences"})]}),g.jsx("div",{className:"mb-6",children:g.jsx("div",{className:"flex space-x-1 bg-white/10 backdrop-blur-md rounded-lg p-1 border border-white/20",children:[{id:"profile",label:"Profile",icon:"User"},{id:"password",label:"Password",icon:"Lock"},{id:"security",label:"Security",icon:"Shield"}].map(e=>g.jsxs("button",{onClick:()=>a(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-md transition-all "+(s===e.id?"bg-white/20 text-white":"text-gray-300 hover:text-white hover:bg-white/10"),children:[g.jsx(i,{name:e.icon,className:"h-4 w-4"}),g.jsx("span",{children:e.label})]},e.id))})}),n&&g.jsx("div",{className:"mb-4 p-4 bg-green-500/20 border border-green-400/30 rounded-lg",children:g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(i,{name:"CheckCircle",className:"h-5 w-5 text-green-400"}),g.jsx("span",{className:"text-green-200",children:n})]})}),o&&g.jsx("div",{className:"mb-4 p-4 bg-red-500/20 border border-red-400/30 rounded-lg",children:g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(i,{name:"AlertCircle",className:"h-5 w-5 text-red-400"}),g.jsx("span",{className:"text-red-200",children:o})]})}),g.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:["profile"===s&&g.jsxs("div",{className:"p-6",children:[g.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Profile Information"}),g.jsxs("form",{onSubmit:async e=>{e.preventDefault(),l(!0),d(""),c("");try{const e=await fetch("/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify(h)});if(e.ok)c("Profile updated successfully");else{const t=await e.json();d(t.error||"Failed to update profile")}}catch(t){d("Failed to update profile")}finally{l(!1)}},className:"space-y-6",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"First Name"}),g.jsx("input",{type:"text",value:h.firstName,onChange:e=>m({...h,firstName:e.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-400 transition-all",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Last Name"}),g.jsx("input",{type:"text",value:h.lastName,onChange:e=>m({...h,lastName:e.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-400 transition-all",required:!0})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Email Address"}),g.jsx("input",{type:"email",value:h.email,onChange:e=>m({...h,email:e.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-400 transition-all",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Phone Number"}),g.jsx("input",{type:"tel",value:h.phone,onChange:e=>m({...h,phone:e.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-400 transition-all",placeholder:"+27 82 123 4567"})]}),g.jsx("button",{type:"submit",disabled:r,className:"px-6 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Updating...":"Update Profile"})]})]}),"password"===s&&g.jsxs("div",{className:"p-6",children:[g.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Change Password"}),g.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),l(!0),d(""),c(""),x.newPassword!==x.confirmPassword)return d("New passwords do not match"),void l(!1);if(x.newPassword.length<8)return d("New password must be at least 8 characters long"),void l(!1);try{const e=await fetch("/api/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({currentPassword:x.currentPassword,newPassword:x.newPassword})});if(e.ok)c("Password changed successfully"),u({currentPassword:"",newPassword:"",confirmPassword:""});else{const t=await e.json();d(t.error||"Failed to change password")}}catch(t){d("Failed to change password")}finally{l(!1)}},className:"space-y-6",children:[g.jsx(Z,{value:x.currentPassword,onChange:e=>u({...x,currentPassword:e}),label:"Current Password",placeholder:"Enter your current password",required:!0}),g.jsx(Z,{value:x.newPassword,onChange:e=>u({...x,newPassword:e}),label:"New Password",placeholder:"Enter your new password",showStrength:!0,required:!0}),g.jsx(Z,{value:x.confirmPassword,onChange:e=>u({...x,confirmPassword:e}),label:"Confirm New Password",placeholder:"Confirm your new password",required:!0}),g.jsx("button",{type:"submit",disabled:r,className:"px-6 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Changing...":"Change Password"})]})]}),"security"===s&&g.jsxs("div",{className:"p-6",children:[g.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Security Settings"}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[g.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Two-Factor Authentication"}),g.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Add an extra layer of security to your account"}),g.jsx("button",{className:"px-4 py-2 bg-blue-500/20 text-blue-200 rounded-lg hover:bg-blue-500/30 transition-colors",children:"Enable 2FA"})]}),g.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[g.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Login Sessions"}),g.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Manage your active login sessions"}),g.jsx("button",{className:"px-4 py-2 bg-red-500/20 text-red-200 rounded-lg hover:bg-red-500/30 transition-colors",children:"Sign Out All Devices"})]}),g.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[g.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Account Deletion"}),g.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Permanently delete your account and all associated data"}),g.jsx("button",{className:"px-4 py-2 bg-red-500/20 text-red-200 rounded-lg hover:bg-red-500/30 transition-colors",children:"Delete Account"})]})]})]})]})]})},Y=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"})),K=({requestType:e,entityId:t,submittedBy:s,onSuccess:r,onCancel:l,title:n,description:d})=>{const[h,m]=b.useState(""),[x,u]=b.useState(!1),[p,j]=b.useState(null),w=e=>({DocumentVerification:"Document Verification",VehicleListing:"Vehicle Listing",InsuranceVerification:"Insurance Verification",ProfileVerification:"Profile Verification",VehicleApproval:"Vehicle Approval"}[e]||e);return g.jsx(a,{title:n||`Submit ${w(e)} Request`,icon:"FileText",children:g.jsxs("form",{onSubmit:async i=>{i.preventDefault();try{u(!0),j(null),(await c.create({requestType:e,entityId:t,submittedBy:s,reviewNotes:h.trim()||void 0})).data.success?(o.approvalSubmitted(w(e)),r?.()):j("Failed to submit approval request")}catch(a){j(a.response?.data?.error||"Failed to submit approval request")}finally{u(!1)}},className:"space-y-4",children:[d&&g.jsx("p",{className:"text-white/70 text-sm mb-4",children:d}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Additional Notes (Optional)"}),g.jsx("textarea",{value:h,onChange:e=>m(e.target.value),placeholder:"Add any additional information that might help with the approval process...",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3})]}),p&&g.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/30 rounded-lg",children:g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(i,{name:"AlertCircle",size:"sm",className:"text-red-400"}),g.jsx("p",{className:"text-red-400 text-sm",children:p})]})}),g.jsxs("div",{className:"flex space-x-3",children:[g.jsx("button",{type:"submit",disabled:x,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:x?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),g.jsx("span",{children:"Submitting..."})]}):g.jsxs(g.Fragment,{children:[g.jsx(i,{name:"Send",size:"sm"}),g.jsx("span",{children:"Submit Request"})]})}),l&&g.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 bg-white/10 text-white/70 rounded-lg hover:bg-white/20 transition-colors",children:"Cancel"})]})]})})},Q=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"})),X=()=>{const{user:s}=e(),[r,n]=b.useState("overview"),[c,o]=b.useState([]),[j,w]=b.useState([]),[f,v]=b.useState({totalEarnings:0,monthlyEarnings:0,pendingPayouts:0,completedBookings:0}),[N]=b.useState(d),[y]=b.useState(h),[k,S]=b.useState(!0),[C,P]=b.useState(!1),[A,D]=b.useState(null),[T,z]=b.useState(null);b.useEffect(()=>{I()},[]);const I=async()=>{try{o(m.filter(e=>e.hostId===s?.id)),w(t.filter(e=>e.hostId===s?.id)),v({totalEarnings:x.totalEarnings,monthlyEarnings:x.monthlyEarnings,pendingPayouts:x.pendingPayouts,completedBookings:x.completedBookings})}catch(e){o(m.filter(e=>e.hostId===s?.id)),w(t.filter(e=>e.hostId===s?.id))}finally{S(!1)}},R=j.filter(e=>"pending"===e.status),E=j.filter(e=>"confirmed"===e.status),_=c.filter(e=>"approved"===e.status),L=(e,t)=>{D(e),z(t||null),P(!0)};return k?g.jsx("div",{className:"flex items-center justify-center h-64",children:g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-bold text-white",children:"Host Dashboard"}),g.jsx("p",{className:"text-white/70",children:"Manage your vehicle rental business"})]}),g.jsxs("button",{onClick:()=>n("vehicles"),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[g.jsx(i,{name:"Plus",size:"sm",className:"mr-2"}),"Add Vehicle"]})]}),g.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"overview",label:"Overview",icon:"BarChart"},{id:"account",label:"Account",icon:"User"},{id:"vehicles",label:"Vehicle Management",icon:"Car"},{id:"bookings",label:"Booking Management",icon:"Calendar"},{id:"financial",label:"Financial",icon:"DollarSign"},{id:"communication",label:"Messages",icon:"MessageCircle"},{id:"analytics",label:"Analytics",icon:"TrendingUp"},{id:"fleet",label:"Fleet Tools",icon:"Settings"},{id:"pricing",label:"Dynamic Pricing",icon:"TrendingUp"},{id:"approvals",label:"Approval Requests",icon:"Clock"}].map(e=>g.jsxs("button",{onClick:()=>n(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all "+(r===e.id?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:[g.jsx(i,{name:e.icon,size:"sm"}),g.jsx("span",{children:e.label})]},e.id))}),g.jsxs("div",{className:"space-y-6",children:["overview"===r&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[g.jsxs(a,{title:"Total Earnings",subtitle:"All time",icon:"DollarSign",className:"text-center",children:[g.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:["R",f.totalEarnings.toLocaleString()]}),g.jsx("div",{className:"text-white/70 text-sm",children:"Lifetime earnings"})]}),g.jsxs(a,{title:"Active Vehicles",subtitle:"Listed vehicles",icon:"Car",className:"text-center",children:[g.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:_.length}),g.jsx("div",{className:"text-white/70 text-sm",children:"Available for rent"})]}),g.jsxs(a,{title:"Pending Bookings",subtitle:"Awaiting approval",icon:"Clock",className:"text-center",children:[g.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:R.length}),g.jsx("div",{className:"text-white/70 text-sm",children:"Need your attention"})]}),g.jsxs(a,{title:"Active Bookings",subtitle:"Current rentals",icon:"Calendar",className:"text-center",children:[g.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:E.length}),g.jsx("div",{className:"text-white/70 text-sm",children:"Currently rented"})]})]}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsx(a,{title:"Recent Bookings",icon:"Calendar",children:g.jsx("div",{className:"space-y-3",children:j.slice(0,3).map(e=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[g.jsxs("div",{children:[g.jsxs("h4",{className:"text-white font-medium",children:[e.renter.firstName," ",e.renter.lastName]}),g.jsxs("p",{className:"text-white/70 text-sm",children:[new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]})]}),g.jsxs("div",{className:"text-right",children:[g.jsx(l,{status:e.status}),g.jsxs("p",{className:"text-white font-semibold mt-1",children:["R",e.totalPrice]})]})]},e.id))})}),g.jsx(a,{title:"Recent Reviews",icon:"Star",children:g.jsx("div",{className:"space-y-3",children:N.customerFeedback.recentReviews.slice(0,3).map((e,t)=>g.jsxs("div",{className:"p-3 bg-white/5 rounded-lg",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("div",{className:"flex items-center space-x-1",children:[...Array(5)].map((t,s)=>g.jsx(i,{name:"Star",size:"sm",className:s<e.rating?"text-yellow-400":"text-gray-400"},s))}),g.jsx("span",{className:"text-white/70 text-sm",children:e.date})]}),g.jsx("p",{className:"text-white/80 text-sm",children:e.comment})]},t))})}),g.jsx(a,{title:"Quick Actions",icon:"Zap",children:g.jsxs("div",{className:"space-y-3",children:[g.jsxs("button",{onClick:()=>n("vehicles"),className:"w-full p-3 bg-green-500/20 text-green-200 rounded-lg hover:bg-green-500/30 transition-colors text-left",children:[g.jsx(i,{name:"Car",size:"sm",className:"mr-2"}),"Manage Vehicles"]}),g.jsxs("button",{onClick:()=>n("bookings"),className:"w-full p-3 bg-blue-500/20 text-blue-200 rounded-lg hover:bg-blue-500/30 transition-colors text-left",children:[g.jsx(i,{name:"Calendar",size:"sm",className:"mr-2"}),"Review Bookings"]}),g.jsxs("button",{onClick:()=>n("financial"),className:"w-full p-3 bg-purple-500/20 text-purple-200 rounded-lg hover:bg-purple-500/30 transition-colors text-left",children:[g.jsx(i,{name:"DollarSign",size:"sm",className:"mr-2"}),"View Earnings"]})]})})]})]}),"account"===r&&g.jsx(G,{}),"vehicles"===r&&g.jsxs("div",{className:"space-y-6",children:[g.jsx(M,{onSubmit:()=>{},onCancel:()=>{}}),g.jsx(U,{hostId:s?.id||"0"}),g.jsx(a,{title:"Your Vehicles",icon:"Car",children:g.jsx("div",{className:"space-y-4",children:0===c.length?g.jsxs("div",{className:"text-center py-8",children:[g.jsx(i,{name:"Car",size:"lg",className:"text-white/50 mx-auto mb-4"}),g.jsx("p",{className:"text-white/70",children:"No vehicles listed yet"}),g.jsx("button",{onClick:()=>n("vehicles"),className:"mt-4 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Add Your First Vehicle"})]}):g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(e=>g.jsx("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"flex items-start justify-between",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"text-white font-semibold",children:e.title}),g.jsxs("p",{className:"text-white/70 text-sm",children:[e.make," ",e.model," (",e.year,")"]})]}),g.jsx(l,{status:e.status})]}),g.jsxs("div",{className:"flex items-center justify-between text-sm",children:[g.jsxs("span",{className:"text-white/70",children:["R",e.pricePerDay,"/day"]}),g.jsxs("span",{className:"text-white/70",children:[e.bookings," bookings"]})]}),g.jsxs("div",{className:"flex items-center justify-between text-sm",children:[g.jsxs("span",{className:"text-white/70",children:["R",e.earnings," earned"]}),g.jsx("span",{className:"text-white/70",children:e.location})]}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("button",{className:"flex-1 px-3 py-1 bg-blue-500/20 text-blue-200 rounded text-sm hover:bg-blue-500/30 transition-colors",children:"Edit"}),"pending"===e.status&&g.jsx("button",{onClick:()=>L("VehicleApproval",parseInt(e.id)),className:"flex-1 px-3 py-1 bg-green-500/20 text-green-200 rounded text-sm hover:bg-green-500/30 transition-colors",children:"Request Approval"}),g.jsx("button",{className:"flex-1 px-3 py-1 bg-red-500/20 text-red-200 rounded text-sm hover:bg-red-500/30 transition-colors",children:"Remove"})]})]})},e.id))})})})]}),"bookings"===r&&g.jsxs("div",{className:"space-y-6",children:[g.jsx(a,{title:"Booking Requests",icon:"Calendar",children:g.jsx("div",{className:"space-y-4",children:0===R.length?g.jsxs("div",{className:"text-center py-8",children:[g.jsx(i,{name:"Calendar",size:"lg",className:"text-white/50 mx-auto mb-4"}),g.jsx("p",{className:"text-white/70",children:"No pending bookings"})]}):g.jsx("div",{className:"space-y-3",children:R.map(e=>g.jsx("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:g.jsxs("div",{className:"flex items-start justify-between",children:[g.jsxs("div",{className:"flex-1",children:[g.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[g.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:g.jsxs("span",{className:"text-white font-semibold text-sm",children:[e.renter.firstName[0],e.renter.lastName[0]]})}),g.jsxs("div",{children:[g.jsxs("h4",{className:"text-white font-semibold",children:[e.renter.firstName," ",e.renter.lastName]}),g.jsx("p",{className:"text-white/70 text-sm",children:e.renter.email})]})]}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-white/70",children:"Dates"}),g.jsxs("p",{className:"text-white",children:[new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-white/70",children:"Total Price"}),g.jsxs("p",{className:"text-white font-semibold",children:["R",e.totalPrice]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-white/70",children:"Requested"}),g.jsx("p",{className:"text-white",children:new Date(e.createdAt).toLocaleDateString()})]})]})]}),g.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[g.jsx(l,{status:e.status}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("button",{className:"px-3 py-1 bg-green-500/20 text-green-200 rounded text-sm hover:bg-green-500/30 transition-colors",children:"Accept"}),g.jsx("button",{className:"px-3 py-1 bg-red-500/20 text-red-200 rounded text-sm hover:bg-red-500/30 transition-colors",children:"Decline"})]})]})]})},e.id))})})}),g.jsx(a,{title:"Booking History",icon:"History",children:g.jsx("div",{className:"space-y-3",children:j.filter(e=>"pending"!==e.status).map(e=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[g.jsxs("div",{children:[g.jsxs("h4",{className:"text-white font-medium",children:[e.renter.firstName," ",e.renter.lastName]}),g.jsxs("p",{className:"text-white/70 text-sm",children:[new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]})]}),g.jsxs("div",{className:"text-right",children:[g.jsx(l,{status:e.status}),g.jsxs("p",{className:"text-white font-semibold mt-1",children:["R",e.totalPrice]})]})]},e.id))})})]}),"financial"===r&&g.jsxs("div",{className:"space-y-6",children:[g.jsx(F,{bookingId:0,amount:0,onPaymentSuccess:()=>{},onPaymentError:()=>{}}),g.jsx(a,{title:"Earnings Overview",icon:"DollarSign",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"text-center",children:[g.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["R",f.totalEarnings.toLocaleString()]}),g.jsx("div",{className:"text-white/70 text-sm",children:"Total Earnings"}),g.jsx("div",{className:"text-green-400 text-sm mt-1",children:"+12% from last month"})]}),g.jsxs("div",{className:"text-center",children:[g.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["R",f.monthlyEarnings.toLocaleString()]}),g.jsx("div",{className:"text-white/70 text-sm",children:"This Month"}),g.jsxs("div",{className:"text-blue-400 text-sm mt-1",children:["Next payout: ",y.upcomingPayouts[0]?.date]})]}),g.jsxs("div",{className:"text-center",children:[g.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["R",f.pendingPayouts.toLocaleString()]}),g.jsx("div",{className:"text-white/70 text-sm",children:"Pending Payouts"}),g.jsx("div",{className:"text-yellow-400 text-sm mt-1",children:"Available for withdrawal"})]})]})}),g.jsx(a,{title:"Transaction History",icon:"CreditCard",children:g.jsx("div",{className:"space-y-3",children:y.transactionHistory.slice(0,5).map(e=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("div",{className:"w-2 h-2 rounded-full "+("completed"===e.status?"bg-green-400":"pending"===e.status?"bg-yellow-400":"bg-red-400")}),g.jsxs("div",{children:[g.jsx("p",{className:"text-white font-medium capitalize",children:e.type}),g.jsx("p",{className:"text-white/70 text-sm",children:e.date})]})]}),g.jsxs("div",{className:"text-right",children:[g.jsxs("p",{className:"text-white font-semibold",children:["R",e.amount.toLocaleString()]}),g.jsx("p",{className:"text-white/70 text-sm capitalize",children:e.status})]})]},e.id))})}),g.jsx(a,{title:"Payout Settings",icon:"CreditCard",children:g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Bank Account"}),g.jsx("input",{type:"text",placeholder:"Enter bank account details",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Payout Frequency"}),g.jsxs("select",{className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[g.jsx("option",{value:"weekly",children:"Weekly"}),g.jsx("option",{value:"monthly",children:"Monthly"}),g.jsx("option",{value:"on-demand",children:"On Demand"})]})]}),g.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Update Settings"})]})})]}),"communication"===r&&g.jsx(J,{}),"analytics"===r&&g.jsx(u,{}),"fleet"===r&&g.jsx(U,{hostId:s?.id||"0"}),"pricing"===r&&g.jsx(O,{vehicleId:"",basePrice:0,onPriceUpdate:()=>{}}),"approvals"===r&&g.jsxs("div",{className:"space-y-6",children:[g.jsx(p,{userRole:"host"}),g.jsx(a,{title:"Vehicle Listing Approval",icon:"Car",children:g.jsxs("div",{className:"space-y-4",children:[g.jsx("p",{className:"text-white/70 text-sm",children:"Submit your vehicle listing for admin approval to make it available for renters."}),g.jsxs("button",{onClick:()=>L("VehicleListing"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center space-x-2",children:[g.jsx(i,{name:"Car",size:"sm"}),g.jsx("span",{children:"Request Vehicle Listing Approval"})]})]})}),g.jsx(a,{title:"Insurance Verification",icon:"Shield",children:g.jsxs("div",{className:"space-y-4",children:[g.jsx("p",{className:"text-white/70 text-sm",children:"Submit your insurance documents for verification to ensure compliance with platform requirements."}),g.jsxs("button",{onClick:()=>L("InsuranceVerification"),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center space-x-2",children:[g.jsx(i,{name:"Shield",size:"sm"}),g.jsx("span",{children:"Request Insurance Verification"})]})]})})]})]}),C&&A&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:g.jsx("div",{className:"w-full max-w-md",children:g.jsx(K,{requestType:A,entityId:parseInt(T?.toString()||s?.id||"0"),submittedBy:"host",onSuccess:()=>{P(!1),D(null),z(null)},onCancel:()=>{P(!1),D(null),z(null)}})})})]})};export{X as H,V as R,y as b,N as c};
