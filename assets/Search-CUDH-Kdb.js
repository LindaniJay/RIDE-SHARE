import{j as e}from"./query-CSyQ0w5Y.js";import{r as a,a as F}from"./vendor-CBH9K-97.js";import{b as C,c as R,L as A}from"./router-BWB2dKYR.js";import{a as T}from"./index-CxBuYlWW.js";import{S as B}from"./SEO-CE0wqVtH.js";import{G as V}from"./Glassmorphism-B6x2MkMT.js";import{G as x,a as P}from"./GlassButton-BfRB-w5d.js";import{m as S}from"./ui-qr7cu0yN.js";const E=({src:l,alt:u,className:o="",placeholder:y="/placeholder-image.jpg",blurDataURL:p,width:g,height:f,priority:c=!1,onLoad:n,onError:d})=>{const[s,h]=a.useState(!1),[b,r]=a.useState(!1),j=a.useRef(null),[v,w]=a.useState(c),t=a.useRef(null);F.useEffect(()=>{if(c)return;const k=new IntersectionObserver(([D])=>{D.isIntersecting&&(w(!0),k.disconnect())},{threshold:.1});return t.current&&k.observe(t.current),()=>k.disconnect()},[c]);const i=()=>{h(!0),n==null||n()},m=()=>{r(!0),d==null||d()},N=b?y:l;return e.jsxs("div",{ref:t,className:`relative overflow-hidden ${o}`,style:{width:g,height:f},children:[p&&!s&&e.jsx(S.div,{className:"absolute inset-0 bg-gray-200 dark:bg-gray-700",style:{backgroundImage:`url(${p})`,backgroundSize:"cover",backgroundPosition:"center",filter:"blur(10px)",transform:"scale(1.1)"},initial:{opacity:1},animate:{opacity:s?0:1},transition:{duration:.3}}),(v||c)&&e.jsx(S.img,{ref:j,src:N,alt:u,className:`w-full h-full object-cover transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onLoad:i,onError:m,initial:{opacity:0},animate:{opacity:s?1:0},transition:{duration:.3},loading:c?"eager":"lazy",decoding:"async"}),!s&&!b&&e.jsx(S.div,{className:"absolute inset-0 bg-gray-200 dark:bg-gray-700 animate-pulse",initial:{opacity:1},animate:{opacity:s?0:1},transition:{duration:.3}})]})},M=()=>{const[l]=C(),u=R(),[o,y]=a.useState([]),[p,g]=a.useState(!0),[f,c]=a.useState(null),[n,d]=a.useState(!1),[s,h]=a.useState({location:l.get("location")||"",pickupDate:l.get("pickupDate")||"",returnDate:l.get("returnDate")||"",vehicleType:l.get("vehicleType")||"",minPrice:"",maxPrice:"",features:[],sortBy:"price"});a.useEffect(()=>{b()},[l]);const b=async()=>{g(!0),c(null);try{const t=await T.get("/api/vehicles",{params:Object.fromEntries(l.entries())});y(t.data.vehicles||[])}catch(t){console.error("Error fetching vehicles:",t),c("Failed to load vehicles. Please try again.")}finally{g(!1)}},r=(t,i)=>{h(m=>({...m,[t]:i}))},j=t=>{h(i=>{const m=i.features.includes(t)?i.features.filter(N=>N!==t):[...i.features,t];return{...i,features:m}})},v=()=>{const t=new URLSearchParams;s.location&&t.append("location",s.location),s.pickupDate&&t.append("pickupDate",s.pickupDate),s.returnDate&&t.append("returnDate",s.returnDate),s.vehicleType&&t.append("vehicleType",s.vehicleType),s.minPrice&&t.append("minPrice",s.minPrice),s.maxPrice&&t.append("maxPrice",s.maxPrice),s.features.length>0&&t.append("features",s.features.join(",")),s.sortBy&&t.append("sortBy",s.sortBy),u(`/search?${t.toString()}`)},w=()=>{h({location:"",pickupDate:"",returnDate:"",vehicleType:"",minPrice:"",maxPrice:"",features:[],sortBy:"price"}),u("/search")};return e.jsxs("div",{className:"min-h-screen py-8",children:[e.jsx(B,{title:"Find Vehicles for Rent in South Africa | RideShare SA",description:"Search and book vehicles across South Africa. Filter by location, date, vehicle type, and price. Find cars, bakkies, SUVs, and luxury vehicles from trusted hosts.",keywords:"vehicle search South Africa, car rental search, bakkie rental, SUV rental, vehicle booking, car rental Cape Town, Johannesburg, Durban",url:"https://rideshare-sa.co.za/search"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Find Your Perfect Ride in South Africa"}),e.jsxs("p",{className:"text-white/80",children:[o.length," vehicles available across South Africa"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-80",children:e.jsxs(V,{variant:"sidebar",className:"rounded-2xl p-6 sticky top-24",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Filters"}),e.jsx("button",{onClick:()=>d(!n),className:"lg:hidden text-white/80 hover:text-white",children:n?"Hide":"Show"})]}),e.jsxs("div",{className:`space-y-6 ${n?"block":"hidden lg:block"}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Location"}),e.jsx(x,{type:"text",placeholder:"e.g., Cape Town",value:s.location,onChange:t=>r("location",t.target.value),icon:"üìç"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Pickup Date"}),e.jsx(x,{type:"date",value:s.pickupDate,onChange:t=>r("pickupDate",t.target.value),icon:"üóìÔ∏è"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Return Date"}),e.jsx(x,{type:"date",value:s.returnDate,onChange:t=>r("returnDate",t.target.value),icon:"üóìÔ∏è"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Vehicle Type"}),e.jsxs("select",{value:s.vehicleType,onChange:t=>r("vehicleType",t.target.value),className:"w-full px-4 py-3 rounded-xl text-white placeholder-white/50 bg-white/10 dark:bg-white/5 backdrop-blur-md border border-white/20 dark:border-white/10 focus:outline-none focus:ring-2 focus:ring-white/20 dark:focus:ring-white/10 transition-all duration-300 ease-in-out",children:[e.jsx("option",{value:"",className:"bg-gray-800 text-white",children:"All Types"}),e.jsx("option",{value:"sedan",className:"bg-gray-800 text-white",children:"Sedan"}),e.jsx("option",{value:"suv",className:"bg-gray-800 text-white",children:"SUV"}),e.jsx("option",{value:"bakkie",className:"bg-gray-800 text-white",children:"Bakkie"}),e.jsx("option",{value:"luxury",className:"bg-gray-800 text-white",children:"Luxury"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Price Range (ZAR)"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(x,{type:"number",placeholder:"Min",value:s.minPrice,onChange:t=>r("minPrice",t.target.value),icon:"R"}),e.jsx(x,{type:"number",placeholder:"Max",value:s.maxPrice,onChange:t=>r("maxPrice",t.target.value),icon:"R"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Features"}),e.jsx("div",{className:"space-y-2",children:["Air Conditioning","Automatic","GPS","Bluetooth","Child Seat"].map(t=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:t,checked:s.features.includes(t),onChange:()=>j(t),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("label",{htmlFor:t,className:"ml-2 text-sm text-white/80",children:t})]},t))})]}),e.jsx(P,{onClick:v,className:"w-full",gradient:!0,icon:"üîç",children:"Apply Filters"}),Object.values(s).some(t=>typeof t=="string"&&t!==""||Array.isArray(t)&&t.length>0)&&e.jsx(P,{onClick:w,className:"w-full mt-2",variant:"outline",icon:"üßπ",children:"Clear Filters"})]})]})}),e.jsxs("div",{className:"flex-1",children:[f&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:f}),p?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((t,i)=>e.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-lg shadow-md animate-pulse h-64"},i))}):o.length===0?e.jsxs("div",{className:"text-center py-10 text-gray-600 dark:text-gray-300",children:[e.jsx("p",{className:"text-xl font-semibold mb-4",children:"No vehicles found matching your criteria."}),e.jsx("p",{children:"Try adjusting your filters or searching a different location."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-sm text-white/80",children:"Sort by:"}),e.jsxs("select",{value:s.sortBy,onChange:t=>r("sortBy",t.target.value),className:"rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[e.jsx("option",{value:"price",children:"Price (Low to High)"}),e.jsx("option",{value:"price-desc",children:"Price (High to Low)"}),e.jsx("option",{value:"rating",children:"Rating"}),e.jsx("option",{value:"newest",children:"Newest"})]})]}),e.jsxs("div",{className:"text-sm text-white/80",children:[o.length," vehicles found"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(t=>e.jsxs(A,{to:`/vehicle/${t.id}`,className:"block bg-white/10 backdrop-blur-md rounded-xl shadow-lg overflow-hidden transform hover:scale-105 transition-all duration-300 border border-white/20",children:[e.jsx(E,{src:t.imageUrl,alt:`${t.make} ${t.model}`,className:"w-full h-48 object-cover",placeholder:"https://via.placeholder.com/400x300/1f2937/ffffff?text=Vehicle+Image"}),e.jsxs("div",{className:"p-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-white mb-1",children:[t.make," ",t.model]}),e.jsxs("p",{className:"text-gray-300 text-sm mb-2",children:[t.location," ‚Ä¢ ",t.year]}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"text-yellow-400 text-lg",children:"‚≠ê"}),e.jsxs("span",{className:"text-white ml-1",children:[t.rating," (",t.reviews,")"]})]}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:["R",t.pricePerDay,e.jsx("span",{className:"text-lg font-normal text-gray-300",children:"/day"})]})]})]},t.id))})]})]})]})]})]})};export{M as default};
