var H=Object.defineProperty;var W=(r,e,s)=>e in r?H(r,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[e]=s;var v=(r,e,s)=>W(r,typeof e!="symbol"?e+"":e,s);import{j as t}from"./query-CSyQ0w5Y.js";import{r as m,a as I}from"./vendor-CBH9K-97.js";import{c as B,d as b,o as K,s as J,e as w,f as G,g as Q,h as X,i as Y}from"./index-8s0D9-Sy.js";import{c as Z}from"./router-BWB2dKYR.js";import{S as ee}from"./SEO-C4QusKet.js";import"./ui-qr7cu0yN.js";const A=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,C=B,L=(r,e)=>s=>{var a;if((e==null?void 0:e.variants)==null)return C(r,s==null?void 0:s.class,s==null?void 0:s.className);const{variants:i,defaultVariants:n}=e,o=Object.keys(i).map(c=>{const h=s==null?void 0:s[c],f=n==null?void 0:n[c];if(h===null)return null;const d=A(h)||A(f);return i[c][d]}),u=s&&Object.entries(s).reduce((c,h)=>{let[f,d]=h;return d===void 0||(c[f]=d),c},{}),l=e==null||(a=e.compoundVariants)===null||a===void 0?void 0:a.reduce((c,h)=>{let{class:f,className:d,...y}=h;return Object.entries(y).every(x=>{let[j,E]=x;return Array.isArray(E)?E.includes({...n,...u}[j]):{...n,...u}[j]===E})?[...c,f,d]:c},[]);return C(r,o,l,s==null?void 0:s.class,s==null?void 0:s.className)},se=L("rounded-xl border bg-white shadow-sm transition-all duration-200",{variants:{variant:{default:"border-gray-200",elevated:"border-gray-200 shadow-lg hover:shadow-xl",glass:"bg-white/10 backdrop-blur-md border-white/20 text-white",outlined:"border-2 border-gray-300",filled:"bg-gray-50 border-gray-200"},padding:{none:"p-0",sm:"p-4",md:"p-6",lg:"p-8"},hover:{true:"hover:shadow-md cursor-pointer",false:""}},defaultVariants:{variant:"default",padding:"md",hover:!1}}),U=m.forwardRef(({className:r,variant:e,padding:s,hover:a,asChild:i=!1,...n},o)=>{const u=i?I.Fragment:"div";return t.jsx(u,{ref:i?void 0:o,className:b(se({variant:e,padding:s,hover:a,className:r})),...n})});U.displayName="Card";const _=m.forwardRef(({className:r,...e},s)=>t.jsx("div",{ref:s,className:b("flex flex-col space-y-1.5 p-6",r),...e}));_.displayName="CardHeader";const D=m.forwardRef(({className:r,...e},s)=>t.jsx("h3",{ref:s,className:b("text-lg font-semibold leading-none tracking-tight",r),...e}));D.displayName="CardTitle";const re=m.forwardRef(({className:r,...e},s)=>t.jsx("p",{ref:s,className:b("text-sm text-gray-500",r),...e}));re.displayName="CardDescription";const V=m.forwardRef(({className:r,...e},s)=>t.jsx("div",{ref:s,className:b("p-6 pt-0",r),...e}));V.displayName="CardContent";const te=m.forwardRef(({className:r,...e},s)=>t.jsx("div",{ref:s,className:b("flex items-center p-6 pt-0",r),...e}));te.displayName="CardFooter";const ae=L("flex w-full rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:cursor-not-allowed disabled:opacity-50 transition-colors duration-200",{variants:{variant:{default:"border-gray-300 focus:ring-blue-500",error:"border-red-500 focus:ring-red-500 focus:border-red-500",success:"border-green-500 focus:ring-green-500 focus:border-green-500",glass:"bg-white/10 backdrop-blur-md border-white/20 text-white placeholder:text-white/60 focus:ring-white/50"},size:{sm:"h-8 px-2 text-xs",md:"h-10 px-3 text-sm",lg:"h-12 px-4 text-base"}},defaultVariants:{variant:"default",size:"md"}}),S=m.forwardRef(({className:r,variant:e,size:s,label:a,error:i,helperText:n,leftIcon:o,rightIcon:u,required:l,id:c,...h},f)=>{const d=c||`input-${Math.random().toString(36).substr(2,9)}`,y=!!i,x=y?"error":e;return t.jsxs("div",{className:"w-full",children:[a&&t.jsxs("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700 mb-1",children:[a,l&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[o&&t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx("span",{className:"text-gray-400","aria-hidden":"true",children:o})}),t.jsx("input",{id:d,className:b(ae({variant:x,size:s,className:r}),o&&"pl-10",u&&"pr-10"),ref:f,"aria-invalid":y,"aria-describedby":i?`${d}-error`:n?`${d}-helper`:void 0,...h}),u&&t.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:t.jsx("span",{className:"text-gray-400","aria-hidden":"true",children:u})})]}),i&&t.jsx("p",{id:`${d}-error`,className:"mt-1 text-sm text-red-600",role:"alert",children:i}),n&&!i&&t.jsx("p",{id:`${d}-helper`,className:"mt-1 text-sm text-gray-500",children:n})]})});S.displayName="Input";const ne=(r,e)=>{switch(e.type){case"SET_FIELD_VALUE":return{...r,fields:{...r.fields,[e.payload.name]:{...r.fields[e.payload.name],value:e.payload.value,touched:!0}},isDirty:!0};case"SET_FIELD_ERROR":return{...r,fields:{...r.fields,[e.payload.name]:{...r.fields[e.payload.name],error:e.payload.error}}};case"CLEAR_FIELD_ERROR":return{...r,fields:{...r.fields,[e.payload.name]:{...r.fields[e.payload.name],error:void 0}}};case"TOUCH_FIELD":return{...r,fields:{...r.fields,[e.payload.name]:{...r.fields[e.payload.name],touched:!0}}};case"SET_SUBMITTING":return{...r,isSubmitting:e.payload};case"RESET_FORM":return{fields:{},isValid:!0,isSubmitting:!1,isDirty:!1};case"SET_FORM_DATA":const s={};return Object.entries(e.payload).forEach(([a,i])=>{s[a]={name:a,value:i,touched:!1}}),{...r,fields:s,isDirty:!1};default:return r}},P=m.createContext(void 0),$=()=>{const r=m.useContext(P);if(!r)throw new Error("useForm must be used within a FormProvider");return r},ie=({children:r,initialValues:e={},onSubmit:s,validationSchema:a,className:i})=>{const[n,o]=m.useReducer(ne,{fields:{},isValid:!0,isSubmitting:!1,isDirty:!1}),u=m.useCallback((p,g)=>{o({type:"SET_FIELD_VALUE",payload:{name:p,value:g}})},[]),l=m.useCallback((p,g)=>{o({type:"SET_FIELD_ERROR",payload:{name:p,error:g}})},[]),c=m.useCallback(p=>{o({type:"CLEAR_FIELD_ERROR",payload:{name:p}})},[]),h=m.useCallback(p=>{o({type:"TOUCH_FIELD",payload:{name:p}})},[]),f=m.useCallback(p=>{o({type:"SET_SUBMITTING",payload:p})},[]),d=m.useCallback(()=>{o({type:"RESET_FORM"})},[]),y=m.useCallback(p=>{var g;return(g=n.fields[p])==null?void 0:g.value},[n.fields]),x=m.useCallback(p=>{var g;return(g=n.fields[p])==null?void 0:g.error},[n.fields]),j=m.useCallback(p=>{var g;return((g=n.fields[p])==null?void 0:g.touched)||!1},[n.fields]),E=async p=>{if(p.preventDefault(),!n.isSubmitting){f(!0);try{const g={};if(Object.entries(n.fields).forEach(([N,O])=>{g[N]=O.value}),a){const N=a(g);if(Object.keys(N).length>0){Object.entries(N).forEach(([z,M])=>{l(z,M)}),f(!1);return}}await s(g)}catch(g){console.error("Form submission error:",g)}finally{f(!1)}}};I.useEffect(()=>{Object.keys(e).length>0&&o({type:"SET_FORM_DATA",payload:e})},[e]);const q={state:n,setFieldValue:u,setFieldError:l,clearFieldError:c,touchField:h,setSubmitting:f,resetForm:d,getFieldValue:y,getFieldError:x,isFieldTouched:j};return t.jsx(P.Provider,{value:q,children:t.jsx("form",{onSubmit:E,className:b("space-y-6",i),children:r})})},F=({name:r,children:e})=>{const{getFieldValue:s,getFieldError:a,isFieldTouched:i,setFieldValue:n,setFieldError:o,clearFieldError:u,touchField:l}=$(),c={value:s(r),error:a(r),touched:i(r),setValue:h=>n(r,h),setError:h=>o(r,h),clearError:()=>u(r),touch:()=>l(r)};return t.jsx(t.Fragment,{children:e(c)})},oe=({children:r,className:e})=>{const{state:s}=$();return t.jsx("button",{type:"submit",disabled:s.isSubmitting||!s.isValid,className:b("w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",e),children:s.isSubmitting?"Submitting...":r})},R=class R{constructor(){v(this,"errorLog",[])}static getInstance(){return R.instance||(R.instance=new R),R.instance}handleError(e,s){let a;return e instanceof Error?a={code:this.getErrorCode(e),message:e.message,details:{stack:e.stack,context:s,timestamp:new Date().toISOString()}}:typeof e=="string"?a={code:"UNKNOWN_ERROR",message:e,details:{context:s,timestamp:new Date().toISOString()}}:a={code:"UNKNOWN_ERROR",message:"An unknown error occurred",details:{context:s,timestamp:new Date().toISOString()}},this.logError(a),a}getErrorCode(e){return e.message.includes("fetch")?"NETWORK_ERROR":e.message.includes("timeout")?"TIMEOUT_ERROR":e.message.includes("unauthorized")?"AUTH_ERROR":e.message.includes("forbidden")?"PERMISSION_ERROR":e.message.includes("validation")||e.message.includes("required")?"VALIDATION_ERROR":"UNKNOWN_ERROR"}logError(e){this.errorLog.push(e),this.sendToLoggingService(e)}sendToLoggingService(e){console.log("Sending error to logging service:",e)}getErrorLog(){return[...this.errorLog]}clearErrorLog(){this.errorLog=[]}};v(R,"instance");let k=R;const le=k.getInstance(),de=r=>r.code==="NETWORK_ERROR"||r.code==="TIMEOUT_ERROR",ce=r=>r.code==="AUTH_ERROR"||r.code==="PERMISSION_ERROR";class ue{constructor(e="http://localhost:5000/api"){v(this,"baseURL");v(this,"defaultTimeout",1e4);v(this,"defaultRetries",3);this.baseURL=e}async request(e,s={}){const{timeout:a=this.defaultTimeout,retries:i=this.defaultRetries,...n}=s,o=`${this.baseURL}${e}`,u=new AbortController,l=setTimeout(()=>u.abort(),a),c={"Content-Type":"application/json",Accept:"application/json"},h=localStorage.getItem("authToken");h&&(c.Authorization=`Bearer ${h}`);const f={...n,headers:{...c,...n.headers},signal:u.signal};let d=null;for(let y=0;y<=i;y++)try{const x=await fetch(o,f);if(clearTimeout(l),!x.ok){const E=await x.json().catch(()=>({}));throw new Error(E.message||`HTTP ${x.status}: ${x.statusText}`)}return{success:!0,data:await x.json()}}catch(x){if(d=le.handleError(x,`API Request: ${e}`),ce(d)||(x==null?void 0:x.status)<500||de(d)&&y>=i)break;y<i&&await this.delay(Math.pow(2,y)*1e3)}return clearTimeout(l),{success:!1,data:null,message:(d==null?void 0:d.message)||"Request failed",errors:[(d==null?void 0:d.message)||"Unknown error"]}}delay(e){return new Promise(s=>setTimeout(s,e))}async get(e,s){return this.request(e,{...s,method:"GET"})}async post(e,s,a){return this.request(e,{...a,method:"POST",body:s?JSON.stringify(s):void 0})}async put(e,s,a){return this.request(e,{...a,method:"PUT",body:s?JSON.stringify(s):void 0})}async patch(e,s,a){return this.request(e,{...a,method:"PATCH",body:s?JSON.stringify(s):void 0})}async delete(e,s){return this.request(e,{...s,method:"DELETE"})}async uploadFile(e,s,a,i){const n=new FormData;n.append("file",s),a&&Object.entries(a).forEach(([l,c])=>{n.append(l,c)});const o=localStorage.getItem("authToken"),u={};return o&&(u.Authorization=`Bearer ${o}`),this.request(e,{...i,method:"POST",body:n,headers:{...u,...i==null?void 0:i.headers}})}async getPaginated(e,s,a){const i=new URLSearchParams;s&&Object.entries(s).forEach(([u,l])=>{l!=null&&i.append(u,l.toString())});const n=i.toString(),o=n?`${e}?${n}`:e;return this.get(o,a)}async healthCheck(){try{return(await this.get("/health")).success}catch{return!1}}}const T=new ue;class he{constructor(){v(this,"currentUser",null);v(this,"listeners",[]);K(w,async e=>{if(e)try{const s=await e.getIdToken(),a=await T.post("/auth/verify-firebase-token",{idToken:s});a.success?(this.currentUser=a.data.user,this.notifyListeners()):(console.error("Failed to verify Firebase token:",a.message),await this.signOut())}catch(s){console.error("Firebase auth error:",s),await this.signOut()}else this.currentUser=null,this.notifyListeners()})}async adminLogin(e,s){try{const a=await T.post("/auth/admin-login",{email:e,password:s});if(a.success)return this.currentUser=a.data.user,localStorage.setItem("authToken",a.data.accessToken),this.notifyListeners(),this.currentUser;throw new Error(a.message||"Admin login failed")}catch(a){throw console.error("Admin login error:",a),a}}async signIn(e,s){try{const i=await(await J(w,e,s)).user.getIdToken(),n=await T.post("/auth/verify-firebase-token",{idToken:i});if(n.success)return this.currentUser=n.data.user,localStorage.setItem("authToken",n.data.accessToken),this.notifyListeners(),this.currentUser;throw new Error(n.message||"Authentication failed")}catch(a){throw console.error("Sign in error:",a),a}}async signUp(e,s,a,i,n="renter"){try{const o=await G(w,e,s);await Q(o.user,{displayName:`${a} ${i}`});const u=await o.user.getIdToken(),l=await T.post("/auth/verify-firebase-token",{idToken:u});if(l.success)return this.currentUser=l.data.user,localStorage.setItem("authToken",l.data.accessToken),this.notifyListeners(),this.currentUser;throw new Error(l.message||"Registration failed")}catch(o){throw console.error("Sign up error:",o),o}}async signOut(){try{await X(w),this.currentUser=null,localStorage.removeItem("authToken"),this.notifyListeners()}catch(e){throw console.error("Sign out error:",e),e}}getCurrentUser(){return this.currentUser}isAuthenticated(){return this.currentUser!==null}isAdmin(){var e,s;return((e=this.currentUser)==null?void 0:e.role)==="admin"||((s=this.currentUser)==null?void 0:s.isAdmin)===!0}isHost(){var e;return((e=this.currentUser)==null?void 0:e.role)==="host"}isRenter(){var e;return((e=this.currentUser)==null?void 0:e.role)==="renter"}onAuthStateChange(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(s=>s!==e)}}notifyListeners(){this.listeners.forEach(e=>e(this.currentUser))}async getIdToken(){return w.currentUser?await w.currentUser.getIdToken():null}async refreshIdToken(){return w.currentUser?await w.currentUser.getIdToken(!0):null}}const me=new he,fe=({onSuccess:r,className:e})=>{const[s,a]=m.useState(!1),i=Z(),{error:n,success:o}=Y(),u=async l=>{a(!0);try{await me.adminLogin(l.email,l.password)&&(o("Admin login successful","Welcome to the admin dashboard"),r==null||r(),i("/dashboard"))}catch(c){n("Admin login failed",c.message||"Invalid admin credentials")}finally{a(!1)}};return t.jsx("div",{className:`min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 ${e}`,children:t.jsxs("div",{className:"max-w-md w-full space-y-8",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Admin Access"}),t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access the admin dashboard"})]}),t.jsxs(U,{className:"mt-8",children:[t.jsx(_,{children:t.jsx(D,{className:"text-center",children:"Administrator Login"})}),t.jsxs(V,{children:[t.jsx(ie,{onSubmit:u,children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(F,{name:"email",children:({value:l,setValue:c,error:h,clearError:f,touch:d})=>t.jsx(S,{label:"Admin Email",type:"email",value:l||"",onChange:y=>{c(y.target.value),f()},onBlur:()=>d(),error:h,placeholder:"admin@rideshare.co.za",required:!0,leftIcon:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})})}),t.jsx(F,{name:"password",children:({value:l,setValue:c,error:h,clearError:f,touch:d})=>t.jsx(S,{label:"Password",type:"password",value:l||"",onChange:y=>{c(y.target.value),f()},onBlur:()=>d(),error:h,placeholder:"Enter admin password",required:!0,leftIcon:t.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})}),t.jsx(oe,{className:"w-full",children:s?"Signing in...":"Sign in as Admin"})]})}),t.jsxs("div",{className:"mt-6",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx("div",{className:"w-full border-t border-gray-300"})}),t.jsx("div",{className:"relative flex justify-center text-sm",children:t.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Admin Accounts"})})]}),t.jsxs("div",{className:"mt-4 text-xs text-gray-500 space-y-1",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Jonase:"})," Jonase@rideshare.co.za"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Toni:"})," Toni@rideshare.co.za"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Soso:"})," soso@rideshare.co.za"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Anitha:"})," Anitha@rideshare.co.za"]}),t.jsxs("p",{className:"mt-2 text-center",children:[t.jsx("strong",{children:"Password:"})," password123"]})]})]})]})]}),t.jsx("div",{className:"text-center",children:t.jsxs("p",{className:"text-sm text-gray-600",children:["Regular users should use"," ",t.jsx("button",{onClick:()=>i("/login"),className:"font-medium text-blue-600 hover:text-blue-500",children:"Firebase authentication"})]})})]})})},Ee=()=>t.jsxs(t.Fragment,{children:[t.jsx(ee,{title:"Admin Login - RideShare SA",description:"Administrator access to RideShare SA dashboard",keywords:"admin login, administrator, dashboard, RideShare SA",url:"https://rideshare-sa.co.za/admin-login"}),t.jsx(fe,{})]});export{Ee as default};
