import{r as e,j as s}from"./react-vendor-DFf_48ct.js";import{G as t,I as a,u as l,b as i}from"./admin-pages-7ozwo2GF.js";import"./vendor-eiHq4GmM.js";import"./firebase-B6ibEfTD.js";import"./utils-Bi8vyz5k.js";const r=({userId:l,role:i})=>{const[r,n]=e.useState([]),[c,d]=e.useState(!0),[o,x]=e.useState("all");e.useEffect(()=>{m()},[l,i]);const m=async()=>{try{d(!0);try{const e=await fetch("/api/bookings/my-bookings",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(e.ok){const s=await e.json();return void n(s.bookings||[])}}catch(e){}const s=[...JSON.parse(localStorage.getItem("mockBookings")||"[]").filter(e=>"renter"===i?e.renterId===l||e.renter?.id===l:"host"===i&&(e.hostId===l||e.host?.id===l)),{id:"1",vehicleId:"1",renterId:l,startDate:"2024-01-15",endDate:"2024-01-17",totalPrice:500,status:"confirmed",vehicle:{make:"Toyota",model:"Hilux",year:2022,images:["/images/toyota-hilux.jpg"]},host:{name:"Jane Smith",email:"jane@example.com",avatar:"/images/avatar.jpg"},renter:{name:"Current User",email:"user@example.com"}}];n(s)}catch(s){}finally{d(!1)}},h=async(e,s)=>{try{await m()}catch(t){}},g=r.filter(e=>"all"===o||e.status===o),p=e=>{switch(e){case"pending":return"text-yellow-400";case"confirmed":return"text-blue-400";case"active":return"text-green-400";case"completed":default:return"text-gray-400";case"cancelled":return"text-red-400"}};return c?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"renter"===i?"My Bookings":"Host Bookings"}),s.jsx("p",{className:"text-gray-300",children:"renter"===i?"Manage your vehicle rentals":"Manage bookings for your vehicles"})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("select",{value:o,onChange:e=>x(e.target.value),className:"glass-select",children:[s.jsx("option",{value:"all",children:"All Bookings"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"confirmed",children:"Confirmed"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"cancelled",children:"Cancelled"})]})})]}),s.jsx("div",{className:"space-y-4",children:0===g.length?s.jsxs(t,{className:"p-8 text-center",children:[s.jsx(a,{name:"calendar",className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No bookings found"}),s.jsx("p",{className:"text-gray-400",children:"renter"===i?"You haven't made any bookings yet. Start by searching for vehicles!":"No one has booked your vehicles yet."})]}):g.map(e=>s.jsxs(t,{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("img",{src:e.vehicle.images[0],alt:`${e.vehicle.make} ${e.vehicle.model}`,className:"w-16 h-16 object-cover rounded-lg"}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-white",children:[e.vehicle.make," ",e.vehicle.model," (",e.vehicle.year,")"]}),s.jsx("p",{className:"text-gray-400 text-sm",children:e.vehicle.location}),s.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[s.jsxs("span",{className:"text-sm text-gray-300",children:[new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]}),s.jsxs("span",{className:"text-sm text-gray-300",children:[e.totalDays," days"]})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`text-lg font-semibold ${p(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),s.jsxs("div",{className:"text-xl font-bold text-white",children:["R",e.totalPrice.toLocaleString()]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"renter"===i?"Host":"Renter"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("img",{src:"renter"===i?e.host.avatar:e.renter.name,alt:"renter"===i?e.host.name:e.renter.name,className:"w-6 h-6 rounded-full"}),s.jsx("span",{className:"text-white",children:"renter"===i?e.host.name:e.renter.name})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Payment Status"}),s.jsx("span",{className:"text-sm font-medium "+("paid"===e.paymentStatus?"text-green-400":"pending"===e.paymentStatus?"text-yellow-400":"text-red-400"),children:e.paymentStatus.charAt(0).toUpperCase()+e.paymentStatus.slice(1)})]})]}),e.notes&&s.jsx("div",{className:"mb-4 p-3 bg-white/5 rounded-lg",children:s.jsxs("p",{className:"text-sm text-gray-300",children:[s.jsx("strong",{children:"Notes:"})," ",e.notes]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-400",children:["Booked on ",new Date(e.createdAt).toLocaleDateString()]}),s.jsxs("div",{className:"flex items-center space-x-2",children:["pending"===e.status&&"host"===i&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>h(e.id),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg transition-all",children:"Confirm"}),s.jsx("button",{onClick:()=>h(e.id),className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-sm rounded-lg transition-all",children:"Decline"})]}),"confirmed"===e.status&&"renter"===i&&s.jsx("button",{onClick:()=>h(e.id),className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-sm rounded-lg transition-all",children:"Cancel"}),s.jsx("button",{className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-lg transition-all",children:"View Details"})]})]})]},e.id))})]})},n=()=>{const{user:n}=l(),[c,d]=e.useState("overview");return s.jsx("div",{className:"page-background p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome to your dashboard!"}),s.jsx("p",{className:"text-gray-300",children:"Manage your bookings and account settings"})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:[{id:"overview",label:"Overview",icon:"Home"},{id:"bookings",label:"My Bookings",icon:"Calendar"},{id:"profile",label:"Profile",icon:"User"},{id:"settings",label:"Settings",icon:"Settings"}].map(e=>s.jsxs("button",{onClick:()=>d(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all "+(c===e.id?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:[s.jsx(a,{name:e.icon,className:"h-4 w-4"}),s.jsx("span",{children:e.label})]},e.id))}),s.jsxs("div",{className:"space-y-6",children:["overview"===c&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(t,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 bg-blue-500/20 rounded-lg",children:s.jsx(a,{name:"Calendar",className:"h-6 w-6 text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Total Bookings"}),s.jsx("p",{className:"text-2xl font-bold text-blue-400",children:i.totalBookings})]})]})}),s.jsx(t,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 bg-green-500/20 rounded-lg",children:s.jsx(a,{name:"CheckCircle",className:"h-6 w-6 text-green-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Active Bookings"}),s.jsx("p",{className:"text-2xl font-bold text-green-400",children:i.activeBookings})]})]})}),s.jsx(t,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 bg-yellow-500/20 rounded-lg",children:s.jsx(a,{name:"Clock",className:"h-6 w-6 text-yellow-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:i.completedBookings})]})]})}),s.jsx(t,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 bg-purple-500/20 rounded-lg",children:s.jsx(a,{name:"DollarSign",className:"h-6 w-6 text-purple-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Total Spent"}),s.jsxs("p",{className:"text-2xl font-bold text-purple-400",children:["R",i.totalSpent.toLocaleString()]})]})]})}),s.jsx(t,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 bg-red-500/20 rounded-lg",children:s.jsx(a,{name:"Star",className:"h-6 w-6 text-red-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Average Rating"}),s.jsx("p",{className:"text-2xl font-bold text-red-400",children:i.averageRating})]})]})}),s.jsx(t,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 bg-indigo-500/20 rounded-lg",children:s.jsx(a,{name:"TrendingUp",className:"h-6 w-6 text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Saved Vehicles"}),s.jsx("p",{className:"text-2xl font-bold text-indigo-400",children:i.savedVehicles})]})]})})]}),"bookings"===c&&s.jsx(r,{userId:n?.id||"",role:"renter"}),"profile"===c&&s.jsx("div",{className:"space-y-6",children:s.jsxs(t,{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Profile Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"First Name"}),s.jsx("input",{type:"text",value:n?.firstName||"",className:"glass-input",readOnly:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Last Name"}),s.jsx("input",{type:"text",value:n?.lastName||"",className:"glass-input",readOnly:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:n?.email||"",className:"glass-input",readOnly:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone"}),s.jsx("input",{type:"tel",value:n?.phone||"",className:"glass-input",readOnly:!0})]})]})]})}),"settings"===c&&s.jsx("div",{className:"space-y-6",children:s.jsxs(t,{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Account Settings"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-white",children:"Email Notifications"}),s.jsx("p",{className:"text-gray-300 text-sm",children:"Receive updates about your bookings"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-white",children:"SMS Notifications"}),s.jsx("p",{className:"text-gray-300 text-sm",children:"Receive text message updates"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]})]})})]})]})})};export{n as default};
