import{r as e,j as s}from"./react-vendor-DFf_48ct.js";import{u as t,G as i,I as l}from"./admin-pages-DaMQ-yF4.js";import{G as a}from"./GlassButton-CO4H1giY.js";import"./vendor-eiHq4GmM.js";import"./firebase-B6ibEfTD.js";import"./utils-Bi8vyz5k.js";const n=({isOpen:n,onClose:r,initialMode:o="login"})=>{const{login:d,signup:m,loading:c}=t(),[u,h]=e.useState(o),[p,x]=e.useState(""),[w,b]=e.useState(!1),[g,f]=e.useState({email:"",password:""}),[j,N]=e.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",role:"Renter"});e.useEffect(()=>{n&&(h(o),x(""),b(!1))},[n,o]);const v=e=>{const{name:s,value:t}=e.target;f(e=>({...e,[s]:t})),x("")},y=e=>{const{name:s,value:t}=e.target;N(e=>({...e,[s]:t})),x("")},C=()=>{x(""),b(!1),f({email:"",password:""}),N({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",role:"Renter"}),r()};return e.useEffect(()=>{const e=e=>{"Escape"===e.key&&n&&C()};return n&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[n]),n?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:C}),s.jsx("div",{className:"relative w-full max-w-md max-h-[90vh] overflow-y-auto",children:s.jsxs(i,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:s.jsx(l,{name:"Car",size:"sm",className:"text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"login"===u?"Welcome back":"Join RideShare SA"}),s.jsx("p",{className:"text-sm text-white/70",children:"login"===u?"Sign in to your account":"Create your account"})]})]}),s.jsx("button",{onClick:C,className:"glass-button p-2 text-white/70 hover:text-white transition-colors",children:s.jsx(l,{name:"X",size:"sm"})})]}),s.jsxs("div",{className:"flex bg-white/10 rounded-lg p-1 mb-6",children:[s.jsx("button",{onClick:()=>h("login"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200 "+("login"===u?"bg-white/20 text-white shadow-sm":"text-white/70 hover:text-white"),children:"Sign In"}),s.jsx("button",{onClick:()=>h("signup"),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200 "+("signup"===u?"bg-white/20 text-white shadow-sm":"text-white/70 hover:text-white"),children:"Sign Up"})]}),p&&s.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-4 text-red-200 text-sm mb-6",children:p}),"login"===u&&s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),x(""),b(!0);try{await d(g.email,g.password),r()}catch(s){x(s.message)}finally{b(!1)}},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"login-email",className:"block text-sm font-medium text-white/70 mb-2",children:"Email address"}),s.jsx("input",{id:"login-email",name:"email",type:"email",autoComplete:"email",required:!0,value:g.email,onChange:v,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all",placeholder:"Enter your email"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"login-password",className:"block text-sm font-medium text-white/70 mb-2",children:"Password"}),s.jsx("input",{id:"login-password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:g.password,onChange:v,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all",placeholder:"Enter your password"})]}),s.jsx(a,{type:"submit",disabled:w||c,className:"w-full flex justify-center items-center space-x-2",children:w||c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),s.jsx("span",{children:"Signing in..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(l,{name:"Login",size:"sm"}),s.jsx("span",{children:"Sign in"})]})})]}),"signup"===u&&s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),x(""),b(!0),j.password!==j.confirmPassword)return x("Passwords do not match"),void b(!1);if(j.password.length<6)return x("Password must be at least 6 characters long"),void b(!1);try{await m(j.email,j.password,j.firstName,j.lastName,j.phone,j.role),r()}catch(s){x(s.message)}finally{b(!1)}},className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"signup-firstName",className:"block text-sm font-medium text-white/70 mb-2",children:"First name"}),s.jsx("input",{id:"signup-firstName",name:"firstName",type:"text",autoComplete:"given-name",required:!0,value:j.firstName,onChange:y,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all",placeholder:"First name"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"signup-lastName",className:"block text-sm font-medium text-white/70 mb-2",children:"Last name"}),s.jsx("input",{id:"signup-lastName",name:"lastName",type:"text",autoComplete:"family-name",required:!0,value:j.lastName,onChange:y,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all",placeholder:"Last name"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"signup-email",className:"block text-sm font-medium text-white/70 mb-2",children:"Email address"}),s.jsx("input",{id:"signup-email",name:"email",type:"email",autoComplete:"email",required:!0,value:j.email,onChange:y,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all",placeholder:"Enter your email"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"signup-phone",className:"block text-sm font-medium text-white/70 mb-2",children:"Phone number (optional)"}),s.jsx("input",{id:"signup-phone",name:"phone",type:"tel",autoComplete:"tel",value:j.phone,onChange:y,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all",placeholder:"Enter your phone number"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"signup-role",className:"block text-sm font-medium text-white/70 mb-2",children:"I want to"}),s.jsxs("select",{id:"signup-role",name:"role",required:!0,value:j.role,onChange:y,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all",children:[s.jsx("option",{value:"Renter",className:"bg-gray-800 text-white",children:"Rent vehicles from others"}),s.jsx("option",{value:"Host",className:"bg-gray-800 text-white",children:"Rent out my vehicles"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"signup-password",className:"block text-sm font-medium text-white/70 mb-2",children:"Password"}),s.jsx("input",{id:"signup-password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:j.password,onChange:y,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all",placeholder:"Create password"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"signup-confirmPassword",className:"block text-sm font-medium text-white/70 mb-2",children:"Confirm password"}),s.jsx("input",{id:"signup-confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:j.confirmPassword,onChange:y,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all",placeholder:"Confirm password"})]})]}),s.jsx(a,{type:"submit",disabled:w||c,className:"w-full flex justify-center items-center space-x-2",children:w||c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),s.jsx("span",{children:"Creating account..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(l,{name:"Plus",size:"sm"}),s.jsx("span",{children:"Create account"})]})})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-white/60 text-sm",children:["login"===u?"Don't have an account? ":"Already have an account? ",s.jsx("button",{onClick:()=>h("login"===u?"signup":"login"),className:"text-blue-400 hover:text-blue-300 font-medium transition-colors",children:"login"===u?"Sign up here":"Sign in here"})]})})]})})]}):null};export{n as default};
