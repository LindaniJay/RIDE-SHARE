var Y=Object.defineProperty;var W=(r,o,c)=>o in r?Y(r,o,{enumerable:!0,configurable:!0,writable:!0,value:c}):r[o]=c;var I=(r,o,c)=>W(r,typeof o!="symbol"?o+"":o,c);import{j as e}from"./query-CSyQ0w5Y.js";import{r as x,a as H}from"./vendor-CBH9K-97.js";import{c as G,L as V,R as J,a as U}from"./router-BWB2dKYR.js";import{c as F,I as d,u as K}from"./index-VfPjVbXF.js";import{R as X,S as T}from"./RealTimeAdminDashboard-BjlNU4gs.js";import{G as Z}from"./Glassmorphism-B6x2MkMT.js";import"./ui-qr7cu0yN.js";const S=({children:r,className:o="",title:c,subtitle:n,icon:j,hover:s=!0})=>e.jsxs(Z,{variant:"card",className:`rounded-2xl p-6 ${s?"hover:scale-105":""} ${o}`,shadow:!0,children:[(c||n||j)&&e.jsxs("div",{className:"flex items-center mb-4",children:[j&&e.jsx("div",{className:"w-12 h-12 bg-white/20 dark:bg-white/10 rounded-xl flex items-center justify-center mr-4",children:j}),e.jsxs("div",{children:[c&&e.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white mb-1",children:c}),n&&e.jsx("p",{className:"text-white/70 dark:text-white/60 text-sm",children:n})]})]}),r]}),L=({label:r,name:o,value:c,onChange:n,accept:j="image/*,.pdf",required:s=!1,error:y,className:C,description:l})=>{const[g,h]=x.useState(!1),N=v=>{v&&n(v)},a=v=>{v.preventDefault(),h(!1);const t=Array.from(v.dataTransfer.files);t.length>0&&N(t[0])},u=v=>{v.preventDefault(),h(!0)},m=v=>{v.preventDefault(),h(!1)},i=v=>{var w;const t=(w=v.target.files)==null?void 0:w[0];t&&N(t)},f=()=>{n(void 0)};return e.jsxs("div",{className:F("space-y-2",C),children:[e.jsxs("label",{className:"block text-sm font-medium text-white/90",children:[r,s&&e.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),l&&e.jsx("p",{className:"text-xs text-white/70",children:l}),e.jsx("div",{className:F("relative border-2 border-dashed rounded-lg p-6 transition-all duration-300",g?"border-blue-400 bg-blue-500/10":"border-white/20 hover:border-white/40",y?"border-red-400 bg-red-500/10":"bg-white/5 backdrop-blur-md","hover:bg-white/10"),onDrop:a,onDragOver:u,onDragLeave:m,children:c?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500/20 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:c.name}),e.jsxs("p",{className:"text-xs text-white/70",children:[(c.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{type:"button",onClick:f,className:"text-red-400 hover:text-red-300 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-4 bg-white/10 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-white/70",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),e.jsx("p",{className:"text-sm text-white/80 mb-2",children:g?"Drop your file here":"Drag and drop your file here"}),e.jsx("p",{className:"text-xs text-white/60 mb-4",children:"or click to browse (JPG, PNG, PDF up to 10MB)"}),e.jsx("input",{type:"file",name:o,accept:j,onChange:i,className:"hidden",id:`file-input-${o}`,required:s}),e.jsxs("label",{htmlFor:`file-input-${o}`,className:"inline-flex items-center px-4 py-2 bg-white/10 hover:bg-white/20 text-white text-sm font-medium rounded-lg transition-all duration-300 cursor-pointer border border-white/20",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Choose File"]})]})}),y&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:y})]})},Q=({userId:r,className:o=""})=>{const[c,n]=x.useState([]),[j,s]=x.useState(!0);x.useEffect(()=>{y()},[r]);const y=async()=>{try{const l=localStorage.getItem("authToken"),g=await fetch(`/api/users/${r}/saved-vehicles`,{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(g.ok){const h=await g.json();n(h.vehicles||[])}}catch(l){console.error("Error fetching saved vehicles:",l),n([{id:"1",hostId:"host1",make:"Toyota",model:"Hilux",year:2022,type:"bakkie",pricePerDay:250,location:"Cape Town",images:["https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?w=400"],features:[],status:"approved",approvalStatus:"approved",description:"Perfect for your South African adventure!",fuelType:"petrol",transmission:"manual",seats:5,doors:4,isAvailable:!0,rating:4.8,reviewCount:24,createdAt:new Date,updatedAt:new Date}])}finally{s(!1)}},C=async l=>{try{const g=localStorage.getItem("authToken");await fetch(`/api/users/${r}/saved-vehicles/${l}`,{method:"DELETE",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}}),n(h=>h.filter(N=>N.id!==l))}catch(g){console.error("Error removing saved vehicle:",g)}};return j?e.jsx("div",{className:`space-y-4 ${o}`,children:[...Array(3)].map((l,g)=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-32 bg-white/10 rounded-xl"})},g))}):e.jsx("div",{className:`space-y-4 ${o}`,children:c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(d,{name:"Heart",size:"lg",className:"text-white/50 mb-4"}),e.jsx("p",{className:"text-white/70",children:"No saved vehicles yet"}),e.jsx("p",{className:"text-white/50 text-sm",children:"Browse vehicles and save your favorites!"})]}):c.map(l=>e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20 hover:bg-white/20 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:l.images[0],alt:`${l.make} ${l.model}`,className:"w-20 h-20 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:[l.year," ",l.make," ",l.model]}),e.jsx("p",{className:"text-white/70 text-sm mb-2",children:l.location}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-yellow-400 flex items-center space-x-1",children:[e.jsx(d,{name:"Star",size:"sm"}),e.jsx("span",{children:l.rating})]}),e.jsxs("span",{className:"text-white/70",children:["(",l.reviewCount," reviews)"]}),e.jsxs("span",{className:"text-green-400 font-semibold",children:["R",l.pricePerDay,"/day"]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-500/20 text-blue-300 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"View Details"}),e.jsx("button",{onClick:()=>C(l.id),className:"px-3 py-1 bg-red-500/20 text-red-300 rounded-lg text-sm hover:bg-red-500/30 transition-colors",children:"Remove"})]})]})},l.id))})},ee=({userId:r,className:o=""})=>{const[c,n]=x.useState([]),[j,s]=x.useState(!0);x.useEffect(()=>{y()},[r]);const y=async()=>{try{const h=localStorage.getItem("authToken"),N=await fetch(`/api/users/${r}/documents`,{headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}});if(N.ok){const a=await N.json();n(a.documents||[])}}catch(h){console.error("Error fetching documents:",h),n([{id:"1",type:"driver_license",name:"Driver License",expiryDate:new Date(Date.now()+30*24*60*60*1e3),status:"expiring_soon",daysUntilExpiry:30},{id:"2",type:"id_document",name:"South African ID",expiryDate:new Date(Date.now()+365*24*60*60*1e3),status:"valid",daysUntilExpiry:365}])}finally{s(!1)}},C=h=>{switch(h){case"expired":return"text-red-400 bg-red-500/20 border-red-500/30";case"expiring_soon":return"text-yellow-400 bg-yellow-500/20 border-yellow-500/30";case"valid":return"text-green-400 bg-green-500/20 border-green-500/30";default:return"text-gray-400 bg-gray-500/20 border-gray-500/30"}},l=h=>{switch(h){case"expired":return"XCircle";case"expiring_soon":return"AlertTriangle";case"valid":return"CheckCircle";default:return"FileText"}},g=h=>{switch(h){case"driver_license":return"Car";case"id_document":return"CreditCard";case"proof_of_address":return"Home";default:return"FileText"}};return j?e.jsx("div",{className:`space-y-3 ${o}`,children:[...Array(2)].map((h,N)=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-16 bg-white/10 rounded-lg"})},N))}):e.jsx("div",{className:`space-y-3 ${o}`,children:c.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(d,{name:"FileText",size:"lg",className:"text-white/50 mb-2"}),e.jsx("p",{className:"text-white/70 text-sm",children:"No documents uploaded yet"})]}):c.map(h=>e.jsx("div",{className:`p-3 rounded-lg border ${C(h.status)}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{name:g(h.type),size:"sm"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:h.name}),e.jsxs("p",{className:"text-xs text-white/70",children:["Expires: ",h.expiryDate.toLocaleDateString()]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{name:l(h.status),size:"sm"}),e.jsx("span",{className:"text-xs",children:h.status==="expired"?"Expired":h.status==="expiring_soon"?`${h.daysUntilExpiry} days`:"Valid"})]}),h.status==="expiring_soon"&&e.jsx("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors mt-1",children:"Renew Now"})]})]})},h.id))})},te=({userId:r,className:o=""})=>{const[c,n]=x.useState([]),[j,s]=x.useState(!0),[y,C]=x.useState("");x.useEffect(()=>{l()},[r]);const l=async()=>{try{const a=localStorage.getItem("authToken"),u=await fetch(`/api/users/${r}/promotions`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(u.ok){const m=await u.json();n(m.promotions||[])}}catch(a){console.error("Error fetching promotions:",a),n([{id:"1",code:"WELCOME20",title:"Welcome Bonus",description:"20% off your first booking",discountType:"percentage",discountValue:20,minBookingAmount:500,validUntil:new Date(Date.now()+30*24*60*60*1e3),isActive:!0,usageCount:0,maxUsage:1},{id:"2",code:"SAVE100",title:"Fixed Discount",description:"R100 off bookings over R1000",discountType:"fixed",discountValue:100,minBookingAmount:1e3,validUntil:new Date(Date.now()+14*24*60*60*1e3),isActive:!0,usageCount:0,maxUsage:3}])}finally{s(!1)}},g=async a=>{try{const u=localStorage.getItem("authToken");(await fetch(`/api/users/${r}/promotions/apply`,{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify({code:a})})).ok&&C(a)}catch(u){console.error("Error applying promo code:",u)}},h=a=>a.discountType==="percentage"?`${a.discountValue}% off`:`R${a.discountValue} off`,N=a=>new Date>a;return j?e.jsx("div",{className:`space-y-3 ${o}`,children:[...Array(2)].map((a,u)=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-20 bg-white/10 rounded-lg"})},u))}):e.jsx("div",{className:`space-y-4 ${o}`,children:c.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(d,{name:"Gift",size:"lg",className:"text-white/50 mb-2"}),e.jsx("p",{className:"text-white/70 text-sm",children:"No promotions available"})]}):c.map(a=>e.jsxs("div",{className:`p-4 rounded-lg border ${N(a.validUntil)?"bg-gray-500/20 border-gray-500/30":"bg-green-500/20 border-green-500/30"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{name:"Gift",size:"sm"}),e.jsx("span",{className:"font-semibold text-white",children:a.title}),e.jsxs("span",{className:"text-xs text-white/70",children:["(",a.code,")"]})]}),e.jsx("span",{className:`text-sm font-bold ${N(a.validUntil)?"text-gray-400":"text-green-400"}`,children:h(a)})]}),e.jsx("p",{className:"text-sm text-white/80 mb-3",children:a.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-white/60",children:["Valid until: ",a.validUntil.toLocaleDateString(),a.minBookingAmount&&e.jsxs("span",{className:"ml-2",children:["• Min: R",a.minBookingAmount]})]}),!N(a.validUntil)&&e.jsx("button",{onClick:()=>g(a.code),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${y===a.code?"bg-blue-500/20 text-blue-300":"bg-white/10 text-white hover:bg-white/20"}`,children:y===a.code?"Applied":"Use Code"})]})]},a.id))})},se=({basePrice:r,onCalculate:o,className:c=""})=>{const[n,j]=x.useState("daily"),[s,y]=x.useState(1),[C,l]=x.useState({insurance:!1,gps:!1,childSeat:!1,driver:!1,fuel:!1}),g={insurance:50,gps:30,childSeat:25,driver:200,fuel:100},h=()=>{let a=r*s;n==="hourly"?a=r*s:n==="weekly"&&(a=r*s*7*.85);let u=0;const m=Object.entries(C).filter(([t,w])=>w).map(([t,w])=>({name:t,price:g[t]}));u=m.reduce((t,w)=>t+w.price,0);const i=(a+u)*.1,f=a+u+i,v={baseTotal:a,addOns:m,addOnTotal:u,serviceFee:i,total:f,rentalType:n,duration:s};return o(f,v),v},N=(a,u)=>{l(m=>({...m,[a]:u}))};return H.useEffect(()=>{h()},[n,s,C,r]),e.jsxs("div",{className:`space-y-4 ${c}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Rental Type"}),e.jsx("div",{className:"flex space-x-2",children:[{value:"hourly",label:"Hourly",icon:"Clock"},{value:"daily",label:"Daily",icon:"Calendar"},{value:"weekly",label:"Weekly",icon:"Calendar"}].map(a=>e.jsxs("button",{onClick:()=>j(a.value),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all ${n===a.value?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-white/10 text-white/70 border border-white/20 hover:bg-white/20"}`,children:[e.jsx(d,{name:a.icon,size:"sm",className:"mr-1"}),a.label]},a.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-white/90 mb-2",children:["Duration (",n==="hourly"?"Hours":n==="daily"?"Days":"Weeks",")"]}),e.jsx("input",{type:"number",min:"1",value:s,onChange:a=>y(parseInt(a.target.value)||1),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Add-ons"}),e.jsx("div",{className:"space-y-2",children:[{key:"insurance",label:"Comprehensive Insurance",icon:"Shield",price:g.insurance},{key:"gps",label:"GPS Navigation",icon:"MapPin",price:g.gps},{key:"childSeat",label:"Child Safety Seat",icon:"Baby",price:g.childSeat},{key:"driver",label:"Professional Driver",icon:"User",price:g.driver},{key:"fuel",label:"Full Tank of Fuel",icon:"Fuel",price:g.fuel}].map(a=>e.jsxs("label",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:C[a.key],onChange:u=>N(a.key,u.target.checked),className:"w-4 h-4 text-blue-600 bg-white/10 border-white/20 rounded focus:ring-blue-500"}),e.jsx(d,{name:a.icon,size:"sm"}),e.jsx("span",{className:"text-white/90 text-sm",children:a.label})]}),e.jsxs("span",{className:"text-white/70 text-sm",children:["R",a.price]})]},a.key))})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20",children:[e.jsx("h4",{className:"text-sm font-medium text-white/90 mb-3",children:"Cost Breakdown"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-white/70",children:["Base (",n,"):"]}),e.jsxs("span",{className:"text-white",children:["R",r," × ",s]})]}),Object.entries(C).filter(([a,u])=>u).map(([a,u])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-white/70 capitalize",children:[a.replace(/([A-Z])/g," $1"),":"]}),e.jsxs("span",{className:"text-white",children:["R",g[a]]})]},a)),e.jsxs("div",{className:"flex justify-between border-t border-white/20 pt-2",children:[e.jsx("span",{className:"text-white/70",children:"Service Fee (10%):"}),e.jsxs("span",{className:"text-white",children:["R",Math.round(r*s*.1)]})]}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg border-t border-white/20 pt-2",children:[e.jsx("span",{className:"text-white",children:"Total:"}),e.jsxs("span",{className:"text-green-400",children:["R",Math.round(h().total)]})]})]})]})]})},ie=({vehicleId:r,basePrice:o,onPriceUpdate:c,className:n=""})=>{const[j,s]=x.useState([]),[y,C]=x.useState(o),[l,g]=x.useState(!0);x.useEffect(()=>{h()},[r]),x.useEffect(()=>{N()},[j,o]);const h=async()=>{try{const m=localStorage.getItem("authToken"),i=await fetch(`/api/vehicles/${r}/pricing-rules`,{headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});if(i.ok){const f=await i.json();s(f.rules||[])}}catch(m){console.error("Error fetching pricing rules:",m),s([{id:"1",name:"Weekend Premium",type:"time",conditions:{dayOfWeek:[0,6]},multiplier:1.5,isActive:!0},{id:"2",name:"Peak Hours",type:"time",conditions:{timeRange:{start:"07:00",end:"09:00"}},multiplier:1.3,isActive:!0},{id:"3",name:"High Demand",type:"demand",conditions:{demandLevel:"high"},multiplier:1.4,isActive:!0}])}finally{g(!1)}},N=()=>{let m=o;const i=new Date,f=i.getDay(),v=i.toTimeString().slice(0,5),w=j.filter(k=>{var P;if(!k.isActive)return!1;switch(k.type){case"time":if((P=k.conditions.dayOfWeek)!=null&&P.includes(f))return!0;if(k.conditions.timeRange){const{start:p,end:R}=k.conditions.timeRange;return v>=p&&v<=R}return!1;case"demand":return k.conditions.demandLevel==="high";default:return!1}}).reduce((k,P)=>Math.max(k,P.multiplier),1);m=Math.round(o*w),C(m),c(m)},a=m=>{s(i=>i.map(f=>f.id===m?{...f,isActive:!f.isActive}:f))},u=m=>{s(i=>i.filter(f=>f.id!==m))};return l?e.jsx("div",{className:`space-y-4 ${n}`,children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-white/10 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-32 bg-white/10 rounded-lg"})]})}):e.jsxs("div",{className:`space-y-4 ${n}`,children:[e.jsx("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Current Price"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Based on active pricing rules"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["R",y]}),e.jsx("div",{className:"text-sm text-white/70",children:y>o?`+${Math.round((y-o)/o*100)}%`:"Base price"})]})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-white/90 mb-3",children:"Active Pricing Rules"}),e.jsx("div",{className:"space-y-2",children:j.filter(m=>m.isActive).map(m=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-500/20 border border-green-500/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{name:"Zap",size:"sm"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:m.name}),e.jsxs("p",{className:"text-xs text-white/70",children:[m.type==="time"&&"Time-based",m.type==="demand"&&"Demand-based",m.type==="seasonal"&&"Seasonal",m.type==="event"&&"Event-based"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-green-300",children:["+",Math.round((m.multiplier-1)*100),"%"]}),e.jsx("button",{onClick:()=>a(m.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"✕"})]})]},m.id))})]}),j.filter(m=>!m.isActive).length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-white/90 mb-3",children:"Inactive Rules"}),e.jsx("div",{className:"space-y-2",children:j.filter(m=>!m.isActive).map(m=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 border border-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{name:"Pause",size:"sm"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white/70",children:m.name}),e.jsxs("p",{className:"text-xs text-white/50",children:[m.type==="time"&&"Time-based",m.type==="demand"&&"Demand-based",m.type==="seasonal"&&"Seasonal",m.type==="event"&&"Event-based"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>a(m.id),className:"text-green-400 hover:text-green-300 transition-colors",children:e.jsx(d,{name:"Play",size:"sm"})}),e.jsx("button",{onClick:()=>u(m.id),className:"text-red-400 hover:text-red-300 transition-colors",children:e.jsx(d,{name:"Trash",size:"sm"})})]})]},m.id))})]}),e.jsx("button",{className:"w-full p-3 border-2 border-dashed border-white/30 rounded-lg text-white/70 hover:border-white/50 hover:text-white transition-colors",children:"+ Add New Pricing Rule"})]})},ae=({hostId:r,className:o=""})=>{const[c,n]=x.useState([]),[j,s]=x.useState(!0),[y,C]=x.useState(!1),[l,g]=x.useState([]);x.useEffect(()=>{h()},[r]);const h=async()=>{try{const i=localStorage.getItem("authToken"),f=await fetch(`/api/hosts/${r}/fleet`,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(f.ok){const v=await f.json();n(v.vehicles||[])}}catch(i){console.error("Error fetching fleet:",i),n([{id:"1",hostId:r,make:"Toyota",model:"Hilux",year:2022,type:"bakkie",pricePerDay:250,location:"Cape Town",images:["https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?w=400"],features:[],status:"approved",approvalStatus:"approved",description:"Perfect for your South African adventure!",fuelType:"petrol",transmission:"manual",seats:5,doors:4,isAvailable:!0,rating:4.8,reviewCount:24,createdAt:new Date,updatedAt:new Date},{id:"2",hostId:r,make:"BMW",model:"X3",year:2021,type:"suv",pricePerDay:400,location:"Johannesburg",images:["https://images.unsplash.com/photo-1549317336-206569e8475c?w=400"],features:[],status:"pending",approvalStatus:"pending",description:"Luxury SUV for city and country driving.",fuelType:"petrol",transmission:"automatic",seats:5,doors:4,isAvailable:!0,rating:4.9,reviewCount:12,createdAt:new Date,updatedAt:new Date}])}finally{s(!1)}},N=i=>{g(f=>f.includes(i)?f.filter(v=>v!==i):[...f,i])},a=async i=>{if(l.length!==0)try{const f=localStorage.getItem("authToken");await fetch(`/api/hosts/${r}/fleet/bulk-action`,{method:"POST",headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"},body:JSON.stringify({vehicleIds:l,action:i})}),n(v=>{switch(i){case"activate":return v.map(t=>l.includes(t.id)?{...t,isAvailable:!0}:t);case"deactivate":return v.map(t=>l.includes(t.id)?{...t,isAvailable:!1}:t);case"delete":return v.filter(t=>!l.includes(t.id));default:return v}}),g([])}catch(f){console.error("Error performing bulk action:",f)}},u=i=>{switch(i){case"approved":return"text-green-400 bg-green-500/20 border-green-500/30";case"pending":return"text-yellow-400 bg-yellow-500/20 border-yellow-500/30";case"rejected":return"text-red-400 bg-red-500/20 border-red-500/30";default:return"text-gray-400 bg-gray-500/20 border-gray-500/30"}},m=i=>{switch(i){case"approved":return"CheckCircle";case"pending":return"Clock";case"rejected":return"XCircle";default:return"FileText"}};return j?e.jsx("div",{className:`space-y-4 ${o}`,children:[...Array(3)].map((i,f)=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-24 bg-white/10 rounded-lg"})},f))}):e.jsxs("div",{className:`space-y-4 ${o}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Fleet Management"}),e.jsxs("p",{className:"text-white/70 text-sm",children:[c.length," vehicles in your fleet"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>C(!y),className:"px-3 py-1 bg-blue-500/20 text-blue-300 rounded-lg text-sm hover:bg-blue-500/30 transition-colors flex items-center space-x-1",children:[e.jsx(d,{name:"Upload",size:"sm"}),e.jsx("span",{children:"Bulk Upload"})]}),e.jsx("button",{className:"px-3 py-1 bg-green-500/20 text-green-300 rounded-lg text-sm hover:bg-green-500/30 transition-colors",children:"+ Add Vehicle"})]})]}),l.length>0&&e.jsx("div",{className:"bg-blue-500/20 border border-blue-500/30 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-blue-300 text-sm",children:[l.length," vehicle(s) selected"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>a("activate"),className:"px-2 py-1 bg-green-500/20 text-green-300 rounded text-xs hover:bg-green-500/30 transition-colors",children:"Activate"}),e.jsx("button",{onClick:()=>a("deactivate"),className:"px-2 py-1 bg-yellow-500/20 text-yellow-300 rounded text-xs hover:bg-yellow-500/30 transition-colors",children:"Deactivate"}),e.jsx("button",{onClick:()=>a("delete"),className:"px-2 py-1 bg-red-500/20 text-red-300 rounded text-xs hover:bg-red-500/30 transition-colors",children:"Delete"})]})]})}),e.jsx("div",{className:"space-y-3",children:c.map(i=>e.jsx("div",{className:`p-4 rounded-lg border ${l.includes(i.id)?"bg-blue-500/20 border-blue-500/30":"bg-white/10 border-white/20"} hover:bg-white/20 transition-all duration-300`,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"checkbox",checked:l.includes(i.id),onChange:()=>N(i.id),className:"w-4 h-4 text-blue-600 bg-white/10 border-white/20 rounded focus:ring-blue-500"}),e.jsx("img",{src:i.images[0],alt:`${i.make} ${i.model}`,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white",children:[i.year," ",i.make," ",i.model]}),e.jsxs("div",{className:`px-2 py-1 rounded-full text-xs border ${u(i.approvalStatus)} flex items-center space-x-1`,children:[e.jsx(d,{name:m(i.approvalStatus),size:"sm"}),e.jsx("span",{children:i.approvalStatus})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-white/70",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(d,{name:"MapPin",size:"sm"}),e.jsx("span",{children:i.location})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(d,{name:"DollarSign",size:"sm"}),e.jsxs("span",{children:["R",i.pricePerDay,"/day"]})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(d,{name:"Star",size:"sm"}),e.jsxs("span",{children:[i.rating," (",i.reviewCount,")"]})]}),e.jsx("span",{className:`${i.isAvailable?"text-green-400":"text-red-400"}`,children:i.isAvailable?"Available":"Unavailable"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-1 bg-white/10 text-white rounded-lg text-sm hover:bg-white/20 transition-colors",children:"Edit"}),e.jsx("button",{className:"px-3 py-1 bg-white/10 text-white rounded-lg text-sm hover:bg-white/20 transition-colors",children:"View"})]})]})},i.id))}),c.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx(d,{name:"Car",size:"lg",className:"text-white/50 mx-auto"})}),e.jsx("p",{className:"text-white/70",children:"No vehicles in your fleet yet"}),e.jsx("p",{className:"text-white/50 text-sm",children:"Add your first vehicle to start earning!"})]})]})};class re{constructor(){I(this,"PROFILE_STATUS_KEY","profileStatus")}getProfileStatus(){try{const o=localStorage.getItem(this.PROFILE_STATUS_KEY);if(o){const c=JSON.parse(o);return{...c,completionDate:c.completionDate?new Date(c.completionDate):void 0,submittedAt:c.submittedAt?new Date(c.submittedAt):void 0}}}catch(o){console.error("Error reading profile status:",o)}return{isCompleted:!1,approvalStatus:"pending"}}setProfileCompleted(o){const c={isCompleted:!0,completionDate:new Date,approvalStatus:"pending",submittedAt:new Date};localStorage.setItem(this.PROFILE_STATUS_KEY,JSON.stringify(c))}updateApprovalStatus(o,c,n){const s={...this.getProfileStatus(),approvalStatus:o,adminNotes:c,rejectionReason:n};localStorage.setItem(this.PROFILE_STATUS_KEY,JSON.stringify(s))}clearProfileStatus(){localStorage.removeItem(this.PROFILE_STATUS_KEY)}isProfileCompleted(){return this.getProfileStatus().isCompleted}isProfileApproved(){return this.getProfileStatus().approvalStatus==="approved"}isProfilePending(){return this.getProfileStatus().approvalStatus==="pending"}isProfileRejected(){return this.getProfileStatus().approvalStatus==="rejected"}getApprovalStatusText(){switch(this.getProfileStatus().approvalStatus){case"approved":return"Profile Approved - You can now book vehicles!";case"rejected":return"Profile Rejected - Please update and resubmit";case"pending":return"Profile Pending Approval - Please wait for admin review";default:return"Profile Status Unknown"}}getApprovalStatusColor(){switch(this.getProfileStatus().approvalStatus){case"approved":return"text-green-400";case"rejected":return"text-red-400";case"pending":return"text-yellow-400";default:return"text-gray-400"}}getApprovalStatusBadgeColor(){switch(this.getProfileStatus().approvalStatus){case"approved":return"bg-green-500/20 text-green-300 border-green-500/30";case"rejected":return"bg-red-500/20 text-red-300 border-red-500/30";case"pending":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";default:return"bg-gray-500/20 text-gray-300 border-gray-500/30"}}}const $=new re,q=({userRole:r,onProfileComplete:o,className:c=""})=>{const[n,j]=x.useState(1),[s,y]=x.useState({dateOfBirth:"",address:"",city:"",province:"",postalCode:"",emergencyContact:"",emergencyPhone:"",idDocument:void 0,driverLicense:void 0,proofOfAddress:void 0,businessName:"",businessRegistration:"",bankAccount:"",taxNumber:"",vehicleRegistration:void 0,roadworthyCertificate:void 0,insuranceCertificate:void 0}),[C,l]=x.useState(!1),[g,h]=x.useState(""),N=(t,w)=>{y(k=>({...k,[t]:w}))},a=(t,w)=>{y(k=>({...k,[t]:w}))},u=async()=>{l(!0),h("");try{const w=(r==="renter"?["dateOfBirth","address","city","province","postalCode","emergencyContact","emergencyPhone"]:["dateOfBirth","address","city","province","postalCode","businessName","businessRegistration","bankAccount","taxNumber"]).filter(p=>!s[p]);if(w.length>0){h(`Please fill in all required fields: ${w.join(", ")}`),l(!1);return}const P=(r==="renter"?["idDocument","driverLicense","proofOfAddress"]:["idDocument","driverLicense","proofOfAddress","vehicleRegistration","roadworthyCertificate","insuranceCertificate"]).filter(p=>!s[p]);if(P.length>0){h(`Please upload all required documents: ${P.join(", ")}`),l(!1);return}await o(s),$.setProfileCompleted(s)}catch{h("Failed to complete profile. Please try again.")}finally{l(!1)}},m=()=>{n<3&&j(n+1)},i=()=>{n>1&&j(n-1)},f=()=>{switch(n){case 1:return"Personal Information";case 2:return r==="renter"?"Identity Documents":"Business & Vehicle Documents";case 3:return"Review & Submit";default:return"Profile Completion"}},v=()=>{switch(n){case 1:return"User";case 2:return"FileText";case 3:return"CheckCircle";default:return"Clipboard"}};return e.jsxs("div",{className:`space-y-6 ${c}`,children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{name:v(),size:"lg"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:f()}),e.jsxs("p",{className:"text-white/70 text-sm",children:["Step ",n," of 3 - Complete your profile to start using RideShare SA"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-white/70",children:"Progress"}),e.jsxs("div",{className:"text-lg font-semibold text-white",children:[Math.round(n/3*100),"%"]})]})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${n/3*100}%`}})})]}),n===1&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Date of Birth *"}),e.jsx("input",{type:"date",value:s.dateOfBirth,onChange:t=>N("dateOfBirth",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Emergency Contact *"}),e.jsx("input",{type:"text",value:s.emergencyContact,onChange:t=>N("emergencyContact",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Full name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Emergency Phone *"}),e.jsx("input",{type:"tel",value:s.emergencyPhone,onChange:t=>N("emergencyPhone",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"+27 82 123 4567",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Address *"}),e.jsx("input",{type:"text",value:s.address,onChange:t=>N("address",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Street address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"City *"}),e.jsx("input",{type:"text",value:s.city,onChange:t=>N("city",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Cape Town",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Province *"}),e.jsxs("select",{value:s.province,onChange:t=>N("province",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/20",required:!0,children:[e.jsx("option",{value:"",children:"Select Province"}),e.jsx("option",{value:"Western Cape",children:"Western Cape"}),e.jsx("option",{value:"Eastern Cape",children:"Eastern Cape"}),e.jsx("option",{value:"Northern Cape",children:"Northern Cape"}),e.jsx("option",{value:"Free State",children:"Free State"}),e.jsx("option",{value:"KwaZulu-Natal",children:"KwaZulu-Natal"}),e.jsx("option",{value:"North West",children:"North West"}),e.jsx("option",{value:"Gauteng",children:"Gauteng"}),e.jsx("option",{value:"Mpumalanga",children:"Mpumalanga"}),e.jsx("option",{value:"Limpopo",children:"Limpopo"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Postal Code *"}),e.jsx("input",{type:"text",value:s.postalCode,onChange:t=>N("postalCode",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"8001",required:!0})]})]})]}),n===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Identity Documents"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(L,{label:"ID Document",name:"idDocument",value:s.idDocument,onChange:t=>a("idDocument",t),required:!0,description:"Upload a clear photo of your South African ID or passport"}),e.jsx(L,{label:"Driver's License",name:"driverLicense",value:s.driverLicense,onChange:t=>a("driverLicense",t),required:!0,description:"Upload a clear photo of your valid driver's license"}),e.jsx(L,{label:"Proof of Address",name:"proofOfAddress",value:s.proofOfAddress,onChange:t=>a("proofOfAddress",t),required:!0,description:"Upload a recent utility bill or bank statement (not older than 3 months)"})]})]}),r==="host"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Business Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Business Name *"}),e.jsx("input",{type:"text",value:s.businessName,onChange:t=>N("businessName",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Your business name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Business Registration Number *"}),e.jsx("input",{type:"text",value:s.businessRegistration,onChange:t=>N("businessRegistration",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"CIPC registration number",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Bank Account Number *"}),e.jsx("input",{type:"text",value:s.bankAccount,onChange:t=>N("bankAccount",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Your bank account number",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Tax Number *"}),e.jsx("input",{type:"text",value:s.taxNumber,onChange:t=>N("taxNumber",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"SARS tax number",required:!0})]})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Vehicle Documents"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(L,{label:"Vehicle Registration",name:"vehicleRegistration",value:s.vehicleRegistration,onChange:t=>a("vehicleRegistration",t),required:!0,description:"Official vehicle registration document"}),e.jsx(L,{label:"Roadworthy Certificate",name:"roadworthyCertificate",value:s.roadworthyCertificate,onChange:t=>a("roadworthyCertificate",t),required:!0,description:"Valid roadworthy certificate"}),e.jsx(L,{label:"Insurance Certificate",name:"insuranceCertificate",value:s.insuranceCertificate,onChange:t=>a("insuranceCertificate",t),required:!0,description:"Comprehensive insurance certificate"})]})]})]})]}),n===3&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Review Your Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white/70",children:"Date of Birth:"}),e.jsx("span",{className:"text-white ml-2",children:s.dateOfBirth})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/70",children:"Address:"}),e.jsx("span",{className:"text-white ml-2",children:s.address})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/70",children:"City:"}),e.jsx("span",{className:"text-white ml-2",children:s.city})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/70",children:"Province:"}),e.jsx("span",{className:"text-white ml-2",children:s.province})]}),r==="host"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white/70",children:"Business Name:"}),e.jsx("span",{className:"text-white ml-2",children:s.businessName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/70",children:"Business Registration:"}),e.jsx("span",{className:"text-white ml-2",children:s.businessRegistration})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-white/20",children:[e.jsx("h4",{className:"text-md font-medium text-white mb-2",children:"Uploaded Documents"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:s.idDocument?"text-green-400":"text-red-400",children:"●"}),e.jsx("span",{className:"text-white/70",children:"ID Document"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:s.driverLicense?"text-green-400":"text-red-400",children:"●"}),e.jsx("span",{className:"text-white/70",children:"Driver's License"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:s.proofOfAddress?"text-green-400":"text-red-400",children:"●"}),e.jsx("span",{className:"text-white/70",children:"Proof of Address"})]}),r==="host"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:s.vehicleRegistration?"text-green-400":"text-red-400",children:"●"}),e.jsx("span",{className:"text-white/70",children:"Vehicle Registration"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:s.roadworthyCertificate?"text-green-400":"text-red-400",children:"●"}),e.jsx("span",{className:"text-white/70",children:"Roadworthy Certificate"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:s.insuranceCertificate?"text-green-400":"text-red-400",children:"●"}),e.jsx("span",{className:"text-white/70",children:"Insurance Certificate"})]})]})]})]})]})]}),g&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-red-300 text-sm",children:g})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:i,disabled:n===1,className:`px-6 py-2 rounded-lg font-medium transition-all ${n===1?"bg-gray-500/20 text-gray-400 cursor-not-allowed":"bg-white/10 text-white hover:bg-white/20"}`,children:"Previous"}),e.jsx("div",{className:"flex space-x-3",children:n<3?e.jsx("button",{onClick:m,className:"px-6 py-2 bg-blue-500/20 text-blue-300 rounded-lg font-medium hover:bg-blue-500/30 transition-all",children:"Next"}):e.jsx("button",{onClick:u,disabled:C,className:`px-6 py-2 rounded-lg font-medium transition-all ${C?"bg-gray-500/20 text-gray-400 cursor-not-allowed":"bg-green-500/20 text-green-300 hover:bg-green-500/30"}`,children:C?"Submitting...":"Submit for Approval"})})]})]})},le=({onSubmit:r,onCancel:o,className:c=""})=>{var R,B,z;const[n,j]=x.useState(1),[s,y]=x.useState({make:"",model:"",year:new Date().getFullYear(),type:"car",pricePerDay:0,location:"",description:"",features:[],images:[],documents:{registration:void 0,roadworthy:void 0,insurance:void 0}}),[C,l]=x.useState(!1),[g,h]=x.useState(""),N=[{value:"car",label:"Car",icon:"Car"},{value:"suv",label:"SUV",icon:"Truck"},{value:"bakkie",label:"Bakkie",icon:"Truck"},{value:"van",label:"Van",icon:"Truck"},{value:"motorcycle",label:"Motorcycle",icon:"Bike"}],a=[{id:"aircon",name:"Air Conditioning",category:"comfort"},{id:"bluetooth",name:"Bluetooth",category:"entertainment"},{id:"gps",name:"GPS Navigation",category:"convenience"},{id:"usb",name:"USB Charging",category:"convenience"},{id:"backup_camera",name:"Backup Camera",category:"safety"},{id:"parking_sensors",name:"Parking Sensors",category:"safety"},{id:"cruise_control",name:"Cruise Control",category:"comfort"},{id:"leather_seats",name:"Leather Seats",category:"comfort"}],u=(b,D)=>{y(A=>({...A,[b]:D}))},m=b=>{y(D=>({...D,features:D.features.some(A=>A.id===b.id)?D.features.filter(A=>A.id!==b.id):[...D.features,b]}))},i=(b,D)=>{y(A=>({...A,documents:{...A.documents,[b]:D}}))},f=b=>{if(b){const D=Array.from(b);y(A=>({...A,images:[...A.images,...D]}))}},v=b=>{var D,A,E;switch(b){case 1:return!!(s.make&&s.model&&s.year&&s.type&&s.pricePerDay>0);case 2:return!!(s.location&&s.description);case 3:return s.images.length>0;case 4:return!!((D=s.documents)!=null&&D.registration&&((A=s.documents)!=null&&A.roadworthy)&&((E=s.documents)!=null&&E.insurance));default:return!0}},t=()=>{v(n)?j(b=>Math.min(b+1,4)):h("Please fill in all required fields before proceeding.")},w=()=>{j(b=>Math.max(b-1,1))},k=async()=>{if(!v(4)){h("Please complete all required fields and upload all documents.");return}l(!0),h("");try{await r(s)}catch{h("Failed to submit vehicle listing. Please try again.")}finally{l(!1)}},P=()=>{switch(n){case 1:return"Vehicle Details";case 2:return"Location & Description";case 3:return"Vehicle Photos";case 4:return"Required Documents";default:return"Vehicle Listing"}},p=()=>{switch(n){case 1:return"Car";case 2:return"MapPin";case 3:return"Camera";case 4:return"FileText";default:return"Clipboard"}};return e.jsxs("div",{className:`space-y-6 ${c}`,children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{name:p(),size:"lg"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:P()}),e.jsxs("p",{className:"text-white/70 text-sm",children:["Step ",n," of 4 - Submit your vehicle for admin approval"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-white/70",children:"Progress"}),e.jsxs("div",{className:"text-lg font-semibold text-white",children:[Math.round(n/4*100),"%"]})]})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${n/4*100}%`}})})]}),n===1&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Vehicle Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Make *"}),e.jsx("input",{type:"text",value:s.make,onChange:b=>u("make",b.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Toyota",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Model *"}),e.jsx("input",{type:"text",value:s.model,onChange:b=>u("model",b.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Corolla",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Year *"}),e.jsx("input",{type:"number",value:s.year,onChange:b=>u("year",parseInt(b.target.value)),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",min:"1990",max:new Date().getFullYear()+1,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Price per Day (R) *"}),e.jsx("input",{type:"number",value:s.pricePerDay,onChange:b=>u("pricePerDay",parseFloat(b.target.value)),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",min:"0",step:"0.01",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Vehicle Type *"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:N.map(b=>e.jsxs("button",{onClick:()=>u("type",b.value),className:`p-3 rounded-lg text-sm font-medium transition-all ${s.type===b.value?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-white/10 text-white/70 border border-white/20 hover:bg-white/20"}`,children:[e.jsx(d,{name:b.icon,size:"sm",className:"mr-2"}),b.label]},b.value))})]})]})]}),n===2&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Location & Description"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Location *"}),e.jsx("input",{type:"text",value:s.location,onChange:b=>u("location",b.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Cape Town, Western Cape",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Description *"}),e.jsx("textarea",{value:s.description,onChange:b=>u("description",b.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",rows:4,placeholder:"Describe your vehicle, its condition, and any special features...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Vehicle Features"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:a.map(b=>e.jsxs("label",{className:"flex items-center space-x-2 p-2 bg-white/5 rounded-lg hover:bg-white/10 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.features.some(D=>D.id===b.id),onChange:()=>m(b),className:"w-4 h-4 text-blue-600 bg-white/10 border-white/20 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-white/90",children:b.name})]},b.id))})]})]})]}),n===3&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Vehicle Photos"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Upload Vehicle Photos *"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:b=>f(b.target.files),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-500/20 file:text-blue-300 hover:file:bg-blue-500/30"}),e.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Upload multiple photos showing exterior, interior, and license disc"})]}),s.images.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-white/70 mb-2",children:["Uploaded Photos (",s.images.length,"):"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:s.images.map((b,D)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(b),alt:`Vehicle photo ${D+1}`,className:"w-full h-20 object-cover rounded-lg"}),e.jsx("button",{onClick:()=>{const A=s.images.filter((E,_)=>_!==D);y(E=>({...E,images:A}))},className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]},D))})]})]})]}),n===4&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Required Documents"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(L,{label:"Vehicle Registration",name:"registration",value:(R=s.documents)==null?void 0:R.registration,onChange:b=>i("registration",b),required:!0,description:"Official vehicle registration document"}),e.jsx(L,{label:"Roadworthy Certificate",name:"roadworthy",value:(B=s.documents)==null?void 0:B.roadworthy,onChange:b=>i("roadworthy",b),required:!0,description:"Valid roadworthy certificate"}),e.jsx(L,{label:"Insurance Certificate",name:"insurance",value:(z=s.documents)==null?void 0:z.insurance,onChange:b=>i("insurance",b),required:!0,description:"Comprehensive insurance certificate"})]})]}),g&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-red-300 text-sm",children:g})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:w,disabled:n===1,className:`px-6 py-2 rounded-lg font-medium transition-all ${n===1?"bg-gray-500/20 text-gray-400 cursor-not-allowed":"bg-white/10 text-white hover:bg-white/20"}`,children:"Previous"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:o,className:"px-6 py-2 bg-gray-500/20 text-gray-300 rounded-lg font-medium hover:bg-gray-500/30 transition-all",children:"Cancel"}),n<4?e.jsx("button",{onClick:t,className:"px-6 py-2 bg-blue-500/20 text-blue-300 rounded-lg font-medium hover:bg-blue-500/30 transition-all",children:"Next"}):e.jsx("button",{onClick:k,disabled:C,className:`px-6 py-2 rounded-lg font-medium transition-all ${C?"bg-gray-500/20 text-gray-400 cursor-not-allowed":"bg-green-500/20 text-green-300 hover:bg-green-500/30"}`,children:C?"Submitting...":"Submit for Admin Approval"})]})]})]})},ne=({hostId:r,className:o=""})=>{const[c,n]=x.useState([]),[j,s]=x.useState(!0),[y,C]=x.useState(!1);x.useEffect(()=>{l()},[r]);const l=async()=>{try{const i=[{id:"1",vehicleId:"vehicle-1",vehicleName:"2020 Toyota Corolla",status:"approved",message:"Your vehicle listing has been approved and is now visible to renters.",adminNotes:"Great condition, all documents verified.",timestamp:new Date(Date.now()-72e5),read:!1},{id:"2",vehicleId:"vehicle-2",vehicleName:"2019 BMW X3",status:"rejected",message:"Your vehicle listing requires some updates before approval.",rejectionReason:"Insurance certificate is expired. Please upload a current certificate.",timestamp:new Date(Date.now()-18e6),read:!0}];n(i)}catch(i){console.error("Failed to fetch notifications:",i)}finally{s(!1)}},g=i=>{n(f=>f.map(v=>v.id===i?{...v,read:!0}:v))},h=()=>{n(i=>i.map(f=>({...f,read:!0})))},N=i=>i==="approved"?"CheckCircle":"XCircle",a=i=>i==="approved"?"text-green-400 bg-green-500/20 border-green-500/30":"text-red-400 bg-red-500/20 border-red-500/30",u=c.filter(i=>!i.read).length,m=y?c:c.slice(0,3);return j?e.jsx("div",{className:`space-y-3 ${o}`,children:[...Array(2)].map((i,f)=>e.jsx("div",{className:"animate-pulse",children:e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"h-4 bg-white/20 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-white/20 rounded w-1/2"})]})},f))}):c.length===0?e.jsxs("div",{className:`text-center py-4 ${o}`,children:[e.jsx(d,{name:"Bell",size:"lg",className:"text-white/50 mb-2"}),e.jsx("p",{className:"text-white/70 text-sm",children:"No vehicle approval notifications"})]}):e.jsxs("div",{className:`space-y-3 ${o}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(d,{name:"Bell",size:"sm"}),e.jsx("span",{className:"text-sm font-medium text-white",children:"Vehicle Approvals"}),u>0&&e.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-300 rounded-full text-xs",children:u})]}),c.length>3&&e.jsx("button",{onClick:()=>C(!y),className:"text-xs text-white/70 hover:text-white transition-colors",children:y?"Show Less":`Show All (${c.length})`})]}),e.jsx("div",{className:"space-y-2",children:m.map(i=>e.jsx("div",{className:`p-3 rounded-lg border transition-all duration-200 ${i.read?"bg-white/5 border-white/10":"bg-white/10 border-white/20"}`,onClick:()=>g(i.id),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`p-1 rounded-full ${a(i.status)}`,children:e.jsx(d,{name:N(i.status),size:"sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"text-sm font-medium text-white truncate",children:i.vehicleName}),e.jsx("span",{className:"text-xs text-white/60",children:i.timestamp.toLocaleDateString()})]}),e.jsx("p",{className:"text-sm text-white/80 mb-2",children:i.message}),i.adminNotes&&e.jsx("div",{className:"bg-white/5 rounded p-2 mb-2",children:e.jsxs("p",{className:"text-xs text-white/70",children:[e.jsx("span",{className:"font-medium",children:"Admin Notes:"})," ",i.adminNotes]})}),i.rejectionReason&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-2",children:e.jsxs("p",{className:"text-xs text-red-300",children:[e.jsx("span",{className:"font-medium",children:"Action Required:"})," ",i.rejectionReason]})})]})]})},i.id))}),u>0&&e.jsx("div",{className:"pt-2 border-t border-white/20",children:e.jsx("button",{onClick:h,className:"w-full text-xs text-white/70 hover:text-white transition-colors py-2",children:"Mark all as read"})})]})},O=({onEditProfile:r,onResubmitProfile:o})=>{const c=$.getProfileStatus();if(!c.isCompleted)return null;const n=()=>{switch(c.approvalStatus){case"approved":return e.jsx(d,{name:"CheckCircle",size:"lg",className:"text-green-400"});case"rejected":return e.jsx(d,{name:"XCircle",size:"lg",className:"text-red-400"});case"pending":return e.jsx(d,{name:"Clock",size:"lg",className:"text-yellow-400"});default:return e.jsx(d,{name:"AlertCircle",size:"lg",className:"text-gray-400"})}},j=()=>c.approvalStatus==="rejected"?e.jsxs("button",{onClick:o,className:"px-4 py-2 bg-blue-500/20 text-blue-300 rounded-lg hover:bg-blue-500/30 transition-colors border border-blue-500/30",children:[e.jsx(d,{name:"RefreshCw",size:"sm",className:"mr-2"}),"Resubmit Profile"]}):c.approvalStatus==="pending"?e.jsxs("button",{onClick:r,className:"px-4 py-2 bg-gray-500/20 text-gray-300 rounded-lg hover:bg-gray-500/30 transition-colors border border-gray-500/30",children:[e.jsx(d,{name:"Edit",size:"sm",className:"mr-2"}),"Edit Profile"]}):null;return e.jsx("div",{className:"bg-white/5 backdrop-blur-md rounded-xl p-6 border border-white/10 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:n()}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Profile Status"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${$.getApprovalStatusBadgeColor()}`,children:c.approvalStatus.toUpperCase()})]}),e.jsx("p",{className:`text-sm mb-3 ${$.getApprovalStatusColor()}`,children:$.getApprovalStatusText()}),c.completionDate&&e.jsxs("p",{className:"text-xs text-white/60 mb-3",children:["Completed: ",c.completionDate.toLocaleDateString()]}),c.adminNotes&&e.jsx("div",{className:"bg-white/5 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-white/80",children:[e.jsx("strong",{children:"Admin Notes:"})," ",c.adminNotes]})}),c.rejectionReason&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-red-300",children:[e.jsx("strong",{children:"Rejection Reason:"})," ",c.rejectionReason]})}),j()&&e.jsx("div",{className:"mt-4",children:j()})]})]})})},M=()=>{const[r,o]=x.useState([]),[c,n]=x.useState([]),[j,s]=x.useState({profile:"pending",license:"unverified",id:"unverified"}),[y,C]=x.useState(!0),[l,g]=x.useState("overview"),[h,N]=x.useState($.isProfileCompleted()),[a,u]=x.useState(!1);x.useEffect(()=>{m()},[]);const m=async()=>{try{const t=localStorage.getItem("accessToken"),w=await fetch("/api/bookings",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(w.ok){const k=await w.json();o(k.bookings||[])}s({profile:"approved",license:"pending",id:"unverified"}),n([{id:1,type:"license",name:"Driver License.pdf",status:"pending",uploadedAt:"2024-12-01"},{id:2,type:"id",name:"ID Document.pdf",status:"unverified",uploadedAt:null}])}catch(t){console.error("Error fetching renter data:",t)}finally{C(!1)}},i=(t,w)=>{console.log("Uploading document:",t.name,"Type:",w);const k={id:Date.now(),type:w,name:t.name,status:"pending",uploadedAt:new Date().toISOString()};n(P=>[...P,k])},f=r.filter(t=>t.status==="confirmed"||t.status==="pending"),v=r.filter(t=>t.status==="completed").reduce((t,w)=>t+w.totalPrice,0);return y?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-700 rounded w-1/3 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(3)].map((t,w)=>e.jsx("div",{className:"h-32 bg-gray-300 dark:bg-gray-700 rounded-lg"},w))})]})}):!h&&!a?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:e.jsxs("div",{className:"text-center",children:[e.jsx(d,{name:"User",size:"lg",className:"text-white/50 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Complete Your Profile"}),e.jsx("p",{className:"text-white/70 mb-6",children:"To start using RideShare SA, please complete your profile and upload required documents."}),e.jsx("button",{onClick:()=>u(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-300",children:"Complete Profile"})]})})}):h&&!a?e.jsx("div",{className:"space-y-6",children:e.jsx(O,{onEditProfile:()=>u(!0),onResubmitProfile:()=>u(!0)})}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Complete Your Profile"}),e.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-white/10 text-white/70 rounded-lg hover:bg-white/20 transition-all",children:"Cancel"})]}),e.jsx(q,{userRole:"renter",onProfileComplete:t=>{console.log("Profile completed:",t),N(!0),u(!1)}})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Renter Dashboard"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>g("overview"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l==="overview"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(d,{name:"BarChart",size:"sm",className:"mr-1"}),"Overview"]}),e.jsxs("button",{onClick:()=>g("saved"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l==="saved"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(d,{name:"Heart",size:"sm",className:"mr-1"}),"Saved"]}),e.jsxs("button",{onClick:()=>g("calculator"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l==="calculator"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(d,{name:"Calculator",size:"sm",className:"mr-1"}),"Calculator"]}),e.jsxs("button",{onClick:()=>g("documents"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l==="documents"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(d,{name:"FileText",size:"sm",className:"mr-1"}),"Documents"]}),e.jsxs("button",{onClick:()=>g("promotions"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l==="promotions"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(d,{name:"Gift",size:"sm",className:"mr-1"}),"Promotions"]}),e.jsxs("button",{onClick:()=>g("bookings"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l==="bookings"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(d,{name:"Car",size:"sm",className:"mr-1"}),"Bookings"]}),e.jsxs("button",{onClick:()=>g("payments"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l==="payments"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(d,{name:"CreditCard",size:"sm",className:"mr-1"}),"Payments"]})]})]}),l==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(S,{title:"Active Bookings",subtitle:"Current rentals",icon:"Car",className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:f.length}),e.jsx("div",{className:"text-white/70 text-sm",children:"Active now"})]}),e.jsxs(S,{title:"Total Spent",subtitle:"All time spending",icon:"DollarSign",className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:["R",v.toLocaleString()]}),e.jsx("div",{className:"text-white/70 text-sm",children:"Lifetime total"})]}),e.jsxs(S,{title:"Verification Status",subtitle:"Account verification",icon:"CheckCircle",className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:e.jsx(d,{name:j.profile==="approved"?"CheckCircle":"Clock",size:"lg"})}),e.jsx("div",{className:"text-white/70 text-sm",children:j.profile==="approved"?"Verified":"Pending"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(S,{title:"Recent Bookings",subtitle:"Your latest vehicle rentals",icon:"Clipboard",children:e.jsxs("div",{className:"space-y-3",children:[r.slice(0,3).map(t=>{var w,k;return e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:((w=t.listing)==null?void 0:w.title)||"Unknown Vehicle"}),e.jsxs("p",{className:"text-sm text-white/70",children:[(k=t.listing)==null?void 0:k.location," • ",new Date(t.startDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-white font-semibold",children:["R",t.totalPrice]}),e.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${t.status==="confirmed"?"bg-green-500/20 text-green-200 border border-green-400/30":t.status==="pending"?"bg-yellow-500/20 text-yellow-200 border border-yellow-400/30":t.status==="cancelled"?"bg-red-500/20 text-red-200 border border-red-400/30":"bg-gray-500/20 text-gray-200 border border-gray-400/30"}`,children:t.status})]})]},t.id)}),r.length===0&&e.jsx("p",{className:"text-white/60 text-center py-4",children:"No bookings yet"})]})}),e.jsx(S,{title:"Verification Status",subtitle:"Document verification progress",icon:"Clipboard",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{name:"User",size:"lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Profile"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Basic information"})]})]}),e.jsx(T,{status:j.profile})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:"🆔"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Driver License"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Driving permit"})]})]}),e.jsx(T,{status:j.license})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:"🆔"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"ID Document"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Identity verification"})]})]}),e.jsx(T,{status:j.id})]})]})})]})]}),l==="saved"&&e.jsx("div",{className:"space-y-6",children:e.jsx(S,{title:"Saved Vehicles",subtitle:"Your favorite vehicles for easy access",icon:"Heart",children:e.jsx(Q,{userId:"current-user"})})}),l==="calculator"&&e.jsx("div",{className:"space-y-6",children:e.jsx(S,{title:"Rental Calculator",subtitle:"Calculate your rental costs with add-ons",icon:"🧮",children:e.jsx(se,{basePrice:250,onCalculate:(t,w)=>{console.log("Calculated total:",t,w)}})})}),l==="documents"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(S,{title:"Document Upload",subtitle:"Upload your verification documents",icon:"📄",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Driver License"}),e.jsx(L,{label:"Driver License",name:"driverLicense",onChange:t=>t&&i(t,"license"),accept:"image/*,application/pdf"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"ID Document"}),e.jsx(L,{label:"ID Document",name:"idDocument",onChange:t=>t&&i(t,"id"),accept:"image/*,application/pdf"})]})]})}),e.jsx(S,{title:"Document Expiry Reminders",subtitle:"Keep your documents up to date",icon:"⏰",children:e.jsx(ee,{userId:"current-user"})}),e.jsx(S,{title:"Uploaded Documents",subtitle:"Your submitted documents",icon:"📁",children:e.jsx("div",{className:"space-y-3",children:c.map(t=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:"📄"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:t.name}),e.jsx("p",{className:"text-white/70 text-sm",children:t.uploadedAt?`Uploaded ${new Date(t.uploadedAt).toLocaleDateString()}`:"Not uploaded"})]})]}),e.jsx(T,{status:t.status})]},t.id))})})]}),l==="promotions"&&e.jsx("div",{className:"space-y-6",children:e.jsx(S,{title:"Available Promotions",subtitle:"Save money with these special offers",icon:"🎁",children:e.jsx(te,{userId:"current-user"})})}),l==="bookings"&&e.jsx(S,{title:"My Bookings",subtitle:"All your vehicle rentals",icon:"Car",children:e.jsxs("div",{className:"space-y-4",children:[r.map(t=>{var w,k;return e.jsx("div",{className:"p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:((w=t.listing)==null?void 0:w.title)||"Unknown Vehicle"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-white/70",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",(k=t.listing)==null?void 0:k.location]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Dates:"})," ",new Date(t.startDate).toLocaleDateString()," - ",new Date(t.endDate).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Total:"})," R",t.totalPrice]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx(T,{status:t.status,className:"ml-2"})]})]})]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-500/20 text-blue-200 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"View Details"}),t.status==="pending"&&e.jsx("button",{className:"px-3 py-1 bg-red-500/20 text-red-200 rounded-lg text-sm hover:bg-red-500/30 transition-colors",children:"Cancel"})]})]})},t.id)}),r.length===0&&e.jsx("p",{className:"text-white/60 text-center py-8",children:"No bookings yet"})]})}),l==="payments"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(S,{title:"Payment History",subtitle:"Your transaction history",icon:"CreditCard",children:e.jsxs("div",{className:"space-y-4",children:[r.filter(t=>t.status==="completed").map(t=>{var w;return e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:((w=t.listing)==null?void 0:w.title)||"Vehicle Rental"}),e.jsx("p",{className:"text-white/70 text-sm",children:new Date(t.startDate).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white font-semibold",children:["R",t.totalPrice]}),e.jsxs("p",{className:"text-green-400 text-sm flex items-center space-x-1",children:[e.jsx(d,{name:"CheckCircle",size:"sm"}),e.jsx("span",{children:"Paid"})]})]})]},t.id)}),r.filter(t=>t.status==="completed").length===0&&e.jsx("p",{className:"text-white/60 text-center py-8",children:"No payment history yet"})]})}),e.jsx(S,{title:"Payment Methods",subtitle:"Manage your payment options",icon:"CreditCard",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{name:"CreditCard",size:"lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Credit Card"}),e.jsx("p",{className:"text-white/70 text-sm",children:"**** **** **** 1234"})]})]}),e.jsx("button",{className:"px-3 py-1 bg-blue-500/20 text-blue-200 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"Edit"})]})}),e.jsx("button",{className:"w-full p-4 border-2 border-dashed border-white/30 rounded-xl text-white/70 hover:border-white/50 hover:text-white transition-colors",children:"+ Add Payment Method"})]})})]})]})},ce=()=>{const[r,o]=x.useState([]),[c,n]=x.useState([]),[j,s]=x.useState({total:0,thisMonth:0,lastMonth:0}),[y,C]=x.useState(!0),[l,g]=x.useState("overview"),[h,N]=x.useState($.isProfileCompleted()),[a,u]=x.useState(!1),[m,i]=x.useState(!1);x.useEffect(()=>{f()},[]);const f=async()=>{try{const p=localStorage.getItem("accessToken"),R=await fetch("/api/listings/host/my-listings",{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(R.ok){const B=await R.json();o(B.listings||[])}n([{id:"1",vehicleName:"2020 Toyota Corolla",renterName:"John Doe",startDate:"2024-12-15",endDate:"2024-12-17",totalAmount:1350,status:"pending"},{id:"2",vehicleName:"2019 BMW X3",renterName:"Jane Smith",startDate:"2024-12-20",endDate:"2024-12-22",totalAmount:2400,status:"confirmed"}]),s({total:15750,thisMonth:3750,lastMonth:4200})}catch(p){console.error("Error fetching host data:",p)}finally{C(!1)}},v=(p,R)=>{n(B=>B.map(z=>z.id===p?{...z,status:R==="accept"?"confirmed":"rejected"}:z))},t=async p=>{try{console.log("Submitting vehicle for approval:",p),alert("Vehicle submitted for admin approval. You will be notified once it's reviewed."),i(!1)}catch(R){console.error("Failed to submit vehicle:",R),alert("Failed to submit vehicle. Please try again.")}},w=r.filter(p=>p.status==="approved"),k=r.filter(p=>p.status==="pending"),P=r.filter(p=>p.status==="declined");return y?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-700 rounded w-1/3 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(3)].map((p,R)=>e.jsx("div",{className:"h-32 bg-gray-300 dark:bg-gray-700 rounded-lg"},R))})]})}):!h&&!a?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:e.jsxs("div",{className:"text-center",children:[e.jsx(d,{name:"User",size:"lg",className:"text-white/50 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Complete Your Host Profile"}),e.jsx("p",{className:"text-white/70 mb-6",children:"To start hosting on RideShare SA, please complete your profile and upload required business documents."}),e.jsx("button",{onClick:()=>u(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-300",children:"Complete Profile"})]})})}):h&&!a?e.jsx("div",{className:"space-y-6",children:e.jsx(O,{onEditProfile:()=>u(!0),onResubmitProfile:()=>u(!0)})}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Complete Your Host Profile"}),e.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-white/10 text-white/70 rounded-lg hover:bg-white/20 transition-all",children:"Cancel"})]}),e.jsx(q,{userRole:"host",onProfileComplete:p=>{console.log("Host profile completed:",p),N(!0),u(!1)}})]}):m?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"List Your Vehicle"}),e.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 bg-white/10 text-white/70 rounded-lg hover:bg-white/20 transition-all",children:"Cancel"})]}),e.jsx(le,{onSubmit:t,onCancel:()=>i(!1)})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Host Dashboard"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>g("overview"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l==="overview"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(d,{name:"BarChart",size:"sm",className:"mr-1"}),"Overview"]}),e.jsxs("button",{onClick:()=>g("fleet"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l==="fleet"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(d,{name:"Car",size:"sm",className:"mr-1"}),"Fleet"]}),e.jsxs("button",{onClick:()=>g("pricing"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l==="pricing"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(d,{name:"DollarSign",size:"sm",className:"mr-1"}),"Pricing"]}),e.jsxs("button",{onClick:()=>g("vehicles"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l==="vehicles"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(d,{name:"Clipboard",size:"sm",className:"mr-1"}),"Listings"]}),e.jsxs("button",{onClick:()=>g("bookings"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l==="bookings"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(d,{name:"Calendar",size:"sm",className:"mr-1"}),"Bookings"]}),e.jsxs("button",{onClick:()=>g("earnings"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${l==="earnings"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(d,{name:"DollarSign",size:"sm",className:"mr-1"}),"Earnings"]})]})]}),l==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(S,{title:"Approved Listings",subtitle:"Active vehicles",icon:"CheckCircle",className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:w.length}),e.jsx("div",{className:"text-white/70 text-sm",children:"Ready to rent"})]}),e.jsxs(S,{title:"Pending Approval",subtitle:"Awaiting review",icon:"Clock",className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:k.length}),e.jsx("div",{className:"text-white/70 text-sm",children:"Under review"})]}),e.jsxs(S,{title:"Total Earnings",subtitle:"All time revenue",icon:"DollarSign",className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:["R",j.total.toLocaleString()]}),e.jsx("div",{className:"text-white/70 text-sm",children:"Lifetime total"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(S,{title:"Vehicle Approval Notifications",subtitle:"Latest approval updates",icon:"Bell",children:e.jsx(ne,{hostId:"current-host"})}),e.jsx(S,{title:"Recent Bookings",subtitle:"Latest rental requests",icon:"Clipboard",children:e.jsxs("div",{className:"space-y-3",children:[c.slice(0,3).map(p=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:p.vehicleName}),e.jsxs("p",{className:"text-sm text-white/70",children:[p.renterName," • ",new Date(p.startDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-white font-semibold",children:["R",p.totalAmount]}),e.jsx(T,{status:p.status})]})]},p.id)),c.length===0&&e.jsx("p",{className:"text-white/60 text-center py-4",children:"No bookings yet"})]})}),e.jsx(S,{title:"Listing Status",subtitle:"Vehicle approval status",icon:"BarChart",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{name:"CheckCircle",size:"lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Approved"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Ready to rent"})]})]}),e.jsx("span",{className:"text-white font-bold text-xl",children:w.length})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{name:"Clock",size:"lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Pending"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Under review"})]})]}),e.jsx("span",{className:"text-white font-bold text-xl",children:k.length})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{name:"XCircle",size:"lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Declined"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Needs attention"})]})]}),e.jsx("span",{className:"text-white font-bold text-xl",children:P.length})]})]})})]})]}),l==="fleet"&&e.jsx("div",{className:"space-y-6",children:e.jsx(S,{title:"Fleet Management",subtitle:"Manage your entire vehicle fleet",icon:"Car",children:e.jsx(ae,{hostId:"current-host"})})}),l==="pricing"&&e.jsx("div",{className:"space-y-6",children:e.jsx(S,{title:"Dynamic Pricing",subtitle:"Optimize your pricing with smart rules",icon:"DollarSign",children:e.jsx(ie,{vehicleId:"sample-vehicle",basePrice:250,onPriceUpdate:p=>{console.log("Updated price:",p)}})})}),l==="vehicles"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(S,{title:"Vehicle Management",subtitle:"Manage your vehicle listings",icon:"Car",children:e.jsxs("div",{className:"space-y-4",children:[r.map(p=>e.jsx("div",{className:"p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:p.title}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-white/70",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",p.location]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Price:"})," R",p.pricePerDay,"/day"]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx(T,{status:p.status,className:"ml-2"})]}),p.declineReason&&e.jsxs("p",{className:"text-red-400 text-sm mt-1",children:["Reason: ",p.declineReason]})]})]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-500/20 text-blue-200 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"Edit"}),e.jsx("button",{className:"px-3 py-1 bg-green-500/20 text-green-200 rounded-lg text-sm hover:bg-green-500/30 transition-colors",children:"View"})]})]})},p.id)),r.length===0&&e.jsx("p",{className:"text-white/60 text-center py-8",children:"No vehicles listed yet"})]})}),e.jsx(S,{title:"Add New Vehicle",subtitle:"List a new vehicle for rent",icon:"Car",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(d,{name:"Car",size:"lg",className:"text-white/50 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"List Your Vehicle"}),e.jsx("p",{className:"text-white/70 mb-6",children:"Submit your vehicle for admin approval. Once approved, it will be visible to renters."}),e.jsx("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-300",children:"Start Vehicle Listing"})]})})]}),l==="bookings"&&e.jsx(S,{title:"Booking Requests",subtitle:"Manage rental requests",icon:"Clipboard",children:e.jsxs("div",{className:"space-y-4",children:[c.map(p=>e.jsx("div",{className:"p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:p.vehicleName}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-white/70",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Renter:"})," ",p.renterName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Dates:"})," ",new Date(p.startDate).toLocaleDateString()," - ",new Date(p.endDate).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Total:"})," R",p.totalAmount]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx(T,{status:p.status,className:"ml-2"})]})]})]})]}),p.status==="pending"&&e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>v(p.id,"accept"),className:"px-4 py-2 bg-green-500/20 text-green-200 rounded-lg text-sm hover:bg-green-500/30 transition-colors",children:"Accept"}),e.jsx("button",{onClick:()=>v(p.id,"reject"),className:"px-4 py-2 bg-red-500/20 text-red-200 rounded-lg text-sm hover:bg-red-500/30 transition-colors",children:"Reject"})]})]})},p.id)),c.length===0&&e.jsx("p",{className:"text-white/60 text-center py-8",children:"No booking requests yet"})]})}),l==="earnings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(S,{title:"Total Earnings",subtitle:"All time revenue",icon:"DollarSign",className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:["R",j.total.toLocaleString()]}),e.jsx("div",{className:"text-white/70 text-sm",children:"Lifetime total"})]}),e.jsxs(S,{title:"This Month",subtitle:"Current month earnings",icon:"📅",className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:["R",j.thisMonth.toLocaleString()]}),e.jsx("div",{className:"text-white/70 text-sm",children:"December 2024"})]}),e.jsxs(S,{title:"Last Month",subtitle:"Previous month earnings",icon:"BarChart",className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:["R",j.lastMonth.toLocaleString()]}),e.jsx("div",{className:"text-white/70 text-sm",children:"November 2024"})]})]}),e.jsx(S,{title:"Earnings Chart",subtitle:"Monthly revenue overview",icon:"TrendingUp",children:e.jsx("div",{className:"h-64 flex items-center justify-center text-white/60",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx(d,{name:"BarChart",size:"lg",className:"text-white/50 mx-auto"})}),e.jsx("p",{children:"Earnings chart would be displayed here"}),e.jsx("p",{className:"text-sm",children:"Integration with chart library needed"})]})})})]})]})},be=()=>{const{user:r}=K(),o=G();return x.useEffect(()=>{if(r)switch(localStorage.setItem("userRole",r.role),r.role){case"renter":o("/dashboard/renter",{replace:!0});break;case"host":o("/dashboard/host",{replace:!0});break;case"admin":o("/dashboard/admin",{replace:!0});break;default:o("/dashboard/renter",{replace:!0})}},[r,o]),e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Dashboard"}),e.jsxs("p",{className:"text-gray-300",children:["Welcome back, ",(r==null?void 0:r.firstName)||"User","!"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"glass-panel p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Navigation"}),e.jsxs("nav",{className:"space-y-2",children:[(r==null?void 0:r.role)==="renter"&&e.jsxs(V,{to:"/dashboard/renter",className:"glass-button flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white transition-all duration-300",children:[e.jsx(d,{name:"User",size:"sm"}),e.jsx("span",{children:"My Bookings"})]}),(r==null?void 0:r.role)==="host"&&e.jsxs(V,{to:"/dashboard/host",className:"glass-button flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white transition-all duration-300",children:[e.jsx(d,{name:"Car",size:"sm"}),e.jsx("span",{children:"My Listings"})]}),(r==null?void 0:r.role)==="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs(V,{to:"/dashboard/admin",className:"glass-button flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white transition-all duration-300",children:[e.jsx(d,{name:"User",size:"sm"}),e.jsx("span",{children:"Admin Panel"})]}),e.jsxs(V,{to:"/dashboard/renter",className:"glass-button flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white transition-all duration-300",children:[e.jsx(d,{name:"User",size:"sm"}),e.jsx("span",{children:"Renter View"})]}),e.jsxs(V,{to:"/dashboard/host",className:"glass-button flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white transition-all duration-300",children:[e.jsx(d,{name:"Car",size:"sm"}),e.jsx("span",{children:"Host View"})]})]})]})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(J,{children:[e.jsx(U,{path:"/",element:e.jsx(M,{})}),e.jsx(U,{path:"/renter",element:e.jsx(M,{})}),e.jsx(U,{path:"/host",element:e.jsx(ce,{})}),e.jsx(U,{path:"/admin",element:e.jsx(X,{})})]})})]})]})})};export{be as default};
