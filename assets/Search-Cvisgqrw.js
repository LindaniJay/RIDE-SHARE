import{u as e,r as s,n as i,j as a}from"./react-vendor-R_lWSjNG.js";import{c as t,i as l,G as n,b as r,I as c}from"./admin-pages-CLn31zMV.js";import{O as d}from"./dashboard-pages-BSp87bHe.js";import{m as o}from"./ui-libs-BTnp6TS4.js";import"./vendor-BDlGQTAF.js";import"./firebase-OlRJkiMA.js";import"./utils-Bi8vyz5k.js";const m=()=>{const m=e(),[x,h]=s.useState([]),[p,u]=s.useState(!0),[j,g]=s.useState({city:"",make:"",priceRange:"",fuelType:"",transmission:"",seats:""});s.useEffect(()=>{f()},[]);const f=async(e={})=>{try{u(!0);const s=new URLSearchParams;if(e.city&&s.append("location",e.city),e.make&&s.append("make",e.make),e.type&&s.append("type",e.type),e.priceRange){const[i,a]=e.priceRange.split("-");i&&s.append("minPrice",i),a&&s.append("maxPrice",a)}e.fuelType&&s.append("fuelType",e.fuelType),e.transmission&&s.append("transmission",e.transmission),e.seats&&s.append("seats",e.seats);const i=await fetch(`http://localhost:5001/api/search?${s.toString()}`);if(!i.ok)throw new Error("Failed to fetch listings");const a=await i.json();if(!a.success)throw new Error(a.error||"Failed to fetch listings");h(a.data||[])}catch(s){i.error("Failed to load vehicles"),h([])}finally{u(!1)}},v=(e,s)=>{g(i=>({...i,[e]:s}))};return p?a.jsx("div",{className:"page-background",children:a.jsx(o.div,{className:"min-h-screen p-4 lg:p-8",variants:t,initial:"hidden",animate:"visible",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>a.jsx("div",{className:"animate-pulse",children:a.jsx("div",{className:"bg-white/10 rounded-xl h-80"})},s))})})})}):a.jsx("div",{className:"page-background",children:a.jsx(o.div,{className:"min-h-screen p-4 lg:p-8",variants:t,initial:"hidden",animate:"visible",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs(o.div,{className:"text-center mb-8",variants:l,children:[a.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-white font-heading text-shadow-lg mb-4",children:"Find Your Perfect Ride"}),a.jsx("p",{className:"text-white/70 text-lg font-body",children:"Discover amazing vehicles available for rent"})]}),a.jsx(o.div,{className:"mb-8",variants:l,children:a.jsx(n,{level:2,className:"p-6",children:a.jsxs("form",{onSubmit:e=>{e.preventDefault(),f(j)},className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"City"}),a.jsx("input",{type:"text",placeholder:"Enter city",value:j.city,onChange:e=>v("city",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Make"}),a.jsx("input",{type:"text",placeholder:"e.g., Toyota, BMW",value:j.make,onChange:e=>v("make",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Price Range"}),a.jsxs("select",{value:j.priceRange,onChange:e=>v("priceRange",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Any Price"}),a.jsx("option",{value:"0-500",children:"Under R500"}),a.jsx("option",{value:"500-1000",children:"R500 - R1000"}),a.jsx("option",{value:"1000-2000",children:"R1000 - R2000"}),a.jsx("option",{value:"2000-5000",children:"R2000 - R5000"}),a.jsx("option",{value:"5000-10000",children:"R5000+"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Fuel Type"}),a.jsxs("select",{value:j.fuelType,onChange:e=>v("fuelType",e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Any Fuel"}),a.jsx("option",{value:"petrol",children:"Petrol"}),a.jsx("option",{value:"diesel",children:"Diesel"}),a.jsx("option",{value:"hybrid",children:"Hybrid"}),a.jsx("option",{value:"electric",children:"Electric"})]})]})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx(r,{type:"submit",variant:"primary",size:"lg",icon:a.jsx(c,{name:"Search",size:"sm"}),children:"Search Vehicles"})})]})})}),a.jsx(o.div,{variants:l,children:0===x.length?a.jsxs(n,{level:2,className:"text-center py-12",children:[a.jsx(c,{name:"Search",size:"xl",className:"text-white/50 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No vehicles found"}),a.jsx("p",{className:"text-white/70 mb-4",children:"Try adjusting your search criteria or check back later for new listings."}),a.jsx(r,{onClick:()=>{g({city:"",make:"",priceRange:"",fuelType:"",transmission:"",seats:""}),f()},variant:"secondary",size:"md",children:"Clear Filters"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsxs("h2",{className:"text-2xl font-bold text-white font-heading",children:["Available Vehicles (",x.length,")"]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map((e,s)=>a.jsx(o.div,{variants:l,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},children:a.jsxs(n,{level:3,hover:!0,animated:!0,className:"overflow-hidden",children:[a.jsxs("div",{className:"relative",children:[a.jsx(d,{src:e.image,alt:`${e.make} ${e.model}`,width:400,height:250,className:"w-full h-48 object-cover"}),a.jsx("div",{className:"absolute top-4 right-4",children:a.jsx("span",{className:"bg-green-500/90 text-white px-2 py-1 rounded-full text-xs font-medium",children:"Available"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-white font-heading",children:[e.make," ",e.model]}),a.jsxs("p",{className:"text-white/70 text-sm font-body",children:[e.year," â€¢ ",e.city]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-2xl font-bold text-primary-400 font-heading",children:["R",e.pricePerDay]}),a.jsx("p",{className:"text-white/60 text-sm font-body",children:"per day"})]})]}),e.description&&a.jsx("p",{className:"text-white/70 text-sm font-body mb-4 line-clamp-2",children:e.description}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.features?.slice(0,3).map((e,s)=>a.jsx("span",{className:"bg-white/10 text-white/80 px-2 py-1 rounded text-xs",children:e},s)),e.features&&e.features.length>3&&a.jsxs("span",{className:"bg-white/10 text-white/80 px-2 py-1 rounded text-xs",children:["+",e.features.length-3," more"]})]}),a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-white/70",children:[e.seats&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(c,{name:"Users",size:"sm"}),a.jsx("span",{children:e.seats})]}),e.fuelType&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(c,{name:"Fuel",size:"sm"}),a.jsx("span",{className:"capitalize",children:e.fuelType})]}),e.transmission&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(c,{name:"Settings",size:"sm"}),a.jsx("span",{className:"capitalize",children:e.transmission})]})]})}),a.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:a.jsx(r,{onClick:()=>{return s=e.id,void m(`/checkout/${s}`);var s},variant:"primary",size:"md",className:"w-full",icon:a.jsx(c,{name:"Calendar",size:"sm"}),children:"Book Now"})})]})]})},e.id))})]})})]})})})};export{m as default};
