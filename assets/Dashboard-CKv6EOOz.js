var ae=Object.defineProperty;var ie=(c,n,o)=>n in c?ae(c,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[n]=o;var z=(c,n,o)=>ie(c,typeof n!="symbol"?n+"":n,o);import{j as e}from"./query-CSyQ0w5Y.js";import{r as p,a as re}from"./vendor-CBH9K-97.js";import{c as le,L as _,R as ne,a as M}from"./router-BWB2dKYR.js";import{I as u,c as Q,u as ce}from"./index-B4_ogAtn.js";import{G as de}from"./Glassmorphism-B6x2MkMT.js";import"./ui-qr7cu0yN.js";const B=({status:c,size:n="md",className:o=""})=>{const x=()=>{switch(c){case"approved":case"verified":case"confirmed":case"completed":return{bg:"bg-green-500/20",text:"text-green-300",border:"border-green-500/30",icon:"âœ“"};case"pending":return{bg:"bg-yellow-500/20",text:"text-yellow-300",border:"border-yellow-500/30",icon:"Clock"};case"rejected":case"declined":case"cancelled":return{bg:"bg-red-500/20",text:"text-red-300",border:"border-red-500/30",icon:"âœ—"};case"unverified":return{bg:"bg-gray-500/20",text:"text-gray-300",border:"border-gray-500/30",icon:"â—‹"};default:return{bg:"bg-gray-500/20",text:"text-gray-300",border:"border-gray-500/30",icon:"?"}}},j=()=>{switch(n){case"sm":return"px-2 py-1 text-xs";case"md":return"px-3 py-1 text-sm";case"lg":return"px-4 py-2 text-base";default:return"px-3 py-1 text-sm"}},r=x();return e.jsxs("span",{className:`
        inline-flex items-center space-x-1 rounded-full font-medium border
        ${r.bg} ${r.text} ${r.border} ${j()}
        ${o}
      `,children:[e.jsx(u,{name:r.icon,size:"sm"}),e.jsx("span",{className:"capitalize",children:c})]})},oe=({users:c,vehicles:n,profileCompletions:o,onApproveUser:x,onRejectUser:j,onApproveVehicle:r,onRejectVehicle:y,onApproveProfile:C,onRejectProfile:h})=>{const[f,g]=p.useState("profiles"),[k,m]=p.useState(null),[b,l]=p.useState(""),[i,d]=p.useState(""),v=c.filter(s=>s.approvalStatus==="pending"),t=n.filter(s=>s.approvalStatus==="pending"),w=o.filter(s=>s.status==="pending"),S=(s,R)=>{s==="user"?x(R,i):s==="vehicle"?r(R,i):s==="profile"&&C(R,i),m(null),d("")},L=(s,R)=>{b.trim()&&(s==="user"?j(R,b,i):s==="vehicle"?y(R,b,i):s==="profile"&&h(R,b,i),m(null),l(""),d(""))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex space-x-1 bg-white/10 backdrop-blur-md rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>g("profiles"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-300 ${f==="profiles"?"bg-white/20 text-white":"text-white/70 hover:text-white"}`,children:[e.jsx(u,{name:"User",size:"sm",className:"mr-2"}),"Profiles (",w.length,")"]}),e.jsxs("button",{onClick:()=>g("users"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-300 ${f==="users"?"bg-white/20 text-white":"text-white/70 hover:text-white"}`,children:[e.jsx(u,{name:"Users",size:"sm",className:"mr-2"}),"User Documents (",v.length,")"]}),e.jsxs("button",{onClick:()=>g("vehicles"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-all duration-300 ${f==="vehicles"?"bg-white/20 text-white":"text-white/70 hover:text-white"}`,children:[e.jsx(u,{name:"Car",size:"sm",className:"mr-2"}),"Vehicle Listings (",t.length,")"]})]}),e.jsx("div",{className:"space-y-4",children:f==="users"?e.jsx("div",{className:"space-y-4",children:v.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-white/70",children:"No pending user approvals"})}):v.map(s=>{var R,$,U;return e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-xl p-4 border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:[s.firstName," ",s.lastName]}),e.jsx("p",{className:"text-sm text-white/70",children:s.email}),e.jsxs("p",{className:"text-xs text-white/60",children:["Registered: ",s.createdAt?new Date(s.createdAt).toLocaleDateString():"N/A"]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>m(s.id),className:"px-3 py-1 bg-blue-500/20 text-blue-300 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"Review"})})]}),k===s.id&&e.jsxs("div",{className:"mt-4 p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Documents to Review:"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[((R=s.documents)==null?void 0:R.idDocument)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white/80",children:"ID Document"}),e.jsx("a",{href:s.documents.idDocument,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-sm",children:"View Document"})]}),(($=s.documents)==null?void 0:$.driverLicense)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white/80",children:"Driver's License"}),e.jsx("a",{href:s.documents.driverLicense,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-sm",children:"View Document"})]}),((U=s.documents)==null?void 0:U.proofOfAddress)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white/80",children:"Proof of Address"}),e.jsx("a",{href:s.documents.proofOfAddress,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-sm",children:"View Document"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-1",children:"Admin Notes (Optional)"}),e.jsx("textarea",{value:i,onChange:N=>d(N.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Add notes for the user...",rows:2})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>S("user",s.id),className:"flex-1 bg-green-500/20 hover:bg-green-500/30 text-green-300 px-4 py-2 rounded-lg transition-all duration-300 border border-green-500/30",children:[e.jsx(u,{name:"CheckCircle",size:"sm",className:"mr-1"}),"Approve"]}),e.jsxs("button",{onClick:()=>{const N=prompt("Rejection reason:");N&&(l(N),L("user",s.id))},className:"flex-1 bg-red-500/20 hover:bg-red-500/30 text-red-300 px-4 py-2 rounded-lg transition-all duration-300 border border-red-500/30",children:[e.jsx(u,{name:"XCircle",size:"sm",className:"mr-1"}),"Reject"]})]})]})]})]},s.id)})}):f==="profiles"?e.jsx("div",{className:"space-y-4",children:w.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(u,{name:"User",size:"lg",className:"text-white/50 mb-4"}),e.jsx("p",{className:"text-white/70",children:"No pending profile completions"})]}):w.map(s=>e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-xl p-4 border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Profile Completion - ",s.userId]}),e.jsxs("p",{className:"text-sm text-white/70",children:["Submitted: ",new Date(s.submittedAt).toLocaleDateString()]}),e.jsxs("p",{className:"text-xs text-white/60",children:["Role: ",s.businessName?"Host":"Renter"]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>m(s.id||""),className:"px-3 py-1 bg-blue-500/20 text-blue-300 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"Review"})})]}),k===s.id&&e.jsxs("div",{className:"mt-4 p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Profile Information:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-white/60",children:"Date of Birth:"}),e.jsx("p",{className:"text-sm text-white/90",children:s.dateOfBirth})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-white/60",children:"Address:"}),e.jsxs("p",{className:"text-sm text-white/90",children:[s.address,", ",s.city]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-white/60",children:"Province:"}),e.jsx("p",{className:"text-sm text-white/90",children:s.province})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-white/60",children:"Emergency Contact:"}),e.jsxs("p",{className:"text-sm text-white/90",children:[s.emergencyContact," - ",s.emergencyPhone]})]}),s.businessName&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-white/60",children:"Business Name:"}),e.jsx("p",{className:"text-sm text-white/90",children:s.businessName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-white/60",children:"Business Registration:"}),e.jsx("p",{className:"text-sm text-white/90",children:s.businessRegistration})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-white/60",children:"Bank Account:"}),e.jsx("p",{className:"text-sm text-white/90",children:s.bankAccount})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-white/60",children:"Tax Number:"}),e.jsx("p",{className:"text-sm text-white/90",children:s.taxNumber})]})]})]}),e.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Documents to Review:"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[s.idDocument&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white/80",children:"ID Document"}),e.jsx("span",{className:"text-xs text-green-400",children:"Uploaded"})]}),s.driverLicense&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white/80",children:"Driver's License"}),e.jsx("span",{className:"text-xs text-green-400",children:"Uploaded"})]}),s.proofOfAddress&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white/80",children:"Proof of Address"}),e.jsx("span",{className:"text-xs text-green-400",children:"Uploaded"})]}),s.vehicleRegistration&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white/80",children:"Vehicle Registration"}),e.jsx("span",{className:"text-xs text-green-400",children:"Uploaded"})]}),s.roadworthyCertificate&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white/80",children:"Roadworthy Certificate"}),e.jsx("span",{className:"text-xs text-green-400",children:"Uploaded"})]}),s.insuranceCertificate&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white/80",children:"Insurance Certificate"}),e.jsx("span",{className:"text-xs text-green-400",children:"Uploaded"})]})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Admin Notes (Optional)"}),e.jsx("textarea",{value:i,onChange:R=>d(R.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",rows:3,placeholder:"Add any notes for the user..."})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>S("profile",s.id||""),className:"flex-1 px-4 py-2 bg-green-500/20 text-green-300 rounded-lg hover:bg-green-500/30 transition-colors",children:"Approve Profile"}),e.jsx("button",{onClick:()=>L("profile",s.id||""),className:"flex-1 px-4 py-2 bg-red-500/20 text-red-300 rounded-lg hover:bg-red-500/30 transition-colors",children:"Reject Profile"})]})]})]})]},s.id))}):e.jsx("div",{className:"space-y-4",children:t.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-white/70",children:"No pending vehicle approvals"})}):t.map(s=>{var R,$,U;return e.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-xl p-4 border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:[s.year," ",s.make," ",s.model]}),e.jsxs("p",{className:"text-sm text-white/70",children:["R",s.pricePerDay,"/day â€¢ ",s.location]}),e.jsxs("p",{className:"text-xs text-white/60",children:["Listed: ",s.createdAt?new Date(s.createdAt).toLocaleDateString():"N/A"]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>m(s.id),className:"px-3 py-1 bg-blue-500/20 text-blue-300 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"Review"})})]}),k===s.id&&e.jsxs("div",{className:"mt-4 p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Vehicle Documents to Review:"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[((R=s.documents)==null?void 0:R.registration)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white/80",children:"Registration"}),e.jsx("a",{href:s.documents.registration,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-sm",children:"View Document"})]}),(($=s.documents)==null?void 0:$.roadworthy)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white/80",children:"Roadworthy Certificate"}),e.jsx("a",{href:s.documents.roadworthy,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-sm",children:"View Document"})]}),((U=s.documents)==null?void 0:U.insurance)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-white/80",children:"Insurance"}),e.jsx("a",{href:s.documents.insurance,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-sm",children:"View Document"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-1",children:"Admin Notes (Optional)"}),e.jsx("textarea",{value:i,onChange:N=>d(N.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Add notes for the host...",rows:2})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>S("vehicle",s.id),className:"flex-1 bg-green-500/20 hover:bg-green-500/30 text-green-300 px-4 py-2 rounded-lg transition-all duration-300 border border-green-500/30",children:[e.jsx(u,{name:"CheckCircle",size:"sm",className:"mr-1"}),"Approve"]}),e.jsxs("button",{onClick:()=>{const N=prompt("Rejection reason:");N&&(l(N),L("vehicle",s.id))},className:"flex-1 bg-red-500/20 hover:bg-red-500/30 text-red-300 px-4 py-2 rounded-lg transition-all duration-300 border border-red-500/30",children:[e.jsx(u,{name:"XCircle",size:"sm",className:"mr-1"}),"Reject"]})]})]})]})]},s.id)})})})]})},xe=({className:c=""})=>{const[n,o]=p.useState([]),[x,j]=p.useState(!0),[r,y]=p.useState("all");p.useEffect(()=>{C()},[]);const C=async()=>{try{const l=localStorage.getItem("authToken"),i=await fetch("/api/admin/fraud-alerts",{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(i.ok){const d=await i.json();o(d.alerts||[])}}catch(l){console.error("Error fetching fraud alerts:",l),o([{id:"1",type:"duplicate_document",severity:"high",userId:"user123",userName:"John Doe",description:"Driver license appears to be duplicated across multiple accounts",evidence:["document_hash_match","similar_photos"],confidence:85,status:"pending",createdAt:new Date(Date.now()-2*60*60*1e3)},{id:"2",type:"suspicious_activity",severity:"medium",userId:"user456",userName:"Jane Smith",description:"Unusual booking patterns detected - multiple bookings in different cities simultaneously",evidence:["location_anomaly","booking_frequency"],confidence:72,status:"investigating",createdAt:new Date(Date.now()-4*60*60*1e3)},{id:"3",type:"fake_identity",severity:"critical",userId:"user789",userName:"Mike Johnson",description:"ID document appears to be digitally altered or fake",evidence:["document_manipulation","metadata_anomaly"],confidence:95,status:"pending",createdAt:new Date(Date.now()-1*60*60*1e3)}])}finally{j(!1)}},h=async(l,i,d)=>{try{const v=localStorage.getItem("authToken");await fetch(`/api/admin/fraud-alerts/${l}`,{method:"PATCH",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"},body:JSON.stringify({status:i,adminNotes:d})}),o(t=>t.map(w=>w.id===l?{...w,status:i,adminNotes:d}:w))}catch(v){console.error("Error updating alert status:",v)}},f=l=>{switch(l){case"critical":return"text-red-400 bg-red-500/20 border-red-500/30";case"high":return"text-orange-400 bg-orange-500/20 border-orange-500/30";case"medium":return"text-yellow-400 bg-yellow-500/20 border-yellow-500/30";case"low":return"text-blue-400 bg-blue-500/20 border-blue-500/30";default:return"text-gray-400 bg-gray-500/20 border-gray-500/30"}},g=l=>{switch(l){case"critical":return"AlertTriangle";case"high":return"AlertTriangle";case"medium":return"Eye";case"low":return"Info";default:return"FileText"}},k=l=>{switch(l){case"duplicate_document":return"FileText";case"stolen_document":return"XCircle";case"suspicious_activity":return"Eye";case"fake_identity":return"User";default:return"Info"}},m=l=>{switch(l){case"pending":return"text-yellow-400";case"investigating":return"text-blue-400";case"resolved":return"text-green-400";case"false_positive":return"text-gray-400";default:return"text-white"}},b=n.filter(l=>r==="all"||l.status===r);return x?e.jsx("div",{className:`space-y-4 ${c}`,children:[...Array(3)].map((l,i)=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-24 bg-white/10 rounded-lg"})},i))}):e.jsxs("div",{className:`space-y-4 ${c}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Fraud Detection"}),e.jsxs("p",{className:"text-white/70 text-sm",children:[n.filter(l=>l.status==="pending").length," pending alerts"]})]}),e.jsx("div",{className:"flex space-x-2",children:["all","pending","investigating","resolved"].map(l=>e.jsx("button",{onClick:()=>y(l),className:`px-3 py-1 rounded-lg text-sm transition-colors ${r===l?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:l.charAt(0).toUpperCase()+l.slice(1)},l))})]}),e.jsx("div",{className:"space-y-3",children:b.map(l=>e.jsxs("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20 hover:bg-white/20 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{name:k(l.type),size:"lg"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(u,{name:g(l.severity),size:"sm"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs border ${f(l.severity)}`,children:l.severity.toUpperCase()}),e.jsx("span",{className:`text-sm ${m(l.status)}`,children:l.status.charAt(0).toUpperCase()+l.status.slice(1)})]}),e.jsx("h4",{className:"text-white font-medium",children:l.userName}),e.jsx("p",{className:"text-white/70 text-sm",children:l.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm text-white/70",children:[l.confidence,"% confidence"]}),e.jsx("div",{className:"text-xs text-white/50",children:l.createdAt.toLocaleString()})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-white/60 mb-1",children:"Evidence:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:l.evidence.map((i,d)=>e.jsx("span",{className:"px-2 py-1 bg-white/10 rounded text-xs text-white/70",children:i.replace(/_/g," ")},d))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[l.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>h(l.id,"investigating"),className:"px-3 py-1 bg-blue-500/20 text-blue-300 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"Investigate"}),e.jsx("button",{onClick:()=>h(l.id,"false_positive"),className:"px-3 py-1 bg-gray-500/20 text-gray-300 rounded-lg text-sm hover:bg-gray-500/30 transition-colors",children:"False Positive"})]}),l.status==="investigating"&&e.jsx("button",{onClick:()=>h(l.id,"resolved"),className:"px-3 py-1 bg-green-500/20 text-green-300 rounded-lg text-sm hover:bg-green-500/30 transition-colors",children:"Resolve"})]}),e.jsx("button",{className:"px-3 py-1 bg-white/10 text-white rounded-lg text-sm hover:bg-white/20 transition-colors",children:"View Details"})]})]},l.id))}),b.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx(u,{name:"Shield",size:"lg",className:"text-white/50 mx-auto"})}),e.jsx("p",{className:"text-white/70",children:"No fraud alerts found"}),e.jsx("p",{className:"text-white/50 text-sm",children:"Great job keeping the platform secure!"})]})]})},me=({className:c=""})=>{const[n,o]=p.useState([]),[x,j]=p.useState([]),[r,y]=p.useState(!0),[C,h]=p.useState("rules");p.useEffect(()=>{f()},[]);const f=async()=>{try{const d=localStorage.getItem("authToken"),v=await fetch("/api/admin/commission-rules",{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}}),t=await fetch("/api/admin/payouts",{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(v.ok){const w=await v.json();o(w.rules||[])}if(t.ok){const w=await t.json();j(w.payouts||[])}}catch(d){console.error("Error fetching data:",d),o([{id:"1",name:"Standard Commission",type:"percentage",value:15,applicableTo:"all",isActive:!0},{id:"2",name:"New Host Bonus",type:"percentage",value:10,applicableTo:"new_hosts",isActive:!0},{id:"3",name:"Premium Host Rate",type:"percentage",value:20,applicableTo:"premium_hosts",isActive:!0}]),j([{id:"1",hostId:"host1",hostName:"John M.",amount:5e3,commission:750,netAmount:4250,status:"pending",scheduledDate:new Date(Date.now()+7*24*60*60*1e3)},{id:"2",hostId:"host2",hostName:"Sarah K.",amount:3200,commission:480,netAmount:2720,status:"processing",scheduledDate:new Date(Date.now()+3*24*60*60*1e3)},{id:"3",hostId:"host3",hostName:"Mike D.",amount:1800,commission:270,netAmount:1530,status:"completed",scheduledDate:new Date(Date.now()-2*24*60*60*1e3),completedDate:new Date(Date.now()-1*24*60*60*1e3)}])}finally{y(!1)}},g=async(d,v)=>{try{const t=localStorage.getItem("authToken");await fetch(`/api/admin/commission-rules/${d}`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(v)}),o(w=>w.map(S=>S.id===d?{...S,...v}:S))}catch(t){console.error("Error updating commission rule:",t)}},k=async d=>{try{const v=localStorage.getItem("authToken");await fetch(`/api/admin/payouts/${d}/process`,{method:"POST",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}}),j(t=>t.map(w=>w.id===d?{...w,status:"processing"}:w))}catch(v){console.error("Error processing payout:",v)}},m=d=>{switch(d){case"pending":return"text-yellow-400 bg-yellow-500/20 border-yellow-500/30";case"processing":return"text-blue-400 bg-blue-500/20 border-blue-500/30";case"completed":return"text-green-400 bg-green-500/20 border-green-500/30";case"failed":return"text-red-400 bg-red-500/20 border-red-500/30";default:return"text-gray-400 bg-gray-500/20 border-gray-500/30"}},b=d=>{switch(d){case"pending":return"Clock";case"processing":return"Settings";case"completed":return"CheckCircle";case"failed":return"XCircle";default:return"FileText"}},l=x.filter(d=>d.status==="pending").reduce((d,v)=>d+v.netAmount,0),i=x.filter(d=>d.status==="completed").reduce((d,v)=>d+v.commission,0);return r?e.jsx("div",{className:`space-y-4 ${c}`,children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-white/10 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-32 bg-white/10 rounded-lg"})]})}):e.jsxs("div",{className:`space-y-4 ${c}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Commission & Payouts"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Manage platform commissions and host payouts"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>h("rules"),className:`px-3 py-1 rounded-lg text-sm transition-colors ${C==="rules"?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:"Commission Rules"}),e.jsx("button",{onClick:()=>h("payouts"),className:`px-3 py-1 rounded-lg text-sm transition-colors ${C==="payouts"?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:"Payouts"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/70 text-sm",children:"Pending Payouts"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",l.toLocaleString()]})]}),e.jsx(u,{name:"DollarSign",size:"lg"})]})}),e.jsx("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/70 text-sm",children:"Total Commission"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",i.toLocaleString()]})]}),e.jsx(u,{name:"BarChart",size:"lg"})]})}),e.jsx("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/70 text-sm",children:"Active Rules"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:n.filter(d=>d.isActive).length})]}),e.jsx(u,{name:"Settings",size:"lg"})]})})]}),C==="rules"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-md font-medium text-white",children:"Commission Rules"}),e.jsx("button",{className:"px-3 py-1 bg-green-500/20 text-green-300 rounded-lg text-sm hover:bg-green-500/30 transition-colors",children:"+ Add Rule"})]}),e.jsx("div",{className:"space-y-3",children:n.map(d=>e.jsx("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{name:"Settings",size:"sm"}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-white font-medium",children:d.name}),e.jsxs("p",{className:"text-white/70 text-sm",children:[d.type==="percentage"?`${d.value}%`:`R${d.value}`," â€¢",d.applicableTo.replace("_"," ")," â€¢",d.isActive?"Active":"Inactive"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>g(d.id,{isActive:!d.isActive}),className:`px-3 py-1 rounded-lg text-sm transition-colors ${d.isActive?"bg-green-500/20 text-green-300 hover:bg-green-500/30":"bg-gray-500/20 text-gray-300 hover:bg-gray-500/30"}`,children:d.isActive?"Deactivate":"Activate"}),e.jsx("button",{className:"px-3 py-1 bg-white/10 text-white rounded-lg text-sm hover:bg-white/20 transition-colors",children:"Edit"})]})]})},d.id))})]}),C==="payouts"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-md font-medium text-white",children:"Host Payouts"}),e.jsx("button",{className:"px-3 py-1 bg-blue-500/20 text-blue-300 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"Process All Pending"})]}),e.jsx("div",{className:"space-y-3",children:x.map(d=>e.jsx("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:b(d.status)}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-white font-medium",children:d.hostName}),e.jsxs("p",{className:"text-white/70 text-sm",children:["R",d.amount.toLocaleString()," â€¢ Commission: R",d.commission.toLocaleString()," â€¢ Net: R",d.netAmount.toLocaleString()]}),e.jsxs("p",{className:"text-white/50 text-xs",children:["Scheduled: ",d.scheduledDate.toLocaleDateString(),d.completedDate&&e.jsxs("span",{children:[" â€¢ Completed: ",d.completedDate.toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs border ${m(d.status)}`,children:d.status.charAt(0).toUpperCase()+d.status.slice(1)}),d.status==="pending"&&e.jsx("button",{onClick:()=>k(d.id),className:"px-3 py-1 bg-blue-500/20 text-blue-300 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"Process"})]})]})},d.id))})]})]})},I=class I{constructor(){z(this,"errorLog",[])}static getInstance(){return I.instance||(I.instance=new I),I.instance}handleError(n,o){let x;return n instanceof Error?x={code:this.getErrorCode(n),message:n.message,details:{stack:n.stack,context:o,timestamp:new Date().toISOString()}}:typeof n=="string"?x={code:"UNKNOWN_ERROR",message:n,details:{context:o,timestamp:new Date().toISOString()}}:x={code:"UNKNOWN_ERROR",message:"An unknown error occurred",details:{context:o,timestamp:new Date().toISOString()}},this.logError(x),x}getErrorCode(n){return n.message.includes("fetch")?"NETWORK_ERROR":n.message.includes("timeout")?"TIMEOUT_ERROR":n.message.includes("unauthorized")?"AUTH_ERROR":n.message.includes("forbidden")?"PERMISSION_ERROR":n.message.includes("validation")||n.message.includes("required")?"VALIDATION_ERROR":"UNKNOWN_ERROR"}logError(n){this.errorLog.push(n),this.sendToLoggingService(n)}sendToLoggingService(n){console.log("Sending error to logging service:",n)}getErrorLog(){return[...this.errorLog]}clearErrorLog(){this.errorLog=[]}};z(I,"instance");let G=I;const he=G.getInstance(),ue=c=>c.code==="NETWORK_ERROR"||c.code==="TIMEOUT_ERROR",pe=c=>c.code==="AUTH_ERROR"||c.code==="PERMISSION_ERROR";class ge{constructor(n="http://localhost:5000/api"){z(this,"baseURL");z(this,"defaultTimeout",1e4);z(this,"defaultRetries",3);this.baseURL=n}async request(n,o={}){const{timeout:x=this.defaultTimeout,retries:j=this.defaultRetries,...r}=o,y=`${this.baseURL}${n}`,C=new AbortController,h=setTimeout(()=>C.abort(),x),f={"Content-Type":"application/json",Accept:"application/json"},g=localStorage.getItem("authToken");g&&(f.Authorization=`Bearer ${g}`);const k={...r,headers:{...f,...r.headers},signal:C.signal};let m=null;for(let b=0;b<=j;b++)try{const l=await fetch(y,k);if(clearTimeout(h),!l.ok){const d=await l.json().catch(()=>({}));throw new Error(d.message||`HTTP ${l.status}: ${l.statusText}`)}return{success:!0,data:await l.json()}}catch(l){if(m=he.handleError(l,`API Request: ${n}`),pe(m)||(l==null?void 0:l.status)<500||ue(m)&&b>=j)break;b<j&&await this.delay(Math.pow(2,b)*1e3)}return clearTimeout(h),{success:!1,data:null,message:(m==null?void 0:m.message)||"Request failed",errors:[(m==null?void 0:m.message)||"Unknown error"]}}delay(n){return new Promise(o=>setTimeout(o,n))}async get(n,o){return this.request(n,{...o,method:"GET"})}async post(n,o,x){return this.request(n,{...x,method:"POST",body:o?JSON.stringify(o):void 0})}async put(n,o,x){return this.request(n,{...x,method:"PUT",body:o?JSON.stringify(o):void 0})}async patch(n,o,x){return this.request(n,{...x,method:"PATCH",body:o?JSON.stringify(o):void 0})}async delete(n,o){return this.request(n,{...o,method:"DELETE"})}async uploadFile(n,o,x,j){const r=new FormData;r.append("file",o),x&&Object.entries(x).forEach(([h,f])=>{r.append(h,f)});const y=localStorage.getItem("authToken"),C={};return y&&(C.Authorization=`Bearer ${y}`),this.request(n,{...j,method:"POST",body:r,headers:{...C,...j==null?void 0:j.headers}})}async getPaginated(n,o,x){const j=new URLSearchParams;o&&Object.entries(o).forEach(([C,h])=>{h!=null&&j.append(C,h.toString())});const r=j.toString(),y=r?`${n}?${r}`:n;return this.get(y,x)}async healthCheck(){try{return(await this.get("/health")).success}catch{return!1}}}const O=new ge,be=()=>{const[c,n]=p.useState({totalUsers:0,totalVehicles:0,totalBookings:0,totalRevenue:0,activeUsers:0,pendingBookings:0,supportTickets:0}),[o,x]=p.useState([]),[j,r]=p.useState([]),[y,C]=p.useState([]),[h]=p.useState([]),[f,g]=p.useState([]),[k,m]=p.useState([]),[b,l]=p.useState(!0),[i,d]=p.useState("overview");p.useEffect(()=>{v()},[]);const v=async()=>{var a,A,D,K,X,Z;l(!0);try{const[F,q,H,W,Y,J]=await Promise.all([O.get("/admin/users"),O.get("/admin/vehicles"),O.get("/admin/bookings"),O.get("/admin/documents"),O.get("/admin/disputes"),O.get("/admin/stats")]);F.success?x(((a=F.data)==null?void 0:a.users)||[]):console.error("Failed to fetch users:",F.message),q.success?r(((A=q.data)==null?void 0:A.vehicles)||[]):console.error("Failed to fetch vehicles:",q.message),H.success?C(((D=H.data)==null?void 0:D.bookings)||[]):console.error("Failed to fetch bookings:",H.message),W.success?g(((K=W.data)==null?void 0:K.documents)||[]):console.error("Failed to fetch documents:",W.message),Y.success?m(((X=Y.data)==null?void 0:X.disputes)||[]):console.error("Failed to fetch disputes:",Y.message),J.success?n(((Z=J.data)==null?void 0:Z.stats)||{totalUsers:0,totalVehicles:0,totalBookings:0,totalRevenue:0,activeUsers:0,pendingBookings:0,supportTickets:0}):console.error("Failed to fetch stats:",J.message)}catch(F){console.error("Error fetching admin data:",F),x([]),r([]),C([]),g([]),m([]),n({totalUsers:0,totalVehicles:0,totalBookings:0,totalRevenue:0,activeUsers:0,pendingBookings:0,supportTickets:0})}finally{l(!1)}},t=a=>`R${a.toLocaleString()}`,w=a=>new Date(a).toLocaleDateString(),S=a=>{switch(a){case"active":case"confirmed":return"text-green-600 bg-green-100 dark:bg-green-900/20";case"pending":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20";case"cancelled":return"text-red-600 bg-red-100 dark:bg-red-900/20";default:return"text-gray-600 bg-gray-100 dark:bg-gray-700"}},L=a=>{r(A=>A.map(D=>D.id===a?{...D,status:"approved"}:D))},s=a=>{r(A=>A.map(D=>D.id===a?{...D,status:"declined"}:D))},R=a=>{g(A=>A.map(D=>D.id===a?{...D,status:"approved"}:D))},$=a=>{g(A=>A.map(D=>D.id===a?{...D,status:"rejected"}:D))},U=a=>{m(A=>A.map(D=>D.id===a?{...D,status:"resolved"}:D))},N=a=>{x(A=>A.map(D=>D.id===a?{...D,isActive:!1}:D))},T=a=>{x(A=>A.map(D=>D.id===a?{...D,isActive:!0}:D))};return b?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-700 rounded w-1/3 mb-8"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[...Array(4)].map((a,A)=>e.jsx("div",{className:"h-32 bg-gray-300 dark:bg-gray-700 rounded-lg"},A))})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Admin Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Manage your RideShare SA platform"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-blue-600 text-xl",children:"ðŸ‘¥"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.totalUsers.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Users"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center mr-4",children:e.jsx(u,{name:"Car",size:"lg",className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.totalVehicles.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Vehicles"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center mr-4",children:e.jsx(u,{name:"Clipboard",size:"lg",className:"text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.totalBookings.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Bookings"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg flex items-center justify-center mr-4",children:e.jsx(u,{name:"DollarSign",size:"lg",className:"text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t(c.totalRevenue)}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Revenue"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.activeUsers.toLocaleString()})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:e.jsx(u,{name:"CheckCircle",size:"lg",className:"text-green-600"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Pending Bookings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.pendingBookings})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/20 rounded-lg flex items-center justify-center",children:e.jsx(u,{name:"Clock",size:"lg",className:"text-yellow-600"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Support Tickets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.supportTickets})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-red-600 text-xl",children:"ðŸŽ«"})})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:[{id:"overview",name:"Overview",icon:"BarChart"},{id:"approvals",name:"Approvals",icon:"CheckCircle"},{id:"fraud",name:"Fraud Detection",icon:"Shield"},{id:"commission",name:"Commission",icon:"DollarSign"},{id:"users",name:"Users",icon:"Users"},{id:"vehicles",name:"Vehicles",icon:"Car"},{id:"bookings",name:"Bookings",icon:"Clipboard"},{id:"documents",name:"Documents",icon:"FileText"},{id:"disputes",name:"Disputes",icon:"Scale"},{id:"analytics",name:"Analytics",icon:"TrendingUp"}].map(a=>e.jsxs("button",{onClick:()=>d(a.id),className:`py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${i===a.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(u,{name:a.icon,size:"sm",className:"mr-2"}),a.name]},a.id))})})}),i==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Bookings"}),e.jsx("div",{className:"space-y-4",children:y.slice(0,5).map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:a.vehicleName}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[a.renterName," â†’ ",a.hostName]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t(a.totalAmount)}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${S(a.status)}`,children:a.status})]})]},a.id))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Platform Health"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Uptime"}),e.jsx("span",{className:"font-semibold text-green-600",children:"99.9%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Response Time"}),e.jsx("span",{className:"font-semibold text-green-600",children:"120ms"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Error Rate"}),e.jsx("span",{className:"font-semibold text-green-600",children:"0.1%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Active Sessions"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"1,247"})]})]})]})]}),i==="approvals"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Document & Listing Approvals"}),e.jsx(oe,{users:o,vehicles:j,profileCompletions:h,onApproveUser:(a,A)=>{console.log("Approving user:",a,A)},onRejectUser:(a,A,D)=>{console.log("Rejecting user:",a,A,D)},onApproveVehicle:(a,A)=>{console.log("Approving vehicle:",a,A)},onRejectVehicle:(a,A,D)=>{console.log("Rejecting vehicle:",a,A,D)},onApproveProfile:(a,A)=>{console.log("Approving profile:",a,A)},onRejectProfile:(a,A,D)=>{console.log("Rejecting profile:",a,A,D)}})]})}),i==="fraud"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Fraud Detection System"}),e.jsx(xe,{})]})}),i==="commission"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Commission & Payout Management"}),e.jsx(me,{})]})}),i==="users"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"User Management"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Join Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bookings"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:o.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-primary-600 text-sm font-medium",children:a.firstName.charAt(0)})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[a.firstName," ",a.lastName]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300",children:a.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:w(a.joinDate)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:a.totalBookings}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a.isActive?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-300"}`,children:a.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:"Edit"}),a.isActive?e.jsx("button",{onClick:()=>N(a.id),className:"text-red-600 hover:text-red-900",children:"Suspend"}):e.jsx("button",{onClick:()=>T(a.id),className:"text-green-600 hover:text-green-900",children:"Activate"})]})})]},a.id))})]})})]}),i==="vehicles"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Vehicle Management"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Vehicle"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Host"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Price/Day"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bookings"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Rating"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:j.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[a.make," ",a.model," ",a.year]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:a.hostName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:a.location}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t(a.pricePerDay)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:a.totalBookings}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(u,{name:"Star",size:"sm",className:"text-yellow-400"}),e.jsx("span",{className:"ml-1",children:a.rating})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${S(a.status)}`,children:a.status}),a.status==="pending"&&e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>L(a.id),className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded hover:bg-green-200",children:"Approve"}),e.jsx("button",{onClick:()=>s(a.id),className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded hover:bg-red-200",children:"Decline"})]})]})})]},a.id))})]})})]}),i==="bookings"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Booking Management"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Booking"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Renter"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Host"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Dates"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:y.map(a=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.vehicleName}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["#",a.id]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:a.renterName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:a.hostName}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[e.jsx("div",{children:w(a.pickupDate)}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:["to ",w(a.returnDate)]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t(a.totalAmount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${S(a.status)}`,children:a.status})})]},a.id))})]})})]}),i==="documents"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Document Approval"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Review and approve user documents"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Document Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"File Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Uploaded"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:f.map(a=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.user}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.userEmail})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white capitalize",children:a.type.replace("_"," ")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:a.fileName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:w(a.uploadedAt)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(B,{status:a.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>R(a.id),className:"text-green-600 hover:text-green-900",children:"Approve"}),e.jsx("button",{onClick:()=>$(a.id),className:"text-red-600 hover:text-red-900",children:"Reject"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:"View"})]})})]},a.id))})]})})]})}),i==="disputes"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Dispute Management"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Handle user disputes and issues"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Dispute"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Parties"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:k.map(a=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-xs truncate",children:a.description})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[e.jsx("div",{children:a.renter}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400",children:["vs ",a.host]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white capitalize",children:a.type.replace("_"," ")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a.priority==="high"?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300":a.priority==="medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300":"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300"}`,children:a.priority})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(B,{status:a.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:"View Details"}),a.status!=="resolved"&&e.jsx("button",{onClick:()=>U(a.id),className:"text-green-600 hover:text-green-900",children:"Resolve"})]})})]},a.id))})]})})]})}),i==="analytics"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"User Analytics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total Users"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:c.totalUsers})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Active Users"}),e.jsx("span",{className:"font-semibold text-green-600",children:c.activeUsers})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"New This Month"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"12"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Revenue Analytics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total Revenue"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:t(c.totalRevenue)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"This Month"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["R",Math.floor(c.totalRevenue*.3).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Growth Rate"}),e.jsx("span",{className:"font-semibold text-blue-600",children:"+15.2%"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Platform Health"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"99.9%"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Uptime"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"120ms"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Avg Response Time"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:"1,247"}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Active Sessions"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Monthly Revenue Chart"}),e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx(u,{name:"BarChart",size:"lg",className:"text-gray-400 mx-auto"})}),e.jsx("p",{children:"Revenue chart would be displayed here"}),e.jsx("p",{className:"text-sm",children:"Integration with chart library needed"})]})})]})]})]})})},P=({children:c,className:n="",title:o,subtitle:x,icon:j,hover:r=!0})=>e.jsxs(de,{variant:"card",className:`rounded-2xl p-6 ${r?"hover:scale-105":""} ${n}`,shadow:!0,children:[(o||x||j)&&e.jsxs("div",{className:"flex items-center mb-4",children:[j&&e.jsx("div",{className:"w-12 h-12 bg-white/20 dark:bg-white/10 rounded-xl flex items-center justify-center mr-4",children:j}),e.jsxs("div",{children:[o&&e.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white mb-1",children:o}),x&&e.jsx("p",{className:"text-white/70 dark:text-white/60 text-sm",children:x})]})]}),c]}),E=({label:c,name:n,value:o,onChange:x,accept:j="image/*,.pdf",required:r=!1,error:y,className:C,description:h})=>{const[f,g]=p.useState(!1),k=v=>{v&&x(v)},m=v=>{v.preventDefault(),g(!1);const t=Array.from(v.dataTransfer.files);t.length>0&&k(t[0])},b=v=>{v.preventDefault(),g(!0)},l=v=>{v.preventDefault(),g(!1)},i=v=>{var w;const t=(w=v.target.files)==null?void 0:w[0];t&&k(t)},d=()=>{x(void 0)};return e.jsxs("div",{className:Q("space-y-2",C),children:[e.jsxs("label",{className:"block text-sm font-medium text-white/90",children:[c,r&&e.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),h&&e.jsx("p",{className:"text-xs text-white/70",children:h}),e.jsx("div",{className:Q("relative border-2 border-dashed rounded-lg p-6 transition-all duration-300",f?"border-blue-400 bg-blue-500/10":"border-white/20 hover:border-white/40",y?"border-red-400 bg-red-500/10":"bg-white/5 backdrop-blur-md","hover:bg-white/10"),onDrop:m,onDragOver:b,onDragLeave:l,children:o?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500/20 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:o.name}),e.jsxs("p",{className:"text-xs text-white/70",children:[(o.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{type:"button",onClick:d,className:"text-red-400 hover:text-red-300 transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-4 bg-white/10 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-white/70",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),e.jsx("p",{className:"text-sm text-white/80 mb-2",children:f?"Drop your file here":"Drag and drop your file here"}),e.jsx("p",{className:"text-xs text-white/60 mb-4",children:"or click to browse (JPG, PNG, PDF up to 10MB)"}),e.jsx("input",{type:"file",name:n,accept:j,onChange:i,className:"hidden",id:`file-input-${n}`,required:r}),e.jsxs("label",{htmlFor:`file-input-${n}`,className:"inline-flex items-center px-4 py-2 bg-white/10 hover:bg-white/20 text-white text-sm font-medium rounded-lg transition-all duration-300 cursor-pointer border border-white/20",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Choose File"]})]})}),y&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:y})]})},je=({userId:c,className:n=""})=>{const[o,x]=p.useState([]),[j,r]=p.useState(!0);p.useEffect(()=>{y()},[c]);const y=async()=>{try{const h=localStorage.getItem("authToken"),f=await fetch(`/api/users/${c}/saved-vehicles`,{headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json"}});if(f.ok){const g=await f.json();x(g.vehicles||[])}}catch(h){console.error("Error fetching saved vehicles:",h),x([{id:"1",hostId:"host1",make:"Toyota",model:"Hilux",year:2022,type:"bakkie",pricePerDay:250,location:"Cape Town",images:["https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?w=400"],features:[],status:"approved",approvalStatus:"approved",description:"Perfect for your South African adventure!",fuelType:"petrol",transmission:"manual",seats:5,doors:4,isAvailable:!0,rating:4.8,reviewCount:24,createdAt:new Date,updatedAt:new Date}])}finally{r(!1)}},C=async h=>{try{const f=localStorage.getItem("authToken");await fetch(`/api/users/${c}/saved-vehicles/${h}`,{method:"DELETE",headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"}}),x(g=>g.filter(k=>k.id!==h))}catch(f){console.error("Error removing saved vehicle:",f)}};return j?e.jsx("div",{className:`space-y-4 ${n}`,children:[...Array(3)].map((h,f)=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-32 bg-white/10 rounded-xl"})},f))}):e.jsx("div",{className:`space-y-4 ${n}`,children:o.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(u,{name:"Heart",size:"lg",className:"text-white/50 mb-4"}),e.jsx("p",{className:"text-white/70",children:"No saved vehicles yet"}),e.jsx("p",{className:"text-white/50 text-sm",children:"Browse vehicles and save your favorites!"})]}):o.map(h=>e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20 hover:bg-white/20 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:h.images[0],alt:`${h.make} ${h.model}`,className:"w-20 h-20 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:[h.year," ",h.make," ",h.model]}),e.jsx("p",{className:"text-white/70 text-sm mb-2",children:h.location}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-yellow-400 flex items-center space-x-1",children:[e.jsx(u,{name:"Star",size:"sm"}),e.jsx("span",{children:h.rating})]}),e.jsxs("span",{className:"text-white/70",children:["(",h.reviewCount," reviews)"]}),e.jsxs("span",{className:"text-green-400 font-semibold",children:["R",h.pricePerDay,"/day"]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-500/20 text-blue-300 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"View Details"}),e.jsx("button",{onClick:()=>C(h.id),className:"px-3 py-1 bg-red-500/20 text-red-300 rounded-lg text-sm hover:bg-red-500/30 transition-colors",children:"Remove"})]})]})},h.id))})},fe=({userId:c,className:n=""})=>{const[o,x]=p.useState([]),[j,r]=p.useState(!0);p.useEffect(()=>{y()},[c]);const y=async()=>{try{const g=localStorage.getItem("authToken"),k=await fetch(`/api/users/${c}/documents`,{headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}});if(k.ok){const m=await k.json();x(m.documents||[])}}catch(g){console.error("Error fetching documents:",g),x([{id:"1",type:"driver_license",name:"Driver License",expiryDate:new Date(Date.now()+30*24*60*60*1e3),status:"expiring_soon",daysUntilExpiry:30},{id:"2",type:"id_document",name:"South African ID",expiryDate:new Date(Date.now()+365*24*60*60*1e3),status:"valid",daysUntilExpiry:365}])}finally{r(!1)}},C=g=>{switch(g){case"expired":return"text-red-400 bg-red-500/20 border-red-500/30";case"expiring_soon":return"text-yellow-400 bg-yellow-500/20 border-yellow-500/30";case"valid":return"text-green-400 bg-green-500/20 border-green-500/30";default:return"text-gray-400 bg-gray-500/20 border-gray-500/30"}},h=g=>{switch(g){case"expired":return"XCircle";case"expiring_soon":return"AlertTriangle";case"valid":return"CheckCircle";default:return"FileText"}},f=g=>{switch(g){case"driver_license":return"Car";case"id_document":return"CreditCard";case"proof_of_address":return"Home";default:return"FileText"}};return j?e.jsx("div",{className:`space-y-3 ${n}`,children:[...Array(2)].map((g,k)=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-16 bg-white/10 rounded-lg"})},k))}):e.jsx("div",{className:`space-y-3 ${n}`,children:o.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(u,{name:"FileText",size:"lg",className:"text-white/50 mb-2"}),e.jsx("p",{className:"text-white/70 text-sm",children:"No documents uploaded yet"})]}):o.map(g=>e.jsx("div",{className:`p-3 rounded-lg border ${C(g.status)}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{name:f(g.type),size:"sm"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:g.name}),e.jsxs("p",{className:"text-xs text-white/70",children:["Expires: ",g.expiryDate.toLocaleDateString()]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{name:h(g.status),size:"sm"}),e.jsx("span",{className:"text-xs",children:g.status==="expired"?"Expired":g.status==="expiring_soon"?`${g.daysUntilExpiry} days`:"Valid"})]}),g.status==="expiring_soon"&&e.jsx("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors mt-1",children:"Renew Now"})]})]})},g.id))})},we=({userId:c,className:n=""})=>{const[o,x]=p.useState([]),[j,r]=p.useState(!0),[y,C]=p.useState("");p.useEffect(()=>{h()},[c]);const h=async()=>{try{const m=localStorage.getItem("authToken"),b=await fetch(`/api/users/${c}/promotions`,{headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});if(b.ok){const l=await b.json();x(l.promotions||[])}}catch(m){console.error("Error fetching promotions:",m),x([{id:"1",code:"WELCOME20",title:"Welcome Bonus",description:"20% off your first booking",discountType:"percentage",discountValue:20,minBookingAmount:500,validUntil:new Date(Date.now()+30*24*60*60*1e3),isActive:!0,usageCount:0,maxUsage:1},{id:"2",code:"SAVE100",title:"Fixed Discount",description:"R100 off bookings over R1000",discountType:"fixed",discountValue:100,minBookingAmount:1e3,validUntil:new Date(Date.now()+14*24*60*60*1e3),isActive:!0,usageCount:0,maxUsage:3}])}finally{r(!1)}},f=async m=>{try{const b=localStorage.getItem("authToken");(await fetch(`/api/users/${c}/promotions/apply`,{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify({code:m})})).ok&&C(m)}catch(b){console.error("Error applying promo code:",b)}},g=m=>m.discountType==="percentage"?`${m.discountValue}% off`:`R${m.discountValue} off`,k=m=>new Date>m;return j?e.jsx("div",{className:`space-y-3 ${n}`,children:[...Array(2)].map((m,b)=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-20 bg-white/10 rounded-lg"})},b))}):e.jsx("div",{className:`space-y-4 ${n}`,children:o.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(u,{name:"Gift",size:"lg",className:"text-white/50 mb-2"}),e.jsx("p",{className:"text-white/70 text-sm",children:"No promotions available"})]}):o.map(m=>e.jsxs("div",{className:`p-4 rounded-lg border ${k(m.validUntil)?"bg-gray-500/20 border-gray-500/30":"bg-green-500/20 border-green-500/30"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{name:"Gift",size:"sm"}),e.jsx("span",{className:"font-semibold text-white",children:m.title}),e.jsxs("span",{className:"text-xs text-white/70",children:["(",m.code,")"]})]}),e.jsx("span",{className:`text-sm font-bold ${k(m.validUntil)?"text-gray-400":"text-green-400"}`,children:g(m)})]}),e.jsx("p",{className:"text-sm text-white/80 mb-3",children:m.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-white/60",children:["Valid until: ",m.validUntil.toLocaleDateString(),m.minBookingAmount&&e.jsxs("span",{className:"ml-2",children:["â€¢ Min: R",m.minBookingAmount]})]}),!k(m.validUntil)&&e.jsx("button",{onClick:()=>f(m.code),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${y===m.code?"bg-blue-500/20 text-blue-300":"bg-white/10 text-white hover:bg-white/20"}`,children:y===m.code?"Applied":"Use Code"})]})]},m.id))})},ve=({basePrice:c,onCalculate:n,className:o=""})=>{const[x,j]=p.useState("daily"),[r,y]=p.useState(1),[C,h]=p.useState({insurance:!1,gps:!1,childSeat:!1,driver:!1,fuel:!1}),f={insurance:50,gps:30,childSeat:25,driver:200,fuel:100},g=()=>{let m=c*r;x==="hourly"?m=c*r:x==="weekly"&&(m=c*r*7*.85);let b=0;const l=Object.entries(C).filter(([t,w])=>w).map(([t,w])=>({name:t,price:f[t]}));b=l.reduce((t,w)=>t+w.price,0);const i=(m+b)*.1,d=m+b+i,v={baseTotal:m,addOns:l,addOnTotal:b,serviceFee:i,total:d,rentalType:x,duration:r};return n(d,v),v},k=(m,b)=>{h(l=>({...l,[m]:b}))};return re.useEffect(()=>{g()},[x,r,C,c]),e.jsxs("div",{className:`space-y-4 ${o}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Rental Type"}),e.jsx("div",{className:"flex space-x-2",children:[{value:"hourly",label:"Hourly",icon:"Clock"},{value:"daily",label:"Daily",icon:"Calendar"},{value:"weekly",label:"Weekly",icon:"Calendar"}].map(m=>e.jsxs("button",{onClick:()=>j(m.value),className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all ${x===m.value?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-white/10 text-white/70 border border-white/20 hover:bg-white/20"}`,children:[e.jsx(u,{name:m.icon,size:"sm",className:"mr-1"}),m.label]},m.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-white/90 mb-2",children:["Duration (",x==="hourly"?"Hours":x==="daily"?"Days":"Weeks",")"]}),e.jsx("input",{type:"number",min:"1",value:r,onChange:m=>y(parseInt(m.target.value)||1),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Add-ons"}),e.jsx("div",{className:"space-y-2",children:[{key:"insurance",label:"Comprehensive Insurance",icon:"Shield",price:f.insurance},{key:"gps",label:"GPS Navigation",icon:"MapPin",price:f.gps},{key:"childSeat",label:"Child Safety Seat",icon:"Baby",price:f.childSeat},{key:"driver",label:"Professional Driver",icon:"User",price:f.driver},{key:"fuel",label:"Full Tank of Fuel",icon:"Fuel",price:f.fuel}].map(m=>e.jsxs("label",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:C[m.key],onChange:b=>k(m.key,b.target.checked),className:"w-4 h-4 text-blue-600 bg-white/10 border-white/20 rounded focus:ring-blue-500"}),e.jsx(u,{name:m.icon,size:"sm"}),e.jsx("span",{className:"text-white/90 text-sm",children:m.label})]}),e.jsxs("span",{className:"text-white/70 text-sm",children:["R",m.price]})]},m.key))})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20",children:[e.jsx("h4",{className:"text-sm font-medium text-white/90 mb-3",children:"Cost Breakdown"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-white/70",children:["Base (",x,"):"]}),e.jsxs("span",{className:"text-white",children:["R",c," Ã— ",r]})]}),Object.entries(C).filter(([m,b])=>b).map(([m,b])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-white/70 capitalize",children:[m.replace(/([A-Z])/g," $1"),":"]}),e.jsxs("span",{className:"text-white",children:["R",f[m]]})]},m)),e.jsxs("div",{className:"flex justify-between border-t border-white/20 pt-2",children:[e.jsx("span",{className:"text-white/70",children:"Service Fee (10%):"}),e.jsxs("span",{className:"text-white",children:["R",Math.round(c*r*.1)]})]}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg border-t border-white/20 pt-2",children:[e.jsx("span",{className:"text-white",children:"Total:"}),e.jsxs("span",{className:"text-green-400",children:["R",Math.round(g().total)]})]})]})]})]})},Ne=({vehicleId:c,basePrice:n,onPriceUpdate:o,className:x=""})=>{const[j,r]=p.useState([]),[y,C]=p.useState(n),[h,f]=p.useState(!0);p.useEffect(()=>{g()},[c]),p.useEffect(()=>{k()},[j,n]);const g=async()=>{try{const l=localStorage.getItem("authToken"),i=await fetch(`/api/vehicles/${c}/pricing-rules`,{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(i.ok){const d=await i.json();r(d.rules||[])}}catch(l){console.error("Error fetching pricing rules:",l),r([{id:"1",name:"Weekend Premium",type:"time",conditions:{dayOfWeek:[0,6]},multiplier:1.5,isActive:!0},{id:"2",name:"Peak Hours",type:"time",conditions:{timeRange:{start:"07:00",end:"09:00"}},multiplier:1.3,isActive:!0},{id:"3",name:"High Demand",type:"demand",conditions:{demandLevel:"high"},multiplier:1.4,isActive:!0}])}finally{f(!1)}},k=()=>{let l=n;const i=new Date,d=i.getDay(),v=i.toTimeString().slice(0,5),w=j.filter(S=>{var L;if(!S.isActive)return!1;switch(S.type){case"time":if((L=S.conditions.dayOfWeek)!=null&&L.includes(d))return!0;if(S.conditions.timeRange){const{start:s,end:R}=S.conditions.timeRange;return v>=s&&v<=R}return!1;case"demand":return S.conditions.demandLevel==="high";default:return!1}}).reduce((S,L)=>Math.max(S,L.multiplier),1);l=Math.round(n*w),C(l),o(l)},m=l=>{r(i=>i.map(d=>d.id===l?{...d,isActive:!d.isActive}:d))},b=l=>{r(i=>i.filter(d=>d.id!==l))};return h?e.jsx("div",{className:`space-y-4 ${x}`,children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-white/10 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-32 bg-white/10 rounded-lg"})]})}):e.jsxs("div",{className:`space-y-4 ${x}`,children:[e.jsx("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Current Price"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Based on active pricing rules"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["R",y]}),e.jsx("div",{className:"text-sm text-white/70",children:y>n?`+${Math.round((y-n)/n*100)}%`:"Base price"})]})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-white/90 mb-3",children:"Active Pricing Rules"}),e.jsx("div",{className:"space-y-2",children:j.filter(l=>l.isActive).map(l=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-500/20 border border-green-500/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{name:"Zap",size:"sm"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:l.name}),e.jsxs("p",{className:"text-xs text-white/70",children:[l.type==="time"&&"Time-based",l.type==="demand"&&"Demand-based",l.type==="seasonal"&&"Seasonal",l.type==="event"&&"Event-based"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-green-300",children:["+",Math.round((l.multiplier-1)*100),"%"]}),e.jsx("button",{onClick:()=>m(l.id),className:"text-red-400 hover:text-red-300 transition-colors",children:"âœ•"})]})]},l.id))})]}),j.filter(l=>!l.isActive).length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-white/90 mb-3",children:"Inactive Rules"}),e.jsx("div",{className:"space-y-2",children:j.filter(l=>!l.isActive).map(l=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 border border-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{name:"Pause",size:"sm"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white/70",children:l.name}),e.jsxs("p",{className:"text-xs text-white/50",children:[l.type==="time"&&"Time-based",l.type==="demand"&&"Demand-based",l.type==="seasonal"&&"Seasonal",l.type==="event"&&"Event-based"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>m(l.id),className:"text-green-400 hover:text-green-300 transition-colors",children:e.jsx(u,{name:"Play",size:"sm"})}),e.jsx("button",{onClick:()=>b(l.id),className:"text-red-400 hover:text-red-300 transition-colors",children:e.jsx(u,{name:"Trash",size:"sm"})})]})]},l.id))})]}),e.jsx("button",{className:"w-full p-3 border-2 border-dashed border-white/30 rounded-lg text-white/70 hover:border-white/50 hover:text-white transition-colors",children:"+ Add New Pricing Rule"})]})},ye=({hostId:c,className:n=""})=>{const[o,x]=p.useState([]),[j,r]=p.useState(!0),[y,C]=p.useState(!1),[h,f]=p.useState([]);p.useEffect(()=>{g()},[c]);const g=async()=>{try{const i=localStorage.getItem("authToken"),d=await fetch(`/api/hosts/${c}/fleet`,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(d.ok){const v=await d.json();x(v.vehicles||[])}}catch(i){console.error("Error fetching fleet:",i),x([{id:"1",hostId:c,make:"Toyota",model:"Hilux",year:2022,type:"bakkie",pricePerDay:250,location:"Cape Town",images:["https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?w=400"],features:[],status:"approved",approvalStatus:"approved",description:"Perfect for your South African adventure!",fuelType:"petrol",transmission:"manual",seats:5,doors:4,isAvailable:!0,rating:4.8,reviewCount:24,createdAt:new Date,updatedAt:new Date},{id:"2",hostId:c,make:"BMW",model:"X3",year:2021,type:"suv",pricePerDay:400,location:"Johannesburg",images:["https://images.unsplash.com/photo-1549317336-206569e8475c?w=400"],features:[],status:"pending",approvalStatus:"pending",description:"Luxury SUV for city and country driving.",fuelType:"petrol",transmission:"automatic",seats:5,doors:4,isAvailable:!0,rating:4.9,reviewCount:12,createdAt:new Date,updatedAt:new Date}])}finally{r(!1)}},k=i=>{f(d=>d.includes(i)?d.filter(v=>v!==i):[...d,i])},m=async i=>{if(h.length!==0)try{const d=localStorage.getItem("authToken");await fetch(`/api/hosts/${c}/fleet/bulk-action`,{method:"POST",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"},body:JSON.stringify({vehicleIds:h,action:i})}),x(v=>{switch(i){case"activate":return v.map(t=>h.includes(t.id)?{...t,isAvailable:!0}:t);case"deactivate":return v.map(t=>h.includes(t.id)?{...t,isAvailable:!1}:t);case"delete":return v.filter(t=>!h.includes(t.id));default:return v}}),f([])}catch(d){console.error("Error performing bulk action:",d)}},b=i=>{switch(i){case"approved":return"text-green-400 bg-green-500/20 border-green-500/30";case"pending":return"text-yellow-400 bg-yellow-500/20 border-yellow-500/30";case"rejected":return"text-red-400 bg-red-500/20 border-red-500/30";default:return"text-gray-400 bg-gray-500/20 border-gray-500/30"}},l=i=>{switch(i){case"approved":return"CheckCircle";case"pending":return"Clock";case"rejected":return"XCircle";default:return"FileText"}};return j?e.jsx("div",{className:`space-y-4 ${n}`,children:[...Array(3)].map((i,d)=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-24 bg-white/10 rounded-lg"})},d))}):e.jsxs("div",{className:`space-y-4 ${n}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Fleet Management"}),e.jsxs("p",{className:"text-white/70 text-sm",children:[o.length," vehicles in your fleet"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>C(!y),className:"px-3 py-1 bg-blue-500/20 text-blue-300 rounded-lg text-sm hover:bg-blue-500/30 transition-colors flex items-center space-x-1",children:[e.jsx(u,{name:"Upload",size:"sm"}),e.jsx("span",{children:"Bulk Upload"})]}),e.jsx("button",{className:"px-3 py-1 bg-green-500/20 text-green-300 rounded-lg text-sm hover:bg-green-500/30 transition-colors",children:"+ Add Vehicle"})]})]}),h.length>0&&e.jsx("div",{className:"bg-blue-500/20 border border-blue-500/30 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-blue-300 text-sm",children:[h.length," vehicle(s) selected"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>m("activate"),className:"px-2 py-1 bg-green-500/20 text-green-300 rounded text-xs hover:bg-green-500/30 transition-colors",children:"Activate"}),e.jsx("button",{onClick:()=>m("deactivate"),className:"px-2 py-1 bg-yellow-500/20 text-yellow-300 rounded text-xs hover:bg-yellow-500/30 transition-colors",children:"Deactivate"}),e.jsx("button",{onClick:()=>m("delete"),className:"px-2 py-1 bg-red-500/20 text-red-300 rounded text-xs hover:bg-red-500/30 transition-colors",children:"Delete"})]})]})}),e.jsx("div",{className:"space-y-3",children:o.map(i=>e.jsx("div",{className:`p-4 rounded-lg border ${h.includes(i.id)?"bg-blue-500/20 border-blue-500/30":"bg-white/10 border-white/20"} hover:bg-white/20 transition-all duration-300`,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"checkbox",checked:h.includes(i.id),onChange:()=>k(i.id),className:"w-4 h-4 text-blue-600 bg-white/10 border-white/20 rounded focus:ring-blue-500"}),e.jsx("img",{src:i.images[0],alt:`${i.make} ${i.model}`,className:"w-16 h-16 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"text-lg font-semibold text-white",children:[i.year," ",i.make," ",i.model]}),e.jsxs("div",{className:`px-2 py-1 rounded-full text-xs border ${b(i.approvalStatus)} flex items-center space-x-1`,children:[e.jsx(u,{name:l(i.approvalStatus),size:"sm"}),e.jsx("span",{children:i.approvalStatus})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-white/70",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(u,{name:"MapPin",size:"sm"}),e.jsx("span",{children:i.location})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(u,{name:"DollarSign",size:"sm"}),e.jsxs("span",{children:["R",i.pricePerDay,"/day"]})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(u,{name:"Star",size:"sm"}),e.jsxs("span",{children:[i.rating," (",i.reviewCount,")"]})]}),e.jsx("span",{className:`${i.isAvailable?"text-green-400":"text-red-400"}`,children:i.isAvailable?"Available":"Unavailable"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-1 bg-white/10 text-white rounded-lg text-sm hover:bg-white/20 transition-colors",children:"Edit"}),e.jsx("button",{className:"px-3 py-1 bg-white/10 text-white rounded-lg text-sm hover:bg-white/20 transition-colors",children:"View"})]})]})},i.id))}),o.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx(u,{name:"Car",size:"lg",className:"text-white/50 mx-auto"})}),e.jsx("p",{className:"text-white/70",children:"No vehicles in your fleet yet"}),e.jsx("p",{className:"text-white/50 text-sm",children:"Add your first vehicle to start earning!"})]})]})};class ke{constructor(){z(this,"PROFILE_STATUS_KEY","profileStatus")}getProfileStatus(){try{const n=localStorage.getItem(this.PROFILE_STATUS_KEY);if(n){const o=JSON.parse(n);return{...o,completionDate:o.completionDate?new Date(o.completionDate):void 0,submittedAt:o.submittedAt?new Date(o.submittedAt):void 0}}}catch(n){console.error("Error reading profile status:",n)}return{isCompleted:!1,approvalStatus:"pending"}}setProfileCompleted(n){const o={isCompleted:!0,completionDate:new Date,approvalStatus:"pending",submittedAt:new Date};localStorage.setItem(this.PROFILE_STATUS_KEY,JSON.stringify(o))}updateApprovalStatus(n,o,x){const r={...this.getProfileStatus(),approvalStatus:n,adminNotes:o,rejectionReason:x};localStorage.setItem(this.PROFILE_STATUS_KEY,JSON.stringify(r))}clearProfileStatus(){localStorage.removeItem(this.PROFILE_STATUS_KEY)}isProfileCompleted(){return this.getProfileStatus().isCompleted}isProfileApproved(){return this.getProfileStatus().approvalStatus==="approved"}isProfilePending(){return this.getProfileStatus().approvalStatus==="pending"}isProfileRejected(){return this.getProfileStatus().approvalStatus==="rejected"}getApprovalStatusText(){switch(this.getProfileStatus().approvalStatus){case"approved":return"Profile Approved - You can now book vehicles!";case"rejected":return"Profile Rejected - Please update and resubmit";case"pending":return"Profile Pending Approval - Please wait for admin review";default:return"Profile Status Unknown"}}getApprovalStatusColor(){switch(this.getProfileStatus().approvalStatus){case"approved":return"text-green-400";case"rejected":return"text-red-400";case"pending":return"text-yellow-400";default:return"text-gray-400"}}getApprovalStatusBadgeColor(){switch(this.getProfileStatus().approvalStatus){case"approved":return"bg-green-500/20 text-green-300 border-green-500/30";case"rejected":return"bg-red-500/20 text-red-300 border-red-500/30";case"pending":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";default:return"bg-gray-500/20 text-gray-300 border-gray-500/30"}}}const V=new ke,te=({userRole:c,onProfileComplete:n,className:o=""})=>{const[x,j]=p.useState(1),[r,y]=p.useState({dateOfBirth:"",address:"",city:"",province:"",postalCode:"",emergencyContact:"",emergencyPhone:"",idDocument:void 0,driverLicense:void 0,proofOfAddress:void 0,businessName:"",businessRegistration:"",bankAccount:"",taxNumber:"",vehicleRegistration:void 0,roadworthyCertificate:void 0,insuranceCertificate:void 0}),[C,h]=p.useState(!1),[f,g]=p.useState(""),k=(t,w)=>{y(S=>({...S,[t]:w}))},m=(t,w)=>{y(S=>({...S,[t]:w}))},b=async()=>{h(!0),g("");try{const w=(c==="renter"?["dateOfBirth","address","city","province","postalCode","emergencyContact","emergencyPhone"]:["dateOfBirth","address","city","province","postalCode","businessName","businessRegistration","bankAccount","taxNumber"]).filter(s=>!r[s]);if(w.length>0){g(`Please fill in all required fields: ${w.join(", ")}`),h(!1);return}const L=(c==="renter"?["idDocument","driverLicense","proofOfAddress"]:["idDocument","driverLicense","proofOfAddress","vehicleRegistration","roadworthyCertificate","insuranceCertificate"]).filter(s=>!r[s]);if(L.length>0){g(`Please upload all required documents: ${L.join(", ")}`),h(!1);return}await n(r),V.setProfileCompleted(r)}catch{g("Failed to complete profile. Please try again.")}finally{h(!1)}},l=()=>{x<3&&j(x+1)},i=()=>{x>1&&j(x-1)},d=()=>{switch(x){case 1:return"Personal Information";case 2:return c==="renter"?"Identity Documents":"Business & Vehicle Documents";case 3:return"Review & Submit";default:return"Profile Completion"}},v=()=>{switch(x){case 1:return"User";case 2:return"FileText";case 3:return"CheckCircle";default:return"Clipboard"}};return e.jsxs("div",{className:`space-y-6 ${o}`,children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{name:v(),size:"lg"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:d()}),e.jsxs("p",{className:"text-white/70 text-sm",children:["Step ",x," of 3 - Complete your profile to start using RideShare SA"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-white/70",children:"Progress"}),e.jsxs("div",{className:"text-lg font-semibold text-white",children:[Math.round(x/3*100),"%"]})]})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${x/3*100}%`}})})]}),x===1&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Date of Birth *"}),e.jsx("input",{type:"date",value:r.dateOfBirth,onChange:t=>k("dateOfBirth",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Emergency Contact *"}),e.jsx("input",{type:"text",value:r.emergencyContact,onChange:t=>k("emergencyContact",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Full name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Emergency Phone *"}),e.jsx("input",{type:"tel",value:r.emergencyPhone,onChange:t=>k("emergencyPhone",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"+27 82 123 4567",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Address *"}),e.jsx("input",{type:"text",value:r.address,onChange:t=>k("address",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Street address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"City *"}),e.jsx("input",{type:"text",value:r.city,onChange:t=>k("city",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Cape Town",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Province *"}),e.jsxs("select",{value:r.province,onChange:t=>k("province",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/20",required:!0,children:[e.jsx("option",{value:"",children:"Select Province"}),e.jsx("option",{value:"Western Cape",children:"Western Cape"}),e.jsx("option",{value:"Eastern Cape",children:"Eastern Cape"}),e.jsx("option",{value:"Northern Cape",children:"Northern Cape"}),e.jsx("option",{value:"Free State",children:"Free State"}),e.jsx("option",{value:"KwaZulu-Natal",children:"KwaZulu-Natal"}),e.jsx("option",{value:"North West",children:"North West"}),e.jsx("option",{value:"Gauteng",children:"Gauteng"}),e.jsx("option",{value:"Mpumalanga",children:"Mpumalanga"}),e.jsx("option",{value:"Limpopo",children:"Limpopo"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Postal Code *"}),e.jsx("input",{type:"text",value:r.postalCode,onChange:t=>k("postalCode",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"8001",required:!0})]})]})]}),x===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Identity Documents"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(E,{label:"ID Document",name:"idDocument",value:r.idDocument,onChange:t=>m("idDocument",t),required:!0,description:"Upload a clear photo of your South African ID or passport"}),e.jsx(E,{label:"Driver's License",name:"driverLicense",value:r.driverLicense,onChange:t=>m("driverLicense",t),required:!0,description:"Upload a clear photo of your valid driver's license"}),e.jsx(E,{label:"Proof of Address",name:"proofOfAddress",value:r.proofOfAddress,onChange:t=>m("proofOfAddress",t),required:!0,description:"Upload a recent utility bill or bank statement (not older than 3 months)"})]})]}),c==="host"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Business Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Business Name *"}),e.jsx("input",{type:"text",value:r.businessName,onChange:t=>k("businessName",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Your business name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Business Registration Number *"}),e.jsx("input",{type:"text",value:r.businessRegistration,onChange:t=>k("businessRegistration",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"CIPC registration number",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Bank Account Number *"}),e.jsx("input",{type:"text",value:r.bankAccount,onChange:t=>k("bankAccount",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Your bank account number",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Tax Number *"}),e.jsx("input",{type:"text",value:r.taxNumber,onChange:t=>k("taxNumber",t.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"SARS tax number",required:!0})]})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Vehicle Documents"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(E,{label:"Vehicle Registration",name:"vehicleRegistration",value:r.vehicleRegistration,onChange:t=>m("vehicleRegistration",t),required:!0,description:"Official vehicle registration document"}),e.jsx(E,{label:"Roadworthy Certificate",name:"roadworthyCertificate",value:r.roadworthyCertificate,onChange:t=>m("roadworthyCertificate",t),required:!0,description:"Valid roadworthy certificate"}),e.jsx(E,{label:"Insurance Certificate",name:"insuranceCertificate",value:r.insuranceCertificate,onChange:t=>m("insuranceCertificate",t),required:!0,description:"Comprehensive insurance certificate"})]})]})]})]}),x===3&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Review Your Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white/70",children:"Date of Birth:"}),e.jsx("span",{className:"text-white ml-2",children:r.dateOfBirth})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/70",children:"Address:"}),e.jsx("span",{className:"text-white ml-2",children:r.address})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/70",children:"City:"}),e.jsx("span",{className:"text-white ml-2",children:r.city})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/70",children:"Province:"}),e.jsx("span",{className:"text-white ml-2",children:r.province})]}),c==="host"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-white/70",children:"Business Name:"}),e.jsx("span",{className:"text-white ml-2",children:r.businessName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white/70",children:"Business Registration:"}),e.jsx("span",{className:"text-white ml-2",children:r.businessRegistration})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-white/20",children:[e.jsx("h4",{className:"text-md font-medium text-white mb-2",children:"Uploaded Documents"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:r.idDocument?"text-green-400":"text-red-400",children:"â—"}),e.jsx("span",{className:"text-white/70",children:"ID Document"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:r.driverLicense?"text-green-400":"text-red-400",children:"â—"}),e.jsx("span",{className:"text-white/70",children:"Driver's License"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:r.proofOfAddress?"text-green-400":"text-red-400",children:"â—"}),e.jsx("span",{className:"text-white/70",children:"Proof of Address"})]}),c==="host"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:r.vehicleRegistration?"text-green-400":"text-red-400",children:"â—"}),e.jsx("span",{className:"text-white/70",children:"Vehicle Registration"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:r.roadworthyCertificate?"text-green-400":"text-red-400",children:"â—"}),e.jsx("span",{className:"text-white/70",children:"Roadworthy Certificate"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:r.insuranceCertificate?"text-green-400":"text-red-400",children:"â—"}),e.jsx("span",{className:"text-white/70",children:"Insurance Certificate"})]})]})]})]})]})]}),f&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-red-300 text-sm",children:f})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:i,disabled:x===1,className:`px-6 py-2 rounded-lg font-medium transition-all ${x===1?"bg-gray-500/20 text-gray-400 cursor-not-allowed":"bg-white/10 text-white hover:bg-white/20"}`,children:"Previous"}),e.jsx("div",{className:"flex space-x-3",children:x<3?e.jsx("button",{onClick:l,className:"px-6 py-2 bg-blue-500/20 text-blue-300 rounded-lg font-medium hover:bg-blue-500/30 transition-all",children:"Next"}):e.jsx("button",{onClick:b,disabled:C,className:`px-6 py-2 rounded-lg font-medium transition-all ${C?"bg-gray-500/20 text-gray-400 cursor-not-allowed":"bg-green-500/20 text-green-300 hover:bg-green-500/30"}`,children:C?"Submitting...":"Submit for Approval"})})]})]})},Ce=({onSubmit:c,onCancel:n,className:o=""})=>{var R,$,U;const[x,j]=p.useState(1),[r,y]=p.useState({make:"",model:"",year:new Date().getFullYear(),type:"car",pricePerDay:0,location:"",description:"",features:[],images:[],documents:{registration:void 0,roadworthy:void 0,insurance:void 0}}),[C,h]=p.useState(!1),[f,g]=p.useState(""),k=[{value:"car",label:"Car",icon:"Car"},{value:"suv",label:"SUV",icon:"Truck"},{value:"bakkie",label:"Bakkie",icon:"Truck"},{value:"van",label:"Van",icon:"Truck"},{value:"motorcycle",label:"Motorcycle",icon:"Bike"}],m=[{id:"aircon",name:"Air Conditioning",category:"comfort"},{id:"bluetooth",name:"Bluetooth",category:"entertainment"},{id:"gps",name:"GPS Navigation",category:"convenience"},{id:"usb",name:"USB Charging",category:"convenience"},{id:"backup_camera",name:"Backup Camera",category:"safety"},{id:"parking_sensors",name:"Parking Sensors",category:"safety"},{id:"cruise_control",name:"Cruise Control",category:"comfort"},{id:"leather_seats",name:"Leather Seats",category:"comfort"}],b=(N,T)=>{y(a=>({...a,[N]:T}))},l=N=>{y(T=>({...T,features:T.features.some(a=>a.id===N.id)?T.features.filter(a=>a.id!==N.id):[...T.features,N]}))},i=(N,T)=>{y(a=>({...a,documents:{...a.documents,[N]:T}}))},d=N=>{if(N){const T=Array.from(N);y(a=>({...a,images:[...a.images,...T]}))}},v=N=>{var T,a,A;switch(N){case 1:return!!(r.make&&r.model&&r.year&&r.type&&r.pricePerDay>0);case 2:return!!(r.location&&r.description);case 3:return r.images.length>0;case 4:return!!((T=r.documents)!=null&&T.registration&&((a=r.documents)!=null&&a.roadworthy)&&((A=r.documents)!=null&&A.insurance));default:return!0}},t=()=>{v(x)?j(N=>Math.min(N+1,4)):g("Please fill in all required fields before proceeding.")},w=()=>{j(N=>Math.max(N-1,1))},S=async()=>{if(!v(4)){g("Please complete all required fields and upload all documents.");return}h(!0),g("");try{await c(r)}catch{g("Failed to submit vehicle listing. Please try again.")}finally{h(!1)}},L=()=>{switch(x){case 1:return"Vehicle Details";case 2:return"Location & Description";case 3:return"Vehicle Photos";case 4:return"Required Documents";default:return"Vehicle Listing"}},s=()=>{switch(x){case 1:return"Car";case 2:return"MapPin";case 3:return"Camera";case 4:return"FileText";default:return"Clipboard"}};return e.jsxs("div",{className:`space-y-6 ${o}`,children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{name:s(),size:"lg"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:L()}),e.jsxs("p",{className:"text-white/70 text-sm",children:["Step ",x," of 4 - Submit your vehicle for admin approval"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-white/70",children:"Progress"}),e.jsxs("div",{className:"text-lg font-semibold text-white",children:[Math.round(x/4*100),"%"]})]})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${x/4*100}%`}})})]}),x===1&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Vehicle Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Make *"}),e.jsx("input",{type:"text",value:r.make,onChange:N=>b("make",N.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Toyota",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Model *"}),e.jsx("input",{type:"text",value:r.model,onChange:N=>b("model",N.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Corolla",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Year *"}),e.jsx("input",{type:"number",value:r.year,onChange:N=>b("year",parseInt(N.target.value)),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",min:"1990",max:new Date().getFullYear()+1,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Price per Day (R) *"}),e.jsx("input",{type:"number",value:r.pricePerDay,onChange:N=>b("pricePerDay",parseFloat(N.target.value)),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",min:"0",step:"0.01",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Vehicle Type *"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:k.map(N=>e.jsxs("button",{onClick:()=>b("type",N.value),className:`p-3 rounded-lg text-sm font-medium transition-all ${r.type===N.value?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-white/10 text-white/70 border border-white/20 hover:bg-white/20"}`,children:[e.jsx(u,{name:N.icon,size:"sm",className:"mr-2"}),N.label]},N.value))})]})]})]}),x===2&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Location & Description"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Location *"}),e.jsx("input",{type:"text",value:r.location,onChange:N=>b("location",N.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",placeholder:"Cape Town, Western Cape",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Description *"}),e.jsx("textarea",{value:r.description,onChange:N=>b("description",N.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20",rows:4,placeholder:"Describe your vehicle, its condition, and any special features...",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Vehicle Features"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:m.map(N=>e.jsxs("label",{className:"flex items-center space-x-2 p-2 bg-white/5 rounded-lg hover:bg-white/10 transition-colors cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.features.some(T=>T.id===N.id),onChange:()=>l(N),className:"w-4 h-4 text-blue-600 bg-white/10 border-white/20 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm text-white/90",children:N.name})]},N.id))})]})]})]}),x===3&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Vehicle Photos"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Upload Vehicle Photos *"}),e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:N=>d(N.target.files),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-500/20 file:text-blue-300 hover:file:bg-blue-500/30"}),e.jsx("p",{className:"text-xs text-white/60 mt-1",children:"Upload multiple photos showing exterior, interior, and license disc"})]}),r.images.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-white/70 mb-2",children:["Uploaded Photos (",r.images.length,"):"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:r.images.map((N,T)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:URL.createObjectURL(N),alt:`Vehicle photo ${T+1}`,className:"w-full h-20 object-cover rounded-lg"}),e.jsx("button",{onClick:()=>{const a=r.images.filter((A,D)=>D!==T);y(A=>({...A,images:a}))},className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600",children:"Ã—"})]},T))})]})]})]}),x===4&&e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Required Documents"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(E,{label:"Vehicle Registration",name:"registration",value:(R=r.documents)==null?void 0:R.registration,onChange:N=>i("registration",N),required:!0,description:"Official vehicle registration document"}),e.jsx(E,{label:"Roadworthy Certificate",name:"roadworthy",value:($=r.documents)==null?void 0:$.roadworthy,onChange:N=>i("roadworthy",N),required:!0,description:"Valid roadworthy certificate"}),e.jsx(E,{label:"Insurance Certificate",name:"insurance",value:(U=r.documents)==null?void 0:U.insurance,onChange:N=>i("insurance",N),required:!0,description:"Comprehensive insurance certificate"})]})]}),f&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-red-300 text-sm",children:f})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{onClick:w,disabled:x===1,className:`px-6 py-2 rounded-lg font-medium transition-all ${x===1?"bg-gray-500/20 text-gray-400 cursor-not-allowed":"bg-white/10 text-white hover:bg-white/20"}`,children:"Previous"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:n,className:"px-6 py-2 bg-gray-500/20 text-gray-300 rounded-lg font-medium hover:bg-gray-500/30 transition-all",children:"Cancel"}),x<4?e.jsx("button",{onClick:t,className:"px-6 py-2 bg-blue-500/20 text-blue-300 rounded-lg font-medium hover:bg-blue-500/30 transition-all",children:"Next"}):e.jsx("button",{onClick:S,disabled:C,className:`px-6 py-2 rounded-lg font-medium transition-all ${C?"bg-gray-500/20 text-gray-400 cursor-not-allowed":"bg-green-500/20 text-green-300 hover:bg-green-500/30"}`,children:C?"Submitting...":"Submit for Admin Approval"})]})]})]})},Se=({hostId:c,className:n=""})=>{const[o,x]=p.useState([]),[j,r]=p.useState(!0),[y,C]=p.useState(!1);p.useEffect(()=>{h()},[c]);const h=async()=>{try{const i=[{id:"1",vehicleId:"vehicle-1",vehicleName:"2020 Toyota Corolla",status:"approved",message:"Your vehicle listing has been approved and is now visible to renters.",adminNotes:"Great condition, all documents verified.",timestamp:new Date(Date.now()-72e5),read:!1},{id:"2",vehicleId:"vehicle-2",vehicleName:"2019 BMW X3",status:"rejected",message:"Your vehicle listing requires some updates before approval.",rejectionReason:"Insurance certificate is expired. Please upload a current certificate.",timestamp:new Date(Date.now()-18e6),read:!0}];x(i)}catch(i){console.error("Failed to fetch notifications:",i)}finally{r(!1)}},f=i=>{x(d=>d.map(v=>v.id===i?{...v,read:!0}:v))},g=()=>{x(i=>i.map(d=>({...d,read:!0})))},k=i=>i==="approved"?"CheckCircle":"XCircle",m=i=>i==="approved"?"text-green-400 bg-green-500/20 border-green-500/30":"text-red-400 bg-red-500/20 border-red-500/30",b=o.filter(i=>!i.read).length,l=y?o:o.slice(0,3);return j?e.jsx("div",{className:`space-y-3 ${n}`,children:[...Array(2)].map((i,d)=>e.jsx("div",{className:"animate-pulse",children:e.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[e.jsx("div",{className:"h-4 bg-white/20 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-white/20 rounded w-1/2"})]})},d))}):o.length===0?e.jsxs("div",{className:`text-center py-4 ${n}`,children:[e.jsx(u,{name:"Bell",size:"lg",className:"text-white/50 mb-2"}),e.jsx("p",{className:"text-white/70 text-sm",children:"No vehicle approval notifications"})]}):e.jsxs("div",{className:`space-y-3 ${n}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{name:"Bell",size:"sm"}),e.jsx("span",{className:"text-sm font-medium text-white",children:"Vehicle Approvals"}),b>0&&e.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-300 rounded-full text-xs",children:b})]}),o.length>3&&e.jsx("button",{onClick:()=>C(!y),className:"text-xs text-white/70 hover:text-white transition-colors",children:y?"Show Less":`Show All (${o.length})`})]}),e.jsx("div",{className:"space-y-2",children:l.map(i=>e.jsx("div",{className:`p-3 rounded-lg border transition-all duration-200 ${i.read?"bg-white/5 border-white/10":"bg-white/10 border-white/20"}`,onClick:()=>f(i.id),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`p-1 rounded-full ${m(i.status)}`,children:e.jsx(u,{name:k(i.status),size:"sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:"text-sm font-medium text-white truncate",children:i.vehicleName}),e.jsx("span",{className:"text-xs text-white/60",children:i.timestamp.toLocaleDateString()})]}),e.jsx("p",{className:"text-sm text-white/80 mb-2",children:i.message}),i.adminNotes&&e.jsx("div",{className:"bg-white/5 rounded p-2 mb-2",children:e.jsxs("p",{className:"text-xs text-white/70",children:[e.jsx("span",{className:"font-medium",children:"Admin Notes:"})," ",i.adminNotes]})}),i.rejectionReason&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded p-2",children:e.jsxs("p",{className:"text-xs text-red-300",children:[e.jsx("span",{className:"font-medium",children:"Action Required:"})," ",i.rejectionReason]})})]})]})},i.id))}),b>0&&e.jsx("div",{className:"pt-2 border-t border-white/20",children:e.jsx("button",{onClick:g,className:"w-full text-xs text-white/70 hover:text-white transition-colors py-2",children:"Mark all as read"})})]})},se=({onEditProfile:c,onResubmitProfile:n})=>{const o=V.getProfileStatus();if(!o.isCompleted)return null;const x=()=>{switch(o.approvalStatus){case"approved":return e.jsx(u,{name:"CheckCircle",size:"lg",className:"text-green-400"});case"rejected":return e.jsx(u,{name:"XCircle",size:"lg",className:"text-red-400"});case"pending":return e.jsx(u,{name:"Clock",size:"lg",className:"text-yellow-400"});default:return e.jsx(u,{name:"AlertCircle",size:"lg",className:"text-gray-400"})}},j=()=>o.approvalStatus==="rejected"?e.jsxs("button",{onClick:n,className:"px-4 py-2 bg-blue-500/20 text-blue-300 rounded-lg hover:bg-blue-500/30 transition-colors border border-blue-500/30",children:[e.jsx(u,{name:"RefreshCw",size:"sm",className:"mr-2"}),"Resubmit Profile"]}):o.approvalStatus==="pending"?e.jsxs("button",{onClick:c,className:"px-4 py-2 bg-gray-500/20 text-gray-300 rounded-lg hover:bg-gray-500/30 transition-colors border border-gray-500/30",children:[e.jsx(u,{name:"Edit",size:"sm",className:"mr-2"}),"Edit Profile"]}):null;return e.jsx("div",{className:"bg-white/5 backdrop-blur-md rounded-xl p-6 border border-white/10 mb-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:x()}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Profile Status"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${V.getApprovalStatusBadgeColor()}`,children:o.approvalStatus.toUpperCase()})]}),e.jsx("p",{className:`text-sm mb-3 ${V.getApprovalStatusColor()}`,children:V.getApprovalStatusText()}),o.completionDate&&e.jsxs("p",{className:"text-xs text-white/60 mb-3",children:["Completed: ",o.completionDate.toLocaleDateString()]}),o.adminNotes&&e.jsx("div",{className:"bg-white/5 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-white/80",children:[e.jsx("strong",{children:"Admin Notes:"})," ",o.adminNotes]})}),o.rejectionReason&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 mb-3",children:e.jsxs("p",{className:"text-sm text-red-300",children:[e.jsx("strong",{children:"Rejection Reason:"})," ",o.rejectionReason]})}),j()&&e.jsx("div",{className:"mt-4",children:j()})]})]})})},ee=()=>{const[c,n]=p.useState([]),[o,x]=p.useState([]),[j,r]=p.useState({profile:"pending",license:"unverified",id:"unverified"}),[y,C]=p.useState(!0),[h,f]=p.useState("overview"),[g,k]=p.useState(V.isProfileCompleted()),[m,b]=p.useState(!1);p.useEffect(()=>{l()},[]);const l=async()=>{try{const t=localStorage.getItem("accessToken"),w=await fetch("/api/bookings",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(w.ok){const S=await w.json();n(S.bookings||[])}r({profile:"approved",license:"pending",id:"unverified"}),x([{id:1,type:"license",name:"Driver License.pdf",status:"pending",uploadedAt:"2024-12-01"},{id:2,type:"id",name:"ID Document.pdf",status:"unverified",uploadedAt:null}])}catch(t){console.error("Error fetching renter data:",t)}finally{C(!1)}},i=(t,w)=>{console.log("Uploading document:",t.name,"Type:",w);const S={id:Date.now(),type:w,name:t.name,status:"pending",uploadedAt:new Date().toISOString()};x(L=>[...L,S])},d=c.filter(t=>t.status==="confirmed"||t.status==="pending"),v=c.filter(t=>t.status==="completed").reduce((t,w)=>t+w.totalPrice,0);return y?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-700 rounded w-1/3 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(3)].map((t,w)=>e.jsx("div",{className:"h-32 bg-gray-300 dark:bg-gray-700 rounded-lg"},w))})]})}):!g&&!m?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:e.jsxs("div",{className:"text-center",children:[e.jsx(u,{name:"User",size:"lg",className:"text-white/50 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Complete Your Profile"}),e.jsx("p",{className:"text-white/70 mb-6",children:"To start using RideShare SA, please complete your profile and upload required documents."}),e.jsx("button",{onClick:()=>b(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-300",children:"Complete Profile"})]})})}):g&&!m?e.jsx("div",{className:"space-y-6",children:e.jsx(se,{onEditProfile:()=>b(!0),onResubmitProfile:()=>b(!0)})}):m?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Complete Your Profile"}),e.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 bg-white/10 text-white/70 rounded-lg hover:bg-white/20 transition-all",children:"Cancel"})]}),e.jsx(te,{userRole:"renter",onProfileComplete:t=>{console.log("Profile completed:",t),k(!0),b(!1)}})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Renter Dashboard"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>f("overview"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${h==="overview"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(u,{name:"BarChart",size:"sm",className:"mr-1"}),"Overview"]}),e.jsxs("button",{onClick:()=>f("saved"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${h==="saved"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(u,{name:"Heart",size:"sm",className:"mr-1"}),"Saved"]}),e.jsxs("button",{onClick:()=>f("calculator"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${h==="calculator"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(u,{name:"Calculator",size:"sm",className:"mr-1"}),"Calculator"]}),e.jsxs("button",{onClick:()=>f("documents"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${h==="documents"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(u,{name:"FileText",size:"sm",className:"mr-1"}),"Documents"]}),e.jsxs("button",{onClick:()=>f("promotions"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${h==="promotions"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(u,{name:"Gift",size:"sm",className:"mr-1"}),"Promotions"]}),e.jsxs("button",{onClick:()=>f("bookings"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${h==="bookings"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(u,{name:"Car",size:"sm",className:"mr-1"}),"Bookings"]}),e.jsxs("button",{onClick:()=>f("payments"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${h==="payments"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(u,{name:"CreditCard",size:"sm",className:"mr-1"}),"Payments"]})]})]}),h==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(P,{title:"Active Bookings",subtitle:"Current rentals",icon:"Car",className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:d.length}),e.jsx("div",{className:"text-white/70 text-sm",children:"Active now"})]}),e.jsxs(P,{title:"Total Spent",subtitle:"All time spending",icon:"DollarSign",className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:["R",v.toLocaleString()]}),e.jsx("div",{className:"text-white/70 text-sm",children:"Lifetime total"})]}),e.jsxs(P,{title:"Verification Status",subtitle:"Account verification",icon:"CheckCircle",className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:e.jsx(u,{name:j.profile==="approved"?"CheckCircle":"Clock",size:"lg"})}),e.jsx("div",{className:"text-white/70 text-sm",children:j.profile==="approved"?"Verified":"Pending"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(P,{title:"Recent Bookings",subtitle:"Your latest vehicle rentals",icon:"Clipboard",children:e.jsxs("div",{className:"space-y-3",children:[c.slice(0,3).map(t=>{var w,S;return e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:((w=t.listing)==null?void 0:w.title)||"Unknown Vehicle"}),e.jsxs("p",{className:"text-sm text-white/70",children:[(S=t.listing)==null?void 0:S.location," â€¢ ",new Date(t.startDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-white font-semibold",children:["R",t.totalPrice]}),e.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${t.status==="confirmed"?"bg-green-500/20 text-green-200 border border-green-400/30":t.status==="pending"?"bg-yellow-500/20 text-yellow-200 border border-yellow-400/30":t.status==="cancelled"?"bg-red-500/20 text-red-200 border border-red-400/30":"bg-gray-500/20 text-gray-200 border border-gray-400/30"}`,children:t.status})]})]},t.id)}),c.length===0&&e.jsx("p",{className:"text-white/60 text-center py-4",children:"No bookings yet"})]})}),e.jsx(P,{title:"Verification Status",subtitle:"Document verification progress",icon:"Clipboard",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{name:"User",size:"lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Profile"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Basic information"})]})]}),e.jsx(B,{status:j.profile})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ†”"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Driver License"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Driving permit"})]})]}),e.jsx(B,{status:j.license})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ†”"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"ID Document"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Identity verification"})]})]}),e.jsx(B,{status:j.id})]})]})})]})]}),h==="saved"&&e.jsx("div",{className:"space-y-6",children:e.jsx(P,{title:"Saved Vehicles",subtitle:"Your favorite vehicles for easy access",icon:"Heart",children:e.jsx(je,{userId:"current-user"})})}),h==="calculator"&&e.jsx("div",{className:"space-y-6",children:e.jsx(P,{title:"Rental Calculator",subtitle:"Calculate your rental costs with add-ons",icon:"ðŸ§®",children:e.jsx(ve,{basePrice:250,onCalculate:(t,w)=>{console.log("Calculated total:",t,w)}})})}),h==="documents"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(P,{title:"Document Upload",subtitle:"Upload your verification documents",icon:"ðŸ“„",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"Driver License"}),e.jsx(E,{label:"Driver License",name:"driverLicense",onChange:t=>t&&i(t,"license"),accept:"image/*,application/pdf"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-4",children:"ID Document"}),e.jsx(E,{label:"ID Document",name:"idDocument",onChange:t=>t&&i(t,"id"),accept:"image/*,application/pdf"})]})]})}),e.jsx(P,{title:"Document Expiry Reminders",subtitle:"Keep your documents up to date",icon:"â°",children:e.jsx(fe,{userId:"current-user"})}),e.jsx(P,{title:"Uploaded Documents",subtitle:"Your submitted documents",icon:"ðŸ“",children:e.jsx("div",{className:"space-y-3",children:o.map(t=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“„"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:t.name}),e.jsx("p",{className:"text-white/70 text-sm",children:t.uploadedAt?`Uploaded ${new Date(t.uploadedAt).toLocaleDateString()}`:"Not uploaded"})]})]}),e.jsx(B,{status:t.status})]},t.id))})})]}),h==="promotions"&&e.jsx("div",{className:"space-y-6",children:e.jsx(P,{title:"Available Promotions",subtitle:"Save money with these special offers",icon:"ðŸŽ",children:e.jsx(we,{userId:"current-user"})})}),h==="bookings"&&e.jsx(P,{title:"My Bookings",subtitle:"All your vehicle rentals",icon:"Car",children:e.jsxs("div",{className:"space-y-4",children:[c.map(t=>{var w,S;return e.jsx("div",{className:"p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:((w=t.listing)==null?void 0:w.title)||"Unknown Vehicle"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-white/70",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",(S=t.listing)==null?void 0:S.location]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Dates:"})," ",new Date(t.startDate).toLocaleDateString()," - ",new Date(t.endDate).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Total:"})," R",t.totalPrice]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx(B,{status:t.status,className:"ml-2"})]})]})]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-500/20 text-blue-200 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"View Details"}),t.status==="pending"&&e.jsx("button",{className:"px-3 py-1 bg-red-500/20 text-red-200 rounded-lg text-sm hover:bg-red-500/30 transition-colors",children:"Cancel"})]})]})},t.id)}),c.length===0&&e.jsx("p",{className:"text-white/60 text-center py-8",children:"No bookings yet"})]})}),h==="payments"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(P,{title:"Payment History",subtitle:"Your transaction history",icon:"CreditCard",children:e.jsxs("div",{className:"space-y-4",children:[c.filter(t=>t.status==="completed").map(t=>{var w;return e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:((w=t.listing)==null?void 0:w.title)||"Vehicle Rental"}),e.jsx("p",{className:"text-white/70 text-sm",children:new Date(t.startDate).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white font-semibold",children:["R",t.totalPrice]}),e.jsxs("p",{className:"text-green-400 text-sm flex items-center space-x-1",children:[e.jsx(u,{name:"CheckCircle",size:"sm"}),e.jsx("span",{children:"Paid"})]})]})]},t.id)}),c.filter(t=>t.status==="completed").length===0&&e.jsx("p",{className:"text-white/60 text-center py-8",children:"No payment history yet"})]})}),e.jsx(P,{title:"Payment Methods",subtitle:"Manage your payment options",icon:"CreditCard",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{name:"CreditCard",size:"lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Credit Card"}),e.jsx("p",{className:"text-white/70 text-sm",children:"**** **** **** 1234"})]})]}),e.jsx("button",{className:"px-3 py-1 bg-blue-500/20 text-blue-200 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"Edit"})]})}),e.jsx("button",{className:"w-full p-4 border-2 border-dashed border-white/30 rounded-xl text-white/70 hover:border-white/50 hover:text-white transition-colors",children:"+ Add Payment Method"})]})})]})]})},De=()=>{const[c,n]=p.useState([]),[o,x]=p.useState([]),[j,r]=p.useState({total:0,thisMonth:0,lastMonth:0}),[y,C]=p.useState(!0),[h,f]=p.useState("overview"),[g,k]=p.useState(V.isProfileCompleted()),[m,b]=p.useState(!1),[l,i]=p.useState(!1);p.useEffect(()=>{d()},[]);const d=async()=>{try{const s=localStorage.getItem("accessToken"),R=await fetch("/api/listings/host/my-listings",{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(R.ok){const $=await R.json();n($.listings||[])}x([{id:"1",vehicleName:"2020 Toyota Corolla",renterName:"John Doe",startDate:"2024-12-15",endDate:"2024-12-17",totalAmount:1350,status:"pending"},{id:"2",vehicleName:"2019 BMW X3",renterName:"Jane Smith",startDate:"2024-12-20",endDate:"2024-12-22",totalAmount:2400,status:"confirmed"}]),r({total:15750,thisMonth:3750,lastMonth:4200})}catch(s){console.error("Error fetching host data:",s)}finally{C(!1)}},v=(s,R)=>{x($=>$.map(U=>U.id===s?{...U,status:R==="accept"?"confirmed":"rejected"}:U))},t=async s=>{try{console.log("Submitting vehicle for approval:",s),alert("Vehicle submitted for admin approval. You will be notified once it's reviewed."),i(!1)}catch(R){console.error("Failed to submit vehicle:",R),alert("Failed to submit vehicle. Please try again.")}},w=c.filter(s=>s.status==="approved"),S=c.filter(s=>s.status==="pending"),L=c.filter(s=>s.status==="declined");return y?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-gray-300 dark:bg-gray-700 rounded w-1/3 mb-6"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(3)].map((s,R)=>e.jsx("div",{className:"h-32 bg-gray-300 dark:bg-gray-700 rounded-lg"},R))})]})}):!g&&!m?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:e.jsxs("div",{className:"text-center",children:[e.jsx(u,{name:"User",size:"lg",className:"text-white/50 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Complete Your Host Profile"}),e.jsx("p",{className:"text-white/70 mb-6",children:"To start hosting on RideShare SA, please complete your profile and upload required business documents."}),e.jsx("button",{onClick:()=>b(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-300",children:"Complete Profile"})]})})}):g&&!m?e.jsx("div",{className:"space-y-6",children:e.jsx(se,{onEditProfile:()=>b(!0),onResubmitProfile:()=>b(!0)})}):m?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Complete Your Host Profile"}),e.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 bg-white/10 text-white/70 rounded-lg hover:bg-white/20 transition-all",children:"Cancel"})]}),e.jsx(te,{userRole:"host",onProfileComplete:s=>{console.log("Host profile completed:",s),k(!0),b(!1)}})]}):l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"List Your Vehicle"}),e.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 bg-white/10 text-white/70 rounded-lg hover:bg-white/20 transition-all",children:"Cancel"})]}),e.jsx(Ce,{onSubmit:t,onCancel:()=>i(!1)})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Host Dashboard"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>f("overview"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${h==="overview"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(u,{name:"BarChart",size:"sm",className:"mr-1"}),"Overview"]}),e.jsxs("button",{onClick:()=>f("fleet"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${h==="fleet"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(u,{name:"Car",size:"sm",className:"mr-1"}),"Fleet"]}),e.jsxs("button",{onClick:()=>f("pricing"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${h==="pricing"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(u,{name:"DollarSign",size:"sm",className:"mr-1"}),"Pricing"]}),e.jsxs("button",{onClick:()=>f("vehicles"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${h==="vehicles"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(u,{name:"Clipboard",size:"sm",className:"mr-1"}),"Listings"]}),e.jsxs("button",{onClick:()=>f("bookings"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${h==="bookings"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(u,{name:"Calendar",size:"sm",className:"mr-1"}),"Bookings"]}),e.jsxs("button",{onClick:()=>f("earnings"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${h==="earnings"?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"}`,children:[e.jsx(u,{name:"DollarSign",size:"sm",className:"mr-1"}),"Earnings"]})]})]}),h==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(P,{title:"Approved Listings",subtitle:"Active vehicles",icon:"CheckCircle",className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:w.length}),e.jsx("div",{className:"text-white/70 text-sm",children:"Ready to rent"})]}),e.jsxs(P,{title:"Pending Approval",subtitle:"Awaiting review",icon:"Clock",className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:S.length}),e.jsx("div",{className:"text-white/70 text-sm",children:"Under review"})]}),e.jsxs(P,{title:"Total Earnings",subtitle:"All time revenue",icon:"DollarSign",className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:["R",j.total.toLocaleString()]}),e.jsx("div",{className:"text-white/70 text-sm",children:"Lifetime total"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(P,{title:"Vehicle Approval Notifications",subtitle:"Latest approval updates",icon:"Bell",children:e.jsx(Se,{hostId:"current-host"})}),e.jsx(P,{title:"Recent Bookings",subtitle:"Latest rental requests",icon:"Clipboard",children:e.jsxs("div",{className:"space-y-3",children:[o.slice(0,3).map(s=>e.jsxs("div",{className:"flex justify-between items-center p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:s.vehicleName}),e.jsxs("p",{className:"text-sm text-white/70",children:[s.renterName," â€¢ ",new Date(s.startDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"text-white font-semibold",children:["R",s.totalAmount]}),e.jsx(B,{status:s.status})]})]},s.id)),o.length===0&&e.jsx("p",{className:"text-white/60 text-center py-4",children:"No bookings yet"})]})}),e.jsx(P,{title:"Listing Status",subtitle:"Vehicle approval status",icon:"BarChart",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{name:"CheckCircle",size:"lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Approved"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Ready to rent"})]})]}),e.jsx("span",{className:"text-white font-bold text-xl",children:w.length})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{name:"Clock",size:"lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Pending"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Under review"})]})]}),e.jsx("span",{className:"text-white font-bold text-xl",children:S.length})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(u,{name:"XCircle",size:"lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Declined"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Needs attention"})]})]}),e.jsx("span",{className:"text-white font-bold text-xl",children:L.length})]})]})})]})]}),h==="fleet"&&e.jsx("div",{className:"space-y-6",children:e.jsx(P,{title:"Fleet Management",subtitle:"Manage your entire vehicle fleet",icon:"Car",children:e.jsx(ye,{hostId:"current-host"})})}),h==="pricing"&&e.jsx("div",{className:"space-y-6",children:e.jsx(P,{title:"Dynamic Pricing",subtitle:"Optimize your pricing with smart rules",icon:"DollarSign",children:e.jsx(Ne,{vehicleId:"sample-vehicle",basePrice:250,onPriceUpdate:s=>{console.log("Updated price:",s)}})})}),h==="vehicles"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(P,{title:"Vehicle Management",subtitle:"Manage your vehicle listings",icon:"Car",children:e.jsxs("div",{className:"space-y-4",children:[c.map(s=>e.jsx("div",{className:"p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:s.title}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-white/70",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Location:"})," ",s.location]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Price:"})," R",s.pricePerDay,"/day"]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx(B,{status:s.status,className:"ml-2"})]}),s.declineReason&&e.jsxs("p",{className:"text-red-400 text-sm mt-1",children:["Reason: ",s.declineReason]})]})]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-500/20 text-blue-200 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"Edit"}),e.jsx("button",{className:"px-3 py-1 bg-green-500/20 text-green-200 rounded-lg text-sm hover:bg-green-500/30 transition-colors",children:"View"})]})]})},s.id)),c.length===0&&e.jsx("p",{className:"text-white/60 text-center py-8",children:"No vehicles listed yet"})]})}),e.jsx(P,{title:"Add New Vehicle",subtitle:"List a new vehicle for rent",icon:"Car",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(u,{name:"Car",size:"lg",className:"text-white/50 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"List Your Vehicle"}),e.jsx("p",{className:"text-white/70 mb-6",children:"Submit your vehicle for admin approval. Once approved, it will be visible to renters."}),e.jsx("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-300",children:"Start Vehicle Listing"})]})})]}),h==="bookings"&&e.jsx(P,{title:"Booking Requests",subtitle:"Manage rental requests",icon:"Clipboard",children:e.jsxs("div",{className:"space-y-4",children:[o.map(s=>e.jsx("div",{className:"p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:s.vehicleName}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-white/70",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Renter:"})," ",s.renterName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Dates:"})," ",new Date(s.startDate).toLocaleDateString()," - ",new Date(s.endDate).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Total:"})," R",s.totalAmount]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx(B,{status:s.status,className:"ml-2"})]})]})]})]}),s.status==="pending"&&e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>v(s.id,"accept"),className:"px-4 py-2 bg-green-500/20 text-green-200 rounded-lg text-sm hover:bg-green-500/30 transition-colors",children:"Accept"}),e.jsx("button",{onClick:()=>v(s.id,"reject"),className:"px-4 py-2 bg-red-500/20 text-red-200 rounded-lg text-sm hover:bg-red-500/30 transition-colors",children:"Reject"})]})]})},s.id)),o.length===0&&e.jsx("p",{className:"text-white/60 text-center py-8",children:"No booking requests yet"})]})}),h==="earnings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(P,{title:"Total Earnings",subtitle:"All time revenue",icon:"DollarSign",className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:["R",j.total.toLocaleString()]}),e.jsx("div",{className:"text-white/70 text-sm",children:"Lifetime total"})]}),e.jsxs(P,{title:"This Month",subtitle:"Current month earnings",icon:"ðŸ“…",className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:["R",j.thisMonth.toLocaleString()]}),e.jsx("div",{className:"text-white/70 text-sm",children:"December 2024"})]}),e.jsxs(P,{title:"Last Month",subtitle:"Previous month earnings",icon:"BarChart",className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:["R",j.lastMonth.toLocaleString()]}),e.jsx("div",{className:"text-white/70 text-sm",children:"November 2024"})]})]}),e.jsx(P,{title:"Earnings Chart",subtitle:"Monthly revenue overview",icon:"TrendingUp",children:e.jsx("div",{className:"h-64 flex items-center justify-center text-white/60",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4",children:e.jsx(u,{name:"BarChart",size:"lg",className:"text-white/50 mx-auto"})}),e.jsx("p",{children:"Earnings chart would be displayed here"}),e.jsx("p",{className:"text-sm",children:"Integration with chart library needed"})]})})})]})]})},Ee=()=>{const{user:c}=ce(),n=le();return p.useEffect(()=>{if(c)switch(localStorage.setItem("userRole",c.role),c.role){case"renter":n("/dashboard/renter",{replace:!0});break;case"host":n("/dashboard/host",{replace:!0});break;case"admin":n("/dashboard/admin",{replace:!0});break;default:n("/dashboard/renter",{replace:!0})}},[c,n]),e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Dashboard"}),e.jsxs("p",{className:"text-gray-300",children:["Welcome back, ",(c==null?void 0:c.firstName)||"User","!"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"glass-panel p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Navigation"}),e.jsxs("nav",{className:"space-y-2",children:[(c==null?void 0:c.role)==="renter"&&e.jsxs(_,{to:"/dashboard/renter",className:"glass-button flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white transition-all duration-300",children:[e.jsx(u,{name:"User",size:"sm"}),e.jsx("span",{children:"My Bookings"})]}),(c==null?void 0:c.role)==="host"&&e.jsxs(_,{to:"/dashboard/host",className:"glass-button flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white transition-all duration-300",children:[e.jsx(u,{name:"Car",size:"sm"}),e.jsx("span",{children:"My Listings"})]}),(c==null?void 0:c.role)==="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs(_,{to:"/dashboard/admin",className:"glass-button flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white transition-all duration-300",children:[e.jsx(u,{name:"User",size:"sm"}),e.jsx("span",{children:"Admin Panel"})]}),e.jsxs(_,{to:"/dashboard/renter",className:"glass-button flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white transition-all duration-300",children:[e.jsx(u,{name:"User",size:"sm"}),e.jsx("span",{children:"Renter View"})]}),e.jsxs(_,{to:"/dashboard/host",className:"glass-button flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white transition-all duration-300",children:[e.jsx(u,{name:"Car",size:"sm"}),e.jsx("span",{children:"Host View"})]})]})]})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(ne,{children:[e.jsx(M,{path:"/",element:e.jsx(ee,{})}),e.jsx(M,{path:"/renter",element:e.jsx(ee,{})}),e.jsx(M,{path:"/host",element:e.jsx(De,{})}),e.jsx(M,{path:"/admin",element:e.jsx(be,{})})]})})]})]})})};export{Ee as default};
