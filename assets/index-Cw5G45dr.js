const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["/assets/Chatbot-Bx8uOaye.js","/assets/react-vendor-CsyM86xr.js","/assets/vendor-BLLdzSkb.js","/assets/admin-pages-uBlL0uRW.js","/assets/utils-Bi8vyz5k.js","/assets/firebase-COrkt_lY.js","/assets/ui-libs-D-oLdQ-v.js","/assets/AuthModal-BUHnKVqH.js","/assets/AdminLoginModal-CAjsP1-B.js","/assets/dashboard-pages-Bl2HeVGk.js","/assets/Home-C_JoiPhJ.js","/assets/SEO-mBOJAs9y.js","/assets/useAnalytics-DKEjVLC4.js","/assets/Search-DWEL7ZDC.js","/assets/VehicleDetail-C7XPrO6C.js","/assets/About-BGx5Pj4F.js","/assets/Contact-CQCtlPbT.js","/assets/UserDashboard-FokDzwH7.js","/assets/FAQ-BqB1KVOM.js","/assets/Pricing-YWR1RaYB.js","/assets/Login-C14gLyBo.js","/assets/Signup-DyIwRt9W.js","/assets/AdminLogin-COrgIRO9.js","/assets/Unauthorized-_GHTTTOw.js","/assets/NotFound-CPYfXsVC.js"])))=>i.map(i=>d[i]);
import{r as e,u as t,j as s,a,L as r,N as i,o as n,H as l,Q as o,q as c,i as d,k as m,s as h}from"./react-vendor-CsyM86xr.js";import{Q as x}from"./vendor-BLLdzSkb.js";import{u,I as p,d as j,e as g,T as w,f as b}from"./admin-pages-uBlL0uRW.js";import{o as f,a as v,g as N,d as y,b as _,s as k,c as A}from"./firebase-COrkt_lY.js";import{t as E,c as C}from"./utils-Bi8vyz5k.js";import{R as S,H as L}from"./dashboard-pages-Bl2HeVGk.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const z={},P=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),i=r?.nonce||r?.getAttribute("nonce");a=Promise.allSettled(t.map(t=>{if(t=function(e,t){return new URL(e,t).href}(t,s),t in z)return;z[t]=!0;const a=t.endsWith(".css"),r=a?'[rel="stylesheet"]':"";if(s)for(let s=e.length-1;s>=0;s--){const r=e[s];if(r.href===t&&(!a||"stylesheet"===r.rel))return}else if(document.querySelector(`link[href="${t}"]${r}`))return;const n=document.createElement("link");return n.rel=a?"stylesheet":"modulepreload",a||(n.as="script"),n.crossOrigin="",n.href=t,i&&n.setAttribute("nonce",i),document.head.appendChild(n),a?new Promise((e,s)=>{n.addEventListener("load",e),n.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${t}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})},R=new class{currentAdmin=null;authStateListeners=[];constructor(){f(v,async e=>{if(e)try{if(window.location.pathname.includes("/admin")){const t=await this.getAdminData(e.uid);this.currentAdmin=t}else this.currentAdmin=null}catch(t){this.currentAdmin=null}else this.currentAdmin=null;this.authStateListeners.forEach(e=>e(this.currentAdmin))})}async getAdminData(e){try{const t=await N(y(_,"users",e));if(!t.exists())throw new Error("Admin user not found in database");const s=t.data();if("admin"!==s.role)throw new Error("User is not an admin. Current role: "+s.role);return{uid:e,id:e,email:s.email,firstName:s.firstName||"Admin",lastName:s.lastName||"User",role:"admin",isAdmin:!0,createdAt:s.createdAt?.toDate()||new Date}}catch(t){throw t}}async loginAdmin(e){try{const t=(await k(v,e.email,e.password)).user,s=await this.getAdminData(t.uid);return this.currentAdmin=s,s}catch(t){throw new Error(this.getErrorMessage(t.code))}}async logoutAdmin(){try{await A(v),this.currentAdmin=null}catch(e){throw new Error("Failed to sign out")}}getCurrentAdmin(){return this.currentAdmin}onAuthStateChange(e){return this.authStateListeners.push(e),()=>{const t=this.authStateListeners.indexOf(e);t>-1&&this.authStateListeners.splice(t,1)}}getErrorMessage(e){switch(e){case"auth/user-not-found":return"No admin account found with this email address.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/invalid-email":return"Invalid email address.";case"auth/user-disabled":return"This admin account has been disabled.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Please check your connection.";default:return"Admin login failed. Please check your credentials."}}},D=e.createContext(void 0),V=()=>{const t=e.useContext(D);if(void 0===t)throw new Error("useAdminAuth must be used within an AdminAuthProvider");return t},T=({children:a})=>{const[r,i]=e.useState(null),[n,l]=e.useState(!0),o=t();e.useEffect(()=>R.onAuthStateChange(e=>{i(e),l(!1),o(e?"/admin-dashboard":"/",{replace:!0})}),[o]);const c={admin:r,loading:n,login:async(e,t)=>{l(!0);try{await R.loginAdmin({email:e,password:t})}catch(s){throw l(!1),s}},logout:async()=>{l(!0);try{await R.logoutAdmin()}catch(e){throw l(!1),e}}};return s.jsx(D.Provider,{value:c,children:a})},O=e.createContext(void 0),I=({children:t})=>{const[a,r]=e.useState(!1);e.useEffect(()=>{const e=localStorage.getItem("theme");r(e?"dark"===e:window.matchMedia("(prefers-color-scheme: dark)").matches)},[]),e.useEffect(()=>{localStorage.setItem("theme",a?"dark":"light"),a?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[a]);const i={isDark:a,toggleTheme:()=>{r(!a)}};return s.jsx(O.Provider,{value:i,children:t})},U=e.lazy(()=>P(()=>import("./Chatbot-Bx8uOaye.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),M=e.lazy(()=>P(()=>import("./AuthModal-BUHnKVqH.js"),__vite__mapDeps([7,1,2,3,4,5]),import.meta.url)),B=e.lazy(()=>P(()=>import("./AdminLoginModal-CAjsP1-B.js"),__vite__mapDeps([8,1,2,3,4,5,9]),import.meta.url)),H=({children:t})=>{const{user:i,logout:n}=u(),[l,o]=e.useState(!1),[c,d]=e.useState(!1),[m,h]=e.useState(!1),[x,g]=e.useState("login"),w=a(),b=e=>w.pathname===e,f=e=>{g(e),d(!0)},v=[{name:"Home",path:"/",icon:"Home"},{name:"Browse",path:"/search",icon:"Search"},{name:"Pricing",path:"/pricing",icon:"DollarSign"},{name:"Host",path:"/dashboard/host",icon:"Car"},{name:"About",path:"/about",icon:"Info"},{name:"Contact",path:"/contact",icon:"Phone"}];return s.jsxs("div",{className:"min-h-screen",children:[s.jsx("header",{className:"fixed top-2 sm:top-4 left-0 right-0 z-50 w-full px-2 sm:px-4",children:s.jsxs("div",{className:"flex items-center justify-between max-w-6xl mx-auto h-14 sm:h-16 relative",children:[s.jsx(r,{to:"/",className:"flex items-center hover:opacity-80 transition-all duration-300 h-full z-10",children:s.jsx("div",{className:"flex items-center bg-white/20 backdrop-blur-md rounded-lg h-full px-2 sm:px-3 lg:px-6 shadow-xl border border-white/40 hover:bg-white/30 hover:shadow-2xl transition-all duration-300",children:s.jsxs("div",{className:"ml-1 sm:ml-2 lg:ml-3",children:[s.jsx("div",{className:"text-white font-bold text-xs sm:text-sm lg:text-lg transition-all duration-300",children:"RideShare"}),s.jsx("div",{className:"text-white/80 text-xs font-medium",children:"South Africa"})]})})}),s.jsx("nav",{className:"hidden md:flex items-center absolute left-1/2 transform -translate-x-1/2",children:s.jsx("div",{className:"bg-white/25 backdrop-blur-md border border-white/20 rounded-full shadow-xl px-2 lg:px-4 py-2",children:s.jsx("div",{className:"flex items-center justify-center h-[40px] px-2 lg:px-4",children:s.jsx("div",{className:"flex items-center space-x-1",children:v.map(e=>"Host"!==e.name||i?s.jsxs(r,{to:e.path,className:"flex items-center space-x-1 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-300 "+(b(e.path)?"glass-button-primary text-white":"glass-button text-white/80 hover:text-white"),children:[s.jsx(p,{name:e.icon,size:"sm"}),s.jsx("span",{children:e.name})]},e.path):s.jsxs("button",{onClick:()=>f("signup"),className:"flex items-center space-x-1 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-300 glass-button text-white/80 hover:text-white",children:[s.jsx(p,{name:e.icon,size:"sm"}),s.jsx("span",{children:e.name})]},e.path))})})})}),s.jsx("div",{className:"hidden md:flex items-center space-x-1",children:i?s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(j,{userId:i.id,userRole:"Renter"===i.role?"renter":"Host"===i.role?"host":"admin"}),s.jsxs(r,{to:"/dashboard",className:"flex items-center space-x-1 px-2.5 py-1.5 rounded-lg text-sm font-medium transition-all duration-300 "+(b("/dashboard")||w.pathname.startsWith("/dashboard")?"glass-button-primary text-white":"glass-button text-white/80 hover:text-white"),children:[s.jsx(p,{name:"User",size:"sm"}),s.jsx("span",{className:"hidden sm:block",children:"Dashboard"})]}),s.jsxs("button",{onClick:n,className:"glass-button flex items-center space-x-1 px-2.5 py-1.5 text-white/80 hover:text-white transition-all duration-300",children:[s.jsx(p,{name:"Logout",size:"sm"}),s.jsx("span",{className:"hidden sm:block",children:"Logout"})]})]}):s.jsx("div",{className:"flex items-center space-x-1",children:s.jsxs("button",{onClick:()=>f("signup"),className:"glass-button-primary flex items-center space-x-1 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-300",children:[s.jsx(p,{name:"Plus",size:"sm"}),s.jsx("span",{className:"hidden sm:block",children:"Get Started"})]})})}),s.jsxs("div",{className:"md:hidden flex items-center space-x-2",children:[i?s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(r,{to:"/dashboard",className:"flex items-center space-x-1 px-2 py-1.5 rounded-lg text-xs font-medium transition-all duration-300 "+(b("/dashboard")||w.pathname.startsWith("/dashboard")?"glass-button-primary text-white":"glass-button text-white/80 hover:text-white"),children:s.jsx(p,{name:"User",size:"sm"})}),s.jsx("button",{onClick:n,className:"glass-button flex items-center space-x-1 px-2 py-1.5 text-white/80 hover:text-white transition-all duration-300",children:s.jsx(p,{name:"Logout",size:"sm"})})]}):s.jsxs("button",{onClick:()=>f("signup"),className:"glass-button-primary flex items-center space-x-1 px-2 py-1.5 rounded-lg text-xs font-medium transition-all duration-300",children:[s.jsx(p,{name:"Plus",size:"sm"}),s.jsx("span",{className:"hidden xs:block",children:"Start"})]}),s.jsx("button",{onClick:()=>o(!l),className:"glass-button p-1.5 text-white/80 hover:text-white transition-all duration-300",children:s.jsx(p,{name:"Menu",size:"sm"})})]})]})}),l&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"md:hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:()=>o(!1)}),s.jsxs("div",{className:"md:hidden fixed top-16 sm:top-18 left-2 right-2 sm:left-4 sm:right-4 z-50 bg-white/25 backdrop-blur-md border border-white/20 rounded-2xl shadow-2xl px-3 sm:px-4 py-4 max-h-[75vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-white/20",children:[s.jsx("h3",{className:"text-white font-semibold text-base sm:text-lg",children:"Menu"}),s.jsx("button",{onClick:()=>o(!1),className:"glass-button p-1.5 sm:p-2 text-white/80 hover:text-white transition-all duration-300",children:s.jsx(p,{name:"X",size:"sm"})})]}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/10 via-transparent to-black/5 rounded-inherit pointer-events-none"}),s.jsxs("div",{className:"space-y-2 relative z-10",children:[s.jsx("div",{className:"space-y-1",children:v.map(e=>"Host"!==e.name||i?s.jsxs(r,{to:e.path,onClick:()=>o(!1),className:"flex items-center space-x-3 px-3 sm:px-4 py-2.5 sm:py-3 rounded-lg text-sm font-medium transition-all duration-300 w-full "+(b(e.path)?"glass-button-primary text-white":"glass-button text-white/80 hover:text-white"),children:[s.jsx(p,{name:e.icon,size:"sm"}),s.jsx("span",{children:e.name})]},e.path):s.jsxs("button",{onClick:()=>{f("signup"),o(!1)},className:"flex items-center space-x-3 px-3 sm:px-4 py-2.5 sm:py-3 rounded-lg text-sm font-medium transition-all duration-300 w-full glass-button text-white/80 hover:text-white",children:[s.jsx(p,{name:e.icon,size:"sm"}),s.jsx("span",{children:e.name})]},e.path))}),s.jsx("div",{className:"pt-3 border-t border-white/20",children:i?s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"px-3 sm:px-4 py-2 text-white/70 text-xs font-medium truncate",children:["Welcome, ",i.email]}),s.jsxs("div",{className:"px-3 sm:px-4 py-1 text-white/50 text-xs",children:["Role: ",i.role]}),s.jsxs(r,{to:"/dashboard",onClick:()=>o(!1),className:"flex items-center space-x-3 px-3 sm:px-4 py-2.5 sm:py-3 rounded-lg text-sm font-medium transition-all duration-300 w-full "+(b("/dashboard")||w.pathname.startsWith("/dashboard")?"glass-button-primary text-white":"glass-button text-white/80 hover:text-white"),children:[s.jsx(p,{name:"User",size:"sm"}),s.jsx("span",{children:"Dashboard"})]}),s.jsxs("button",{onClick:()=>{n(),o(!1)},className:"glass-button flex items-center space-x-3 w-full px-3 sm:px-4 py-2.5 sm:py-3 text-white/80 hover:text-white transition-all duration-300",children:[s.jsx(p,{name:"Logout",size:"sm"}),s.jsx("span",{children:"Logout"})]})]}):s.jsxs("div",{className:"space-y-1",children:[s.jsxs("button",{onClick:()=>{f("login"),o(!1)},className:"glass-button flex items-center space-x-3 px-3 sm:px-4 py-2.5 sm:py-3 rounded-lg text-sm font-medium transition-all duration-300 w-full text-white/80 hover:text-white",children:[s.jsx(p,{name:"Login",size:"sm"}),s.jsx("span",{children:"Login"})]}),s.jsxs("button",{onClick:()=>{f("signup"),o(!1)},className:"glass-button-primary flex items-center space-x-3 px-3 sm:px-4 py-2.5 sm:py-3 w-full",children:[s.jsx(p,{name:"Plus",size:"sm"}),s.jsx("span",{children:"Sign Up"})]})]})})]})]})]}),s.jsx("main",{className:"pt-16 sm:pt-20",children:t}),s.jsx("footer",{className:"bg-black/50 backdrop-blur-sm border-t border-white/10 py-4",children:s.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center space-y-4 lg:space-y-0",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"logo-footer bg-white/20 backdrop-blur-md rounded-lg p-3 shadow-lg border border-white/40",children:[s.jsx("div",{className:"text-white font-bold text-lg",children:"RideShare"}),s.jsx("div",{className:"text-white/80 text-xs",children:"South Africa"})]}),s.jsx("p",{className:"text-gray-400 text-xs",children:"© 2025 RideShare SA. Cape Town, South Africa"})]}),s.jsxs("div",{className:"flex items-center flex-wrap gap-2 sm:gap-4 lg:gap-6 justify-center",children:[s.jsx(r,{to:"/",className:"text-gray-400 hover:text-white transition-colors text-xs",children:"Home"}),s.jsx(r,{to:"/search",className:"text-gray-400 hover:text-white transition-colors text-xs",children:"Browse"}),s.jsx(r,{to:"/about",className:"text-gray-400 hover:text-white transition-colors text-xs",children:"About"}),s.jsx(r,{to:"/contact",className:"text-gray-400 hover:text-white transition-colors text-xs",children:"Contact"}),s.jsx(r,{to:"/faq",className:"text-gray-400 hover:text-white transition-colors text-xs",children:"FAQ"})]}),s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-wrap gap-2 justify-center lg:justify-end",children:[s.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors","aria-label":"Facebook",children:s.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors","aria-label":"Twitter",children:s.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors","aria-label":"LinkedIn",children:s.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})}),s.jsxs("button",{onClick:()=>{h(!0)},className:"text-gray-400 hover:text-white transition-colors text-xs flex items-center space-x-1 whitespace-nowrap",title:"Admin Login",children:[s.jsx(p,{name:"Settings",size:"sm"}),s.jsx("span",{className:"hidden sm:inline",children:"Admin Login"}),s.jsx("span",{className:"sm:hidden",children:"Admin"})]})]})]})})}),s.jsx(e.Suspense,{fallback:null,children:s.jsx(U,{})}),s.jsx(e.Suspense,{fallback:null,children:s.jsx(M,{isOpen:c,onClose:()=>{d(!1)},initialMode:x})}),s.jsx(T,{children:s.jsx(e.Suspense,{fallback:null,children:s.jsx(B,{isOpen:m,onClose:()=>{h(!1)}})})})]})},q=({children:e,requiredRole:t})=>{const{user:r,loading:n}=u(),l=a();return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):r?t&&r.role?.toLowerCase()!==t.toLowerCase()?s.jsx(i,{to:"/unauthorized",replace:!0}):s.jsx(s.Fragment,{children:e}):s.jsx(i,{to:"/",state:{from:l},replace:!0})};function F(...e){return E(C(e))}const W={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"},$=({size:e="md",variant:t="spinner",className:a,text:r})=>s.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(()=>{switch(t){case"dots":return s.jsx("div",{className:F("flex space-x-1",a),children:[0,1,2].map(t=>s.jsx("div",{className:F("rounded-full bg-current animate-pulse","sm"===e?"h-2 w-2":"md"===e?"h-3 w-3":"h-4 w-4"),style:{animationDelay:.2*t+"s",animationDuration:"1s"}},t))});case"pulse":return s.jsx("div",{className:F("rounded-full bg-current animate-pulse",W[e],a)});case"skeleton":return s.jsxs("div",{className:F("animate-pulse",a),children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]});default:return s.jsxs("svg",{className:F("animate-spin",W[e],a),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}})(),r&&s.jsx("p",{className:"text-sm text-gray-500 animate-pulse",children:r})]}),Q=({text:e="Loading..."})=>s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx($,{size:"lg"}),s.jsx("p",{className:"mt-4 text-lg text-gray-600",children:e})]})});class G extends e.Component{state={hasError:!1};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?this.props.fallback?this.props.fallback:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:s.jsx("div",{className:"max-w-md w-full mx-auto p-6",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-8 text-center border border-white/20",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-red-500/20 rounded-full flex items-center justify-center",children:s.jsx(p,{name:"AlertTriangle",size:"lg",className:"text-red-400"})}),s.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Oops! Something went wrong"}),s.jsx("p",{className:"text-white/70 mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"Refresh Page"}),s.jsx("button",{onClick:()=>window.history.back(),className:"w-full bg-white/10 hover:bg-white/20 text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"Go Back"})]}),!1]})})}):this.props.children}}const K=()=>{u();const[t,a]=e.useState({pendingUsers:0,pendingVehicles:0,pendingBookings:0,totalRevenue:0,activeUsers:0}),[r,i]=e.useState(!0);e.useEffect(()=>{n()},[]);const n=async()=>{try{const e=await fetch("/api/admin/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(e.ok){const t=await e.json();a({pendingUsers:t.data.overview.pendingUsers||0,pendingVehicles:t.data.overview.pendingVehicles||0,pendingBookings:t.data.overview.pendingBookings||0,totalRevenue:t.data.overview.totalRevenue||0,activeUsers:t.data.overview.totalUsers||0})}}catch(e){}finally{i(!1)}},l=[{id:"approve-users",title:"Approve Users",description:"Review and approve pending user registrations",icon:"UserCheck",color:"blue",count:t.pendingUsers,action:()=>{}},{id:"approve-vehicles",title:"Approve Vehicles",description:"Review and approve pending vehicle listings",icon:"Car",color:"green",count:t.pendingVehicles,action:()=>{}},{id:"manage-bookings",title:"Manage Bookings",description:"Monitor and manage booking requests",icon:"Calendar",color:"purple",count:t.pendingBookings,action:()=>{}},{id:"view-analytics",title:"View Analytics",description:"Access platform analytics and reports",icon:"BarChart",color:"yellow",count:null,action:()=>{}},{id:"system-settings",title:"System Settings",description:"Configure platform settings and features",icon:"Settings",color:"gray",count:null,action:()=>{}},{id:"support-tickets",title:"Support Tickets",description:"Handle user support requests",icon:"MessageCircle",color:"red",count:null,action:()=>{}}];return r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-4 border border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Pending Users"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:t.pendingUsers})]}),s.jsx(p,{name:"Users",className:"h-8 w-8 text-blue-400"})]})}),s.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-4 border border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Pending Vehicles"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:t.pendingVehicles})]}),s.jsx(p,{name:"Car",className:"h-8 w-8 text-green-400"})]})}),s.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-4 border border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Pending Bookings"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:t.pendingBookings})]}),s.jsx(p,{name:"Calendar",className:"h-8 w-8 text-purple-400"})]})}),s.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-4 border border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",t.totalRevenue.toLocaleString()]})]}),s.jsx(p,{name:"DollarSign",className:"h-8 w-8 text-yellow-400"})]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(e=>s.jsx("button",{onClick:e.action,className:"p-4 bg-white/10 backdrop-blur-md rounded-lg border border-white/20 hover:bg-white/20 transition-all duration-300 text-left group",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`p-2 rounded-lg bg-${e.color}-500/20`,children:s.jsx(p,{name:e.icon,className:`h-6 w-6 text-${e.color}-400`})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-white font-semibold group-hover:text-white transition-colors",children:e.title}),null!==e.count&&s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(e.count>0?"bg-red-500/20 text-red-200 border border-red-400/30":"bg-green-500/20 text-green-200 border border-green-400/30"),children:e.count})]}),s.jsx("p",{className:"text-white/70 text-sm",children:e.description})]})]})},e.id))}),s.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Activity"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white/5 rounded-lg",children:[s.jsx(p,{name:"UserPlus",className:"h-5 w-5 text-green-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white text-sm",children:"New user registration"}),s.jsx("p",{className:"text-white/70 text-xs",children:"2 minutes ago"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white/5 rounded-lg",children:[s.jsx(p,{name:"Car",className:"h-5 w-5 text-blue-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white text-sm",children:"New vehicle listing submitted"}),s.jsx("p",{className:"text-white/70 text-xs",children:"5 minutes ago"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white/5 rounded-lg",children:[s.jsx(p,{name:"Calendar",className:"h-5 w-5 text-purple-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white text-sm",children:"New booking request"}),s.jsx("p",{className:"text-white/70 text-xs",children:"10 minutes ago"})]})]})]})]})]})},X=()=>{const{user:r}=u(),i=a(),l=t(),[o,c]=e.useState("renter"),[d,m]=e.useState(!1),h=r?.role?.toLowerCase(),x="admin"===h||"admin"===r?.role?.toLowerCase(),p=(()=>{const e=i.pathname;return e.includes("/host")?"host":e.includes("/renter")?"renter":e.includes("/admin")?"admin":h||"renter"})();if(n.useEffect(()=>{if(x){const e=i.pathname;e.includes("/admin")?c("admin"):e.includes("/host")?c("host"):e.includes("/renter")?c("renter"):c(h||"renter")}else i.pathname.includes("/admin")&&l("/dashboard",{replace:!0})},[i.pathname,x,h,l]),!r)return s.jsx("div",{className:"page-background",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}),s.jsx("span",{className:"ml-3 text-white",children:"Loading dashboard..."})]})})});const j=e=>{m(!0),c(e),l("admin"===e?"/admin-dashboard":`/dashboard/${e}`),setTimeout(()=>m(!1),300)};return s.jsx("div",{className:"page-background",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 lg:py-8",children:[s.jsxs("div",{className:"mb-6 lg:mb-8",children:[s.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-white mb-2",children:"Dashboard"}),s.jsx("p",{className:"text-gray-300 text-sm lg:text-base",children:"Welcome to your dashboard!"}),x&&s.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-2 sm:gap-2",children:[s.jsx("button",{onClick:()=>j("renter"),className:"px-3 lg:px-4 py-2 rounded-lg text-xs lg:text-sm font-medium transition-all "+("renter"===o?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:"Renter View"}),s.jsx("button",{onClick:()=>j("host"),className:"px-3 lg:px-4 py-2 rounded-lg text-xs lg:text-sm font-medium transition-all "+("host"===o?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:"Host View"}),s.jsx("button",{onClick:()=>j("admin"),className:"px-3 lg:px-4 py-2 rounded-lg text-xs lg:text-sm font-medium transition-all "+("admin"===o?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:"Admin Panel"})]})]}),s.jsx("div",{className:"space-y-6",children:d?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}),s.jsx("span",{className:"ml-3 text-white",children:"Switching dashboard..."})]}):x?s.jsxs(s.Fragment,{children:["renter"===o&&s.jsx(S,{}),"host"===o&&s.jsx(L,{}),"admin"===o&&s.jsxs("div",{className:"space-y-6",children:[s.jsx(K,{}),s.jsx(g,{})]})]}):s.jsxs(s.Fragment,{children:["renter"===p&&s.jsx(S,{}),"host"===p&&s.jsx(L,{})]})})]})})},J=e.lazy(()=>P(()=>import("./Home-C_JoiPhJ.js"),__vite__mapDeps([10,1,2,3,4,5,11,12]),import.meta.url)),Y=e.lazy(()=>P(()=>import("./Search-DWEL7ZDC.js"),__vite__mapDeps([13,1,2,11,3,4,5,6,9]),import.meta.url)),Z=e.lazy(()=>P(()=>import("./VehicleDetail-C7XPrO6C.js"),__vite__mapDeps([14,1,2,3,4,5]),import.meta.url)),ee=e.lazy(()=>P(()=>import("./About-BGx5Pj4F.js"),__vite__mapDeps([15,1,2,3,4,5,9]),import.meta.url)),te=e.lazy(()=>P(()=>import("./Contact-CQCtlPbT.js"),__vite__mapDeps([16,1,2,3,4,5]),import.meta.url)),se=e.lazy(()=>P(()=>import("./UserDashboard-FokDzwH7.js"),__vite__mapDeps([17,1,2,3,4,5]),import.meta.url)),ae=e.lazy(()=>P(()=>import("./admin-pages-uBlL0uRW.js").then(e=>e.i),__vite__mapDeps([3,1,2,4,5]),import.meta.url)),re=e.lazy(()=>P(()=>import("./admin-pages-uBlL0uRW.js").then(e=>e.j),__vite__mapDeps([3,1,2,4,5]),import.meta.url)),ie=e.lazy(()=>P(()=>import("./FAQ-BqB1KVOM.js"),__vite__mapDeps([18,1,2,3,4,5]),import.meta.url)),ne=e.lazy(()=>P(()=>import("./Pricing-YWR1RaYB.js"),__vite__mapDeps([19,1,2,3,4,5,11,12]),import.meta.url)),le=e.lazy(()=>P(()=>import("./Login-C14gLyBo.js"),__vite__mapDeps([20,1,2,3,4,5]),import.meta.url)),oe=e.lazy(()=>P(()=>import("./Signup-DyIwRt9W.js"),__vite__mapDeps([21,1,2,3,4,5,9]),import.meta.url)),ce=e.lazy(()=>P(()=>import("./AdminLogin-COrgIRO9.js"),__vite__mapDeps([22,1,2,3,4,5,9]),import.meta.url)),de=e.lazy(()=>P(()=>import("./Unauthorized-_GHTTTOw.js"),__vite__mapDeps([23,1,2,3,4,5]),import.meta.url)),me=e.lazy(()=>P(()=>import("./NotFound-CPYfXsVC.js"),__vite__mapDeps([24,1,2]),import.meta.url)),he=new x({defaultOptions:{queries:{staleTime:6e5,gcTime:18e5,retry:1,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1},mutations:{retry:1}}});function xe(){return e.useEffect(()=>{const e=e=>{if(e.message&&(e.message.includes("message channel closed")||e.message.includes("listener indicated an asynchronous response")))return e.preventDefault(),e.stopPropagation(),!1},t=e=>{if(e.reason&&e.reason.message&&(e.reason.message.includes("message channel closed")||e.reason.message.includes("listener indicated an asynchronous response")))return e.preventDefault(),e.stopPropagation(),!1};return window.addEventListener("error",e,!0),window.addEventListener("unhandledrejection",t,!0),()=>{window.removeEventListener("error",e,!0),window.removeEventListener("unhandledrejection",t,!0)}},[]),s.jsx(l,{children:s.jsx(o,{client:he,children:s.jsx(w,{children:s.jsx(G,{children:s.jsx(c,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:s.jsx(b,{children:s.jsx(I,{children:s.jsx("div",{className:"App",children:s.jsx(e.Suspense,{fallback:s.jsx(Q,{text:"Loading RideShare SA..."}),children:s.jsxs(d,{children:[s.jsx(m,{path:"/",element:s.jsx(H,{children:s.jsx(J,{})})}),s.jsx(m,{path:"/search",element:s.jsx(H,{children:s.jsx(Y,{})})}),s.jsx(m,{path:"/vehicle/:id",element:s.jsx(H,{children:s.jsx(Z,{})})}),s.jsx(m,{path:"/about",element:s.jsx(H,{children:s.jsx(ee,{})})}),s.jsx(m,{path:"/contact",element:s.jsx(H,{children:s.jsx(te,{})})}),s.jsx(m,{path:"/faq",element:s.jsx(H,{children:s.jsx(ie,{})})}),s.jsx(m,{path:"/pricing",element:s.jsx(H,{children:s.jsx(ne,{})})}),s.jsx(m,{path:"/login",element:s.jsx(le,{})}),s.jsx(m,{path:"/signup",element:s.jsx(oe,{})}),s.jsx(m,{path:"/register",element:s.jsx(oe,{})}),s.jsx(m,{path:"/admin-login",element:s.jsx(T,{children:s.jsx(ce,{})})}),s.jsx(m,{path:"/unauthorized",element:s.jsx(de,{})}),s.jsx(m,{path:"/dashboard/*",element:s.jsx(q,{children:s.jsx(H,{children:s.jsx(X,{})})})}),s.jsx(m,{path:"/user-dashboard",element:s.jsx(q,{children:s.jsx(H,{children:s.jsx(se,{})})})}),s.jsx(m,{path:"/admin-dashboard/*",element:s.jsx(q,{requiredRole:"admin",children:s.jsx(H,{children:s.jsx(re,{})})})}),s.jsx(m,{path:"/legacy-admin-dashboard",element:s.jsx(ae,{})}),s.jsx(m,{path:"*",element:s.jsx(H,{children:s.jsx(me,{})})})]})})})})})})})})})})}h.createRoot(document.getElementById("root")).render(s.jsx(n.StrictMode,{children:s.jsx(xe,{})}));export{P as _,R as a,F as c,V as u};
