const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["/assets/firebase-R_5bE8qc.js","/assets/admin-pages-BP3oSTfT.js","/assets/react-vendor-CKnA8pDM.js","/assets/vendor-CqouD_UJ.js","/assets/utils-Bi8vyz5k.js","/assets/ui-libs-BJqHVFID.js"])))=>i.map(i=>d[i]);
import{j as e,r as s,e as t,X as a,U as i,g as r,I as l,F as n,h as c,u as o,n as d}from"./react-vendor-CKnA8pDM.js";import{I as h,_ as x,u as m,w as u,G as p,a as b,n as g,c as j,i as f,b as w,d as v,S as N,A as y,e as k}from"./admin-pages-BP3oSTfT.js";import{m as S}from"./ui-libs-BJqHVFID.js";const C=()=>e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"bg-white/20 rounded h-6 w-3/4 mb-4"}),e.jsx("div",{className:"bg-white/20 rounded h-4 w-1/2 mb-2"}),e.jsx("div",{className:"bg-white/20 rounded h-4 w-2/3"})]})}),A=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Array.from({length:3}).map((s,t)=>e.jsx(C,{},t))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(C,{}),e.jsx(C,{})]})]});function T(){return"/api"}function P(e){if(!e)return!1;const s=e.message||"",t=e.code||"";return s.includes("ERR_CONNECTION_REFUSED")||s.includes("Failed to fetch")||s.includes("NetworkError")||s.includes("connection refused")||"ECONNREFUSED"===t||"ERR_CONNECTION_REFUSED"===t}const E=Object.freeze(Object.defineProperty({__proto__:null,getApiBaseUrl:T,getApiErrorMessage:function(e){return P(e)?"Backend server is not running. Please start the backend server on port 5001.":500===e?.response?.status?"Server error. Please check the backend server logs.":401===e?.response?.status?"Authentication required. Please log in again.":403===e?.response?.status?"You do not have permission to perform this action.":404===e?.response?.status?"Resource not found.":e?.response?.data?.message||e?.message||"An error occurred while making the request."},isConnectionRefusedError:P},Symbol.toStringTag,{value:"Module"})),D=({src:t,alt:a,className:i="",width:r,height:l,priority:n=!1,placeholder:c="empty",blurDataURL:o,sizes:d="100vw",quality:h=75})=>{const[x,m]=s.useState(!1),[u,p]=s.useState(n),[b,g]=s.useState(!1),j=s.useRef(null);return s.useEffect(()=>{if(n)return;const e=new IntersectionObserver(([s])=>{s.isIntersecting&&(p(!0),e.disconnect())},{threshold:.1,rootMargin:"50px"});return j.current&&e.observe(j.current),()=>e.disconnect()},[n]),b?e.jsx("div",{ref:j,className:`bg-gray-200 flex items-center justify-center ${i}`,style:{width:r,height:l},children:e.jsx("span",{className:"text-gray-400 text-sm",children:"Failed to load"})}):e.jsxs("div",{ref:j,className:`relative overflow-hidden ${i}`,children:["blur"===c&&o&&!x&&e.jsx("div",{className:"absolute inset-0 bg-cover bg-center filter blur-sm scale-110",style:{backgroundImage:`url(${o})`}}),!x&&!o&&e.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse"}),u&&e.jsx("img",{src:(e=>{if(e.startsWith("http")||e.includes("?"))return e;const s=new URLSearchParams;return r&&s.set("w",r.toString()),l&&s.set("h",l.toString()),h&&s.set("q",h.toString()),s.set("f","webp"),`${e}?${s.toString()}`})(t),alt:a,width:r,height:l,sizes:d,loading:n?"eager":"lazy",decoding:"async",onLoad:()=>{m(!0)},onError:()=>{g(!0)},className:"transition-opacity duration-300 "+(x?"opacity-100":"opacity-0"),style:{width:r,height:l}})]})},z=({documentType:c,required:o=!1,acceptedTypes:d=["image/*","application/pdf"],maxSize:h=10,onUpload:x,onRemove:m,existingFile:u=null,className:p="",disabled:b=!1,label:g,onChange:j,value:f})=>{const[w,v]=s.useState({file:u||f||null,preview:u||f?URL.createObjectURL(u||f):null,error:null,uploading:!1}),N=s.useRef(null),y=e=>{const s=e.target.files?.[0];s&&(d.some(e=>e.endsWith("/*")?s.type.startsWith(e.slice(0,-1)):s.type===e)?s.size>1024*h*1024?v(e=>({...e,error:`File size must be less than ${h}MB`})):(v(e=>({...e,file:s,preview:s.type.startsWith("image/")?URL.createObjectURL(s):null,error:null})),x&&x(s),j&&j(s)):v(e=>({...e,error:`Invalid file type. Accepted types: ${d.join(", ")}`})))},k=g||(c?{idDocument:"ID Document",driverLicense:"Driver's License",proofOfAddress:"Proof of Address",vehicleRegistration:"Vehicle Registration",roadworthyCertificate:"Roadworthy Certificate",insuranceCertificate:"Insurance Certificate",businessRegistration:"Business Registration",taxCertificate:"Tax Certificate"}[S=c]||S:"Document");var S,C;return e.jsxs("div",{className:`document-upload ${p}`,children:[k&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[k,o&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),w.file?e.jsx("div",{className:"border-2 border-green-200 rounded-lg p-4 bg-green-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[w.preview?e.jsx("img",{src:w.preview,alt:"Preview",className:"w-12 h-12 object-cover rounded"}):(C=w.file,C.type.startsWith("image/")?e.jsx(l,{className:"w-8 h-8 text-blue-500"}):e.jsx(n,{className:"w-8 h-8 text-gray-500"})),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:w.file.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(w.file.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(t,{className:"w-5 h-5 text-green-500"}),!b&&e.jsx("button",{type:"button",onClick:()=>{v({file:null,preview:null,error:null,uploading:!1}),m?m():(x&&x(null),j&&j(null))},className:"text-red-500 hover:text-red-700",children:e.jsx(a,{className:"w-4 h-4"})})]})]})}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors "+(b?"opacity-50 cursor-not-allowed":"cursor-pointer"),onDrop:e=>{if(e.preventDefault(),b)return;const s=e.dataTransfer.files;if(s.length>0){const e=s[0];y({target:{files:[e]}})}},onDragOver:e=>{e.preventDefault()},onClick:()=>!b&&N.current?.click(),children:[e.jsx(i,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:b?"Upload disabled":"Click to upload or drag and drop"}),e.jsxs("p",{className:"text-xs text-gray-500",children:[d.join(", ")," (max ",h,"MB)"]})]}),w.error&&e.jsxs("div",{className:"mt-2 flex items-center space-x-2 text-red-600",children:[e.jsx(r,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:w.error})]}),e.jsx("input",{ref:N,type:"file",accept:d.join(","),onChange:y,className:"hidden",disabled:b})]})},$=({userId:t,className:a=""})=>{const[i,r]=s.useState([]),[l,n]=s.useState(!0);s.useEffect(()=>{c()},[t]);const c=async()=>{try{const e=localStorage.getItem("authToken"),s=await fetch(`/api/users/${t}/saved-vehicles`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(s.ok){const e=await s.json();r(e.vehicles||[])}}catch(e){r([])}finally{n(!1)}};return l?e.jsx("div",{className:`space-y-4 ${a}`,children:[...Array(3)].map((s,t)=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-32 bg-white/10 rounded-xl"})},t))}):e.jsx("div",{className:`space-y-4 ${a}`,children:0===i.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(h,{name:"Heart",size:"lg",className:"text-white/50 mb-4"}),e.jsx("p",{className:"text-white/70",children:"No saved vehicles yet"}),e.jsx("p",{className:"text-white/50 text-sm",children:"Browse vehicles and save your favorites!"})]}):i.map(s=>e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/20 hover:bg-white/20 transition-all duration-300",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:s.images[0],alt:`${s.make} ${s.model}`,className:"w-20 h-20 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white",children:[s.year," ",s.make," ",s.model]}),e.jsx("p",{className:"text-white/70 text-sm mb-2",children:s.location}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-yellow-400 flex items-center space-x-1",children:[e.jsx(h,{name:"Star",size:"sm"}),e.jsx("span",{children:s.rating})]}),e.jsxs("span",{className:"text-white/70",children:["(",s.reviewCount," reviews)"]}),e.jsxs("span",{className:"text-green-400 font-semibold",children:["R",s.pricePerDay,"/day"]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-500/20 text-blue-300 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:"View Details"}),e.jsx("button",{onClick:()=>(async e=>{try{const s=localStorage.getItem("authToken");await fetch(`/api/users/${t}/saved-vehicles/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}}),r(s=>s.filter(s=>s.id!==e))}catch(s){}})(s.id),className:"px-3 py-1 bg-red-500/20 text-red-300 rounded-lg text-sm hover:bg-red-500/30 transition-colors",children:"Remove"})]})]})},s.id))})},R=({userId:t,className:a=""})=>{const[i,r]=s.useState([]),[l,n]=s.useState(!0);s.useEffect(()=>{c()},[t]);const c=async()=>{try{const e=localStorage.getItem("authToken"),s=await fetch(`/api/users/${t}/documents`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(s.ok){const e=await s.json();r(e.documents||[])}}catch(e){r([])}finally{n(!1)}},o=e=>{switch(e){case"expired":return"text-red-400 bg-red-500/20 border-red-500/30";case"expiring_soon":return"text-yellow-400 bg-yellow-500/20 border-yellow-500/30";case"valid":return"text-green-400 bg-green-500/20 border-green-500/30";default:return"text-gray-400 bg-gray-500/20 border-gray-500/30"}},d=e=>{switch(e){case"expired":return"XCircle";case"expiring_soon":return"AlertTriangle";case"valid":return"CheckCircle";default:return"FileText"}},x=e=>{switch(e){case"driver_license":return"Car";case"id_document":return"CreditCard";case"proof_of_address":return"Home";default:return"FileText"}};return l?e.jsx("div",{className:`space-y-3 ${a}`,children:[...Array(2)].map((s,t)=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-16 bg-white/10 rounded-lg"})},t))}):e.jsx("div",{className:`space-y-3 ${a}`,children:0===i.length?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(h,{name:"FileText",size:"lg",className:"text-white/50 mb-2"}),e.jsx("p",{className:"text-white/70 text-sm",children:"No documents uploaded yet"})]}):i.map(s=>e.jsx("div",{className:`p-3 rounded-lg border ${o(s.status)}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(h,{name:x(s.type),size:"sm"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:s.name}),e.jsxs("p",{className:"text-xs text-white/70",children:["Expires: ",s.expiryDate.toLocaleDateString()]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{name:d(s.status),size:"sm"}),e.jsx("span",{className:"text-xs",children:"expired"===s.status?"Expired":"expiring_soon"===s.status?`${s.daysUntilExpiry} days`:"Valid"})]}),"expiring_soon"===s.status&&e.jsx("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors mt-1",children:"Renew Now"})]})]})},s.id))})},_=({userId:t,className:a=""})=>{const[i,r]=s.useState([]),[l,n]=s.useState(!0),[c,o]=s.useState("");s.useEffect(()=>{d()},[t]);const d=async()=>{try{const e=localStorage.getItem("authToken"),s=await fetch(`/api/users/${t}/promotions`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(s.ok){const e=await s.json();r(e.promotions||[])}}catch(e){r([])}finally{n(!1)}},x=e=>"percentage"===e.discountType?`${e.discountValue}% off`:`R${e.discountValue} off`,m=e=>new Date>e;return l?e.jsx("div",{className:`space-y-3 ${a}`,children:[...Array(2)].map((s,t)=>e.jsx("div",{className:"animate-pulse",children:e.jsx("div",{className:"h-20 bg-white/10 rounded-lg"})},t))}):e.jsx("div",{className:`space-y-4 ${a}`,children:0===i.length?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(h,{name:"Gift",size:"lg",className:"text-white/50 mb-2"}),e.jsx("p",{className:"text-white/70 text-sm",children:"No promotions available"})]}):i.map(s=>e.jsxs("div",{className:"p-4 rounded-lg border "+(m(s.validUntil)?"bg-gray-500/20 border-gray-500/30":"bg-green-500/20 border-green-500/30"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{name:"Gift",size:"sm"}),e.jsx("span",{className:"font-semibold text-white",children:s.title}),e.jsxs("span",{className:"text-xs text-white/70",children:["(",s.code,")"]})]}),e.jsx("span",{className:"text-sm font-bold "+(m(s.validUntil)?"text-gray-400":"text-green-400"),children:x(s)})]}),e.jsx("p",{className:"text-sm text-white/80 mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-white/60",children:["Valid until: ",s.validUntil.toLocaleDateString(),s.minBookingAmount&&e.jsxs("span",{className:"ml-2",children:["• Min: R",s.minBookingAmount]})]}),!m(s.validUntil)&&e.jsx("button",{onClick:()=>(async e=>{try{const s=localStorage.getItem("authToken");(await fetch(`/api/users/${t}/promotions/apply`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({code:e})})).ok&&o(e)}catch(s){}})(s.code),className:"px-3 py-1 rounded-lg text-xs font-medium transition-colors "+(c===s.code?"bg-blue-500/20 text-blue-300":"bg-white/10 text-white hover:bg-white/20"),children:c===s.code?"Applied":"Use Code"})]})]},s.id))})},F=({basePrice:t,onCalculate:a,className:i=""})=>{const[r,l]=s.useState("daily"),[n,o]=s.useState(1),[d,x]=s.useState({insurance:!1,gps:!1,childSeat:!1,driver:!1,fuel:!1}),m={insurance:50,gps:30,childSeat:25,driver:200,fuel:100},u=()=>{let e=t*n;"hourly"===r?e=t*n:"weekly"===r&&(e=t*n*7*.85);let s=0;const i=Object.entries(d).filter(([,e])=>e).map(([e])=>({name:e,price:m[e]}));s=i.reduce((e,s)=>e+s.price,0);const l=.1*(e+s),c=e+s+l,o={baseTotal:e,addOns:i,addOnTotal:s,serviceFee:l,total:c,rentalType:r,duration:n};return a(c,o),o};return c.useEffect(()=>{u()},[r,n,d,t]),e.jsxs("div",{className:`space-y-4 ${i}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Rental Type"}),e.jsx("div",{className:"flex space-x-2",children:[{value:"hourly",label:"Hourly",icon:"Clock"},{value:"daily",label:"Daily",icon:"Calendar"},{value:"weekly",label:"Weekly",icon:"Calendar"}].map(s=>e.jsxs("button",{onClick:()=>l(s.value),className:"flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all "+(r===s.value?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"bg-white/10 text-white/70 border border-white/20 hover:bg-white/20"),children:[e.jsx(h,{name:s.icon,size:"sm",className:"mr-1"}),s.label]},s.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-white/90 mb-2",children:["Duration (","hourly"===r?"Hours":"daily"===r?"Days":"Weeks",")"]}),e.jsx("input",{type:"number",min:"1",value:n,onChange:e=>o(parseInt(e.target.value)||1),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/20"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Add-ons"}),e.jsx("div",{className:"space-y-2",children:[{key:"insurance",label:"Comprehensive Insurance",icon:"Shield",price:m.insurance},{key:"gps",label:"GPS Navigation",icon:"MapPin",price:m.gps},{key:"childSeat",label:"Child Safety Seat",icon:"Baby",price:m.childSeat},{key:"driver",label:"Professional Driver",icon:"User",price:m.driver},{key:"fuel",label:"Full Tank of Fuel",icon:"Fuel",price:m.fuel}].map(s=>e.jsxs("label",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:d[s.key],onChange:e=>((e,s)=>{x(t=>({...t,[e]:s}))})(s.key,e.target.checked),className:"w-4 h-4 text-blue-600 bg-white/10 border-white/20 rounded focus:ring-blue-500"}),e.jsx(h,{name:s.icon,size:"sm"}),e.jsx("span",{className:"text-white/90 text-sm",children:s.label})]}),e.jsxs("span",{className:"text-white/70 text-sm",children:["R",s.price]})]},s.key))})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4 border border-white/20",children:[e.jsx("h4",{className:"text-sm font-medium text-white/90 mb-3",children:"Cost Breakdown"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-white/70",children:["Base (",r,"):"]}),e.jsxs("span",{className:"text-white",children:["R",t," × ",n]})]}),Object.entries(d).filter(([,e])=>e).map(([s])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-white/70 capitalize",children:[s.replace(/([A-Z])/g," $1"),":"]}),e.jsxs("span",{className:"text-white",children:["R",m[s]]})]},s)),e.jsxs("div",{className:"flex justify-between border-t border-white/20 pt-2",children:[e.jsx("span",{className:"text-white/70",children:"Service Fee (10%):"}),e.jsxs("span",{className:"text-white",children:["R",Math.round(t*n*.1)]})]}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg border-t border-white/20 pt-2",children:[e.jsx("span",{className:"text-white",children:"Total:"}),e.jsxs("span",{className:"text-green-400",children:["R",Math.round(u().total)]})]})]})]})]})};class U{static baseUrl="/api/messaging";static async sendMessage(e,s,t="text",a){try{const i=new FormData;i.append("content",s),i.append("messageType",t),a&&a.forEach(e=>{i.append("attachments",e)});const r=await fetch(`${this.baseUrl}/conversations/${e}/messages`,{method:"POST",headers:{...await x(()=>import("./firebase-R_5bE8qc.js").then(e=>e.c),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(e=>e.getAuthHeaders())},body:i});if(!r.ok)throw new Error("Failed to send message");return await r.json()}catch(i){throw i}}static async getMessages(e,s=1,t=50){try{const a=await fetch(`${this.baseUrl}/conversations/${e}/messages?page=${s}&limit=${t}`,{headers:{...await x(()=>import("./firebase-R_5bE8qc.js").then(e=>e.c),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(e=>e.getAuthHeaders())}});if(!a.ok)throw new Error("Failed to fetch messages");return(await a.json()).messages}catch(a){throw a}}static async markMessageAsRead(e){try{await fetch(`${this.baseUrl}/messages/${e}/read`,{method:"PATCH",headers:{...await x(()=>import("./firebase-R_5bE8qc.js").then(e=>e.c),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(e=>e.getAuthHeaders())}})}catch(s){}}static async getConversations(){try{const e=await fetch(`${this.baseUrl}/conversations`,{headers:{...await x(()=>import("./firebase-R_5bE8qc.js").then(e=>e.c),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(e=>e.getAuthHeaders())}});if(!e.ok)throw new Error("Failed to fetch conversations");return(await e.json()).conversations}catch(e){throw e}}static async createConversation(e){try{const s=await fetch(`${this.baseUrl}/conversations`,{method:"POST",headers:{"Content-Type":"application/json",...await x(()=>import("./firebase-R_5bE8qc.js").then(e=>e.c),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(e=>e.getAuthHeaders())},body:JSON.stringify({participantIds:e})});if(!s.ok)throw new Error("Failed to create conversation");return await s.json()}catch(s){throw s}}static async createSupportTicket(e){try{const s=await fetch(`${this.baseUrl}/support-tickets`,{method:"POST",headers:{"Content-Type":"application/json",...await x(()=>import("./firebase-R_5bE8qc.js").then(e=>e.c),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(e=>e.getAuthHeaders())},body:JSON.stringify(e)});if(!s.ok)throw new Error("Failed to create support ticket");return await s.json()}catch(s){throw s}}static async getSupportTickets(e,s){try{const t=new URLSearchParams;e&&t.append("status",e),s&&t.append("priority",s);const a=await fetch(`${this.baseUrl}/support-tickets?${t}`,{headers:{...await x(()=>import("./firebase-R_5bE8qc.js").then(e=>e.c),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(e=>e.getAuthHeaders())}});if(!a.ok)throw new Error("Failed to fetch support tickets");return(await a.json()).tickets}catch(t){throw t}}static async updateSupportTicket(e,s){try{const t=await fetch(`${this.baseUrl}/support-tickets/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",...await x(()=>import("./firebase-R_5bE8qc.js").then(e=>e.c),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(e=>e.getAuthHeaders())},body:JSON.stringify(s)});if(!t.ok)throw new Error("Failed to update support ticket");return await t.json()}catch(t){throw t}}static async addMessageToTicket(e,s){try{const t=await fetch(`${this.baseUrl}/support-tickets/${e}/messages`,{method:"POST",headers:{"Content-Type":"application/json",...await x(()=>import("./firebase-R_5bE8qc.js").then(e=>e.c),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(e=>e.getAuthHeaders())},body:JSON.stringify({content:s})});if(!t.ok)throw new Error("Failed to add message to ticket");return await t.json()}catch(t){throw t}}}const I=({conversationId:t,onConversationSelect:a})=>{const{user:i}=m(),[r,l]=s.useState([]),[n,c]=s.useState(null),[o,d]=s.useState([]),[x,p]=s.useState(""),[b,g]=s.useState(!0),[j,f]=s.useState(!1),w=s.useRef(null);s.useEffect(()=>{v(),u.subscribeToNotifications(e=>{"message"===e.type&&(v(),n&&N(n.id))})},[]),s.useEffect(()=>{if(t){const e=r.find(e=>e.id===t);e&&(c(e),N(t))}},[t,r]),s.useEffect(()=>{k()},[o]);const v=async()=>{try{g(!0);const e=await U.getConversations();l(e)}catch(e){}finally{g(!1)}},N=async e=>{try{const s=await U.getMessages(e);d(s)}catch(s){}},y=async()=>{if(x.trim()&&n&&!j)try{f(!0);const e=await U.sendMessage(n.id,x.trim());d(s=>[...s,e]),p(""),await v()}catch(e){}finally{f(!1)}},k=()=>{w.current?.scrollIntoView({behavior:"smooth"})};return b?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"flex h-96 bg-white/5 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"w-1/3 border-r border-white/10",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Messages"})}),e.jsx("div",{className:"overflow-y-auto",children:r.map(s=>e.jsx("div",{onClick:()=>(e=>{c(e),N(e.id),a&&a(e.id)})(s),className:"p-4 border-b border-white/5 cursor-pointer hover:bg-white/5 transition-colors "+(n?.id===s.id?"bg-white/10":""),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:e.jsx(h,{name:"User",size:"sm",className:"text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-white font-medium truncate",children:s.participants.filter(e=>e.id!==Number(i?.id)).map(e=>e.name).join(", ")}),s.unreadCount>0&&e.jsx("span",{className:"bg-blue-500 text-white text-xs rounded-full px-2 py-1",children:s.unreadCount})]}),s.lastMessage&&e.jsx("p",{className:"text-gray-400 text-sm truncate",children:s.lastMessage.content})]})]})},s.id))})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:e.jsx(h,{name:"User",size:"sm",className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:n.participants.filter(e=>e.id!==Number(i?.id)).map(e=>e.name).join(", ")}),e.jsx("p",{className:"text-gray-400 text-sm",children:n.participants.filter(e=>e.id!==Number(i?.id)).map(e=>e.role).join(", ")})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[o.map(s=>e.jsx("div",{className:"flex "+(s.senderId===Number(i?.id)?"justify-end":"justify-start"),children:e.jsxs("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg "+(s.senderId===Number(i?.id)?"bg-blue-500 text-white":"bg-white/10 text-white"),children:[e.jsx("p",{className:"text-sm",children:s.content}),e.jsx("p",{className:"text-xs mt-1 "+(s.senderId===Number(i?.id)?"text-blue-100":"text-gray-400"),children:new Date(s.timestamp).toLocaleTimeString()})]})},s.id)),e.jsx("div",{ref:w})]}),e.jsx("div",{className:"p-4 border-t border-white/10",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:x,onChange:e=>p(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),y())},placeholder:"Type a message...",className:"flex-1 px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:j}),e.jsx("button",{onClick:y,disabled:!x.trim()||j,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:j?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(h,{name:"Send",size:"sm"})})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(h,{name:"MessageCircle",size:"lg",className:"text-white/50 mx-auto mb-4"}),e.jsx("p",{className:"text-white/70",children:"Select a conversation to start messaging"})]})})})]})},B=({value:t,onChange:a,placeholder:i="Enter password",label:r,error:l,showStrength:n=!1,className:c="",disabled:o=!1,required:d=!1})=>{const[x,m]=s.useState(!1),[u,p]=s.useState(!1),b=n?(e=>{if(!e)return{score:0,label:"",color:""};let s=0;return e.length>=8&&s++,/[a-z]/.test(e)&&s++,/[A-Z]/.test(e)&&s++,/[0-9]/.test(e)&&s++,/[^A-Za-z0-9]/.test(e)&&s++,s<=2?{score:s,label:"Weak",color:"text-red-400"}:s<=3?{score:s,label:"Fair",color:"text-yellow-400"}:s<=4?{score:s,label:"Good",color:"text-blue-400"}:{score:s,label:"Strong",color:"text-green-400"}})(t):null;return e.jsxs("div",{className:`space-y-2 ${c}`,children:[r&&e.jsxs("label",{className:"block text-sm font-medium text-white/80",children:[r,d&&e.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x?"text":"password",value:t,onChange:e=>a(e.target.value),onFocus:()=>p(!0),onBlur:()=>p(!1),placeholder:i,disabled:o,className:`\n            w-full px-4 py-3 pr-12 bg-white/10 border rounded-xl text-white placeholder-white/50 \n            focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all duration-300\n            ${l?"border-red-400 focus:ring-red-500/50":"border-white/20 focus:border-blue-400 hover:border-white/30"}\n            ${o?"opacity-50 cursor-not-allowed":"hover:bg-white/15"}\n            ${u?"bg-white/15":""}\n            backdrop-blur-md\n          `}),e.jsx("button",{type:"button",onClick:()=>m(!x),disabled:o,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/50 hover:text-white/80 transition-colors disabled:cursor-not-allowed",children:e.jsx(h,{name:x?"EyeOff":"Eye",size:"sm"})})]}),n&&t&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex-1 bg-white/10 rounded-full h-1",children:e.jsx("div",{className:"h-1 rounded-full transition-all duration-300 "+((b?.score||0)<=2?"bg-red-400":(b?.score||0)<=3?"bg-yellow-400":(b?.score||0)<=4?"bg-blue-400":"bg-green-400"),style:{width:20*(b?.score||0)+"%"}})}),e.jsx("span",{className:`text-xs font-medium ${b?.color||""}`,children:b?.label||""})]}),l&&e.jsxs("div",{className:"flex items-center space-x-1 text-red-400 text-xs",children:[e.jsx(h,{name:"AlertCircle",size:"xs"}),e.jsx("span",{children:l})]}),n&&e.jsx("div",{className:"text-xs text-white/60",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("span",{className:"flex items-center space-x-1 "+(t.length>=8?"text-green-400":"text-white/40"),children:[e.jsx(h,{name:t.length>=8?"CheckCircle":"Circle",size:"xs"}),e.jsx("span",{children:"8+ chars"})]}),e.jsxs("span",{className:"flex items-center space-x-1 "+(/[a-z]/.test(t)?"text-green-400":"text-white/40"),children:[e.jsx(h,{name:/[a-z]/.test(t)?"CheckCircle":"Circle",size:"xs"}),e.jsx("span",{children:"lower"})]}),e.jsxs("span",{className:"flex items-center space-x-1 "+(/[A-Z]/.test(t)?"text-green-400":"text-white/40"),children:[e.jsx(h,{name:/[A-Z]/.test(t)?"CheckCircle":"Circle",size:"xs"}),e.jsx("span",{children:"UPPER"})]}),e.jsxs("span",{className:"flex items-center space-x-1 "+(/[0-9]/.test(t)?"text-green-400":"text-white/40"),children:[e.jsx(h,{name:/[0-9]/.test(t)?"CheckCircle":"Circle",size:"xs"}),e.jsx("span",{children:"123"})]}),e.jsxs("span",{className:"flex items-center space-x-1 "+(/[^A-Za-z0-9]/.test(t)?"text-green-400":"text-white/40"),children:[e.jsx(h,{name:/[^A-Za-z0-9]/.test(t)?"CheckCircle":"Circle",size:"xs"}),e.jsx("span",{children:"!@#"})]})]})})]})},L=()=>{const{user:t}=m(),[a,i]=s.useState("profile"),[r,l]=s.useState(!1),[n,c]=s.useState(""),[o,d]=s.useState(""),[x,u]=s.useState({firstName:t?.firstName||"",lastName:t?.lastName||"",email:t?.email||"",phone:t?.phoneNumber||""}),[p,b]=s.useState({currentPassword:"",newPassword:"",confirmPassword:""});return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Profile Settings"}),e.jsx("p",{className:"text-white/70",children:"Manage your account settings and preferences"})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex space-x-1 bg-white/10 backdrop-blur-md rounded-lg p-1 border border-white/20",children:[{id:"profile",label:"Profile",icon:"User"},{id:"password",label:"Password",icon:"Lock"},{id:"security",label:"Security",icon:"Shield"}].map(s=>e.jsxs("button",{onClick:()=>i(s.id),className:"flex items-center space-x-2 px-4 py-2 rounded-md transition-all "+(a===s.id?"bg-white/20 text-white":"text-gray-300 hover:text-white hover:bg-white/10"),children:[e.jsx(h,{name:s.icon,className:"h-4 w-4"}),e.jsx("span",{children:s.label})]},s.id))})}),n&&e.jsx("div",{className:"mb-4 p-4 bg-green-500/20 border border-green-400/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{name:"CheckCircle",className:"h-5 w-5 text-green-400"}),e.jsx("span",{className:"text-green-200",children:n})]})}),o&&e.jsx("div",{className:"mb-4 p-4 bg-red-500/20 border border-red-400/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{name:"AlertCircle",className:"h-5 w-5 text-red-400"}),e.jsx("span",{className:"text-red-200",children:o})]})}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:["profile"===a&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Profile Information"}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),l(!0),d(""),c("");try{const e=await fetch("/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify(x)});if(e.ok)c("Profile updated successfully");else{const s=await e.json();d(s.error||"Failed to update profile")}}catch(s){d("Failed to update profile")}finally{l(!1)}},className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"First Name"}),e.jsx("input",{type:"text",value:x.firstName,onChange:e=>u({...x,firstName:e.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-400 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Last Name"}),e.jsx("input",{type:"text",value:x.lastName,onChange:e=>u({...x,lastName:e.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-400 transition-all",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:x.email,onChange:e=>u({...x,email:e.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-400 transition-all",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:x.phone,onChange:e=>u({...x,phone:e.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-400 transition-all",placeholder:"+27 82 123 4567"})]}),e.jsx("button",{type:"submit",disabled:r,className:"px-6 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Updating...":"Update Profile"})]})]}),"password"===a&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Change Password"}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),l(!0),d(""),c(""),p.newPassword!==p.confirmPassword)return d("New passwords do not match"),void l(!1);if(p.newPassword.length<8)return d("New password must be at least 8 characters long"),void l(!1);try{const e=await fetch("/api/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({currentPassword:p.currentPassword,newPassword:p.newPassword})});if(e.ok)c("Password changed successfully"),b({currentPassword:"",newPassword:"",confirmPassword:""});else{const s=await e.json();d(s.error||"Failed to change password")}}catch(s){d("Failed to change password")}finally{l(!1)}},className:"space-y-6",children:[e.jsx(B,{value:p.currentPassword,onChange:e=>b({...p,currentPassword:e}),label:"Current Password",placeholder:"Enter your current password",required:!0}),e.jsx(B,{value:p.newPassword,onChange:e=>b({...p,newPassword:e}),label:"New Password",placeholder:"Enter your new password",showStrength:!0,required:!0}),e.jsx(B,{value:p.confirmPassword,onChange:e=>b({...p,confirmPassword:e}),label:"Confirm New Password",placeholder:"Confirm your new password",required:!0}),e.jsx("button",{type:"submit",disabled:r,className:"px-6 py-3 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Changing...":"Change Password"})]})]}),"security"===a&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"Security Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Add an extra layer of security to your account"}),e.jsx("button",{className:"px-4 py-2 bg-blue-500/20 text-blue-200 rounded-lg hover:bg-blue-500/30 transition-colors",children:"Enable 2FA"})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Login Sessions"}),e.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Manage your active login sessions"}),e.jsx("button",{className:"px-4 py-2 bg-red-500/20 text-red-200 rounded-lg hover:bg-red-500/30 transition-colors",children:"Sign Out All Devices"})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Account Deletion"}),e.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Permanently delete your account and all associated data"}),e.jsx("button",{className:"px-4 py-2 bg-red-500/20 text-red-200 rounded-lg hover:bg-red-500/30 transition-colors",children:"Delete Account"})]})]})]})]})]})},O=({requestType:t,entityId:a,submittedBy:i,onSuccess:r,onCancel:l,title:n,description:c})=>{const[o,d]=s.useState(""),[x,m]=s.useState(!1),[u,j]=s.useState(null),f=e=>({DocumentVerification:"Document Verification",VehicleListing:"Vehicle Listing",InsuranceVerification:"Insurance Verification",ProfileVerification:"Profile Verification",VehicleApproval:"Vehicle Approval"}[e]||e);return e.jsx(p,{title:n||`Submit ${f(t)} Request`,icon:"FileText",children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{m(!0),j(null),(await b.create({requestType:t,entityId:a,submittedBy:i,reviewNotes:o.trim()||void 0})).data.success?(g.approvalSubmitted(f(t)),r?.()):j("Failed to submit approval request")}catch(s){j(s.response?.data?.error||"Failed to submit approval request")}finally{m(!1)}},className:"space-y-4",children:[c&&e.jsx("p",{className:"text-white/70 text-sm mb-4",children:c}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Additional Notes (Optional)"}),e.jsx("textarea",{value:o,onChange:e=>d(e.target.value),placeholder:"Add any additional information that might help with the approval process...",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3})]}),u&&e.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{name:"AlertCircle",size:"sm",className:"text-red-400"}),e.jsx("p",{className:"text-red-400 text-sm",children:u})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",disabled:x,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Submitting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{name:"Send",size:"sm"}),e.jsx("span",{children:"Submit Request"})]})}),l&&e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 bg-white/10 text-white/70 rounded-lg hover:bg-white/20 transition-colors",children:"Cancel"})]})]})})},V=()=>{const{user:t}=m(),a=o(),[i,r]=s.useState("overview"),[l,n]=s.useState([]),[c,x]=s.useState([]),[u,b]=s.useState(!0),[g,C]=s.useState(!1),[T,P]=s.useState(null);s.useEffect(()=>{E();const e=()=>{E()},s=()=>{E()};return window.addEventListener("bookingCreated",e),window.addEventListener("bookingUpdated",s),()=>{window.removeEventListener("bookingCreated",e),window.removeEventListener("bookingUpdated",s)}},[t?.id]);const E=async()=>{try{if(!t?.uid)return void b(!1);b(!0);const e=await t.getIdToken(),s="/api",a=await fetch(`${s}/bookings/user/${t.uid}`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error("Failed to fetch bookings");const i=await a.json();if(!i.success)throw new Error(i.error||"Failed to fetch bookings");{n(i.data||[]);const e=(i.data||[]).map(e=>({id:`payment_${e.id}`,amount:e.totalPrice||0,status:"paid"===e.paymentStatus?"completed":"pending",method:"stripe",bookingId:e.id.toString(),createdAt:e.createdAt}));x(e)}}catch(e){d.error("Failed to load dashboard data"),n([]),x([])}finally{b(!1)}},U=l.filter(e=>"confirmed"===e.status),B=c.filter(e=>"completed"===e.status).reduce((e,s)=>e+s.amount,0),V=e=>{P(e),C(!0)},M=async e=>{try{if(!t?.uid)return;const s=await t.getIdToken(),a="/api",i=await fetch(`${a}/bookings/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({uid:t.uid})});if(!i.ok)throw new Error("Failed to cancel booking");const r=await i.json();if(!r.success)throw new Error(r.error||"Failed to cancel booking");d.success("Booking cancelled successfully"),E()}catch(s){d.error("Failed to cancel booking")}};return u?e.jsx(A,{}):e.jsxs("div",{className:"page-background",children:[e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-900/20 via-purple-900/20 to-indigo-900/20 backdrop-blur-sm"}),e.jsxs(S.div,{className:"relative min-h-screen p-4 lg:p-8 space-y-6 lg:space-y-8",variants:j,initial:"hidden",animate:"visible",children:[e.jsxs(S.div,{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center space-y-6 lg:space-y-0",variants:f,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-2xl font-bold text-white",children:t?.name?.charAt(0)||"U"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-white font-heading text-shadow-lg",children:"Renter Dashboard"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsxs("p",{className:"text-white/80 text-lg font-body",children:["Welcome back, ",t?.name||"User","!"]}),e.jsx("span",{className:"px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm font-medium border border-green-500/30",children:"✓ Verified"})]})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-4",children:e.jsxs(w,{onClick:()=>a("/search"),variant:"primary",size:"md",icon:e.jsx(h,{name:"Search",size:"sm"}),className:"w-full sm:w-auto",children:[e.jsx("span",{className:"hidden sm:inline",children:"Find Vehicles"}),e.jsx("span",{className:"sm:hidden",children:"Search"})]})})]}),e.jsx(S.div,{className:"flex flex-wrap gap-2",variants:f,children:[{id:"overview",label:"Overview",icon:"BarChart"},{id:"account",label:"Account",icon:"User"},{id:"search",label:"Search & Browse",icon:"Search"},{id:"bookings",label:"Bookings",icon:"Calendar"},{id:"payments",label:"Payments",icon:"CreditCard"},{id:"communication",label:"Messages",icon:"MessageCircle"},{id:"analytics",label:"Analytics",icon:"TrendingUp"},{id:"reports",label:"Reports",icon:"FileText"},{id:"saved",label:"Saved",icon:"Heart"},{id:"calculator",label:"Calculator",icon:"Calculator"},{id:"documents",label:"Documents",icon:"FileText"},{id:"promotions",label:"Promotions",icon:"Gift"},{id:"notifications",label:"Notifications",icon:"Bell"},{id:"support",label:"Support",icon:"HelpCircle"},{id:"settings",label:"Settings",icon:"Settings"},{id:"approvals",label:"Approval Requests",icon:"Clock"}].map((s,a)=>e.jsx(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},children:e.jsxs(w,{onClick:()=>(e=>{r(e),(async e=>{if(t?.uid)try{const s=await t.getIdToken(),a="/api";switch(e){case"payments":const e=await fetch(`${a}/payments/user/${t.uid}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(e.ok){const s=await e.json();s.success&&x(s.data||[])}break;case"notifications":const i=await fetch(`${a}/notifications/user/${t.uid}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});i.ok&&await i.json();break;case"support":const r=await fetch(`${a}/support/tickets`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});r.ok&&await r.json()}}catch(s){}})(e)})(s.id),variant:i===s.id?"primary":"secondary",size:"sm",icon:e.jsx(h,{name:s.icon,size:"sm"}),className:i===s.id?"shadow-glow":"",children:[e.jsx("span",{className:"hidden sm:inline",children:s.label}),e.jsx("span",{className:"sm:hidden",children:s.label.split(" ")[0]})]})},s.id))}),e.jsxs(S.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",variants:f,children:[e.jsx(S.div,{variants:v,whileHover:{scale:1.02,y:-5},transition:{duration:.2},children:e.jsxs(p,{level:3,hover:!0,animated:!0,className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-blue-400/20 to-blue-600/20 rounded-full -translate-y-10 translate-x-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-blue-500/20 rounded-xl",children:e.jsx(h,{name:"Car",size:"lg",className:"text-blue-400"})}),e.jsx("span",{className:"text-xs text-green-400 font-medium",children:"+12%"})]}),e.jsx("h3",{className:"text-white/80 text-sm font-medium mb-1",children:"Active Bookings"}),e.jsx("div",{className:"text-3xl font-bold text-white mb-1 font-heading",children:U.length}),e.jsx("p",{className:"text-white/60 text-xs",children:"Current rentals"})]})]})}),e.jsx(S.div,{variants:v,whileHover:{scale:1.02,y:-5},transition:{duration:.2},children:e.jsxs(p,{level:3,hover:!0,animated:!0,className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-green-400/20 to-green-600/20 rounded-full -translate-y-10 translate-x-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-green-500/20 rounded-xl",children:e.jsx(h,{name:"DollarSign",size:"lg",className:"text-green-400"})}),e.jsx("span",{className:"text-xs text-green-400 font-medium",children:"+8%"})]}),e.jsx("h3",{className:"text-white/80 text-sm font-medium mb-1",children:"Wallet Balance"}),e.jsxs("div",{className:"text-3xl font-bold text-white mb-1 font-heading",children:["R",B.toLocaleString()]}),e.jsx("p",{className:"text-white/60 text-xs",children:"Available funds"})]})]})}),e.jsx(S.div,{variants:v,whileHover:{scale:1.02,y:-5},transition:{duration:.2},children:e.jsxs(p,{level:3,hover:!0,animated:!0,className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-red-400/20 to-red-600/20 rounded-full -translate-y-10 translate-x-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-red-500/20 rounded-xl",children:e.jsx(h,{name:"Heart",size:"lg",className:"text-red-400"})}),e.jsx("span",{className:"text-xs text-red-400 font-medium",children:"+3"})]}),e.jsx("h3",{className:"text-white/80 text-sm font-medium mb-1",children:"Favorites"}),e.jsx("div",{className:"text-3xl font-bold text-white mb-1 font-heading",children:"0"}),e.jsx("p",{className:"text-white/60 text-xs",children:"Saved vehicles"})]})]})}),e.jsx(S.div,{variants:v,whileHover:{scale:1.02,y:-5},transition:{duration:.2},children:e.jsxs(p,{level:3,hover:!0,animated:!0,className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-purple-400/20 to-purple-600/20 rounded-full -translate-y-10 translate-x-10"}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-purple-500/20 rounded-xl",children:e.jsx(h,{name:"MessageCircle",size:"lg",className:"text-purple-400"})}),e.jsx("span",{className:"text-xs text-purple-400 font-medium",children:"2"})]}),e.jsx("h3",{className:"text-white/80 text-sm font-medium mb-1",children:"Messages"}),e.jsx("div",{className:"text-3xl font-bold text-white mb-1 font-heading",children:"0"}),e.jsx("p",{className:"text-white/60 text-xs",children:"Unread messages"})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:["overview"===i&&e.jsxs(S.div,{variants:j,initial:"hidden",animate:"visible",children:[e.jsxs(S.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6",variants:f,children:[e.jsx(S.div,{variants:v,children:e.jsxs(p,{level:3,hover:!0,animated:!0,title:"Active Bookings",subtitle:"Current rentals",icon:e.jsx(h,{name:"Car",size:"md",className:"text-primary-400"}),className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2 font-heading",children:U.length}),e.jsx("div",{className:"text-white/70 text-sm font-body",children:"Active now"})]})}),e.jsx(S.div,{variants:v,children:e.jsxs(p,{level:3,hover:!0,animated:!0,title:"Total Spent",subtitle:"All time spending",icon:e.jsx(h,{name:"DollarSign",size:"md",className:"text-accent-400"}),className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2 font-heading",children:["R",B.toLocaleString()]}),e.jsx("div",{className:"text-white/70 text-sm font-body",children:"Lifetime total"})]})}),e.jsx(S.div,{variants:v,children:e.jsxs(p,{level:3,hover:!0,animated:!0,title:"Saved Vehicles",subtitle:"Your favorites",icon:e.jsx(h,{name:"Heart",size:"md",className:"text-red-400"}),className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-2 font-heading",children:"0"}),e.jsx("div",{className:"text-white/70 text-sm font-body",children:"Saved vehicles"})]})})]}),e.jsxs(S.div,{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",variants:f,children:[e.jsx(S.div,{variants:v,children:e.jsx(p,{level:3,hover:!0,animated:!0,title:"Recent Bookings",icon:e.jsx(h,{name:"Calendar",size:"md",className:"text-primary-400"}),children:e.jsx("div",{className:"space-y-3",children:0===l.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(h,{name:"Calendar",size:"lg",className:"text-white/50 mx-auto mb-4"}),e.jsx("p",{className:"text-white/70",children:"No bookings yet"}),e.jsx("p",{className:"text-white/50 text-sm",children:"Start by searching for vehicles"})]}):l.slice(0,3).map((s,t)=>e.jsxs(S.div,{className:"flex items-center space-x-3 p-3 glass-2 rounded-lg",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},children:[e.jsx(D,{src:s.listing?.image||"/placeholder-car.jpg",alt:`${s.listing?.make} ${s.listing?.model}`,width:48,height:48,className:"w-12 h-12 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-white font-medium font-body",children:[s.listing?.make," ",s.listing?.model," (",s.listing?.year,")"]}),e.jsxs("p",{className:"text-white/70 text-sm font-body",children:[new Date(s.startDate).toLocaleDateString()," - ",new Date(s.endDate).toLocaleDateString()]}),e.jsxs("p",{className:"text-white/60 text-xs font-body",children:["R",s.totalPrice," • ",s.listing?.city]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.jsx(N,{status:s.status}),"pending"===s.status&&e.jsx("button",{onClick:()=>M(s.id),className:"text-xs text-red-400 hover:text-red-300 transition-colors",children:"Cancel"})]})]},s.id))})})}),e.jsx(S.div,{variants:v,children:e.jsx(p,{level:3,hover:!0,animated:!0,title:"Quick Actions",icon:e.jsx(h,{name:"Zap",size:"md",className:"text-accent-400"}),children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(w,{onClick:()=>a("/search"),variant:"primary",size:"md",icon:e.jsx(h,{name:"Search",size:"sm"}),className:"w-full",children:"Search Vehicles"}),e.jsx(w,{onClick:()=>r("calculator"),variant:"accent",size:"md",icon:e.jsx(h,{name:"Calculator",size:"sm"}),className:"w-full",children:"Calculate Rental Cost"}),e.jsx(w,{onClick:()=>r("saved"),variant:"secondary",size:"md",icon:e.jsx(h,{name:"Heart",size:"sm"}),className:"w-full",children:"View Saved Vehicles"})]})})})]})]}),"account"===i&&e.jsx(L,{}),"search"===i&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(p,{title:"Vehicle Search & Discovery",icon:"Search",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Location"}),e.jsx("input",{type:"text",placeholder:"Enter city or area",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Vehicle Type"}),e.jsxs("select",{className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Types"}),e.jsx("option",{value:"sedan",children:"Sedan"}),e.jsx("option",{value:"suv",children:"SUV"}),e.jsx("option",{value:"hatchback",children:"Hatchback"}),e.jsx("option",{value:"convertible",children:"Convertible"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"End Date"}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e.jsx("button",{onClick:()=>a("/search"),className:"w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Search Vehicles"})]})}),e.jsx(p,{title:"Browse by Category",icon:"Grid",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:["Economy","Luxury","SUV","Convertible"].map(s=>e.jsxs("button",{onClick:()=>a("/search"),className:"p-4 bg-white/5 rounded-lg hover:bg-white/10 transition-colors text-center",children:[e.jsx(h,{name:"Car",size:"lg",className:"mx-auto mb-2 text-blue-400"}),e.jsx("span",{className:"text-white font-medium",children:s})]},s))})})]}),"bookings"===i&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(p,{title:"Booking Management",icon:"Calendar",children:e.jsx("div",{className:"space-y-3",children:0===l.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(h,{name:"Calendar",size:"lg",className:"text-white/50 mx-auto mb-4"}),e.jsx("p",{className:"text-white/70",children:"No bookings yet"}),e.jsx("p",{className:"text-white/50 text-sm",children:"Start by searching for vehicles"})]}):l.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-medium",children:[s.listing?.make," ",s.listing?.model]}),e.jsxs("p",{className:"text-white/70 text-sm",children:[new Date(s.startDate).toLocaleDateString()," - ",new Date(s.endDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{status:s.status}),"pending"===s.status&&e.jsx("button",{onClick:()=>M(s.id),className:"text-xs text-red-400 hover:text-red-300 transition-colors",children:"Cancel"})]})]},s.id))})}),l.filter(e=>"pending"===e.status||"confirmed"===e.status).length>0&&e.jsx(p,{title:"Booking Workflow Status",icon:"Clock",children:e.jsx("div",{className:"space-y-4",children:l.filter(e=>"pending"===e.status||"confirmed"===e.status).slice(0,2).map(s=>e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(D,{src:"/placeholder-car.jpg",alt:"Vehicle",width:40,height:40,className:"w-10 h-10 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:"Vehicle"}),e.jsxs("p",{className:"text-white/70 text-sm",children:[new Date(s.startDate).toLocaleDateString()," - ",new Date(s.endDate).toLocaleDateString()]})]})]}),e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-white/70 text-sm",children:"Booking workflow tracker would be implemented here"})})]},s.id))})})]}),"payments"===i&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(p,{title:"Payment Methods",icon:"CreditCard",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:"Stripe Payment"}),e.jsx("p",{className:"text-white/70 text-sm mb-3",children:"Secure credit card processing"}),e.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Setup Stripe"})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:"Payfast"}),e.jsx("p",{className:"text-white/70 text-sm mb-3",children:"South African payment gateway"}),e.jsx("button",{className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Setup Payfast"})]})]})})}),e.jsx(p,{title:"Payment History",icon:"CreditCard",children:e.jsx("div",{className:"space-y-3",children:0===c.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(h,{name:"CreditCard",size:"lg",className:"text-white/50 mx-auto mb-4"}),e.jsx("p",{className:"text-white/70",children:"No payment history"})]}):c.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:["R",s.amount]}),e.jsx("p",{className:"text-white/70 text-sm",children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(N,{status:s.status}),e.jsx("p",{className:"text-white/70 text-sm capitalize",children:s.method})]})]},s.id))})})]}),"communication"===i&&e.jsx(I,{}),"analytics"===i&&e.jsx(y,{}),"saved"===i&&e.jsx($,{userId:t?.id||"0"}),"calculator"===i&&e.jsx("div",{className:"space-y-6",children:e.jsx(p,{title:"Rental Cost Calculator",icon:"Calculator",children:e.jsx(F,{basePrice:500,onCalculate:(e,s)=>{}})})}),"documents"===i&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(z,{label:"Upload Document",name:"document",onChange:()=>{}}),e.jsx(R,{userId:t?.id||"0"}),e.jsx(p,{title:"Document Verification",icon:"FileText",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white/70 text-sm",children:"Submit your documents for verification to access premium features and improve your booking success rate."}),e.jsxs("button",{onClick:()=>V("DocumentVerification"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center space-x-2",children:[e.jsx(h,{name:"Upload",size:"sm"}),e.jsx("span",{children:"Request Document Verification"})]})]})})]}),"promotions"===i&&e.jsx(_,{userId:t?.id||"0"}),"reports"===i&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(p,{title:"Booking Reports",icon:"FileText",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:"Monthly Summary"}),e.jsx("p",{className:"text-white/70 text-sm mb-3",children:"View your monthly booking activity and spending"}),e.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Generate Report"})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:"Annual Report"}),e.jsx("p",{className:"text-white/70 text-sm mb-3",children:"Complete yearly booking and spending analysis"}),e.jsx("button",{className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Download PDF"})]})]})})}),e.jsx(p,{title:"Spending Analysis",icon:"TrendingUp",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["R",B.toLocaleString()]}),e.jsx("div",{className:"text-white/70 text-sm",children:"Total Spent"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:l.length}),e.jsx("div",{className:"text-white/70 text-sm",children:"Total Bookings"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:["R",l.length>0?(B/l.length).toFixed(0):0]}),e.jsx("div",{className:"text-white/70 text-sm",children:"Avg per Booking"})]})]})})})]}),"notifications"===i&&e.jsx("div",{className:"space-y-6",children:e.jsx(p,{title:"Notification Settings",icon:"Bell",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:"Booking Updates"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Get notified when your booking status changes"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:"Promotional Offers"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Receive notifications about special deals and discounts"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:"System Updates"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Important platform updates and maintenance notifications"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})})}),"support"===i&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(p,{title:"Help Center",icon:"HelpCircle",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:"FAQ"}),e.jsx("p",{className:"text-white/70 text-sm mb-3",children:"Find answers to common questions"}),e.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Browse FAQ"})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:"Contact Support"}),e.jsx("p",{className:"text-white/70 text-sm mb-3",children:"Get help from our support team"}),e.jsx("button",{className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Open Ticket"})]})]})})}),e.jsx(p,{title:"Support Tickets",icon:"MessageSquare",children:e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(h,{name:"MessageSquare",size:"lg",className:"text-white/50 mx-auto mb-4"}),e.jsx("p",{className:"text-white/70",children:"No support tickets yet"}),e.jsx("p",{className:"text-white/50 text-sm",children:"Create a ticket if you need help"})]})})})]}),"settings"===i&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(p,{title:"Account Settings",icon:"Settings",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Display Name"}),e.jsx("input",{type:"text",value:t?.name||"",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:t?.email||"",disabled:!0,className:"w-full px-3 py-2 bg-white/5 border border-white/20 rounded-lg text-white/50 cursor-not-allowed"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",placeholder:"+27 XX XXX XXXX",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Preferred Language"}),e.jsxs("select",{className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"af",children:"Afrikaans"}),e.jsx("option",{value:"zu",children:"Zulu"}),e.jsx("option",{value:"xh",children:"Xhosa"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Save Changes"})})]})}),e.jsx(p,{title:"Privacy & Security",icon:"Shield",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Add an extra layer of security to your account"})]}),e.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Enable 2FA"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:"Data Export"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Download a copy of your data"})]}),e.jsx("button",{className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Export Data"})]})]})})]}),"approvals"===i&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(k,{userRole:"renter"}),e.jsx(p,{title:"Profile Verification",icon:"User",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-white/70 text-sm",children:"Get your profile verified to build trust with hosts and increase your booking success rate."}),e.jsxs("button",{onClick:()=>V("ProfileVerification"),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center space-x-2",children:[e.jsx(h,{name:"UserCheck",size:"sm"}),e.jsx("span",{children:"Request Profile Verification"})]})]})})]})]}),g&&T&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(O,{requestType:T,entityId:parseInt(t?.id||"0"),submittedBy:"renter",onSuccess:()=>{C(!1),P(null)},onCancel:()=>{C(!1),P(null)}})})})]})]})};export{A as D,D as O,V as R,z as a,E as b,T as g};
