import{r as e,u as s,a as t,j as a,n as r,R as i,S as l,C as n,E as c,b as d,c as o,d as x,e as h,f as m,g as p,B as u,h as g,X as j,L as b,i as v,k as w}from"./react-vendor-CsyM86xr.js";import{a as N}from"./utils-Bi8vyz5k.js";import{f}from"./firebase-COrkt_lY.js";const y=e.createContext(void 0),k=()=>{const s=e.useContext(y);if(void 0===s)throw new Error("useAuth must be used within an AuthProvider");return s},C=({children:r})=>{const[i,l]=e.useState(null),[n,c]=e.useState(!0),[d,o]=e.useState(!0),x=s(),h=t();e.useEffect(()=>f.onAuthStateChange(e=>{l(e),d?(o(!1),c(!1)):c(!1),e?"admin"===e.role?.toLowerCase()?x("/admin-dashboard"):h.pathname.startsWith("/admin")||h.pathname.includes("admin")?h.pathname.startsWith("/admin"):x("/dashboard"):x("/",{replace:!0})}),[x,h.pathname,d]);const m={user:i,loading:n,signup:async(e,s,t,a,r,i)=>{try{await f.signupUser({email:e,password:s,firstName:t,lastName:a,phone:r,role:i})}catch(l){throw l}},login:async(e,s)=>{try{await f.loginUser({email:e,password:s})}catch(t){throw t}},logout:async()=>{try{await f.logoutUser()}catch(e){throw e}}};return a.jsx(y.Provider,{value:m,children:r})},S=({name:e,size:s="md",className:t=""})=>{const r={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},i={Home:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Search:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Car:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7v8a2 2 0 002 2h4a2 2 0 002-2V7M8 7a2 2 0 00-2 2v6a2 2 0 002 2M8 7V5a2 2 0 012-2h4a2 2 0 012 2v2m-6 0h6"})}),Info:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Phone:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),User:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Logout:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Login:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),Plus:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),Menu:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),Sun:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),Moon:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),CheckCircle:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),XCircle:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),AlertTriangle:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})}),Clock:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),FileText:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),CreditCard:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),DollarSign:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),MapPin:a.jsxs("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),Star:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"currentColor",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),Mail:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Lock:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Shield:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),BarChart:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),TrendingUp:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Upload:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),Download:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Edit:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Trash:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Heart:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"currentColor",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),Calendar:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Clipboard:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),Users:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),Gift:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})}),Calculator:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),Bell:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM4.828 7l2.586 2.586a2 2 0 002.828 0L12.828 7H4.828zM4 12h16M4 16h16M4 20h16"})}),Scale:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l-2.83 2.83M6 7l2.83 2.83m6.17-2.83l-3 9m3-9l3 1m-3-1l-2.83 2.83M18 7l2.83 2.83M18 7l-3 9m3-9l3 1m-3-1l-2.83 2.83"})}),Settings:a.jsxs("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Play:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"currentColor",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h1m4 0h1m-6-8h8a2 2 0 012 2v8a2 2 0 01-2 2H8a2 2 0 01-2-2V6a2 2 0 012-2z"})}),Pause:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"currentColor",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Zap:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),Eye:a.jsxs("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),Motorcycle:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),Truck:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),Van:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),Bus:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),Send:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),MessageCircle:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Link:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),X:a.jsx("svg",{className:`${r[s]} ${t}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})};return a.jsx(a.Fragment,{children:i[e]||null})},R=({message:s,type:t,duration:r=5e3,onClose:i})=>{const[l,n]=e.useState(!0);return e.useEffect(()=>{const e=setTimeout(()=>{n(!1),setTimeout(()=>i?.(),300)},r);return()=>clearTimeout(e)},[r,i]),l?a.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg border backdrop-blur-md transition-all duration-300 ${{success:"bg-green-500/90 border-green-400 text-white",error:"bg-red-500/90 border-red-400 text-white",warning:"bg-yellow-500/90 border-yellow-400 text-white",info:"bg-blue-500/90 border-blue-400 text-white"}[t]}`,children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(S,{name:{success:"CheckCircle",error:"XCircle",warning:"AlertTriangle",info:"Info"}[t],className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:s}),a.jsx("button",{onClick:()=>{n(!1),setTimeout(()=>i?.(),300)},className:"ml-2 hover:bg-white/20 rounded p-1",children:a.jsx(S,{name:"X",className:"h-4 w-4"})})]})}):null},A=e.createContext(void 0),L=({children:s})=>{const[t,r]=e.useState([]),i=e.useCallback((e,s,t=5e3)=>{const a=Math.random().toString(36).substr(2,9);r(r=>[...r,{id:a,message:e,type:s,duration:t}])},[]),l=e.useCallback(e=>{r(s=>s.filter(s=>s.id!==e))},[]);return a.jsxs(A.Provider,{value:{showToast:i,hideToast:l},children:[s,t.map(e=>a.jsx(R,{message:e.message,type:e.type,duration:e.duration,onClose:()=>l(e.id)},e.id))]})},$=()=>{const s=e.useContext(A);if(!s)throw new Error("useToast must be used within a ToastProvider");return s},M=({userRole:s})=>{const[t,r]=e.useState([]),[i,l]=e.useState(0),[n,c]=e.useState(!1),{showToast:d}=$();e.useEffect(()=>{const e=setInterval(()=>{const e={id:Math.random().toString(36).substr(2,9),title:o(s),message:x(s),type:h(),timestamp:new Date,read:!1};r(s=>[e,...s.slice(0,9)]),l(e=>e+1),d(e.message,e.type)},3e4);return()=>clearInterval(e)},[s,d]);const o=e=>{const s={renter:["New Booking Confirmed","Payment Received","Vehicle Available","Booking Reminder"],host:["New Booking Request","Payment Received","Vehicle Approved","Booking Completed"],admin:["New User Registration","Vehicle Pending Approval","System Alert","Revenue Update"]},t=s[e]||s.admin;return t[Math.floor(Math.random()*t.length)]},x=e=>{const s={renter:["Your booking has been confirmed!","Payment of R1,200 has been processed.","New vehicles matching your preferences are available.","Your booking starts tomorrow at 9:00 AM."],host:["You have a new booking request for your Toyota Corolla.","Payment of R800 has been received.","Your vehicle listing has been approved!","Booking completed successfully. Great job!"],admin:["New user John Doe has registered as a host.","5 vehicles are pending approval.","System performance is optimal.","Monthly revenue: R45,000"]},t=s[e]||s.admin;return t[Math.floor(Math.random()*t.length)]},h=()=>{const e=["info","success","warning","error"];return e[Math.floor(Math.random()*e.length)]};return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>c(!n),className:"relative p-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:[a.jsx(S,{name:"Bell",className:"h-5 w-5 text-white"}),i>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:i>9?"9+":i})]}),n&&a.jsxs("div",{className:"absolute right-0 top-12 w-80 bg-white/10 backdrop-blur-md rounded-lg border border-white/20 shadow-xl z-50",children:[a.jsx("div",{className:"p-4 border-b border-white/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-white font-semibold",children:"Notifications"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>{r(e=>e.map(e=>({...e,read:!0}))),l(0)},className:"text-xs text-white/70 hover:text-white transition-colors",children:"Mark all read"}),a.jsx("button",{onClick:()=>c(!1),className:"text-white/70 hover:text-white transition-colors",children:a.jsx(S,{name:"X",className:"h-4 w-4"})})]})]})}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:0===t.length?a.jsxs("div",{className:"p-4 text-center text-white/70",children:[a.jsx(S,{name:"Bell",className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No notifications yet"})]}):t.map(e=>a.jsx("div",{onClick:()=>{return s=e.id,r(e=>e.map(e=>e.id===s?{...e,read:!0}:e)),void l(e=>Math.max(0,e-1));var s},className:"p-4 border-b border-white/10 hover:bg-white/5 transition-colors cursor-pointer "+(e.read?"":"bg-blue-500/10"),children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"p-1 rounded-full "+("success"===e.type?"bg-green-500/20":"error"===e.type?"bg-red-500/20":"warning"===e.type?"bg-yellow-500/20":"bg-blue-500/20"),children:a.jsx(S,{name:"success"===e.type?"CheckCircle":"error"===e.type?"XCircle":"warning"===e.type?"AlertTriangle":"Info",className:"h-4 w-4 text-white"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-white font-medium text-sm",children:e.title}),a.jsx("p",{className:"text-white/70 text-xs mt-1",children:e.message}),a.jsx("p",{className:"text-white/50 text-xs mt-1",children:e.timestamp.toLocaleTimeString()})]}),!e.read&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})},e.id))})]})]})};class T{static baseUrl="/api/admin";static async getStats(){try{const e=await fetch(`${this.baseUrl}/stats`);if(!e.ok)throw new Error("Failed to fetch admin stats");return(await e.json()).stats}catch(e){throw e}}static async getUsers(e=1,s=10,t,a){try{const r=new URLSearchParams({page:e.toString(),limit:s.toString(),...t&&{status:t},...a&&{role:a}}),i=await fetch(`${this.baseUrl}/users?${r}`);if(!i.ok)throw new Error("Failed to fetch users");return await i.json()}catch(r){throw r}}static async approveUser(e,s,t){try{const a=await fetch(`${this.baseUrl}/users/${e}/approve`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s,reason:t})});if(!a.ok)throw new Error("Failed to update user status");return await a.json()}catch(a){throw a}}static async getVehicles(e=1,s=10,t){try{const a=new URLSearchParams({page:e.toString(),limit:s.toString(),...t&&{status:t}}),r=await fetch(`${this.baseUrl}/vehicles?${a}`,{headers:{}});if(!r.ok)throw new Error("Failed to fetch vehicles");return await r.json()}catch(a){throw a}}static async approveVehicle(e,s,t){try{const a=await fetch(`${this.baseUrl}/vehicles/${e}/approve`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s,reason:t})});if(!a.ok)throw new Error("Failed to update vehicle status");return await a.json()}catch(a){throw a}}static async getBookings(e=1,s=10,t){try{const a=new URLSearchParams({page:e.toString(),limit:s.toString(),...t&&{status:t}}),r=await fetch(`${this.baseUrl}/bookings?${a}`,{headers:{}});if(!r.ok)throw new Error("Failed to fetch bookings");return await r.json()}catch(a){throw a}}static async getReviews(e=1,s=10){try{const t=new URLSearchParams({page:e.toString(),limit:s.toString()}),a=await fetch(`${this.baseUrl}/reviews?${t}`,{headers:{}});if(!a.ok)throw new Error("Failed to fetch reviews");return await a.json()}catch(t){throw t}}static async getDocuments(e=1,s=10,t){try{const a=new URLSearchParams({page:e.toString(),limit:s.toString(),...t&&{status:t}}),r=await fetch(`${this.baseUrl}/documents?${a}`,{headers:{}});if(!r.ok)throw new Error("Failed to fetch documents");return await r.json()}catch(a){throw a}}static async getDisputes(e=1,s=10,t){try{const a=new URLSearchParams({page:e.toString(),limit:s.toString(),...t&&{status:t}}),r=await fetch(`${this.baseUrl}/disputes?${a}`,{headers:{}});if(!r.ok)throw new Error("Failed to fetch disputes");return await r.json()}catch(a){throw a}}}const D=({status:e,className:s=""})=>{const t=(e=>{switch(e.toLowerCase()){case"approved":case"active":case"verified":return{bg:"bg-green-500/20",text:"text-green-400",border:"border-green-400/30",label:"Approved"};case"pending":case"waiting":return{bg:"bg-yellow-500/20",text:"text-yellow-400",border:"border-yellow-400/30",label:"Pending"};case"declined":case"rejected":case"inactive":return{bg:"bg-red-500/20",text:"text-red-400",border:"border-red-400/30",label:"Declined"};case"cancelled":return{bg:"bg-gray-500/20",text:"text-gray-400",border:"border-gray-400/30",label:"Cancelled"};default:return{bg:"bg-gray-500/20",text:"text-gray-400",border:"border-gray-400/30",label:e}}})(e);return a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${t.bg} ${t.text} ${t.border} ${s}`,children:t.label})},B=()=>{k();const[s,t]=e.useState([]),[r,i]=e.useState(!0),[l,n]=e.useState("pending"),[c,d]=e.useState(null),[o,x]=e.useState(!1),[h,m]=e.useState("approve"),[p,u]=e.useState("");e.useEffect(()=>{g()},[l]);const g=async()=>{try{const e=await fetch(`/api/admin/users?status=${l}&page=1&limit=50`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(e.ok){const s=await e.json();t(s.data.users||[])}}catch(e){}finally{i(!1)}},j=(e,s)=>{d(e),m(s),x(!0)};return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"User Approvals"}),a.jsx("div",{className:"flex space-x-2",children:["all","pending","approved","rejected"].map(e=>a.jsx("button",{onClick:()=>n(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+(l===e?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),a.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[s.map(e=>a.jsx("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsxs("span",{className:"text-white font-semibold text-sm",children:[e.firstName[0],e.lastName[0]]})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-white font-semibold",children:[e.firstName," ",e.lastName]}),a.jsx("p",{className:"text-white/70 text-sm",children:e.email})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white/70",children:"Role"}),a.jsx("p",{className:"text-white capitalize",children:e.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white/70",children:"Phone"}),a.jsx("p",{className:"text-white",children:e.phoneNumber||"Not provided"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white/70",children:"Joined"}),a.jsx("p",{className:"text-white",children:new Date(e.createdAt).toLocaleDateString()})]})]}),e.documents&&e.documents.length>0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Documents:"}),a.jsx("div",{className:"flex space-x-2",children:e.documents.map((e,s)=>a.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-200 rounded text-xs",children:e.type},s))})]}),e.rejectionReason&&a.jsx("div",{className:"mt-3 p-3 bg-red-500/10 border border-red-400/30 rounded-lg",children:a.jsxs("p",{className:"text-red-200 text-sm",children:[a.jsx("strong",{children:"Rejection Reason:"})," ",e.rejectionReason]})})]}),a.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(D,{status:e.approvalStatus}),a.jsx(D,{status:e.documentStatus})]}),"pending"===e.approvalStatus&&a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>j(e,"approve"),className:"px-3 py-1 bg-green-500/20 text-green-200 rounded-lg text-sm hover:bg-green-500/30 transition-colors",children:"Approve"}),a.jsx("button",{onClick:()=>j(e,"reject"),className:"px-3 py-1 bg-red-500/20 text-red-200 rounded-lg text-sm hover:bg-red-500/30 transition-colors",children:"Reject"})]})]})]})},e.id)),0===s.length&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(S,{name:"Users",size:"lg",className:"text-white/50 mx-auto mb-4"}),a.jsx("p",{className:"text-white/70",children:"No users found"})]})]})})}),o&&c&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"approve"===h?"Approve User":"Reject User"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-white/70 mb-2",children:"approve"===h?`Are you sure you want to approve ${c.firstName} ${c.lastName}?`:`Are you sure you want to reject ${c.firstName} ${c.lastName}?`}),"reject"===h&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Rejection Reason (Optional)"}),a.jsx("textarea",{value:p,onChange:e=>u(e.target.value),placeholder:"Enter reason for rejection...",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>{x(!1),d(null),u("")},className:"flex-1 px-4 py-2 bg-white/10 text-white/70 rounded-lg hover:bg-white/20 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>(async(e,s,a)=>{try{(await fetch(`/api/admin/users/${e}/approve`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({status:"approve"===s?"approved":"rejected",reason:a||void 0})})).ok?(t(t=>t.map(t=>t.id===e?{...t,approvalStatus:"approve"===s?"approved":"rejected",rejectionReason:a}:t)),x(!1),d(null),u(""),alert(`User ${"approve"===s?"approved":"rejected"} successfully`)):alert("Failed to update user status")}catch(r){alert("Error updating user status")}})(c.id,h,p),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-colors "+("approve"===h?"bg-green-500 text-white hover:bg-green-600":"bg-red-500 text-white hover:bg-red-600"),children:"approve"===h?"Approve":"Reject"})]})]})})]})},P=()=>{k();const[s,t]=e.useState([]),[r,i]=e.useState(!0),[l,n]=e.useState("pending"),[c,d]=e.useState(null),[o,x]=e.useState(!1),[h,m]=e.useState("approve"),[p,u]=e.useState("");e.useEffect(()=>{g()},[l]);const g=async()=>{try{const e=await fetch(`/api/admin/vehicles?status=${l}&page=1&limit=50`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(e.ok){const s=await e.json();t(s.data.vehicles||[])}}catch(e){}finally{i(!1)}},j=(e,s)=>{d(e),m(s),x(!0)};return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Vehicle Approvals"}),a.jsx("div",{className:"flex space-x-2",children:["all","pending","approved","declined"].map(e=>a.jsx("button",{onClick:()=>n(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+(l===e?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),a.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[s.map(e=>a.jsx("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gray-300 rounded-lg flex items-center justify-center",children:e.images&&e.images.length>0?a.jsx("img",{src:e.images[0],alt:e.title,className:"w-full h-full object-cover rounded-lg"}):a.jsx(S,{name:"Car",size:"lg",className:"text-gray-500"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-white font-semibold text-lg",children:e.title}),a.jsxs("p",{className:"text-white/70 text-sm mb-2",children:[e.make," ",e.model," (",e.year,") • ",e.type]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white/70",children:"Price"}),a.jsxs("p",{className:"text-white font-semibold",children:["R",e.pricePerDay,"/day"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white/70",children:"Location"}),a.jsx("p",{className:"text-white",children:e.location})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white/70",children:"Host"}),a.jsxs("p",{className:"text-white",children:[e.host.firstName," ",e.host.lastName]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white/70",children:"Listed"}),a.jsx("p",{className:"text-white",children:new Date(e.createdAt).toLocaleDateString()})]})]}),e.features&&e.features.length>0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Features:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.features.map((e,s)=>a.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-200 rounded text-xs",children:e},s))})]}),e.declineReason&&a.jsx("div",{className:"mt-3 p-3 bg-red-500/10 border border-red-400/30 rounded-lg",children:a.jsxs("p",{className:"text-red-200 text-sm",children:[a.jsx("strong",{children:"Decline Reason:"})," ",e.declineReason]})})]})]})}),a.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[a.jsx(D,{status:e.status}),"pending"===e.status&&a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>j(e,"approve"),className:"px-3 py-1 bg-green-500/20 text-green-200 rounded-lg text-sm hover:bg-green-500/30 transition-colors",children:"Approve"}),a.jsx("button",{onClick:()=>j(e,"decline"),className:"px-3 py-1 bg-red-500/20 text-red-200 rounded-lg text-sm hover:bg-red-500/30 transition-colors",children:"Decline"})]})]})]})},e.id)),0===s.length&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(S,{name:"Car",size:"lg",className:"text-white/50 mx-auto mb-4"}),a.jsx("p",{className:"text-white/70",children:"No vehicles found"})]})]})})}),o&&c&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"approve"===h?"Approve Vehicle":"Decline Vehicle"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-white/70 mb-2",children:"approve"===h?`Are you sure you want to approve "${c.title}"?`:`Are you sure you want to decline "${c.title}"?`}),"decline"===h&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Decline Reason (Optional)"}),a.jsx("textarea",{value:p,onChange:e=>u(e.target.value),placeholder:"Enter reason for decline...",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>{x(!1),d(null),u("")},className:"flex-1 px-4 py-2 bg-white/10 text-white/70 rounded-lg hover:bg-white/20 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>(async(e,s,a)=>{try{(await fetch(`/api/admin/vehicles/${e}/approve`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({status:"approve"===s?"approved":"declined",reason:a||void 0})})).ok?(t(t=>t.map(t=>t.id===e?{...t,status:"approve"===s?"approved":"declined",declineReason:a}:t)),x(!1),d(null),u(""),alert(`Vehicle ${"approve"===s?"approved":"declined"} successfully`)):alert("Failed to update vehicle status")}catch(r){alert("Error updating vehicle status")}})(c.id,h,p),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-colors "+("approve"===h?"bg-green-500 text-white hover:bg-green-600":"bg-red-500 text-white hover:bg-red-600"),children:"approve"===h?"Approve":"Decline"})]})]})})]})},U=()=>{k();const[s,t]=e.useState(null),[r,i]=e.useState(!0),[l,n]=e.useState("month"),[c,d]=e.useState("overview");e.useEffect(()=>{o()},[l]);const o=async()=>{try{const e=await fetch(`/api/analytics/platform?period=${l}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(e.ok){const s=await e.json();t(s.analytics)}}catch(e){}finally{i(!1)}};return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Analytics Dashboard"}),a.jsx("div",{className:"flex space-x-2",children:a.jsxs("select",{value:l,onChange:e=>n(e.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white",children:[a.jsx("option",{value:"week",children:"This Week"}),a.jsx("option",{value:"month",children:"This Month"}),a.jsx("option",{value:"year",children:"This Year"})]})})]}),a.jsx("div",{className:"flex space-x-1 bg-white/10 backdrop-blur-md rounded-lg p-1 border border-white/20",children:[{id:"overview",label:"Overview",icon:"bar-chart"},{id:"users",label:"Users",icon:"users"},{id:"vehicles",label:"Vehicles",icon:"car"},{id:"revenue",label:"Revenue",icon:"dollar-sign"}].map(e=>a.jsxs("button",{onClick:()=>d(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-md transition-all "+(c===e.id?"bg-white/20 text-white":"text-gray-300 hover:text-white hover:bg-white/10"),children:[a.jsx(S,{name:e.icon,className:"h-4 w-4"}),a.jsx("span",{children:e.label})]},e.id))}),"overview"===c&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:s.overview.totalUsers.toLocaleString()})]}),a.jsx(S,{name:"users",className:"h-8 w-8 text-blue-400"})]}),a.jsx("div",{className:"mt-2",children:a.jsxs("span",{className:"text-green-400 text-sm",children:["+",s.growth.users," this ",l]})})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Vehicles"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:s.overview.totalVehicles.toLocaleString()})]}),a.jsx(S,{name:"car",className:"h-8 w-8 text-green-400"})]}),a.jsx("div",{className:"mt-2",children:a.jsxs("span",{className:"text-green-400 text-sm",children:["+",s.growth.vehicles," this ",l]})})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Bookings"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:s.overview.totalBookings.toLocaleString()})]}),a.jsx(S,{name:"calendar",className:"h-8 w-8 text-purple-400"})]}),a.jsx("div",{className:"mt-2",children:a.jsxs("span",{className:"text-green-400 text-sm",children:["+",s.growth.bookings," this ",l]})})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",s.overview.totalRevenue.toLocaleString()]})]}),a.jsx(S,{name:"dollar-sign",className:"h-8 w-8 text-yellow-400"})]}),a.jsx("div",{className:"mt-2",children:a.jsxs("span",{className:"text-green-400 text-sm",children:["+R",s.growth.revenue.toLocaleString()," this ",l]})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Conversion Rates"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-white/70",children:"Renter to Booking"}),a.jsxs("span",{className:"text-white font-semibold",children:[s.conversionRates.renterToBooking.toFixed(1),"%"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-white/70",children:"Host to Listing"}),a.jsxs("span",{className:"text-white font-semibold",children:[s.conversionRates.hostToListing.toFixed(1),"%"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-white/70",children:"Average Booking Value"}),a.jsxs("span",{className:"text-white font-semibold",children:["R",s.averageBookingValue.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-white/70",children:"User Retention"}),a.jsxs("span",{className:"text-white font-semibold",children:[s.userRetention,"%"]})]})]})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Booking Status"}),a.jsx("div",{className:"space-y-3",children:s.bookingStatusDistribution.map(e=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-white/70 capitalize",children:e.status}),a.jsx("span",{className:"text-white font-semibold",children:e.count})]},e.status))})]})]})]}),"users"===c&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"User Activity"}),a.jsx("div",{className:"space-y-3",children:s.userActivity.slice(0,10).map((e,s)=>a.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",children:[a.jsx("div",{children:a.jsx("p",{className:"text-white font-medium",children:new Date(e.date).toLocaleDateString()})}),a.jsxs("span",{className:"text-white font-semibold",children:[e.count," new users"]})]},s))})]})}),"vehicles"===c&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Performing Vehicles"}),a.jsx("div",{className:"space-y-3",children:s.topVehicles.map((e,s)=>a.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:e.vehicle.title}),a.jsxs("p",{className:"text-white/70 text-sm",children:[e.vehicle.make," ",e.vehicle.model]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-white font-semibold",children:[e.bookingCount," bookings"]}),a.jsxs("p",{className:"text-white/70 text-sm",children:["R",parseFloat(e.totalRevenue).toLocaleString()]})]})]},s))})]})}),"revenue"===c&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Revenue by Month"}),a.jsx("div",{className:"space-y-3",children:s.revenueByMonth.map((e,s)=>a.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",children:[a.jsx("div",{children:a.jsx("p",{className:"text-white font-medium",children:new Date(e.month).toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),a.jsxs("span",{className:"text-white font-semibold",children:["R",parseFloat(e.revenue).toLocaleString()]})]},s))})]})})]}):a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-white/70",children:"No analytics data available"})})},z=()=>{const[s,t]=e.useState({platformName:"RideShare SA",maintenanceMode:!1,registrationEnabled:!0,emailNotifications:!0,smsNotifications:!0,maxFileSize:5,sessionTimeout:30,apiRateLimit:100}),[r,i]=e.useState({enableMessaging:!0,enablePayments:!0,enableAnalytics:!0,enableReviews:!0,enableNotifications:!0,enableMobileApp:!1}),[l,n]=e.useState("settings"),[c,d]=e.useState(!1);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"System Administration"}),a.jsx("div",{className:"flex space-x-2",children:a.jsx("button",{onClick:()=>{s.maintenanceMode?confirm("Are you sure you want to disable maintenance mode? This will make the platform accessible to all users.")&&t(e=>({...e,maintenanceMode:!1})):confirm("Are you sure you want to enable maintenance mode? This will restrict access to the platform.")&&t(e=>({...e,maintenanceMode:!0}))},className:"px-4 py-2 rounded-lg font-medium transition-all "+(s.maintenanceMode?"bg-red-500/20 text-red-200 border border-red-400/30":"bg-green-500/20 text-green-200 border border-green-400/30"),children:s.maintenanceMode?"Disable Maintenance":"Enable Maintenance"})})]}),a.jsx("div",{className:"flex space-x-1 bg-white/10 backdrop-blur-md rounded-lg p-1 border border-white/20",children:[{id:"settings",label:"System Settings",icon:"Settings"},{id:"features",label:"Feature Flags",icon:"Flag"},{id:"security",label:"Security",icon:"Shield"},{id:"monitoring",label:"Monitoring",icon:"Activity"}].map(e=>a.jsxs("button",{onClick:()=>n(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-md transition-all "+(l===e.id?"bg-white/20 text-white":"text-gray-300 hover:text-white hover:bg-white/10"),children:[a.jsx(S,{name:e.icon,className:"h-4 w-4"}),a.jsx("span",{children:e.label})]},e.id))}),"settings"===l&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"General Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Platform Name"}),a.jsx("input",{type:"text",value:s.platformName,onChange:e=>t(s=>({...s,platformName:e.target.value})),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Max File Size (MB)"}),a.jsx("input",{type:"number",value:s.maxFileSize,onChange:e=>t(s=>({...s,maxFileSize:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Session Timeout (minutes)"}),a.jsx("input",{type:"number",value:s.sessionTimeout,onChange:e=>t(s=>({...s,sessionTimeout:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"API Rate Limit (requests per 15min)"}),a.jsx("input",{type:"number",value:s.apiRateLimit,onChange:e=>t(s=>({...s,apiRateLimit:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Access Control"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:"Registration Enabled"}),a.jsx("p",{className:"text-white/70 text-sm",children:"Allow new user registrations"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s.registrationEnabled,onChange:e=>t(s=>({...s,registrationEnabled:e.target.checked})),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:"Email Notifications"}),a.jsx("p",{className:"text-white/70 text-sm",children:"Send email notifications to users"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s.emailNotifications,onChange:e=>t(s=>({...s,emailNotifications:e.target.checked})),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:"SMS Notifications"}),a.jsx("p",{className:"text-white/70 text-sm",children:"Send SMS notifications to users"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s.smsNotifications,onChange:e=>t(s=>({...s,smsNotifications:e.target.checked})),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:async()=>{d(!0);try{alert("Settings saved successfully!")}catch(e){alert("Failed to save settings")}finally{d(!1)}},disabled:c,className:"px-6 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Saving...":"Save Settings"})})]}),"features"===l&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Feature Flags"}),a.jsx("div",{className:"space-y-4",children:Object.entries(r).map(([e,s])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium capitalize",children:e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}),a.jsx("p",{className:"text-white/70 text-sm",children:s?"Feature is enabled":"Feature is disabled"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s,onChange:s=>i(t=>({...t,[e]:s.target.checked})),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},e))})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:async()=>{d(!0);try{alert("Feature flags updated successfully!")}catch(e){alert("Failed to save feature flags")}finally{d(!1)}},disabled:c,className:"px-6 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Saving...":"Save Feature Flags"})})]}),"security"===l&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Security Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("div",{className:"p-4 bg-green-500/10 border border-green-400/30 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(S,{name:"Shield",size:"lg",className:"text-green-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-semibold",children:"SSL/TLS Enabled"}),a.jsx("p",{className:"text-white/70 text-sm",children:"All connections are encrypted"})]})]})}),a.jsx("div",{className:"p-4 bg-blue-500/10 border border-blue-400/30 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(S,{name:"Lock",size:"lg",className:"text-blue-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-semibold",children:"JWT Authentication"}),a.jsx("p",{className:"text-white/70 text-sm",children:"Secure token-based auth"})]})]})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",children:[a.jsx("span",{className:"text-white",children:"Password Requirements"}),a.jsx("span",{className:"text-green-400 text-sm",children:"Strong"})]}),a.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",children:[a.jsx("span",{className:"text-white",children:"Rate Limiting"}),a.jsx("span",{className:"text-green-400 text-sm",children:"Active"})]}),a.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",children:[a.jsx("span",{className:"text-white",children:"CORS Protection"}),a.jsx("span",{className:"text-green-400 text-sm",children:"Enabled"})]})]})]})]})}),"monitoring"===l&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"System Monitoring"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"p-4 bg-green-500/10 border border-green-400/30 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(S,{name:"Server",size:"lg",className:"text-green-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-semibold",children:"Server Status"}),a.jsx("p",{className:"text-green-400 text-sm",children:"Online"})]})]})}),a.jsx("div",{className:"p-4 bg-blue-500/10 border border-blue-400/30 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(S,{name:"Database",size:"lg",className:"text-blue-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-semibold",children:"Database"}),a.jsx("p",{className:"text-blue-400 text-sm",children:"Connected"})]})]})}),a.jsx("div",{className:"p-4 bg-purple-500/10 border border-purple-400/30 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(S,{name:"Activity",size:"lg",className:"text-purple-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-semibold",children:"API Health"}),a.jsx("p",{className:"text-purple-400 text-sm",children:"Healthy"})]})]})})]})]})})]})},V={}?.VITE_API_URL||"http://localhost:5001/api",E=N.create({baseURL:V,headers:{"Content-Type":"application/json"}});E.interceptors.request.use(e=>{const s=localStorage.getItem("accessToken");return s&&(e.headers.Authorization=`Bearer ${s}`),e});const F={getAll:e=>E.get("/vehicles",{params:e}),getById:e=>E.get(`/vehicles/${e}`),create:e=>E.post("/vehicles",e),update:(e,s)=>E.put(`/vehicles/${e}`,s),delete:e=>E.delete(`/vehicles/${e}`),search:e=>E.get("/vehicles/search",{params:e})},I={createPaymentIntent:(e,s)=>E.post("/payments/create-payment-intent",{bookingId:e,amount:s}),confirmPayment:e=>E.post("/payments/confirm-payment",{paymentIntentId:e}),refund:e=>E.post("/payments/refund",{paymentId:e}),createPayfastPayment:e=>E.post("/payments/create-payfast-payment",e),getPaymentMethods:()=>E.get("/payments/methods")},q={create:e=>E.post("/approval-requests",e),getMyRequests:e=>E.get("/approval-requests/my-requests",{params:e}),getAll:e=>E.get("/approval-requests",{params:e}),getPending:e=>E.get("/approval-requests/pending",{params:e}),update:(e,s)=>E.patch(`/approval-requests/${e}`,s),getById:e=>E.get(`/approval-requests/${e}`),getStats:()=>E.get("/approval-requests/stats/overview"),bulkUpdate:e=>E.patch("/approval-requests/bulk",e)},W=new class{permission="default";registration=null;async initialize(){if(!("Notification"in window))return!1;if(!("serviceWorker"in navigator))return!1;try{return this.registration=await navigator.serviceWorker.register("/sw.js"),this.permission=await Notification.requestPermission(),"granted"===this.permission}catch(e){return!1}}async showNotification(e){if("granted"===this.permission)try{this.registration?await this.registration.showNotification(e.title,{body:e.body,icon:e.icon||"/android-chrome-192x192.png",badge:e.badge||"/favicon-32x32.png",tag:e.tag,data:e.data,requireInteraction:!0,silent:!1}):new Notification(e.title,{body:e.body,icon:e.icon||"/android-chrome-192x192.png",tag:e.tag})}catch(s){r(e.title,{duration:5e3})}}async showBookingNotification(e,s){const t={created:{title:"Booking Request Sent",body:`Your booking request for ${s.vehicleName} has been sent to the host.`,tag:"booking-created",data:{type:"booking",action:"view-booking",bookingId:s.id}},confirmed:{title:"Booking Confirmed! 🎉",body:`Your booking for ${s.vehicleName} has been confirmed. Pickup: ${s.pickupDate}`,tag:"booking-confirmed",data:{type:"booking",action:"view-booking",bookingId:s.id}},cancelled:{title:"Booking Cancelled",body:`Your booking for ${s.vehicleName} has been cancelled.`,tag:"booking-cancelled",data:{type:"booking",action:"view-bookings",bookingId:s.id}},reminder:{title:"Booking Reminder",body:`Don't forget! Your booking for ${s.vehicleName} starts tomorrow.`,tag:"booking-reminder",data:{type:"booking",action:"view-booking",bookingId:s.id}}}[e];await this.showNotification(t)}async showMessageNotification(e,s,t){await this.showNotification({title:`New message from ${e}`,body:s,tag:`message-${t}`,data:{type:"message",action:"open-conversation",conversationId:t},actions:[{action:"reply",title:"Reply"},{action:"view",title:"View Conversation"}]})}async showPaymentNotification(e,s,t="ZAR"){const a={success:{title:"Payment Successful",body:`Payment of ${t} ${s.toLocaleString()} has been processed successfully.`,tag:"payment-success"},failed:{title:"Payment Failed",body:`Payment of ${t} ${s.toLocaleString()} could not be processed. Please try again.`,tag:"payment-failed"},refund:{title:"Refund Processed",body:`Refund of ${t} ${s.toLocaleString()} has been processed.`,tag:"payment-refund"}}[e];await this.showNotification(a)}async showSystemNotification(e,s,t="info"){await this.showNotification({title:e,body:s,tag:`system-${t}`,data:{type:"system",notificationType:t}})}async scheduleBookingReminder(e,s,t){const a=new Date,r=t.getTime()-a.getTime();r>0&&setTimeout(async()=>{await this.showBookingNotification("reminder",{id:e,vehicleName:s})},r)}setupNotificationClickHandler(){this.registration&&this.registration.addEventListener("notificationclick",e=>{e.notification.close();const s=e.notification.data;"view-booking"===s?.action?window.open(`/dashboard?booking=${s.bookingId}`,"_blank"):"open-conversation"===s?.action?window.open(`/dashboard?messages=${s.conversationId}`,"_blank"):"view-bookings"===s?.action?window.open("/dashboard","_blank"):window.open("/","_blank")})}getPermission(){return this.permission}isSupported(){return"Notification"in window&&"serviceWorker"in navigator}async success(e){r.success(e)}async error(e){r.error(e)}async approvalSubmitted(e){r.success(e)}subscribe(e){}async markAsRead(e){}async markAllAsRead(){}async removeNotification(e){}},H=({children:e,className:s="",variant:t="card",blur:r="md",opacity:i=.1,shadow:l=!0})=>{const n=`\n    ${(()=>{switch(t){case"card":default:return"bg-white/10 dark:bg-white/5 backdrop-blur-md border border-white/20 dark:border-white/10 relative";case"modal":return"bg-white/15 dark:bg-white/8 backdrop-blur-lg border border-white/30 dark:border-white/15 relative";case"nav":return"bg-white/5 dark:bg-white/3 backdrop-blur-sm border-b border-white/10 dark:border-white/5 relative";case"form":return"bg-white/8 dark:bg-white/4 backdrop-blur-md border border-white/15 dark:border-white/8 relative";case"sidebar":return"bg-white/6 dark:bg-white/3 backdrop-blur-md border-r border-white/10 dark:border-white/5 relative"}})()}\n    ${l?"shadow-xl shadow-black/10 dark:shadow-black/20":""}\n    transition-all duration-300 ease-in-out\n    hover:bg-white/15 dark:hover:bg-white/8\n    hover:shadow-2xl hover:shadow-black/15 dark:hover:shadow-black/25\n  `;return a.jsxs("div",{className:`${n} ${s}`,style:{backdropFilter:`blur(${"sm"===r?"4px":"md"===r?"8px":"lg"===r?"12px":"16px"})`,backgroundColor:`rgba(255, 255, 255, ${i})`},children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/10 via-transparent to-black/5 rounded-inherit pointer-events-none"}),a.jsx("div",{className:"relative z-10 [&>*]:text-shadow-sm [&>h1]:text-shadow-md [&>h2]:text-shadow-md [&>h3]:text-shadow-md [&>p]:text-shadow-sm [&>span]:text-shadow-sm [&>div]:text-shadow-sm",children:e})]})},_=({children:e,className:s="",title:t,subtitle:r,icon:i,hover:l=!0})=>a.jsxs(H,{variant:"card",className:`rounded-2xl p-6 ${l?"hover:scale-105":""} ${s}`,shadow:!0,children:[(t||r||i)&&a.jsxs("div",{className:"flex items-center mb-4",children:[i&&a.jsx("div",{className:"w-12 h-12 bg-white/20 dark:bg-white/10 rounded-xl flex items-center justify-center mr-4 backdrop-blur-sm border border-white/30",children:i}),a.jsxs("div",{children:[t&&a.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white mb-1 text-shadow-md",children:t}),r&&a.jsx("p",{className:"text-white/90 dark:text-white/80 text-sm text-shadow-sm",children:r})]})]}),a.jsx("div",{className:"text-shadow-sm",children:e})]}),O=({selectedRequests:s,onBulkActionComplete:t,onClearSelection:r})=>{const[i,l]=e.useState(!1),[n,c]=e.useState(!1),[d,o]=e.useState(null),[x,h]=e.useState(""),m=e=>{o(e),c(!0)};return 0===s.length?null:a.jsxs(a.Fragment,{children:[a.jsx(_,{title:"Bulk Actions",icon:"Settings",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-white/70",children:[s.length," request",s.length>1?"s":""," selected"]}),a.jsx("button",{onClick:r,className:"text-blue-400 hover:text-blue-300 transition-colors text-sm",children:"Clear Selection"})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{onClick:()=>m("approve"),className:"flex-1 px-4 py-2 bg-green-500/20 text-green-200 rounded-lg hover:bg-green-500/30 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(S,{name:"Check",size:"sm"}),a.jsx("span",{children:"Approve All"})]}),a.jsxs("button",{onClick:()=>m("decline"),className:"flex-1 px-4 py-2 bg-red-500/20 text-red-200 rounded-lg hover:bg-red-500/30 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(S,{name:"X",size:"sm"}),a.jsx("span",{children:"Decline All"})]})]})]})}),n&&d&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"w-full max-w-md",children:a.jsx(_,{title:`Bulk ${"approve"===d?"Approve":"Decline"} Requests`,icon:"approve"===d?"Check":"X",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-white/70 text-sm",children:["You are about to ",d," ",s.length," request",s.length>1?"s":"",". This action cannot be undone."]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Review Notes (Optional)"}),a.jsx("textarea",{value:x,onChange:e=>h(e.target.value),placeholder:"Add notes for all requests...",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>(async e=>{if(0!==s.length)try{l(!0);const a=await q.bulkUpdate({requestIds:s,status:e,reviewNotes:x.trim()||void 0});a.data.success&&(W.success(`Bulk Action Completed - ${a.data.data.updatedCount} requests ${e.toLowerCase()} successfully`),t(),c(!1),h(""))}catch(a){W.error("Bulk Action Failed - Failed to process bulk action. Please try again.")}finally{l(!1)}})("approve"===d?"Approved":"Declined"),disabled:i,className:"flex-1 px-4 py-2 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 "+("approve"===d?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"),children:i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Processing..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(S,{name:"approve"===d?"Check":"X",size:"sm"}),a.jsxs("span",{children:["approve"===d?"Approve":"Decline"," All"]})]})}),a.jsx("button",{onClick:()=>{c(!1),o(null),h("")},className:"px-4 py-2 bg-white/10 text-white/70 rounded-lg hover:bg-white/20 transition-colors",children:"Cancel"})]})]})})})})]})},J=({userRole:s,showActions:t=!1,limit:r=5})=>{const[i,l]=e.useState([]),[n,c]=e.useState(!0),[d,o]=e.useState(null),[x,h]=e.useState([]);e.useEffect(()=>{m()},[s]);const m=async()=>{try{let e;c(!0),e="admin"===s?await q.getPending({limit:r}):await q.getMyRequests({limit:r}),e.data.success?l(e.data.data.requests||[]):o("Failed to fetch approval requests")}catch(e){o("Failed to fetch approval requests")}finally{c(!1)}},p=e=>{switch(e){case"Pending":return"yellow";case"UnderReview":return"blue";case"Approved":return"green";case"Declined":return"red";case"RequiresMoreInfo":return"orange";default:return"gray"}};return n?a.jsx(_,{title:"Approval Requests",icon:"Clock",children:a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})}):d?a.jsx(_,{title:"Approval Requests",icon:"Clock",children:a.jsxs("div",{className:"text-center py-8",children:[a.jsx(S,{name:"AlertCircle",size:"lg",className:"text-red-400 mx-auto mb-4"}),a.jsx("p",{className:"text-red-400",children:d})]})}):a.jsxs("div",{className:"space-y-6",children:["admin"===s&&t&&a.jsx(O,{selectedRequests:x,onBulkActionComplete:()=>{h([]),m()},onClearSelection:()=>{h([])}}),a.jsx(_,{title:"admin"===s?"Pending Approvals":"My Approval Requests",icon:"Clock",children:a.jsx("div",{className:"space-y-4",children:0===i.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(S,{name:"CheckCircle",size:"lg",className:"text-green-400 mx-auto mb-4"}),a.jsx("p",{className:"text-white/70",children:"admin"===s?"No pending approvals":"No approval requests"})]}):i.map(e=>{return a.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:["admin"===s&&t&&a.jsx("input",{type:"checkbox",checked:x.includes(e.id),onChange:()=>{return s=e.id,void h(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s},className:"mr-3 mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("h4",{className:"text-white font-semibold",children:(r=e.requestType,{DocumentVerification:"Document Verification",VehicleListing:"Vehicle Listing",InsuranceVerification:"Insurance Verification",ProfileVerification:"Profile Verification",VehicleApproval:"Vehicle Approval"}[r]||r)}),a.jsx(D,{status:p(e.status)})]}),a.jsxs("p",{className:"text-white/70 text-sm",children:["Submitted by: ",e.submittedByUser.firstName," ",e.submittedByUser.lastName]}),a.jsx("p",{className:"text-white/70 text-sm",children:new Date(e.createdAt).toLocaleDateString()}),e.reviewedAt&&a.jsxs("p",{className:"text-white/70 text-sm",children:["Reviewed: ",new Date(e.reviewedAt).toLocaleDateString()]})]})]}),e.reviewNotes&&a.jsx("div",{className:"mb-3 p-3 bg-white/5 rounded-lg",children:a.jsxs("p",{className:"text-white/80 text-sm",children:[a.jsx("strong",{children:"Review Notes:"})," ",e.reviewNotes]})}),t&&"Pending"===e.status&&a.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[a.jsxs("button",{onClick:()=>(async e=>{try{(await q.update(e,{status:"Approved",reviewNotes:void 0})).data.success&&(W.success("Request Approved - The approval request has been approved successfully."),m())}catch(s){W.error("Approval Failed - Failed to approve the request. Please try again.")}})(e.id),className:"flex-1 px-3 py-2 bg-green-500/20 text-green-200 rounded-lg hover:bg-green-500/30 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(S,{name:"Check",size:"sm"}),a.jsx("span",{className:"text-sm sm:text-base",children:"Approve"})]}),a.jsxs("button",{onClick:()=>(async e=>{try{(await q.update(e,{status:"Declined",reviewNotes:void 0})).data.success&&(W.success("Request Declined - The approval request has been declined."),m())}catch(s){W.error("Decline Failed - Failed to decline the request. Please try again.")}})(e.id),className:"flex-1 px-3 py-2 bg-red-500/20 text-red-200 rounded-lg hover:bg-red-500/30 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(S,{name:"X",size:"sm"}),a.jsx("span",{className:"text-sm sm:text-base",children:"Decline"})]})]})]},e.id);var r})})})]})},X=()=>{const[s,t]=e.useState(null),[r,i]=e.useState(!0);e.useEffect(()=>{l()},[]);const l=async()=>{try{const e=await q.getStats();e.data.success&&t(e.data.data)}catch(e){}finally{i(!1)}};return r?a.jsx(_,{title:"Approval Analytics",icon:"BarChart",children:a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(_,{title:"Status Distribution",icon:"PieChart",children:a.jsx("div",{className:"space-y-3",children:s?.statusStats.map(e=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-white/70 capitalize",children:e.status}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-20 bg-white/10 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:e.count/(s?.statusStats.reduce((e,s)=>e+s.count,0)||1)*100+"%"}})}),a.jsx("span",{className:"text-white font-semibold",children:e.count})]})]},e.status))})}),a.jsx(_,{title:"Request Types",icon:"FileText",children:a.jsx("div",{className:"space-y-3",children:s?.requestTypeStats.map(e=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-white/70",children:e.requestType}),a.jsx("span",{className:"text-white font-semibold",children:e.count})]},e.requestType))})})]})},G=({userRole:s,userId:t,onBookingAction:r,onRefresh:u})=>{const[g,j]=e.useState([]),[b,v]=e.useState([]),[w,N]=e.useState(!0),[f,y]=e.useState(null),[k,C]=e.useState(!1),[S,R]=e.useState({status:"all",dateRange:"all",search:""}),[A,L]=e.useState("createdAt"),[$,M]=e.useState("desc"),T=async()=>{try{N(!0);const e="host"===s?"/api/bookings/host-bookings":"/api/bookings/my-bookings",t=await fetch(e,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.json();if(!a.bookings)throw new Error(a.error||"Failed to fetch bookings");j(a.bookings),v(a.bookings)}catch(e){j([]),v([])}finally{N(!1)}};e.useEffect(()=>{T()},[s,t]),e.useEffect(()=>{D()},[g,S,A,$]);const D=()=>{let e=[...g];if("all"!==S.status&&(e=e.filter(e=>e.status===S.status)),"all"!==S.dateRange){const s=new Date,t=new Date(s.getTime()-2592e6);"recent"===S.dateRange?e=e.filter(e=>new Date(e.createdAt)>=t):"upcoming"===S.dateRange&&(e=e.filter(e=>new Date(e.startDate)>=s))}if(S.search){const s=S.search.toLowerCase();e=e.filter(e=>e.vehicleTitle.toLowerCase().includes(s)||e.renterName.toLowerCase().includes(s)||e.hostName.toLowerCase().includes(s))}e.sort((e,s)=>{let t,a;switch(A){case"createdAt":t=new Date(e.createdAt),a=new Date(s.createdAt);break;case"startDate":t=new Date(e.startDate),a=new Date(s.startDate);break;case"totalPrice":t=e.totalPrice,a=s.totalPrice;break;case"status":t=e.status,a=s.status;break;default:t=e.createdAt,a=s.createdAt}return"asc"===$?t>a?1:-1:t<a?1:-1}),v(e)},B=async(e,s,t)=>{try{await new Promise(e=>setTimeout(e,500)),j(a=>a.map(a=>{if(a.id===e)switch(s){case"approve":return{...a,status:"confirmed",updatedAt:(new Date).toISOString()};case"decline":return{...a,status:"cancelled",cancellationReason:t?.reason||"Declined by host",updatedAt:(new Date).toISOString()};case"cancel":return{...a,status:"cancelled",cancellationReason:t?.reason||"Cancelled by renter",updatedAt:(new Date).toISOString()};case"complete":return{...a,status:"completed",updatedAt:(new Date).toISOString()};default:return a}return a})),r?.(e,s,t)}catch(a){}},P=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"completed":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},U=e=>{switch(e){case"pending":return a.jsx(p,{className:"w-4 h-4"});case"confirmed":case"completed":return a.jsx(m,{className:"w-4 h-4"});case"cancelled":return a.jsx(o,{className:"w-4 h-4"});default:return a.jsx(h,{className:"w-4 h-4"})}},z=e=>new Date(e).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"}),V=e=>`R ${e.toLocaleString()}`;return w?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Booking Management"}),a.jsxs("p",{className:"text-gray-600",children:["renter"===s&&"Manage your vehicle bookings","host"===s&&"Manage booking requests for your vehicles","admin"===s&&"Oversee all platform bookings"]})]}),a.jsxs("button",{onClick:u||T,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(i,{className:"w-4 h-4"}),"Refresh"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{value:S.status,onChange:e=>R(s=>({...s,status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"confirmed",children:"Confirmed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"}),a.jsx("option",{value:"completed",children:"Completed"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Range"}),a.jsxs("select",{value:S.dateRange,onChange:e=>R(s=>({...s,dateRange:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Time"}),a.jsx("option",{value:"recent",children:"Last 30 Days"}),a.jsx("option",{value:"upcoming",children:"Upcoming"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),a.jsxs("div",{className:"relative",children:[a.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search bookings...",value:S.search,onChange:e=>R(s=>({...s,search:e.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),a.jsxs("select",{value:`${A}-${$}`,onChange:e=>{const[s,t]=e.target.value.split("-");L(s),M(t)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"createdAt-desc",children:"Newest First"}),a.jsx("option",{value:"createdAt-asc",children:"Oldest First"}),a.jsx("option",{value:"startDate-asc",children:"Start Date (Earliest)"}),a.jsx("option",{value:"startDate-desc",children:"Start Date (Latest)"}),a.jsx("option",{value:"totalPrice-desc",children:"Price (High to Low)"}),a.jsx("option",{value:"totalPrice-asc",children:"Price (Low to High)"})]})]})]})}),a.jsx("div",{className:"space-y-4",children:0===b.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(n,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No bookings found"}),a.jsx("p",{className:"text-gray-500",children:"all"!==S.status||S.search||"all"!==S.dateRange?"Try adjusting your filters to see more results.":"No bookings have been made yet."})]}):b.map(e=>a.jsx("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("img",{src:e.vehicleImage,alt:e.vehicleTitle,className:"w-16 h-16 rounded-lg object-cover"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e.vehicleTitle}),a.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium border ${P(e.status)}`,children:[U(e.status),e.status.charAt(0).toUpperCase()+e.status.slice(1)]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-800",children:"Dates"}),a.jsxs("p",{children:[z(e.startDate)," - ",z(e.endDate)]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-800",children:"renter"===s?"Host":"host"===s?"Renter":"Renter & Host"}),a.jsx("p",{children:"renter"===s?e.hostName:"host"===s?e.renterName:`${e.renterName} → ${e.hostName}`})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-800",children:"Total Price"}),a.jsx("p",{className:"text-lg font-semibold text-green-600",children:V(e.totalPrice)})]})]}),e.specialRequests&&a.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Special Requests:"})," ",e.specialRequests]})})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{y(e),C(!0)},className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(c,{className:"w-4 h-4"})}),"host"===s&&"pending"===e.status&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>B(e.id,"approve"),className:"px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:"Approve"}),a.jsx("button",{onClick:()=>B(e.id,"decline",{reason:"Not available"}),className:"px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Decline"})]}),"renter"===s&&("pending"===e.status||"confirmed"===e.status)&&a.jsx("button",{onClick:()=>B(e.id,"cancel",{reason:"Change of plans"}),className:"px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Cancel"}),"admin"===s&&a.jsxs("div",{className:"flex gap-2",children:["pending"===e.status&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>B(e.id,"approve"),className:"px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:"Approve"}),a.jsx("button",{onClick:()=>B(e.id,"decline",{reason:"Admin override"}),className:"px-3 py-1 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Decline"})]}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(d,{className:"w-4 h-4"})})]})]})]})})},e.id))}),k&&f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Booking Details"}),a.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx(o,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("div",{children:a.jsx("img",{src:f.vehicleImage,alt:f.vehicleTitle,className:"w-full h-32 object-cover rounded-lg"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-800",children:f.vehicleTitle}),a.jsxs("p",{className:"text-gray-600",children:["Booking ID: ",f.id]}),a.jsxs("p",{className:"text-gray-600",children:["Created: ",z(f.createdAt)]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Renter Information"}),a.jsx("p",{className:"text-sm text-gray-600",children:f.renterName}),a.jsx("p",{className:"text-sm text-gray-600",children:f.renterEmail}),f.renterPhone&&a.jsx("p",{className:"text-sm text-gray-600",children:f.renterPhone})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Host Information"}),a.jsx("p",{className:"text-sm text-gray-600",children:f.hostName}),a.jsx("p",{className:"text-sm text-gray-600",children:f.hostEmail})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Booking Dates"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Start: ",z(f.startDate)]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["End: ",z(f.endDate)]})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Payment"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Total: ",V(f.totalPrice)]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Status: ",f.paymentStatus]})]})]}),f.specialRequests&&a.jsxs("div",{children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Special Requests"}),a.jsx("p",{className:"text-sm text-gray-600",children:f.specialRequests})]}),f.cancellationReason&&a.jsxs("div",{children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Cancellation Reason"}),a.jsx("p",{className:"text-sm text-gray-600",children:f.cancellationReason})]}),f.rating&&a.jsxs("div",{children:[a.jsx("h5",{className:"font-medium text-gray-800 mb-2",children:"Review"}),a.jsx("div",{className:"flex items-center gap-1 mb-1",children:[...Array(5)].map((e,s)=>a.jsx(x,{className:"w-4 h-4 "+(s<f.rating?"text-yellow-400 fill-current":"text-gray-300")},s))}),f.review&&a.jsx("p",{className:"text-sm text-gray-600",children:f.review})]})]})]})})})]})},Y=({userRole:s,userId:t,onNotificationClick:r,onMarkAsRead:l,onMarkAllAsRead:c})=>{const[d,x]=e.useState([]),[p,b]=e.useState(!1),[v,w]=e.useState(!0),[N,f]=e.useState(!1),y=[{id:"notif-1",type:"booking_created",title:"New Booking Request",message:"John Smith has requested to book your Toyota Corolla for Dec 15-17",bookingId:"booking-1",vehicleTitle:"Toyota Corolla 2023",renterName:"John Smith",timestamp:new Date(Date.now()-3e5),read:!1,priority:"high",actionRequired:!0,actionUrl:"/dashboard?tab=bookings"},{id:"notif-2",type:"booking_approved",title:"Booking Approved",message:"Your booking for BMW X3 has been approved by Sarah Johnson",bookingId:"booking-2",vehicleTitle:"BMW X3 2022",hostName:"Sarah Johnson",timestamp:new Date(Date.now()-9e5),read:!1,priority:"medium",actionRequired:!1,actionUrl:"/dashboard?tab=bookings"},{id:"notif-3",type:"payment_received",title:"Payment Received",message:"Payment of R 1,200 received for Toyota Corolla booking",bookingId:"booking-1",vehicleTitle:"Toyota Corolla 2023",amount:1200,timestamp:new Date(Date.now()-18e5),read:!0,priority:"medium",actionRequired:!1},{id:"notif-4",type:"booking_declined",title:"Booking Declined",message:"Your booking for Audi A4 has been declined by David Brown",bookingId:"booking-3",vehicleTitle:"Audi A4 2023",hostName:"David Brown",timestamp:new Date(Date.now()-72e5),read:!0,priority:"low",actionRequired:!1},{id:"notif-5",type:"booking_completed",title:"Booking Completed",message:"Your rental of BMW X3 has been completed successfully",bookingId:"booking-2",vehicleTitle:"BMW X3 2022",timestamp:new Date(Date.now()-144e5),read:!0,priority:"low",actionRequired:!1}];e.useEffect(()=>{k();const e=setInterval(()=>{v&&k()},3e4);return()=>clearInterval(e)},[t,v]);const k=async()=>{f(!0);try{await new Promise(e=>setTimeout(e,500));let e=y;"renter"===s?e=y.filter(e=>"booking_approved"===e.type||"booking_declined"===e.type||"booking_completed"===e.type||"payment_failed"===e.type):"host"===s&&(e=y.filter(e=>"booking_created"===e.type||"payment_received"===e.type)),x(e)}catch(e){}finally{f(!1)}},C=e=>{switch(e){case"booking_created":return a.jsx(n,{className:"w-5 h-5 text-blue-600"});case"booking_approved":case"booking_completed":case"payment_received":return a.jsx(m,{className:"w-5 h-5 text-green-600"});case"booking_declined":case"booking_cancelled":return a.jsx(o,{className:"w-5 h-5 text-red-600"});case"payment_failed":return a.jsx(h,{className:"w-5 h-5 text-red-600"});default:return a.jsx(u,{className:"w-5 h-5 text-gray-600"})}},S=e=>{switch(e){case"urgent":return"border-red-500 bg-red-50";case"high":return"border-orange-500 bg-orange-50";case"medium":return"border-blue-500 bg-blue-50";default:return"border-gray-500 bg-gray-50"}},R=e=>{const s=(new Date).getTime()-e.getTime(),t=Math.floor(s/6e4),a=Math.floor(s/36e5),r=Math.floor(s/864e5);return t<1?"Just now":t<60?`${t}m ago`:a<24?`${a}h ago`:`${r}d ago`},A=d.filter(e=>!e.read).length,L=d.filter(e=>e.actionRequired&&!e.read).length;return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>b(!p),className:"relative p-2 text-gray-600 hover:text-gray-800 transition-colors",children:[a.jsx(u,{className:"w-6 h-6"}),A>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:A})]}),p&&a.jsxs("div",{className:"absolute right-0 top-12 w-96 bg-white rounded-lg shadow-lg border z-50 max-h-96 overflow-y-auto",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Notifications"}),a.jsxs("div",{className:"flex items-center gap-2",children:[L>0&&a.jsxs("span",{className:"text-sm text-orange-600 font-medium",children:[L," action required"]}),a.jsx("button",{onClick:()=>w(!v),className:"p-1 rounded "+(v?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-50"),children:v?a.jsx(u,{className:"w-4 h-4"}):a.jsx(g,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>b(!1),className:"p-1 text-gray-400 hover:bg-gray-50 rounded",children:a.jsx(j,{className:"w-4 h-4"})})]})]}),A>0&&a.jsx("button",{onClick:()=>{x(e=>e.map(e=>({...e,read:!0}))),c?.()},className:"mt-2 text-sm text-blue-600 hover:text-blue-800",children:"Mark all as read"})]}),a.jsx("div",{className:"p-4",children:N?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(i,{className:"w-6 h-6 animate-spin text-gray-400"})}):0===d.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(u,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No notifications yet"})]}):a.jsx("div",{className:"space-y-3",children:d.map(e=>a.jsx("div",{onClick:()=>(e=>{e.read||(x(s=>s.map(s=>s.id===e.id?{...s,read:!0}:s)),l?.(e.id)),r?.(e),e.actionUrl&&(window.location.href=e.actionUrl)})(e),className:`p-3 rounded-lg border cursor-pointer transition-all hover:shadow-md ${e.read?"bg-gray-50":"bg-white"} ${S(e.priority)}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:C(e.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-medium "+(e.read?"text-gray-600":"text-gray-800"),children:e.title}),!e.read&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.actionRequired&&a.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded",children:"Action Required"})]}),a.jsx("p",{className:"text-sm "+(e.read?"text-gray-500":"text-gray-700"),children:e.message}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsx("span",{className:"text-xs text-gray-500",children:R(e.timestamp)}),e.amount&&a.jsxs("span",{className:"text-xs font-medium text-green-600",children:["R ",e.amount.toLocaleString()]})]})]})]})},e.id))})})]}),p&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>b(!1)})]})},Z=()=>{const{user:t,logout:r}=k(),i=s(),[l,n]=e.useState(null),[c,d]=e.useState(!0),[o,x]=e.useState("overview");e.useEffect(()=>{h();const e=setInterval(h,3e4);return()=>clearInterval(e)},[]);const h=async()=>{try{const e=await T.getStats();n(e)}catch(e){}finally{d(!1)}};return c?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):a.jsx("div",{className:"min-h-screen p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Admin Dashboard"}),a.jsx("p",{className:"text-gray-300",children:"Real-time management of RideShare SA platform"}),a.jsxs("div",{className:"mt-4 text-sm text-gray-400",children:["Welcome, ",t?.firstName," ",t?.lastName]})]}),a.jsxs("button",{onClick:async()=>{try{await r(),i("/")}catch(e){}},className:"flex items-center space-x-2 px-4 py-2 bg-red-600/80 backdrop-blur-md rounded-lg border border-red-500/30 text-white hover:bg-red-600 transition-all",children:[a.jsx(S,{name:"log-out",className:"h-4 w-4"}),a.jsx("span",{children:"Exit Admin"})]})]})}),l&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:l.overview.totalUsers})]}),a.jsx(S,{name:"users",className:"h-8 w-8 text-blue-400"})]}),a.jsx("div",{className:"mt-2",children:a.jsxs("span",{className:"text-red-400 text-sm",children:[l.overview.pendingUsers," pending approval"]})})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Vehicles"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:l.overview.totalVehicles})]}),a.jsx(S,{name:"car",className:"h-8 w-8 text-green-400"})]}),a.jsx("div",{className:"mt-2",children:a.jsxs("span",{className:"text-red-400 text-sm",children:[l.overview.pendingVehicles," pending approval"]})})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Bookings"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:l.overview.totalBookings})]}),a.jsx(S,{name:"calendar",className:"h-8 w-8 text-purple-400"})]}),a.jsx("div",{className:"mt-2",children:a.jsxs("span",{className:"text-yellow-400 text-sm",children:[l.overview.pendingBookings," pending"]})})]}),a.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",l.overview.totalRevenue.toLocaleString()]})]}),a.jsx(S,{name:"dollar-sign",className:"h-8 w-8 text-yellow-400"})]})})]}),a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"flex space-x-1 bg-white/10 backdrop-blur-md rounded-lg p-1 border border-white/20",children:[{id:"overview",label:"Overview",icon:"bar-chart"},{id:"bookings",label:"Bookings",icon:"calendar"},{id:"approvals",label:"Approval Queue",icon:"clock"},{id:"users",label:"User Approvals",icon:"users"},{id:"vehicles",label:"Vehicle Approvals",icon:"car"},{id:"analytics",label:"Analytics",icon:"trending-up"},{id:"system",label:"System Admin",icon:"settings"}].map(e=>a.jsxs("button",{onClick:()=>x(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-md transition-all "+(o===e.id?"bg-white/20 text-white":"text-gray-300 hover:text-white hover:bg-white/10"),children:[a.jsx(S,{name:e.icon,className:"h-4 w-4"}),a.jsx("span",{children:e.label})]},e.id))})}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:["overview"===o&&a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Platform Overview"}),a.jsx(Y,{userRole:"admin",userId:t?.id||"0",onNotificationClick:e=>{e.actionUrl&&(window.location.href=e.actionUrl)},onMarkAsRead:e=>{},onMarkAllAsRead:()=>{}})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Recent User Registrations"}),a.jsx("div",{className:"space-y-2",children:l?.recentActivity.recentUsers.slice(0,5).map(e=>a.jsxs("div",{className:"flex items-center justify-between bg-white/5 rounded-lg p-3",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-white font-medium",children:[e.firstName," ",e.lastName]}),a.jsx("p",{className:"text-gray-400 text-sm",children:e.email})]}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("pending"===e.approvalStatus?"bg-yellow-500/20 text-yellow-400":"approved"===e.approvalStatus?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:e.approvalStatus})]},e.id))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Recent Vehicle Listings"}),a.jsx("div",{className:"space-y-2",children:l?.recentActivity.recentVehicles.slice(0,5).map(e=>a.jsxs("div",{className:"flex items-center justify-between bg-white/5 rounded-lg p-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:e.title}),a.jsxs("p",{className:"text-gray-400 text-sm",children:[e.make," ",e.model]})]}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("pending"===e.status?"bg-yellow-500/20 text-yellow-400":"approved"===e.status?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:e.status})]},e.id))})]})]})]}),"bookings"===o&&a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Booking Management"}),a.jsx(G,{userRole:"admin",userId:t?.id||"0",onBookingAction:(e,s,t)=>{h()},onRefresh:h})]}),"approvals"===o&&a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx(X,{}),a.jsx(J,{userRole:"admin",showActions:!0})]}),"users"===o&&a.jsx("div",{className:"p-6",children:a.jsx(B,{})}),"vehicles"===o&&a.jsx("div",{className:"p-6",children:a.jsx(P,{})}),"analytics"===o&&a.jsx("div",{className:"p-6",children:a.jsx(U,{})}),"system"===o&&a.jsx("div",{className:"p-6",children:a.jsx(z,{})})]})]})})},Q=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"})),K=({size:e="md",text:s="Loading...",className:t=""})=>a.jsxs("div",{className:`flex items-center justify-center space-x-2 ${t}`,children:[a.jsx("div",{className:`animate-spin rounded-full border-2 border-white/20 border-t-white ${{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[e]}`}),s&&a.jsx("span",{className:"text-white/70 text-sm",children:s})]}),ee=({variant:e="primary",size:s="md",icon:t,loading:r=!1,gradient:i=!1,className:l="",children:n,disabled:c,...d})=>a.jsxs("button",{className:`\n        inline-flex items-center justify-center rounded-xl font-medium\n        backdrop-blur-md transition-all duration-300 ease-in-out\n        hover:scale-105 active:scale-95\n        focus:outline-none focus:ring-2 focus:ring-white/20 dark:focus:ring-white/10\n        disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100\n        ${(()=>{switch(e){case"primary":return i?"bg-gradient-to-r from-blue-500/20 to-purple-500/20 hover:from-blue-500/30 hover:to-purple-500/30 text-white border border-white/30":"bg-white/20 dark:bg-white/10 hover:bg-white/30 dark:hover:bg-white/20 text-white border border-white/30";case"secondary":return"bg-white/10 dark:bg-white/5 hover:bg-white/20 dark:hover:bg-white/10 text-white border border-white/20";case"outline":return"bg-transparent hover:bg-white/10 dark:hover:bg-white/5 text-white border border-white/30 hover:border-white/50";case"ghost":return"bg-transparent hover:bg-white/10 dark:hover:bg-white/5 text-white border-none";default:return"bg-white/20 dark:bg-white/10 hover:bg-white/30 dark:hover:bg-white/20 text-white border border-white/30"}})()}\n        ${(()=>{switch(s){case"sm":return"px-3 py-2 text-sm";case"md":default:return"px-4 py-3 text-base";case"lg":return"px-6 py-4 text-lg"}})()}\n        ${l}\n      `,disabled:c||r,...d,children:[r?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white/30 border-t-white mr-2"}):t?a.jsx("span",{className:"mr-2",children:t}):null,n]}),se=()=>{const[s,t]=e.useState({responseTime:0,uptime:0,errorRate:0,activeUsers:0,memoryUsage:0,cpuUsage:0}),[r,i]=e.useState(!1);e.useEffect(()=>{const e=setInterval(()=>{t({responseTime:200*Math.random()+50,uptime:99.9+.1*Math.random(),errorRate:.5*Math.random(),activeUsers:Math.floor(100*Math.random())+50,memoryUsage:60+20*Math.random(),cpuUsage:30+40*Math.random()})},2e3);return()=>clearInterval(e)},[]);const l=(e,s)=>{switch(s){case"response":return e<100?"text-green-400":e<200?"text-yellow-400":"text-red-400";case"uptime":return e>99.5?"text-green-400":e>99?"text-yellow-400":"text-red-400";case"error":return e<.1?"text-green-400":e<.5?"text-yellow-400":"text-red-400";case"usage":return e<70?"text-green-400":e<90?"text-yellow-400":"text-red-400";default:return"text-white"}};return a.jsx(_,{title:"System Performance",icon:"Activity",className:"border-blue-500/20",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full "+(r?"bg-green-400 animate-pulse":"bg-gray-400")}),a.jsx("span",{className:"text-white/70 text-sm",children:r?"Live Monitoring":"Monitoring Paused"})]}),a.jsx("button",{onClick:()=>i(!r),className:"px-3 py-1 bg-white/10 text-white/80 rounded text-sm hover:bg-white/20 transition-colors",children:r?"Pause":"Start"})]}),a.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(S,{name:"Clock",className:"h-4 w-4 text-blue-400"}),a.jsx("span",{className:"text-xs text-white/60",children:"Response Time"})]}),a.jsxs("div",{className:`text-2xl font-bold ${l(s.responseTime,"response")}`,children:[Math.round(s.responseTime),"ms"]}),a.jsx("div",{className:"text-xs text-white/60 mt-1",children:s.responseTime<100?"Excellent":s.responseTime<200?"Good":"Needs Attention"})]}),a.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(S,{name:"CheckCircle",className:"h-4 w-4 text-green-400"}),a.jsx("span",{className:"text-xs text-white/60",children:"Uptime"})]}),a.jsxs("div",{className:`text-2xl font-bold ${l(s.uptime,"uptime")}`,children:[s.uptime.toFixed(2),"%"]}),a.jsx("div",{className:"text-xs text-white/60 mt-1",children:s.uptime>99.5?"Excellent":s.uptime>99?"Good":"Needs Attention"})]}),a.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(S,{name:"AlertTriangle",className:"h-4 w-4 text-red-400"}),a.jsx("span",{className:"text-xs text-white/60",children:"Error Rate"})]}),a.jsxs("div",{className:`text-2xl font-bold ${l(s.errorRate,"error")}`,children:[s.errorRate.toFixed(2),"%"]}),a.jsx("div",{className:"text-xs text-white/60 mt-1",children:s.errorRate<.1?"Excellent":s.errorRate<.5?"Good":"Needs Attention"})]}),a.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(S,{name:"Users",className:"h-4 w-4 text-purple-400"}),a.jsx("span",{className:"text-xs text-white/60",children:"Active Users"})]}),a.jsx("div",{className:"text-2xl font-bold text-white",children:s.activeUsers}),a.jsx("div",{className:"text-xs text-white/60 mt-1",children:"Currently online"})]}),a.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(S,{name:"Database",className:"h-4 w-4 text-orange-400"}),a.jsx("span",{className:"text-xs text-white/60",children:"Memory"})]}),a.jsxs("div",{className:`text-2xl font-bold ${l(s.memoryUsage,"usage")}`,children:[Math.round(s.memoryUsage),"%"]}),a.jsx("div",{className:"text-xs text-white/60 mt-1",children:s.memoryUsage<70?"Optimal":s.memoryUsage<90?"Good":"High"})]}),a.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(S,{name:"Cpu",className:"h-4 w-4 text-cyan-400"}),a.jsx("span",{className:"text-xs text-white/60",children:"CPU"})]}),a.jsxs("div",{className:`text-2xl font-bold ${l(s.cpuUsage,"usage")}`,children:[Math.round(s.cpuUsage),"%"]}),a.jsx("div",{className:"text-xs text-white/60 mt-1",children:s.cpuUsage<70?"Optimal":s.cpuUsage<90?"Good":"High"})]})]}),a.jsxs("div",{className:"mt-6 p-4 bg-white/5 rounded-lg border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h4",{className:"text-white font-medium",children:"Performance Trends"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"px-2 py-1 bg-white/10 text-white/80 rounded text-xs hover:bg-white/20 transition-colors",children:"1H"}),a.jsx("button",{className:"px-2 py-1 bg-white/20 text-white rounded text-xs",children:"24H"}),a.jsx("button",{className:"px-2 py-1 bg-white/10 text-white/80 rounded text-xs hover:bg-white/20 transition-colors",children:"7D"})]})]}),a.jsx("div",{className:"h-32 bg-white/5 rounded flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-white/60",children:[a.jsx(S,{name:"BarChart",className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"Performance chart will be displayed here"})]})})]}),a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsx("h4",{className:"text-white font-medium text-sm",children:"System Alerts"}),a.jsxs("div",{className:"space-y-2",children:[s.responseTime>200&&a.jsxs("div",{className:"p-2 bg-red-500/10 border border-red-500/20 rounded text-sm text-red-200",children:[a.jsx(S,{name:"AlertTriangle",className:"h-4 w-4 inline mr-2"}),"High response time detected"]}),s.errorRate>.5&&a.jsxs("div",{className:"p-2 bg-red-500/10 border border-red-500/20 rounded text-sm text-red-200",children:[a.jsx(S,{name:"XCircle",className:"h-4 w-4 inline mr-2"}),"Error rate above threshold"]}),s.memoryUsage>90&&a.jsxs("div",{className:"p-2 bg-yellow-500/10 border border-yellow-500/20 rounded text-sm text-yellow-200",children:[a.jsx(S,{name:"AlertTriangle",className:"h-4 w-4 inline mr-2"}),"High memory usage"]}),s.responseTime<100&&s.errorRate<.1&&s.uptime>99.5&&a.jsxs("div",{className:"p-2 bg-green-500/10 border border-green-500/20 rounded text-sm text-green-200",children:[a.jsx(S,{name:"CheckCircle",className:"h-4 w-4 inline mr-2"}),"All systems operating normally"]})]})]})]})})},te=({onRefresh:s})=>{const[t,r]=e.useState([]),[i,l]=e.useState(!0),[n,c]=e.useState({status:"all",role:"all",search:""}),[d,o]=e.useState([]),[x,h]=e.useState(!1);e.useEffect(()=>{m()},[n]);const m=async()=>{try{l(!0);const e=await T.getUsers(1,10,"all"!==n.status?n.status:void 0,"all"!==n.role?n.role:void 0);r(e.users||[])}catch(e){}finally{l(!1)}},p=async(e,t,a)=>{try{await T.approveUser(e,t,a),await m(),s()}catch(r){}},u=async e=>{try{const t=d.map(s=>T.approveUser(s,"approve"===e?"approved":"rejected"));await Promise.all(t),o([]),h(!1),await m(),s()}catch(t){}},g=t.filter(e=>{if(n.search){const s=n.search.toLowerCase();return e.firstName.toLowerCase().includes(s)||e.lastName.toLowerCase().includes(s)||e.email.toLowerCase().includes(s)}return!0});return i?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"User Management"}),a.jsx("p",{className:"text-gray-300",children:"Manage user registrations and approvals"})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("button",{onClick:()=>h(!x),className:"flex items-center space-x-2 px-4 py-2 bg-white/10 backdrop-blur-md rounded-lg border border-white/20 text-white hover:bg-white/20 transition-all",children:[a.jsx(S,{name:"check-square",className:"h-4 w-4"}),a.jsx("span",{children:"Bulk Actions"})]})})]}),a.jsx(_,{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search"}),a.jsx("input",{type:"text",placeholder:"Search users...",value:n.search,onChange:e=>c(s=>({...s,search:e.target.value})),className:"glass-input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),a.jsxs("select",{value:n.status,onChange:e=>c(s=>({...s,status:e.target.value})),className:"glass-select",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"rejected",children:"Rejected"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Role"}),a.jsxs("select",{value:n.role,onChange:e=>c(s=>({...s,role:e.target.value})),className:"glass-select",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"renter",children:"Renter"}),a.jsx("option",{value:"host",children:"Host"}),a.jsx("option",{value:"admin",children:"Admin"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white transition-all",children:[a.jsx(S,{name:"search",className:"h-4 w-4"}),a.jsx("span",{children:"Filter"})]})})]})}),x&&d.length>0&&a.jsx(_,{className:"p-4 bg-yellow-500/10 border-yellow-500/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-yellow-400",children:[d.length," user(s) selected"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:()=>u("approve"),className:"flex items-center space-x-2 px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-white text-sm",children:[a.jsx(S,{name:"check",className:"h-4 w-4"}),a.jsx("span",{children:"Approve All"})]}),a.jsxs("button",{onClick:()=>u("reject"),className:"flex items-center space-x-2 px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-white text-sm",children:[a.jsx(S,{name:"x",className:"h-4 w-4"}),a.jsx("span",{children:"Reject All"})]}),a.jsx("button",{onClick:()=>{o([]),h(!1)},className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 rounded text-white text-sm",children:"Cancel"})]})]})}),a.jsx(_,{className:"overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-white/5",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:a.jsx("input",{type:"checkbox",checked:d.length===g.length&&g.length>0,onChange:e=>{e.target.checked?o(g.map(e=>e.id)):o([])},className:"rounded border-gray-300"})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Documents"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Joined"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-white/10",children:g.map(e=>a.jsxs("tr",{className:"hover:bg-white/5",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("input",{type:"checkbox",checked:d.includes(e.id),onChange:()=>{return s=e.id,void o(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s},className:"rounded border-gray-300"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center",children:a.jsxs("span",{className:"text-white font-medium",children:[e.firstName[0],e.lastName[0]]})})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-sm font-medium text-white",children:[e.firstName," ",e.lastName]}),a.jsx("div",{className:"text-sm text-gray-400",children:e.email}),e.phoneNumber&&a.jsx("div",{className:"text-sm text-gray-400",children:e.phoneNumber})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("admin"===e.role?"bg-purple-100 text-purple-800":"host"===e.role?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:e.role})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(D,{status:e.approvalStatus})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx(D,{status:"approved"===e.documentStatus?"approved":"rejected"===e.documentStatus?"rejected":"pending"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-400",children:new Date(e.createdAt).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-2",children:["pending"===e.approvalStatus&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>p(e.id,"approved"),className:"text-green-400 hover:text-green-300",children:a.jsx(S,{name:"check",className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>{const s=prompt("Rejection reason (optional):");p(e.id,"rejected",s||void 0)},className:"text-red-400 hover:text-red-300",children:a.jsx(S,{name:"x",className:"h-4 w-4"})})]}),a.jsx("button",{className:"text-blue-400 hover:text-blue-300",children:a.jsx(S,{name:"eye",className:"h-4 w-4"})})]})})]},e.id))})]})})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",g.length," of ",t.length," users"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{className:"px-3 py-1 bg-white/10 rounded text-white hover:bg-white/20",children:"Previous"}),a.jsx("span",{className:"px-3 py-1 bg-white/20 rounded text-white",children:"1"}),a.jsx("button",{className:"px-3 py-1 bg-white/10 rounded text-white hover:bg-white/20",children:"Next"})]})]})]})},ae=({onRefresh:s})=>{const[t,r]=e.useState([]),[i,l]=e.useState(!0),[n,c]=e.useState({status:"all",search:""}),[d,o]=e.useState([]),[x,h]=e.useState(!1),[m,p]=e.useState(null);if(m&&m.includes("Failed to load vehicles"))return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Vehicle Management"}),a.jsx("p",{className:"text-gray-300",children:"Review and approve vehicle listings"})]})}),a.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(S,{name:"AlertTriangle",className:"h-6 w-6 text-red-400"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-red-400",children:"Unable to load vehicles"}),a.jsx("p",{className:"text-red-300 mt-1",children:"There was an error loading the vehicle data. This could be due to:"}),a.jsxs("ul",{className:"text-red-300 mt-2 list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Network connection issues"}),a.jsx("li",{children:"Backend server not running"}),a.jsx("li",{children:"Authentication problems"})]}),a.jsx("button",{onClick:()=>{p(null),u()},className:"mt-4 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Try Again"})]})]})})]});e.useEffect(()=>{u()},[n]);const u=async()=>{try{l(!0),p(null);const e=await T.getVehicles(1,10,"all"!==n.status?n.status:void 0);r(e.vehicles||[])}catch(e){p("Failed to load vehicles. Please try again."),r([])}finally{l(!1)}},g=async(e,t,a)=>{try{await T.approveVehicle(e,t,a),await u(),s()}catch(r){}},j=async e=>{try{const t=d.map(s=>T.approveVehicle(s,"approve"===e?"approved":"declined"));await Promise.all(t),o([]),h(!1),await u(),s()}catch(t){}},b=t.filter(e=>{if(n.search){const s=n.search.toLowerCase();return(e.title||"").toLowerCase().includes(s)||(e.make||"").toLowerCase().includes(s)||(e.model||"").toLowerCase().includes(s)||(e.location||"").toLowerCase().includes(s)}return!0});return i?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-white/70",children:"Loading vehicles..."})]})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Vehicle Management"}),a.jsx("p",{className:"text-gray-300",children:"Review and approve vehicle listings"})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("button",{onClick:()=>h(!x),className:"flex items-center space-x-2 px-4 py-2 bg-white/10 backdrop-blur-md rounded-lg border border-white/20 text-white hover:bg-white/20 transition-all",children:[a.jsx(S,{name:"check-square",className:"h-4 w-4"}),a.jsx("span",{children:"Bulk Actions"})]})})]}),a.jsx(_,{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search"}),a.jsx("input",{type:"text",placeholder:"Search vehicles...",value:n.search,onChange:e=>c(s=>({...s,search:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),a.jsxs("select",{value:n.status,onChange:e=>c(s=>({...s,status:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"declined",children:"Declined"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("button",{onClick:u,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white transition-all",children:[a.jsx(S,{name:"search",className:"h-4 w-4"}),a.jsx("span",{children:"Filter"})]})})]})}),x&&d.length>0&&a.jsx(_,{className:"p-4 bg-yellow-500/10 border-yellow-500/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-yellow-400",children:[d.length," vehicle(s) selected"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:()=>j("approve"),className:"flex items-center space-x-2 px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-white text-sm",children:[a.jsx(S,{name:"check",className:"h-4 w-4"}),a.jsx("span",{children:"Approve All"})]}),a.jsxs("button",{onClick:()=>j("decline"),className:"flex items-center space-x-2 px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-white text-sm",children:[a.jsx(S,{name:"x",className:"h-4 w-4"}),a.jsx("span",{children:"Decline All"})]}),a.jsx("button",{onClick:()=>{o([]),h(!1)},className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 rounded text-white text-sm",children:"Cancel"})]})]})}),m&&a.jsx(_,{className:"p-4 bg-red-500/10 border-red-500/20",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(S,{name:"AlertTriangle",className:"h-5 w-5 text-red-400"}),a.jsx("span",{className:"text-red-400",children:m}),a.jsx("button",{onClick:u,className:"ml-auto text-red-400 hover:text-red-300 underline",children:"Retry"})]})}),0!==b.length||i||m?a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:b.map(e=>a.jsxs(_,{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:d.includes(e.id),onChange:()=>{return s=e.id,void o(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s},className:"rounded border-gray-300"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:e.title||"Untitled Vehicle"}),a.jsxs("p",{className:"text-gray-400",children:[e.make||"Unknown"," ",e.model||"Model"]})]})]}),a.jsx(D,{status:e.status})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-300",children:[a.jsx(S,{name:"map-pin",className:"h-4 w-4"}),a.jsx("span",{children:e.location||"Location not specified"})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-300",children:[a.jsx(S,{name:"dollar-sign",className:"h-4 w-4"}),a.jsxs("span",{children:["R",e.pricePerDay||0,"/day"]})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-300",children:[a.jsx(S,{name:"user",className:"h-4 w-4"}),a.jsxs("span",{children:[e.owner?.firstName||"Unknown"," ",e.owner?.lastName||"User"]})]})]}),e.images&&e.images.length>0&&a.jsx("div",{className:"mb-4",children:a.jsx("img",{src:e.images[0],alt:e.title,className:"w-full h-32 object-cover rounded-lg"})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-400",children:["Listed ",e.createdAt?new Date(e.createdAt).toLocaleDateString():"Date unknown"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:["pending"===e.status&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>g(e.id,"approved"),className:"flex items-center space-x-1 px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-white text-sm",children:[a.jsx(S,{name:"check",className:"h-3 w-3"}),a.jsx("span",{children:"Approve"})]}),a.jsxs("button",{onClick:()=>{const s=prompt("Decline reason (optional):");g(e.id,"declined",s||void 0)},className:"flex items-center space-x-1 px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-white text-sm",children:[a.jsx(S,{name:"x",className:"h-3 w-3"}),a.jsx("span",{children:"Decline"})]})]}),a.jsxs("button",{className:"flex items-center space-x-1 px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-white text-sm",children:[a.jsx(S,{name:"eye",className:"h-3 w-3"}),a.jsx("span",{children:"View"})]})]})]})]},e.id))}):a.jsxs(_,{className:"p-8 text-center",children:[a.jsx(S,{name:"Car",size:"lg",className:"text-white/50 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No vehicles found"}),a.jsx("p",{className:"text-white/70",children:"No vehicles match your current filters."})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",b.length," of ",t.length," vehicles"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{className:"px-3 py-1 bg-white/10 rounded text-white hover:bg-white/20",children:"Previous"}),a.jsx("span",{className:"px-3 py-1 bg-white/20 rounded text-white",children:"1"}),a.jsx("button",{className:"px-3 py-1 bg-white/10 rounded text-white hover:bg-white/20",children:"Next"})]})]})]})},re=()=>{const[s,t]=e.useState([]),[r,i]=e.useState(!0),[l,n]=e.useState({search:"",status:"all",startDate:"",endDate:""}),[c,d]=e.useState({page:1,limit:10,total:0});e.useEffect(()=>{o()},[l,c.page]),e.useEffect(()=>{const e=()=>{o()};return window.addEventListener("storage",e),window.addEventListener("bookingCreated",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("bookingCreated",e)}},[]);const o=async()=>{try{i(!0);try{const e=await fetch("/api/admin/bookings",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(e.ok){const s=await e.json();return t(s.bookings||[]),void d(e=>({...e,total:s.bookings?.length||0}))}}catch(e){}t([]),d(e=>({...e,total:0}))}catch(s){}finally{i(!1)}},x=async(e,s,t)=>{try{await o()}catch(a){}},h=(e,s)=>{n(t=>({...t,[e]:s}))},m=s.filter(e=>!(l.search&&!e.vehicle.make.toLowerCase().includes(l.search.toLowerCase())&&!e.vehicle.model.toLowerCase().includes(l.search.toLowerCase())&&!e.renter.name.toLowerCase().includes(l.search.toLowerCase())||"all"!==l.status&&e.status!==l.status)),p=e=>{switch(e){case"pending":return"text-yellow-400";case"confirmed":return"text-blue-400";case"active":return"text-green-400";case"completed":default:return"text-gray-400";case"cancelled":return"text-red-400"}},u=e=>{switch(e){case"paid":return"text-green-400";case"pending":return"text-yellow-400";case"refunded":return"text-blue-400";default:return"text-gray-400"}};return r?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Booking Management"}),a.jsx("p",{className:"text-gray-300",children:"Manage all bookings across the platform"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all",children:[a.jsx(S,{name:"Download",className:"h-4 w-4"}),a.jsx("span",{children:"Export"})]}),a.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-all",children:[a.jsx(S,{name:"Plus",className:"h-4 w-4"}),a.jsx("span",{children:"Add Booking"})]})]})]}),a.jsx(_,{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search"}),a.jsx("input",{type:"text",placeholder:"Search bookings...",value:l.search,onChange:e=>h("search",e.target.value),className:"glass-input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),a.jsxs("select",{value:l.status,onChange:e=>h("status",e.target.value),className:"glass-select",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"confirmed",children:"Confirmed"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),a.jsx("input",{type:"date",value:l.startDate,onChange:e=>h("startDate",e.target.value),className:"glass-input"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),a.jsx("input",{type:"date",value:l.endDate,onChange:e=>h("endDate",e.target.value),className:"glass-input"})]})]})}),a.jsxs(_,{className:"overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-white/10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-white",children:"Booking ID"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-white",children:"Vehicle"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-white",children:"Renter"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-white",children:"Host"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-white",children:"Dates"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-white",children:"Total"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-white",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-white",children:"Payment"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-white",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-white/10",children:m.map(e=>a.jsxs("tr",{className:"hover:bg-white/5",children:[a.jsxs("td",{className:"px-6 py-4 text-sm text-white",children:["#",String(e.id||"").slice(-8)]}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("img",{src:e.vehicle.images[0],alt:`${e.vehicle.make} ${e.vehicle.model}`,className:"w-10 h-10 object-cover rounded-lg"}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-white",children:[e.vehicle.make," ",e.vehicle.model]}),a.jsx("div",{className:"text-xs text-gray-400",children:e.vehicle.location})]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-xs font-medium text-white",children:e.renter.name.charAt(0)})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-white",children:e.renter.name}),a.jsx("div",{className:"text-xs text-gray-400",children:e.renter.email})]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("img",{src:e.host.avatar,alt:e.host.name,className:"w-8 h-8 rounded-full"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-white",children:e.host.name}),a.jsx("div",{className:"text-xs text-gray-400",children:e.host.email})]})]})}),a.jsxs("td",{className:"px-6 py-4 text-sm text-white",children:[a.jsx("div",{children:new Date(e.startDate).toLocaleDateString()}),a.jsxs("div",{className:"text-xs text-gray-400",children:[e.totalDays," days"]})]}),a.jsxs("td",{className:"px-6 py-4 text-sm font-medium text-white",children:["R",e.totalPrice.toLocaleString()]}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`text-sm font-medium ${p(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`text-sm font-medium ${u(e.paymentStatus)}`,children:e.paymentStatus.charAt(0).toUpperCase()+e.paymentStatus.slice(1)})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:["pending"===e.status&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>x(String(e.id)),className:"px-2 py-1 bg-green-600 hover:bg-green-700 text-white text-xs rounded transition-all",children:"Confirm"}),a.jsx("button",{onClick:()=>x(String(e.id)),className:"px-2 py-1 bg-red-600 hover:bg-red-700 text-white text-xs rounded transition-all",children:"Cancel"})]}),a.jsx("button",{className:"px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded transition-all",children:"View"})]})})]},e.id))})]})}),0===m.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(S,{name:"Calendar",className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No bookings found"}),a.jsx("p",{className:"text-gray-400",children:"Try adjusting your filters"})]})]}),m.length>0&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",(c.page-1)*c.limit+1," to ",Math.min(c.page*c.limit,c.total)," of ",c.total," bookings"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>d(e=>({...e,page:Math.max(1,e.page-1)})),disabled:1===c.page,className:"px-3 py-1 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),a.jsxs("span",{className:"px-3 py-1 text-white",children:["Page ",c.page]}),a.jsx("button",{onClick:()=>d(e=>({...e,page:e.page+1})),disabled:c.page*c.limit>=c.total,className:"px-3 py-1 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})},ie=({})=>{const[s,t]=e.useState(null),[r,i]=e.useState(!0),[l,n]=e.useState("month");e.useEffect(()=>{c()},[l]);const c=async()=>{try{i(!0);const e=await fetch(`/api/financial?dateRange=${l}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to fetch financial data");const s=await e.json();t(s)}catch(e){t(null)}finally{i(!1)}};return r?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Financial Dashboard"}),a.jsx("p",{className:"text-gray-300",children:"Platform revenue and financial overview"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("select",{value:l,onChange:e=>n(e.target.value),className:"px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"week",children:"This Week"}),a.jsx("option",{value:"month",children:"This Month"}),a.jsx("option",{value:"quarter",children:"This Quarter"}),a.jsx("option",{value:"year",children:"This Year"})]}),a.jsxs("button",{onClick:c,className:"flex items-center space-x-2 px-4 py-2 bg-white/10 backdrop-blur-md rounded-lg border border-white/20 text-white hover:bg-white/20 transition-all",children:[a.jsx(S,{name:"refresh-cw",className:"h-4 w-4"}),a.jsx("span",{children:"Refresh"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(_,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",s.totalRevenue.toLocaleString()]}),a.jsx("p",{className:"text-green-400 text-sm mt-1",children:"+12% from last month"})]}),a.jsx(S,{name:"dollar-sign",className:"h-8 w-8 text-green-400"})]})}),a.jsx(_,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Monthly Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",s.monthlyRevenue.toLocaleString()]}),a.jsx("p",{className:"text-blue-400 text-sm mt-1",children:"Current month"})]}),a.jsx(S,{name:"trending-up",className:"h-8 w-8 text-blue-400"})]})}),a.jsx(_,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Commission Earned"}),a.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",s.commissionEarned.toLocaleString()]}),a.jsx("p",{className:"text-yellow-400 text-sm mt-1",children:"15% platform fee"})]}),a.jsx(S,{name:"percent",className:"h-8 w-8 text-yellow-400"})]})}),a.jsx(_,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Pending Payouts"}),a.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",s.pendingPayouts.toLocaleString()]}),a.jsx("p",{className:"text-orange-400 text-sm mt-1",children:"Awaiting processing"})]}),a.jsx(S,{name:"clock",className:"h-8 w-8 text-orange-400"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(_,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Revenue Trend"}),a.jsx("div",{className:"space-y-4",children:s.revenueByMonth.map((e,s)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:e.month}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-32 bg-white/10 rounded-full h-2",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full",style:{width:e.revenue/2e4*100+"%"}})}),a.jsxs("span",{className:"text-white font-medium",children:["R",e.revenue.toLocaleString()]})]})]},s))})]}),a.jsxs(_,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Earners"}),a.jsx("div",{className:"space-y-3",children:s.topEarners.map((e,s)=>a.jsxs("div",{className:"flex items-center justify-between bg-white/5 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium text-sm",children:s+1})}),a.jsx("span",{className:"text-white font-medium",children:e.name})]}),a.jsxs("span",{className:"text-green-400 font-semibold",children:["R",e.earnings.toLocaleString()]})]},s))})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs(_,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Transaction Summary"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"Completed Transactions"}),a.jsx("span",{className:"text-white font-semibold",children:s.completedTransactions})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"Refunded Amount"}),a.jsxs("span",{className:"text-red-400 font-semibold",children:["R",s.refundedAmount.toLocaleString()]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"Success Rate"}),a.jsx("span",{className:"text-green-400 font-semibold",children:"98.5%"})]})]})]}),a.jsxs(_,{className:"p-6 lg:col-span-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Transactions"}),a.jsx("div",{className:"space-y-3",children:s.recentTransactions.map(e=>a.jsxs("div",{className:"flex items-center justify-between bg-white/5 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+("booking"===e.type?"bg-green-500/20":"commission"===e.type?"bg-blue-500/20":"bg-red-500/20"),children:a.jsx(S,{name:"booking"===e.type?"car":"commission"===e.type?"percent":"refresh-cw",className:"h-4 w-4 "+("booking"===e.type?"text-green-400":"commission"===e.type?"text-blue-400":"text-red-400")})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:e.description}),a.jsx("p",{className:"text-gray-400 text-sm",children:e.date})]})]}),a.jsxs("span",{className:"font-semibold "+(e.amount>0?"text-green-400":"text-red-400"),children:[e.amount>0?"+":"","R",e.amount.toLocaleString()]})]},e.id))})]})]}),a.jsxs(_,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Financial Actions"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("button",{className:"flex items-center space-x-2 p-4 bg-white/10 rounded-lg hover:bg-white/20 transition-all",children:[a.jsx(S,{name:"download",className:"h-5 w-5 text-blue-400"}),a.jsx("span",{className:"text-white",children:"Export Report"})]}),a.jsxs("button",{className:"flex items-center space-x-2 p-4 bg-white/10 rounded-lg hover:bg-white/20 transition-all",children:[a.jsx(S,{name:"credit-card",className:"h-5 w-5 text-green-400"}),a.jsx("span",{className:"text-white",children:"Process Payouts"})]}),a.jsxs("button",{className:"flex items-center space-x-2 p-4 bg-white/10 rounded-lg hover:bg-white/20 transition-all",children:[a.jsx(S,{name:"settings",className:"h-5 w-5 text-yellow-400"}),a.jsx("span",{className:"text-white",children:"Commission Settings"})]}),a.jsxs("button",{className:"flex items-center space-x-2 p-4 bg-white/10 rounded-lg hover:bg-white/20 transition-all",children:[a.jsx(S,{name:"alert-triangle",className:"h-5 w-5 text-red-400"}),a.jsx("span",{className:"text-white",children:"Handle Disputes"})]})]})]})]}):a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-300",children:"No financial data available"})})},le=({onRefresh:s})=>{const[t,r]=e.useState([]),[i,l]=e.useState([]),[n,c]=e.useState(!0),[d,o]=e.useState("reviews"),[x,h]=e.useState({status:"all",search:""});e.useEffect(()=>{m()},[x,d]);const m=async()=>{try{c(!0);const e=[{id:1,type:"inappropriate_content",description:"This review contains offensive language and personal attacks.",reporter:{name:"Alice Brown",email:"alice@example.com"},reportedItem:{type:"review",id:2,title:"Review #2"},status:"pending",createdAt:"2024-01-15"},{id:2,type:"fake_review",description:"This appears to be a fake review written by the listing owner.",reporter:{name:"Charlie Davis",email:"charlie@example.com"},reportedItem:{type:"review",id:3,title:"Review #3"},status:"pending",createdAt:"2024-01-14"}];r([{id:1,rating:5,comment:"Excellent service! The car was clean and the owner was very helpful.",reviewer:{name:"John Doe",email:"john@example.com"},reviewee:{name:"Jane Smith",email:"jane@example.com"},status:"approved",createdAt:"2024-01-15"},{id:2,rating:1,comment:"Terrible experience. Car was dirty and had mechanical issues.",reviewer:{name:"Bob Wilson",email:"bob@example.com"},reviewee:{name:"Mike Johnson",email:"mike@example.com"},status:"flagged",reportedBy:["user1","user2"],createdAt:"2024-01-14"}]),l(e)}catch(e){}finally{c(!1)}},p=async(e,t)=>{try{await m(),s()}catch(a){}},u=async(e,t)=>{try{await m(),s()}catch(a){}},g=t.filter(e=>{if(x.search){const s=x.search.toLowerCase();return e.comment.toLowerCase().includes(s)||e.reviewer.name.toLowerCase().includes(s)||e.reviewee.name.toLowerCase().includes(s)}return"all"===x.status||e.status===x.status}),j=i.filter(e=>{if(x.search){const s=x.search.toLowerCase();return e.description.toLowerCase().includes(s)||e.reporter.name.toLowerCase().includes(s)||e.reportedItem.title.toLowerCase().includes(s)}return"all"===x.status||e.status===x.status});return n?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Content Moderation"}),a.jsx("p",{className:"text-gray-300",children:"Manage reviews, reports, and content safety"})]})}),a.jsx("div",{className:"flex space-x-1 bg-white/10 backdrop-blur-md rounded-lg p-1 border border-white/20",children:[{id:"reviews",label:"Reviews",icon:"star",count:t.length},{id:"reports",label:"Reports",icon:"flag",count:i.length}].map(e=>a.jsxs("button",{onClick:()=>o(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-md transition-all "+(d===e.id?"bg-white/20 text-white":"text-gray-300 hover:text-white hover:bg-white/10"),children:[a.jsx(S,{name:e.icon,className:"h-4 w-4"}),a.jsx("span",{children:e.label}),a.jsx("span",{className:"bg-white/20 px-2 py-1 rounded-full text-xs",children:e.count})]},e.id))}),a.jsx(_,{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search"}),a.jsx("input",{type:"text",placeholder:"Search content...",value:x.search,onChange:e=>h(s=>({...s,search:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),a.jsxs("select",{value:x.status,onChange:e=>h(s=>({...s,status:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"flagged",children:"Flagged"}),a.jsx("option",{value:"resolved",children:"Resolved"}),a.jsx("option",{value:"dismissed",children:"Dismissed"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white transition-all",children:[a.jsx(S,{name:"search",className:"h-4 w-4"}),a.jsx("span",{children:"Filter"})]})})]})}),"reviews"===d&&a.jsx("div",{className:"space-y-4",children:g.map(e=>a.jsxs(_,{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"flex items-center space-x-1",children:[...Array(5)].map((s,t)=>a.jsx(S,{name:"star",className:"h-4 w-4 "+(t<e.rating?"text-yellow-400":"text-gray-400")},t))}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-white font-medium",children:[e.reviewer.name," → ",e.reviewee.name]}),a.jsx("p",{className:"text-gray-400 text-sm",children:e.createdAt})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(D,{status:e.status}),e.reportedBy&&e.reportedBy.length>0&&a.jsxs("span",{className:"bg-red-500/20 text-red-400 px-2 py-1 rounded-full text-xs",children:[e.reportedBy.length," reports"]})]})]}),a.jsx("p",{className:"text-gray-300 mb-4",children:e.comment}),a.jsxs("div",{className:"flex items-center space-x-2",children:["pending"===e.status&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>p(e.id),className:"flex items-center space-x-1 px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-white text-sm",children:[a.jsx(S,{name:"check",className:"h-3 w-3"}),a.jsx("span",{children:"Approve"})]}),a.jsxs("button",{onClick:()=>p(e.id),className:"flex items-center space-x-1 px-3 py-1 bg-yellow-600 hover:bg-yellow-700 rounded text-white text-sm",children:[a.jsx(S,{name:"flag",className:"h-3 w-3"}),a.jsx("span",{children:"Flag"})]})]}),a.jsxs("button",{onClick:()=>p(e.id),className:"flex items-center space-x-1 px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-white text-sm",children:[a.jsx(S,{name:"trash",className:"h-3 w-3"}),a.jsx("span",{children:"Remove"})]}),a.jsxs("button",{className:"flex items-center space-x-1 px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-white text-sm",children:[a.jsx(S,{name:"eye",className:"h-3 w-3"}),a.jsx("span",{children:"View Details"})]})]})]},e.id))}),"reports"===d&&a.jsx("div",{className:"space-y-4",children:j.map(e=>a.jsxs(_,{className:"p-6",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("inappropriate_content"===e.type?"bg-red-500/20 text-red-400":"spam"===e.type?"bg-yellow-500/20 text-yellow-400":"harassment"===e.type?"bg-orange-500/20 text-orange-400":"fake_review"===e.type?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-400"),children:e.type.replace("_"," ")}),a.jsx(D,{status:e.status})]}),a.jsx("p",{className:"text-white font-medium",children:e.reportedItem.title}),a.jsxs("p",{className:"text-gray-400 text-sm",children:["Reported by ",e.reporter.name," on ",e.createdAt]})]})}),a.jsx("p",{className:"text-gray-300 mb-4",children:e.description}),a.jsxs("div",{className:"flex items-center space-x-2",children:["pending"===e.status&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>u(e.id),className:"flex items-center space-x-1 px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-white text-sm",children:[a.jsx(S,{name:"check",className:"h-3 w-3"}),a.jsx("span",{children:"Resolve"})]}),a.jsxs("button",{onClick:()=>u(e.id),className:"flex items-center space-x-1 px-3 py-1 bg-gray-600 hover:bg-gray-700 rounded text-white text-sm",children:[a.jsx(S,{name:"x",className:"h-3 w-3"}),a.jsx("span",{children:"Dismiss"})]})]}),a.jsxs("button",{className:"flex items-center space-x-1 px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-white text-sm",children:[a.jsx(S,{name:"eye",className:"h-3 w-3"}),a.jsx("span",{children:"View Details"})]})]})]},e.id))}),a.jsxs(_,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Safety Statistics"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:t.length}),a.jsx("div",{className:"text-gray-400 text-sm",children:"Total Reviews"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-red-400",children:t.filter(e=>"flagged"===e.status).length}),a.jsx("div",{className:"text-gray-400 text-sm",children:"Flagged Reviews"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:i.filter(e=>"pending"===e.status).length}),a.jsx("div",{className:"text-gray-400 text-sm",children:"Pending Reports"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-400",children:i.filter(e=>"resolved"===e.status).length}),a.jsx("div",{className:"text-gray-400 text-sm",children:"Resolved Reports"})]})]})]})]})},ne=({})=>{const[s,t]=e.useState(null),[r,i]=e.useState(!0),[l,n]=e.useState("6months"),[c,d]=e.useState("users");e.useEffect(()=>{o()},[l]);const o=async()=>{try{i(!0);const e=await fetch(`/api/analytics?dateRange=${l}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to fetch analytics data");const s=await e.json();t(s)}catch(e){t(null)}finally{i(!1)}};return r?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Analytics & Reporting"}),a.jsx("p",{className:"text-gray-300",children:"Platform performance and user insights"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("select",{value:l,onChange:e=>n(e.target.value),className:"px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"1month",children:"Last Month"}),a.jsx("option",{value:"3months",children:"Last 3 Months"}),a.jsx("option",{value:"6months",children:"Last 6 Months"}),a.jsx("option",{value:"1year",children:"Last Year"})]}),a.jsxs("button",{onClick:o,className:"flex items-center space-x-2 px-4 py-2 bg-white/10 backdrop-blur-md rounded-lg border border-white/20 text-white hover:bg-white/20 transition-all",children:[a.jsx(S,{name:"refresh-cw",className:"h-4 w-4"}),a.jsx("span",{children:"Refresh"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(_,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:s.userGrowth[s.userGrowth.length-1].users.toLocaleString()}),a.jsxs("p",{className:"text-green-400 text-sm mt-1",children:["+",s.userGrowth[s.userGrowth.length-1].growth,"% this month"]})]}),a.jsx(S,{name:"users",className:"h-8 w-8 text-blue-400"})]})}),a.jsx(_,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Monthly Bookings"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:s.bookingTrends[s.bookingTrends.length-1].bookings}),a.jsxs("p",{className:"text-purple-400 text-sm mt-1",children:["R",s.bookingTrends[s.bookingTrends.length-1].revenue.toLocaleString()," revenue"]})]}),a.jsx(S,{name:"calendar",className:"h-8 w-8 text-purple-400"})]})}),a.jsx(_,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Active Vehicles"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:s.vehicleStats.active}),a.jsxs("p",{className:"text-yellow-400 text-sm mt-1",children:[s.vehicleStats.pending," pending approval"]})]}),a.jsx(S,{name:"car",className:"h-8 w-8 text-green-400"})]})}),a.jsx(_,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Customer Satisfaction"}),a.jsxs("p",{className:"text-2xl font-bold text-white",children:[s.platformMetrics.customerSatisfaction,"/5"]}),a.jsxs("p",{className:"text-green-400 text-sm mt-1",children:[s.platformMetrics.userRetentionRate,"% retention rate"]})]}),a.jsx(S,{name:"star",className:"h-8 w-8 text-yellow-400"})]})})]}),a.jsx("div",{className:"flex space-x-1 bg-white/10 backdrop-blur-md rounded-lg p-1 border border-white/20",children:[{id:"users",label:"User Growth",icon:"users"},{id:"bookings",label:"Booking Trends",icon:"calendar"},{id:"vehicles",label:"Vehicle Stats",icon:"car"},{id:"locations",label:"Top Locations",icon:"map-pin"}].map(e=>a.jsxs("button",{onClick:()=>d(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-md transition-all "+(c===e.id?"bg-white/20 text-white":"text-gray-300 hover:text-white hover:bg-white/10"),children:[a.jsx(S,{name:e.icon,className:"h-4 w-4"}),a.jsx("span",{children:e.label})]},e.id))}),"users"===c&&a.jsxs(_,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"User Growth"}),a.jsx("div",{className:"space-y-4",children:s.userGrowth.map((e,s)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300 w-16",children:e.month}),a.jsx("div",{className:"flex-1 mx-4",children:a.jsx("div",{className:"w-full bg-white/10 rounded-full h-3",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-3 rounded-full",style:{width:e.users/3e3*100+"%"}})})}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"text-white font-medium",children:e.users.toLocaleString()}),a.jsxs("span",{className:"text-green-400 text-sm ml-2",children:["+",e.growth,"%"]})]})]},s))})]}),"bookings"===c&&a.jsxs(_,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Booking Trends"}),a.jsx("div",{className:"space-y-4",children:s.bookingTrends.map((e,s)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300 w-16",children:e.month}),a.jsx("div",{className:"flex-1 mx-4",children:a.jsx("div",{className:"w-full bg-white/10 rounded-full h-3",children:a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-600 h-3 rounded-full",style:{width:e.bookings/1e3*100+"%"}})})}),a.jsxs("div",{className:"text-right",children:[a.jsxs("span",{className:"text-white font-medium",children:[e.bookings," bookings"]}),a.jsxs("span",{className:"text-green-400 text-sm ml-2",children:["R",e.revenue.toLocaleString()]})]})]},s))})]}),"vehicles"===c&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(_,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Vehicle Overview"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"Total Vehicles"}),a.jsx("span",{className:"text-white font-semibold",children:s.vehicleStats.total})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"Active"}),a.jsx("span",{className:"text-green-400 font-semibold",children:s.vehicleStats.active})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"Pending Approval"}),a.jsx("span",{className:"text-yellow-400 font-semibold",children:s.vehicleStats.pending})]})]})]}),a.jsxs(_,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Popular Vehicle Types"}),a.jsx("div",{className:"space-y-3",children:s.vehicleStats.topTypes.map((e,s)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:e.type}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-20 bg-white/10 rounded-full h-2",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full",style:{width:e.count/500*100+"%"}})}),a.jsx("span",{className:"text-white font-medium",children:e.count})]})]},s))})]})]}),"locations"===c&&a.jsxs(_,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Locations"}),a.jsx("div",{className:"space-y-4",children:s.topLocations.map((e,s)=>a.jsxs("div",{className:"flex items-center justify-between bg-white/5 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium text-sm",children:s+1})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:e.location}),a.jsxs("p",{className:"text-gray-400 text-sm",children:[e.bookings," bookings"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-white font-semibold",children:["R",e.revenue.toLocaleString()]}),a.jsx("p",{className:"text-gray-400 text-sm",children:"revenue"})]})]},s))})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(_,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Platform Performance"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"Average Booking Value"}),a.jsxs("span",{className:"text-white font-semibold",children:["R",s.platformMetrics.averageBookingValue]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"User Retention Rate"}),a.jsxs("span",{className:"text-green-400 font-semibold",children:[s.platformMetrics.userRetentionRate,"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"Conversion Rate"}),a.jsxs("span",{className:"text-blue-400 font-semibold",children:[s.platformMetrics.conversionRate,"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"Customer Satisfaction"}),a.jsxs("span",{className:"text-yellow-400 font-semibold",children:[s.platformMetrics.customerSatisfaction,"/5"]})]})]})]}),a.jsxs(_,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"System Performance"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"Uptime"}),a.jsxs("span",{className:"text-green-400 font-semibold",children:[s.systemPerformance.uptime,"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"Response Time"}),a.jsxs("span",{className:"text-blue-400 font-semibold",children:[s.systemPerformance.responseTime,"ms"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"Error Rate"}),a.jsxs("span",{className:"text-red-400 font-semibold",children:[s.systemPerformance.errorRate,"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300",children:"Active Users"}),a.jsx("span",{className:"text-purple-400 font-semibold",children:s.systemPerformance.activeUsers})]})]})]})]}),a.jsxs(_,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Export Reports"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("button",{className:"flex items-center space-x-2 p-4 bg-white/10 rounded-lg hover:bg-white/20 transition-all",children:[a.jsx(S,{name:"download",className:"h-5 w-5 text-blue-400"}),a.jsx("span",{className:"text-white",children:"User Report"})]}),a.jsxs("button",{className:"flex items-center space-x-2 p-4 bg-white/10 rounded-lg hover:bg-white/20 transition-all",children:[a.jsx(S,{name:"download",className:"h-5 w-5 text-green-400"}),a.jsx("span",{className:"text-white",children:"Booking Report"})]}),a.jsxs("button",{className:"flex items-center space-x-2 p-4 bg-white/10 rounded-lg hover:bg-white/20 transition-all",children:[a.jsx(S,{name:"download",className:"h-5 w-5 text-purple-400"}),a.jsx("span",{className:"text-white",children:"Revenue Report"})]}),a.jsxs("button",{className:"flex items-center space-x-2 p-4 bg-white/10 rounded-lg hover:bg-white/20 transition-all",children:[a.jsx(S,{name:"download",className:"h-5 w-5 text-yellow-400"}),a.jsx("span",{className:"text-white",children:"Performance Report"})]})]})]})]}):a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-300",children:"No analytics data available"})})},ce=({onRefresh:s})=>{const[t,r]=e.useState([]),[i,l]=e.useState({pending:0,approved:0,rejected:0,expiring:0}),[n,c]=e.useState(!0),[d,o]=e.useState({status:"all",documentType:"all",search:""}),[x,h]=e.useState([]),[m,p]=e.useState(!1);e.useEffect(()=>{u()},[d]);const u=async()=>{try{c(!0);try{const e=await fetch("/api/admin/documents",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to fetch documents");{const s=await e.json();if(!s.success)throw new Error(s.error||"Failed to fetch documents");r(s.data.documents||[]),l({pending:s.data.documents?.filter(e=>"pending"===e.status).length||0,approved:s.data.documents?.filter(e=>"approved"===e.status).length||0,rejected:s.data.documents?.filter(e=>"rejected"===e.status).length||0,expiring:0})}}catch(e){r([]),l({pending:0,approved:0,rejected:0,expiring:0})}}catch(s){}finally{c(!1)}},g=async(e,t,a)=>{try{if(c(!0),!(await fetch(`/api/admin/documents/${e}/status`,{method:"PATCH",headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"},body:JSON.stringify({status:t,reason:a})})).ok)throw new Error("Failed to update document status");await u(),s()}catch(r){}finally{c(!1)}},j=async e=>{try{c(!0);const s=x.map(s=>g(s,e));await Promise.all(s),h([]),p(!1)}catch(s){}finally{c(!1)}},b=t.filter(e=>{if(d.search){const s=d.search.toLowerCase();return e.user.firstName.toLowerCase().includes(s)||e.user.lastName.toLowerCase().includes(s)||e.user.email.toLowerCase().includes(s)||e.fileName.toLowerCase().includes(s)}return"all"!==d.status?e.status===d.status:"all"===d.documentType||e.documentType===d.documentType});return n?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Document Management"}),a.jsx("p",{className:"text-gray-300",children:"Review and approve user documents"})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("button",{onClick:()=>p(!m),className:"flex items-center space-x-2 px-4 py-2 bg-white/10 backdrop-blur-md rounded-lg border border-white/20 text-white hover:bg-white/20 transition-all",children:[a.jsx(S,{name:"check-square",className:"h-4 w-4"}),a.jsx("span",{children:"Bulk Actions"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx(_,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Pending Review"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:i.pending})]}),a.jsx(S,{name:"clock",className:"h-8 w-8 text-yellow-400"})]})}),a.jsx(_,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Approved"}),a.jsx("p",{className:"text-2xl font-bold text-green-400",children:i.approved})]}),a.jsx(S,{name:"check-circle",className:"h-8 w-8 text-green-400"})]})}),a.jsx(_,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Rejected"}),a.jsx("p",{className:"text-2xl font-bold text-red-400",children:i.rejected})]}),a.jsx(S,{name:"x-circle",className:"h-8 w-8 text-red-400"})]})}),a.jsx(_,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Expiring Soon"}),a.jsx("p",{className:"text-2xl font-bold text-orange-400",children:i.expiring})]}),a.jsx(S,{name:"alert-triangle",className:"h-8 w-8 text-orange-400"})]})})]}),a.jsx(_,{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search"}),a.jsx("input",{type:"text",placeholder:"Search documents...",value:d.search,onChange:e=>o(s=>({...s,search:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),a.jsxs("select",{value:d.status,onChange:e=>o(s=>({...s,status:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"rejected",children:"Rejected"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Document Type"}),a.jsxs("select",{value:d.documentType,onChange:e=>o(s=>({...s,documentType:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"license",children:"Driver's License"}),a.jsx("option",{value:"id",children:"ID Document"}),a.jsx("option",{value:"insurance",children:"Insurance"}),a.jsx("option",{value:"registration",children:"Registration"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("button",{onClick:u,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white transition-all",children:[a.jsx(S,{name:"search",className:"h-4 w-4"}),a.jsx("span",{children:"Filter"})]})})]})}),m&&x.length>0&&a.jsx(_,{className:"p-4 bg-yellow-500/10 border-yellow-500/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-yellow-400",children:[x.length," document(s) selected"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:()=>j("approve"),className:"flex items-center space-x-2 px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-white text-sm",children:[a.jsx(S,{name:"check",className:"h-4 w-4"}),a.jsx("span",{children:"Approve All"})]}),a.jsxs("button",{onClick:()=>j("reject"),className:"flex items-center space-x-2 px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-white text-sm",children:[a.jsx(S,{name:"x",className:"h-4 w-4"}),a.jsx("span",{children:"Reject All"})]}),a.jsx("button",{onClick:()=>{h([]),p(!1)},className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 rounded text-white text-sm",children:"Cancel"})]})]})}),a.jsx("div",{className:"space-y-4",children:b.map(e=>a.jsxs(_,{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:x.includes(e.id),onChange:()=>{return s=e.id,void h(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s},className:"rounded border-gray-300"}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-white",children:[e.user.firstName," ",e.user.lastName]}),a.jsx("p",{className:"text-gray-400",children:e.user.email})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("license"===e.documentType?"bg-blue-500/20 text-blue-400":"id"===e.documentType?"bg-green-500/20 text-green-400":"insurance"===e.documentType?"bg-purple-500/20 text-purple-400":"registration"===e.documentType?"bg-orange-500/20 text-orange-400":"bg-gray-500/20 text-gray-400"),children:e.documentType.replace("_"," ")}),a.jsx(D,{status:e.status})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"File Name"}),a.jsx("p",{className:"text-white font-medium",children:e.fileName})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Uploaded"}),a.jsx("p",{className:"text-white",children:new Date(e.uploadedAt).toLocaleDateString()})]}),e.expiryDate&&a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Expiry Date"}),a.jsx("p",{className:"text-white",children:new Date(e.expiryDate).toLocaleDateString()})]}),e.reviewedBy&&a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Reviewed By"}),a.jsx("p",{className:"text-white",children:e.reviewedBy})]})]}),e.rejectionReason&&a.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:a.jsxs("p",{className:"text-red-400 text-sm",children:[a.jsx("strong",{children:"Rejection Reason:"})," ",e.rejectionReason]})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{className:"flex items-center space-x-1 px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-white text-sm",children:[a.jsx(S,{name:"eye",className:"h-3 w-3"}),a.jsx("span",{children:"View Document"})]}),a.jsxs("button",{className:"flex items-center space-x-1 px-3 py-1 bg-gray-600 hover:bg-gray-700 rounded text-white text-sm",children:[a.jsx(S,{name:"download",className:"h-3 w-3"}),a.jsx("span",{children:"Download"})]})]}),"pending"===e.status&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:()=>g(e.id,"approve"),className:"flex items-center space-x-1 px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-white text-sm",children:[a.jsx(S,{name:"check",className:"h-3 w-3"}),a.jsx("span",{children:"Approve"})]}),a.jsxs("button",{onClick:()=>{const s=prompt("Rejection reason:");s&&g(e.id,"reject",s)},className:"flex items-center space-x-1 px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-white text-sm",children:[a.jsx(S,{name:"x",className:"h-3 w-3"}),a.jsx("span",{children:"Reject"})]})]})]})]},e.id))}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-400",children:["Showing ",b.length," of ",t.length," documents"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{className:"px-3 py-1 bg-white/10 rounded text-white hover:bg-white/20",children:"Previous"}),a.jsx("span",{className:"px-3 py-1 bg-white/20 rounded text-white",children:"1"}),a.jsx("button",{className:"px-3 py-1 bg-white/10 rounded text-white hover:bg-white/20",children:"Next"})]})]})]})},de=({className:s=""})=>{const[t,r]=e.useState([]),[i,l]=e.useState(!0),[n,c]=e.useState(null),[d,o]=e.useState(null),[x,h]=e.useState(!1),[m,p]=e.useState(null),[u,g]=e.useState(""),[j,b]=e.useState(!1);e.useEffect(()=>{v()},[]);const v=async()=>{try{l(!0);const e=await fetch("/api/admin/vehicles/pending",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(e.ok){const s=await e.json();s.success?r(s.vehicles||[]):c(s.error||"Failed to fetch pending vehicles")}else c("Failed to fetch pending vehicles")}catch(e){c("Failed to fetch pending vehicles")}finally{l(!1)}},w=(e,s)=>{o(e),p(s),h(!0),g("")};return i?a.jsx(_,{title:"Vehicle Approvals",icon:"Car",className:s,children:a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):n?a.jsx(_,{title:"Vehicle Approvals",icon:"Car",className:s,children:a.jsxs("div",{className:"text-center py-8",children:[a.jsx(S,{name:"AlertCircle",size:"lg",className:"text-red-400 mx-auto mb-4"}),a.jsx("p",{className:"text-red-200 mb-4",children:n}),a.jsx(ee,{onClick:v,variant:"outline",children:"Try Again"})]})}):a.jsxs(a.Fragment,{children:[a.jsx(_,{title:"Vehicle Approvals",icon:"Car",className:s,children:a.jsx("div",{className:"space-y-4",children:0===t.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(S,{name:"CheckCircle",size:"lg",className:"text-green-400 mx-auto mb-4"}),a.jsx("p",{className:"text-white/70",children:"No pending vehicle approvals"}),a.jsx("p",{className:"text-white/50 text-sm",children:"All vehicles have been reviewed"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-white/70 text-sm",children:[t.length," vehicle",1!==t.length?"s":""," awaiting approval"]}),a.jsx("div",{className:"space-y-3",children:t.map(e=>a.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gray-700 rounded-lg overflow-hidden flex-shrink-0",children:e.images?.[0]?a.jsx("img",{src:e.images[0],alt:e.title,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(S,{name:"Car",size:"lg",className:"text-white/50"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-semibold truncate",children:e.title}),a.jsxs("p",{className:"text-white/70 text-sm",children:[e.make," ",e.model," (",e.year,")"]}),a.jsxs("p",{className:"text-white/60 text-sm",children:["R",e.price_per_day,"/day • ",e.location.city]})]}),a.jsx("span",{className:"px-2 py-1 bg-yellow-500/20 text-yellow-200 rounded text-xs",children:"Pending"})]}),a.jsxs("div",{className:"mt-2 text-sm text-white/60",children:[a.jsxs("p",{children:["Host: ",e.host.first_name," ",e.host.last_name]}),a.jsxs("p",{children:["Email: ",e.host.email]}),a.jsxs("p",{children:["Listed: ",new Date(e.created_at).toLocaleDateString()]})]})]})]}),a.jsxs("div",{className:"flex space-x-2 mt-4",children:[a.jsx(ee,{onClick:()=>w(e,"approve"),className:"flex-1 bg-green-500/20 text-green-200 hover:bg-green-500/30",icon:"CheckCircle",children:"Approve"}),a.jsx(ee,{onClick:()=>w(e,"reject"),className:"flex-1 bg-red-500/20 text-red-200 hover:bg-red-500/30",icon:"XCircle",children:"Reject"})]})]},e.id))})]})})}),x&&d&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-6 max-w-md w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"approve"===m?"Approve Vehicle":"Reject Vehicle"}),a.jsx("button",{onClick:()=>h(!1),className:"text-white/70 hover:text-white",children:a.jsx(S,{name:"X",size:"sm"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-3 bg-white/5 rounded-lg",children:[a.jsx("p",{className:"text-white font-medium",children:d.title}),a.jsxs("p",{className:"text-white/70 text-sm",children:[d.make," ",d.model," (",d.year,")"]}),a.jsxs("p",{className:"text-white/60 text-sm",children:["R",d.price_per_day,"/day"]})]}),"reject"===m&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Reason for rejection (required)"}),a.jsx("textarea",{value:u,onChange:e=>g(e.target.value),placeholder:"Please provide a reason for rejection...",className:"w-full p-3 bg-white/5 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),"approve"===m&&a.jsx("p",{className:"text-white/70 text-sm",children:"This vehicle will become visible to renters and the host will be notified."}),n&&a.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/30 rounded-lg",children:a.jsx("p",{className:"text-red-200 text-sm",children:n})}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx(ee,{onClick:()=>h(!1),variant:"outline",className:"flex-1",disabled:j,children:"Cancel"}),a.jsx(ee,{onClick:()=>{d&&m&&("reject"!==m||u.trim()?(async(e,s,t)=>{try{b(!0);const a=await fetch(`/api/admin/vehicles/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({status:"approve"===s?"approved":"rejected",reason:"reject"===s?t:void 0})});if(a.ok){const s=await a.json();s.success?(r(s=>s.filter(s=>s.id!==e)),h(!1),o(null),p(null),g("")):c(s.error||"Failed to update vehicle status")}else c("Failed to update vehicle status")}catch(a){c("Failed to update vehicle status")}finally{b(!1)}})(d.id,m,u):c("Please provide a reason for rejection"))},className:"flex-1 "+("approve"===m?"bg-green-500/20 text-green-200 hover:bg-green-500/30":"bg-red-500/20 text-red-200 hover:bg-red-500/30"),disabled:j,children:j?"Processing...":"approve"===m?"Approve":"Reject"})]})]})]})})]})},oe=({stats:e})=>{const t=s();return e?a.jsxs("div",{className:"space-y-6 lg:space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[a.jsx(_,{className:"p-4 lg:p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-gray-300 text-xs lg:text-sm",children:"Total Users"}),a.jsx("p",{className:"text-xl lg:text-2xl font-bold text-white",children:e.overview.totalUsers}),a.jsxs("p",{className:"text-red-400 text-xs lg:text-sm mt-1",children:[e.overview.pendingUsers," pending approval"]})]}),a.jsx(S,{name:"users",className:"h-6 w-6 lg:h-8 lg:w-8 text-blue-400 flex-shrink-0"})]})}),a.jsx(_,{className:"p-4 lg:p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-gray-300 text-xs lg:text-sm",children:"Total Vehicles"}),a.jsx("p",{className:"text-xl lg:text-2xl font-bold text-white",children:e.overview.totalVehicles}),a.jsxs("p",{className:"text-red-400 text-xs lg:text-sm mt-1",children:[e.overview.pendingVehicles," pending approval"]})]}),a.jsx(S,{name:"car",className:"h-6 w-6 lg:h-8 lg:w-8 text-green-400 flex-shrink-0"})]})}),a.jsx(_,{className:"p-4 lg:p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-gray-300 text-xs lg:text-sm",children:"Total Bookings"}),a.jsx("p",{className:"text-xl lg:text-2xl font-bold text-white",children:e.overview.totalBookings}),a.jsxs("p",{className:"text-yellow-400 text-xs lg:text-sm mt-1",children:[e.overview.pendingBookings," pending"]})]}),a.jsx(S,{name:"calendar",className:"h-6 w-6 lg:h-8 lg:w-8 text-purple-400 flex-shrink-0"})]})}),a.jsx(_,{className:"p-4 lg:p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-gray-300 text-xs lg:text-sm",children:"Total Revenue"}),a.jsxs("p",{className:"text-xl lg:text-2xl font-bold text-white",children:["R",e.overview.totalRevenue.toLocaleString()]}),a.jsx("p",{className:"text-green-400 text-xs lg:text-sm mt-1",children:"+12% from last month"})]}),a.jsx(S,{name:"dollar-sign",className:"h-6 w-6 lg:h-8 lg:w-8 text-yellow-400 flex-shrink-0"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(se,{})}),a.jsx("div",{className:"lg:col-span-1",children:a.jsxs(_,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"System Health"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300 text-sm",children:"Server Status"}),a.jsxs("span",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-green-400 text-sm font-medium",children:"Online"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300 text-sm",children:"Database"}),a.jsxs("span",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-green-400 text-sm font-medium",children:"Connected"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-300 text-sm",children:"API Status"}),a.jsxs("span",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),a.jsx("span",{className:"text-green-400 text-sm font-medium",children:"Healthy"})]})]})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(_,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent User Registrations"}),a.jsx("div",{className:"space-y-3",children:e.recentActivity.recentUsers.length>0?e.recentActivity.recentUsers.slice(0,5).map(e=>a.jsxs("div",{className:"flex items-center justify-between bg-white/5 rounded-lg p-3",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-white font-medium",children:[e.firstName," ",e.lastName]}),a.jsx("p",{className:"text-gray-400 text-sm",children:e.email})]}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("pending"===e.approvalStatus?"bg-yellow-500/20 text-yellow-400":"approved"===e.approvalStatus?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:e.approvalStatus})]},e.id)):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-gray-400",children:"No recent user registrations"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Data will appear here when users register"})]})})]}),a.jsxs(_,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Vehicle Listings"}),a.jsx("div",{className:"space-y-3",children:e.recentActivity.recentVehicles.length>0?e.recentActivity.recentVehicles.slice(0,5).map(e=>a.jsxs("div",{className:"flex items-center justify-between bg-white/5 rounded-lg p-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:e.title}),a.jsxs("p",{className:"text-gray-400 text-sm",children:[e.make," ",e.model]})]}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("pending"===e.status?"bg-yellow-500/20 text-yellow-400":"approved"===e.status?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:e.status})]},e.id)):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-gray-400",children:"No recent vehicle listings"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Data will appear here when hosts list vehicles"})]})})]})]}),a.jsxs(_,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("button",{onClick:()=>t("/admin-dashboard/users"),className:"flex items-center space-x-2 p-4 bg-white/10 rounded-lg hover:bg-white/20 transition-all",children:[a.jsx(S,{name:"user-plus",className:"h-5 w-5 text-blue-400"}),a.jsx("span",{className:"text-white",children:"Approve Users"})]}),a.jsxs("button",{onClick:()=>t("/admin-dashboard/vehicle-approvals"),className:"flex items-center space-x-2 p-4 bg-white/10 rounded-lg hover:bg-white/20 transition-all",children:[a.jsx(S,{name:"car",className:"h-5 w-5 text-green-400"}),a.jsx("span",{className:"text-white",children:"Review Vehicles"})]}),a.jsxs("button",{onClick:()=>t("/admin-dashboard/bookings"),className:"flex items-center space-x-2 p-4 bg-white/10 rounded-lg hover:bg-white/20 transition-all",children:[a.jsx(S,{name:"alert-triangle",className:"h-5 w-5 text-yellow-400"}),a.jsx("span",{className:"text-white",children:"Handle Disputes"})]}),a.jsxs("button",{onClick:()=>t("/admin-dashboard/documents"),className:"flex items-center space-x-2 p-4 bg-white/10 rounded-lg hover:bg-white/20 transition-all",children:[a.jsx(S,{name:"file-text",className:"h-5 w-5 text-purple-400"}),a.jsx("span",{className:"text-white",children:"Review Documents"})]})]})]})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-300",children:"Loading platform statistics..."}),a.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Connecting to backend services..."})]})},xe=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{user:t,logout:r}=k(),{showToast:i}=$(),l=s(),[n,c]=e.useState(null),[d,o]=e.useState(!0),[x,h]=e.useState("overview"),[m,p]=e.useState(!1),u=async()=>{try{o(!0),i("Loading admin dashboard...","info");const e=await fetch("/api/admin/dashboard-stats",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to fetch admin stats");const s=await e.json();if(!s.success)throw new Error(s.error||"Failed to fetch admin stats");{const e={overview:{totalUsers:s.stats.users.total,pendingUsers:0,totalVehicles:s.stats.vehicles.total,pendingVehicles:s.stats.vehicles.pending,totalBookings:s.stats.bookings.total,pendingBookings:0,totalRevenue:s.stats.revenue.total},recentActivity:{recentUsers:[],recentVehicles:[]}};c(e)}}catch(e){c(null)}finally{o(!1)}},g=()=>{u()},j=async()=>{try{await r()}catch(e){}},N=[{id:"overview",label:"Overview",icon:"bar-chart",path:"/admin-dashboard"},{id:"users",label:"User Management",icon:"users",path:"/admin-dashboard/users"},{id:"vehicles",label:"Vehicle Management",icon:"car",path:"/admin-dashboard/vehicles"},{id:"vehicle-approvals",label:"Vehicle Approvals",icon:"check-circle",path:"/admin-dashboard/vehicle-approvals"},{id:"bookings",label:"Booking Management",icon:"calendar",path:"/admin-dashboard/bookings"},{id:"financial",label:"Financial Dashboard",icon:"dollar-sign",path:"/admin-dashboard/financial"},{id:"content",label:"Content Moderation",icon:"shield",path:"/admin-dashboard/content"},{id:"analytics",label:"Analytics & Reports",icon:"trending-up",path:"/admin-dashboard/analytics"},{id:"system",label:"System Admin",icon:"settings",path:"/admin-dashboard/system"},{id:"documents",label:"Document Management",icon:"file-text",path:"/admin-dashboard/documents"}];return e.useEffect(()=>{if(!t||"admin"!==t.role)return void l("/");u();const e=setInterval(u,3e4);return()=>clearInterval(e)},[t,l]),d||!t?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:"Loading Admin Dashboard..."})]})}):a.jsx("div",{className:"min-h-screen",children:a.jsxs("div",{className:"flex",children:[a.jsx("button",{onClick:()=>p(!m),className:"lg:hidden fixed top-4 left-4 z-50 p-3 bg-white/20 backdrop-blur-md rounded-lg border border-white/30 text-white hover:bg-white/30 transition-all",children:a.jsx(S,{name:m?"X":"Menu",className:"h-5 w-5"})}),m&&a.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:()=>p(!1)}),a.jsx("div",{className:(m?"translate-x-0":"-translate-x-full")+" lg:translate-x-0 fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white/10 backdrop-blur-md border-r border-white/20 min-h-screen transition-transform duration-300 ease-in-out",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-600/90 to-purple-600/90 backdrop-blur-sm rounded-lg p-3 shadow-xl border border-white/30",children:[a.jsx("div",{className:"text-white font-bold text-lg",children:"RideShare"}),a.jsx("div",{className:"text-white/80 text-xs",children:"South Africa"})]}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-white",children:"Admin Dashboard"}),a.jsx("p",{className:"text-white/70 text-sm",children:"RideShare SA Management"})]})]}),a.jsx("div",{className:"space-y-2 flex-1",children:N.map(e=>a.jsxs(b,{to:e.path,className:"flex items-center space-x-3 px-4 py-3 rounded-lg transition-all "+(x===e.id?"bg-white/20 text-white":"text-gray-300 hover:text-white hover:bg-white/10"),onClick:()=>{h(e.id),p(!1)},children:[a.jsx(S,{name:e.icon,className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:e.label})]},e.id))}),a.jsx("div",{className:"mt-8 pt-4 border-t border-white/20",children:a.jsxs("button",{onClick:j,className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-all text-red-400 hover:text-white hover:bg-red-600/20",children:[a.jsx(S,{name:"log-out",className:"h-5 w-5"}),a.jsx("span",{className:"font-medium",children:"Exit Admin Dashboard"})]})})]})}),a.jsx("div",{className:"flex-1 p-4 lg:p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"mb-6 lg:mb-8",children:a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-white mb-2",children:N.find(e=>e.id===x)?.label||"Admin Dashboard"}),a.jsxs("p",{className:"text-gray-300 text-sm lg:text-base",children:["Welcome back, ",t?.firstName," ",t?.lastName]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-2",children:[a.jsx(M,{userId:t?.id||"",userRole:"admin"}),a.jsxs("button",{onClick:g,disabled:d,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-white/10 backdrop-blur-md rounded-lg border border-white/20 text-white hover:bg-white/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[d?a.jsx(K,{size:"sm",text:""}):a.jsx(S,{name:"refresh-cw",className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:d?"Refreshing...":"Refresh"})]}),a.jsxs("button",{onClick:j,className:"flex items-center justify-center space-x-2 px-4 py-2 bg-red-600/80 backdrop-blur-md rounded-lg border border-red-500/30 text-white hover:bg-red-600 transition-all",children:[a.jsx(S,{name:"log-out",className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Exit Admin"})]})]})]})}),a.jsxs(v,{children:[a.jsx(w,{path:"/",element:a.jsx(oe,{stats:n})}),a.jsx(w,{path:"/users",element:a.jsx(te,{onRefresh:g})}),a.jsx(w,{path:"/vehicles",element:a.jsx(ae,{onRefresh:g})}),a.jsx(w,{path:"/vehicle-approvals",element:a.jsx(de,{})}),a.jsx(w,{path:"/bookings",element:a.jsx(re,{})}),a.jsx(w,{path:"/financial",element:a.jsx(ie,{onRefresh:g})}),a.jsx(w,{path:"/content",element:a.jsx(le,{onRefresh:g})}),a.jsx(w,{path:"/analytics",element:a.jsx(ne,{onRefresh:g})}),a.jsx(w,{path:"/system",element:a.jsx(z,{})}),a.jsx(w,{path:"/documents",element:a.jsx(ce,{onRefresh:g})})]})]})})]})})}},Symbol.toStringTag,{value:"Module"}));export{U as A,G as E,_ as G,S as I,K as L,Y as R,D as S,L as T,q as a,J as b,$ as c,M as d,Z as e,C as f,ee as g,H as h,Q as i,xe as j,W as n,I as p,k as u,F as v};
