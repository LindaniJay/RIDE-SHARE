const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["/assets/admin-pages-BP3oSTfT.js","/assets/react-vendor-CKnA8pDM.js","/assets/vendor-CqouD_UJ.js","/assets/firebase-R_5bE8qc.js","/assets/utils-Bi8vyz5k.js","/assets/ui-libs-BJqHVFID.js","/assets/Chatbot-Dhol79hl.js","/assets/dashboard-pages-BRwvhXFz.js","/assets/Home-CkSkdPHV.js","/assets/useAnalytics-gRed4h6S.js","/assets/Search-CBP6MFeb.js","/assets/VehicleDetail-DOFV41nR.js","/assets/UnifiedCheckout-BVgG6pDw.js","/assets/About-Yrt5Fjn7.js","/assets/Contact-nkxukP09.js","/assets/FAQ-C7BY7rGY.js","/assets/Pricing-CyixrE79.js","/assets/Login-yw2Gs-oK.js","/assets/Signup-BnQ4K24E.js","/assets/Unauthorized-B2sR8zxb.js","/assets/NotFound-DQT5l-nI.js"])))=>i.map(i=>d[i]);
import{r as e,j as s,k as t,X as a,e as i,g as l,l as r,L as n,m as c,E as o,o as d,P as x,a as m,p as h,N as p,u,n as g,q as j,s as b,D as w,t as f,v,w as N,I as y,F as k,b as C,U as S,S as P,x as R,C as _,T as A,y as E,z as L,G as V,H as D,J as T,K as z,O as I,Q as F,V as $,W as B,c as M,h as U,R as O,d as q,A as H,Y as W,Z as G,_ as Y,$ as J,a0 as X,a1 as Q}from"./react-vendor-CKnA8pDM.js";import{I as Z,u as K,w as ee,_ as se,f as te,b as ae,g as ie,m as le,G as re,h as ne,R as ce,j as oe,k as de}from"./admin-pages-BP3oSTfT.js";import{Q as xe}from"./vendor-CqouD_UJ.js";import{A as me,m as he}from"./ui-libs-BJqHVFID.js";import{D as pe,g as ue,R as ge}from"./dashboard-pages-BRwvhXFz.js";import{t as je,c as be}from"./utils-Bi8vyz5k.js";import"./firebase-R_5bE8qc.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const we=e.createContext(void 0),fe=({children:t})=>{const[a,i]=e.useState(!1);e.useEffect(()=>{const e=localStorage.getItem("theme");i(e?"dark"===e:window.matchMedia("(prefers-color-scheme: dark)").matches)},[]),e.useEffect(()=>{localStorage.setItem("theme",a?"dark":"light"),a?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[a]);const l={isDark:a,toggleTheme:()=>{i(!a)}};return s.jsx(we.Provider,{value:l,children:t})},ve=({message:t,type:a,duration:i=5e3,onClose:l})=>{const[r,n]=e.useState(!0);return e.useEffect(()=>{const e=setTimeout(()=>{n(!1),setTimeout(()=>l?.(),300)},i);return()=>clearTimeout(e)},[i,l]),r?s.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg border backdrop-blur-md transition-all duration-300 ${{success:"bg-green-500/90 border-green-400 text-white",error:"bg-red-500/90 border-red-400 text-white",warning:"bg-yellow-500/90 border-yellow-400 text-white",info:"bg-blue-500/90 border-blue-400 text-white"}[a]}`,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Z,{name:{success:"CheckCircle",error:"XCircle",warning:"AlertTriangle",info:"Info"}[a],className:"h-5 w-5"}),s.jsx("span",{className:"font-medium",children:t}),s.jsx("button",{onClick:()=>{n(!1),setTimeout(()=>l?.(),300)},className:"ml-2 hover:bg-white/20 rounded p-1",children:s.jsx(Z,{name:"X",className:"h-4 w-4"})})]})}):null},Ne=e.createContext(void 0),ye=({children:t})=>{const[a,i]=e.useState([]),l=e.useCallback((e,s,t=5e3)=>{const a=Math.random().toString(36).substr(2,9);i(i=>[...i,{id:a,message:e,type:s,duration:t}])},[]),r=e.useCallback(e=>{i(s=>s.filter(s=>s.id!==e))},[]);return s.jsxs(Ne.Provider,{value:{showToast:l,hideToast:r},children:[t,a.map(e=>s.jsx(ve,{message:e.message,type:e.type,duration:e.duration,onClose:()=>r(e.id)},e.id))]})},ke=({userId:t,userRole:a})=>{const[i,l]=e.useState([]),[r,n]=e.useState(0),[c,o]=e.useState(!1),[d,x]=e.useState(!1),{showToast:m}=(()=>{const s=e.useContext(Ne);if(!s)throw new Error("useToast must be used within a ToastProvider");return s})(),{user:h}=K();return e.useEffect(()=>{const e=setTimeout(()=>{(async()=>{try{const{apiClient:e}=await se(async()=>{const{apiClient:e}=await import("./admin-pages-BP3oSTfT.js").then(e=>e.o);return{apiClient:e}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),s=await e.get("notifications");s.data.success&&(l(s.data.notifications||[]),n(s.data.pagination?.total||0))}catch(e){}})()},1e3);return()=>clearTimeout(e)},[t]),e.useEffect(()=>{if(!h)return;const e=localStorage.getItem("authToken");if(!e)return;ee.connect(e),ee.subscribeToNotifications(e=>{const s={id:e.id||Math.random().toString(36).substr(2,9),title:e.title,message:e.message,type:e.type||"info",timestamp:new Date(e.timestamp||Date.now()),read:!1};l(e=>[s,...e.slice(0,19)]),n(e=>e+1),m(s.message,s.type)}),"admin"===a&&ee.subscribeToAdminUpdates(e=>{const s={id:`admin_${Date.now()}`,title:e.title||"Admin Update",message:e.message||"System update received",type:"info",timestamp:new Date,read:!1};l(e=>[s,...e.slice(0,19)]),n(e=>e+1),m(s.message,s.type)});const s=()=>{x(ee.socket?.connected||!1)};s();const t=setInterval(s,5e3);return()=>{clearInterval(t)}},[h,a,m]),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>o(!c),className:"relative p-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:[s.jsx(Z,{name:"Bell",className:"h-5 w-5 text-white"}),r>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:r>9?"9+":r}),!d&&s.jsx("span",{className:"absolute -bottom-1 -right-1 bg-yellow-500 text-white text-xs rounded-full h-3 w-3",title:"Disconnected"})]}),c&&s.jsxs("div",{className:"absolute right-0 top-12 w-80 bg-white/10 backdrop-blur-md rounded-lg border border-white/20 shadow-xl z-50",children:[s.jsx("div",{className:"p-4 border-b border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-white font-semibold",children:"Notifications"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:async()=>{try{const{apiClient:e}=await se(async()=>{const{apiClient:e}=await import("./admin-pages-BP3oSTfT.js").then(e=>e.o);return{apiClient:e}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url);await e.put("notifications/mark-all-read"),l(e=>e.map(e=>({...e,read:!0}))),n(0)}catch(e){}},className:"text-xs text-white/70 hover:text-white transition-colors",children:"Mark all read"}),s.jsx("button",{onClick:()=>o(!1),className:"text-white/70 hover:text-white transition-colors",children:s.jsx(Z,{name:"X",className:"h-4 w-4"})})]})]})}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:0===i.length?s.jsxs("div",{className:"p-4 text-center text-white/70",children:[s.jsx(Z,{name:"Bell",className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No notifications yet"})]}):i.map(e=>s.jsx("div",{onClick:()=>(async e=>{try{const{apiClient:s}=await se(async()=>{const{apiClient:e}=await import("./admin-pages-BP3oSTfT.js").then(e=>e.o);return{apiClient:e}},__vite__mapDeps([0,1,2,3,4,5]),import.meta.url);await s.put("notifications/mark-read",{notification_ids:[e]}),l(s=>s.map(s=>s.id===e?{...s,read:!0}:s)),n(e=>Math.max(0,e-1))}catch(s){}})(e.id),className:"p-4 border-b border-white/10 hover:bg-white/5 transition-colors cursor-pointer "+(e.read?"":"bg-blue-500/10"),children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"p-1 rounded-full "+("success"===e.type?"bg-green-500/20":"error"===e.type?"bg-red-500/20":"warning"===e.type?"bg-yellow-500/20":"bg-blue-500/20"),children:s.jsx(Z,{name:"success"===e.type?"CheckCircle":"error"===e.type?"XCircle":"warning"===e.type?"AlertTriangle":"Info",className:"h-4 w-4 text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-white font-medium text-sm",children:e.title}),s.jsx("p",{className:"text-white/70 text-xs mt-1",children:e.message}),s.jsx("p",{className:"text-white/50 text-xs mt-1",children:e.timestamp.toLocaleTimeString()})]}),!e.read&&s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})},e.id))})]})]})},Ce=({isOpen:m,onClose:h,initialMode:p="login"})=>{const{login:u,signup:g,loading:j}=K(),[b,w]=e.useState(p),[f,v]=e.useState(!1),[N,y]=e.useState(!1),[k,C]=e.useState(!1),[S,P]=e.useState({}),[R,_]=e.useState(""),[A,E]=e.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",role:"Renter"}),L=e.useRef(null);e.useEffect(()=>{m&&(w(p),P({}),_(""),E({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",role:"Renter"}))},[m,p]),e.useEffect(()=>{const e=e=>{"Escape"===e.key&&m&&T()};return m&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[m]);const V=e=>{const{name:s,value:t}=e.target;E(e=>({...e,[s]:t})),S[s]&&P(e=>({...e,[s]:void 0})),S.general&&P(e=>({...e,general:void 0}))},D=()=>{const e={};var s,t;if("signup"===b&&(A.firstName.trim()||(e.firstName="First name is required"),A.lastName.trim()||(e.lastName="Last name is required")),A.email.trim()?(s=A.email,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)||(e.email="Please enter a valid email address")):e.email="Email is required",A.password){const s=(t=A.password).length<6?"Password must be at least 6 characters":t.length>128?"Password is too long":null;s&&(e.password=s)}else e.password="Password is required";return"signup"===b&&(A.confirmPassword?A.password!==A.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password"),P(e),0===Object.keys(e).length},T=()=>{k||(P({}),_(""),E({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",role:"Renter"}),h())};return m?s.jsx(me,{children:s.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-md",onClick:e=>{e.target!==e.currentTarget||k||T()},children:s.jsxs(he.div,{ref:L,initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,type:"spring",damping:25},className:"relative w-full max-w-md bg-gradient-to-br from-slate-900/95 via-slate-800/95 to-slate-900/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/10 overflow-hidden",onClick:e=>e.stopPropagation(),children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/10 via-purple-600/10 to-pink-600/10 pointer-events-none"}),s.jsxs("div",{className:"relative p-6 border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"h-12 w-12 rounded-xl bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center shadow-lg",children:s.jsx(t,{className:"h-6 w-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"login"===b?"Welcome Back":"Create Account"}),s.jsx("p",{className:"text-sm text-white/60 mt-0.5",children:"login"===b?"Sign in to continue":"Join RideShare SA today"})]})]}),s.jsx("button",{onClick:T,disabled:k,className:"p-2 rounded-lg text-white/60 hover:text-white hover:bg-white/10 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(a,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"mt-6 flex bg-white/5 rounded-xl p-1 border border-white/10",children:[s.jsx("button",{onClick:()=>{w("login"),P({})},disabled:k,className:`flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all duration-200 ${"login"===b?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"text-white/70 hover:text-white"} disabled:opacity-50`,children:"Sign In"}),s.jsx("button",{onClick:()=>{w("signup"),P({})},disabled:k,className:`flex-1 py-2.5 px-4 rounded-lg text-sm font-semibold transition-all duration-200 ${"signup"===b?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"text-white/70 hover:text-white"} disabled:opacity-50`,children:"Sign Up"})]})]}),s.jsxs("div",{className:"relative p-6 max-h-[70vh] overflow-y-auto",children:[R&&s.jsxs(he.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-4 bg-green-500/20 border border-green-500/30 rounded-xl flex items-center space-x-3",children:[s.jsx(i,{className:"h-5 w-5 text-green-400 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-green-200",children:R})]}),S.general&&s.jsxs(he.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-4 bg-red-500/20 border border-red-500/30 rounded-xl flex items-center space-x-3",children:[s.jsx(l,{className:"h-5 w-5 text-red-400 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-red-200",children:S.general})]}),"login"===b&&s.jsxs(he.form,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},onSubmit:async e=>{if(e.preventDefault(),P({}),_(""),D()){C(!0);try{await u(A.email,A.password),_("Login successful! Redirecting..."),setTimeout(()=>{h()},500)}catch(s){P({general:s.message||"Failed to sign in. Please check your credentials and try again."})}finally{C(!1)}}},className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"login-email",className:"block text-sm font-medium text-white/90 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(r,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-white/40"}),s.jsx("input",{id:"login-email",name:"email",type:"email",autoComplete:"email",required:!0,value:A.email,onChange:V,className:`w-full pl-11 pr-4 py-3 bg-white/5 border ${S.email?"border-red-500/50":"border-white/20"} rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all`,placeholder:"you@example.com"})]}),S.email&&s.jsxs("p",{className:"mt-1.5 text-xs text-red-400 flex items-center space-x-1",children:[s.jsx(l,{className:"h-3 w-3"}),s.jsx("span",{children:S.email})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"login-password",className:"block text-sm font-medium text-white/90 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-white/40"}),s.jsx("input",{id:"login-password",name:"password",type:f?"text":"password",autoComplete:"current-password",required:!0,value:A.password,onChange:V,className:`w-full pl-11 pr-11 py-3 bg-white/5 border ${S.password?"border-red-500/50":"border-white/20"} rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all`,placeholder:"Enter your password"}),s.jsx("button",{type:"button",onClick:()=>v(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-white/40 hover:text-white/60 transition-colors",children:f?s.jsx(c,{className:"h-5 w-5"}):s.jsx(o,{className:"h-5 w-5"})})]}),S.password&&s.jsxs("p",{className:"mt-1.5 text-xs text-red-400 flex items-center space-x-1",children:[s.jsx(l,{className:"h-3 w-3"}),s.jsx("span",{children:S.password})]})]}),s.jsx("button",{type:"submit",disabled:k||j,className:"w-full py-3.5 px-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:k||j?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),s.jsx("span",{children:"Signing in..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(n,{className:"h-5 w-5"}),s.jsx("span",{children:"Sign In"})]})})]}),"signup"===b&&s.jsxs(he.form,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},onSubmit:async e=>{if(e.preventDefault(),P({}),_(""),D()){C(!0);try{await g(A.email,A.password,A.firstName,A.lastName,A.phone,A.role),_("Account created successfully! Redirecting..."),setTimeout(()=>{h()},500)}catch(s){P({general:s.message||"Failed to create account. Please try again."})}finally{C(!1)}}},className:"space-y-5",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"signup-firstName",className:"block text-sm font-medium text-white/90 mb-2",children:"First Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(d,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-white/40"}),s.jsx("input",{id:"signup-firstName",name:"firstName",type:"text",autoComplete:"given-name",required:!0,value:A.firstName,onChange:V,className:`w-full pl-11 pr-4 py-3 bg-white/5 border ${S.firstName?"border-red-500/50":"border-white/20"} rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all`,placeholder:"John"})]}),S.firstName&&s.jsxs("p",{className:"mt-1.5 text-xs text-red-400 flex items-center space-x-1",children:[s.jsx(l,{className:"h-3 w-3"}),s.jsx("span",{children:S.firstName})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"signup-lastName",className:"block text-sm font-medium text-white/90 mb-2",children:"Last Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(d,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-white/40"}),s.jsx("input",{id:"signup-lastName",name:"lastName",type:"text",autoComplete:"family-name",required:!0,value:A.lastName,onChange:V,className:`w-full pl-11 pr-4 py-3 bg-white/5 border ${S.lastName?"border-red-500/50":"border-white/20"} rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all`,placeholder:"Doe"})]}),S.lastName&&s.jsxs("p",{className:"mt-1.5 text-xs text-red-400 flex items-center space-x-1",children:[s.jsx(l,{className:"h-3 w-3"}),s.jsx("span",{children:S.lastName})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"signup-email",className:"block text-sm font-medium text-white/90 mb-2",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(r,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-white/40"}),s.jsx("input",{id:"signup-email",name:"email",type:"email",autoComplete:"email",required:!0,value:A.email,onChange:V,className:`w-full pl-11 pr-4 py-3 bg-white/5 border ${S.email?"border-red-500/50":"border-white/20"} rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all`,placeholder:"you@example.com"})]}),S.email&&s.jsxs("p",{className:"mt-1.5 text-xs text-red-400 flex items-center space-x-1",children:[s.jsx(l,{className:"h-3 w-3"}),s.jsx("span",{children:S.email})]})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"signup-phone",className:"block text-sm font-medium text-white/90 mb-2",children:["Phone Number ",s.jsx("span",{className:"text-white/50 text-xs",children:"(Optional)"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(x,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-white/40"}),s.jsx("input",{id:"signup-phone",name:"phone",type:"tel",autoComplete:"tel",value:A.phone,onChange:V,className:"w-full pl-11 pr-4 py-3 bg-white/5 border border-white/20 rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all",placeholder:"+27 12 345 6789"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"signup-role",className:"block text-sm font-medium text-white/90 mb-2",children:"I want to"}),s.jsxs("select",{id:"signup-role",name:"role",required:!0,value:A.role,onChange:V,className:"w-full px-4 py-3 bg-white/5 border border-white/20 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all appearance-none cursor-pointer",children:[s.jsx("option",{value:"Renter",className:"bg-slate-800",children:"Rent vehicles from others"}),s.jsx("option",{value:"Host",className:"bg-slate-800",children:"Rent out my vehicles"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"signup-password",className:"block text-sm font-medium text-white/90 mb-2",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-white/40"}),s.jsx("input",{id:"signup-password",name:"password",type:f?"text":"password",autoComplete:"new-password",required:!0,value:A.password,onChange:V,className:`w-full pl-11 pr-11 py-3 bg-white/5 border ${S.password?"border-red-500/50":"border-white/20"} rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all`,placeholder:"Minimum 6 characters"}),s.jsx("button",{type:"button",onClick:()=>v(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-white/40 hover:text-white/60 transition-colors",children:f?s.jsx(c,{className:"h-5 w-5"}):s.jsx(o,{className:"h-5 w-5"})})]}),S.password&&s.jsxs("p",{className:"mt-1.5 text-xs text-red-400 flex items-center space-x-1",children:[s.jsx(l,{className:"h-3 w-3"}),s.jsx("span",{children:S.password})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"signup-confirmPassword",className:"block text-sm font-medium text-white/90 mb-2",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-white/40"}),s.jsx("input",{id:"signup-confirmPassword",name:"confirmPassword",type:N?"text":"password",autoComplete:"new-password",required:!0,value:A.confirmPassword,onChange:V,className:`w-full pl-11 pr-11 py-3 bg-white/5 border ${S.confirmPassword?"border-red-500/50":"border-white/20"} rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all`,placeholder:"Re-enter your password"}),s.jsx("button",{type:"button",onClick:()=>y(!N),className:"absolute right-3 top-1/2 -translate-y-1/2 text-white/40 hover:text-white/60 transition-colors",children:N?s.jsx(c,{className:"h-5 w-5"}):s.jsx(o,{className:"h-5 w-5"})})]}),S.confirmPassword&&s.jsxs("p",{className:"mt-1.5 text-xs text-red-400 flex items-center space-x-1",children:[s.jsx(l,{className:"h-3 w-3"}),s.jsx("span",{children:S.confirmPassword})]})]}),s.jsx("button",{type:"submit",disabled:k||j,className:"w-full py-3.5 px-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:k||j?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),s.jsx("span",{children:"Creating account..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(d,{className:"h-5 w-5"}),s.jsx("span",{children:"Create Account"})]})}),s.jsx("p",{className:"text-xs text-white/50 text-center",children:"By creating an account, you agree to our Terms of Service and Privacy Policy"})]})]})]})})}):null},Se=e.lazy(()=>se(()=>import("./Chatbot-Dhol79hl.js"),__vite__mapDeps([6,1,2,0,3,4,5]),import.meta.url)),Pe=({children:t})=>{const{user:a,logout:i}=K(),[l,r]=e.useState(!1),[n,c]=e.useState(!1),[o,d]=e.useState("login"),x=m(),p=e=>x.pathname===e,u=e=>{d(e),c(!0)},g=[{name:"Home",path:"/",icon:"Home"},{name:"Browse",path:"/search",icon:"Search"},{name:"Pricing",path:"/pricing",icon:"DollarSign"},{name:"Host",path:"/dashboard/host",icon:"Car"},{name:"About",path:"/about",icon:"Info"},{name:"Contact",path:"/contact",icon:"Phone"}];return s.jsxs("div",{className:"min-h-screen",children:[s.jsx(he.header,{className:"fixed top-2 sm:top-4 left-0 right-0 z-50 w-full px-2 sm:px-4",variants:te,initial:"hidden",animate:"visible",children:s.jsxs("div",{className:"flex items-center justify-between max-w-6xl mx-auto h-14 sm:h-16 relative",children:[s.jsx(he.div,{whileHover:{scale:1.05},whileTap:{scale:.95},transition:{duration:.2},children:s.jsx(h,{to:"/",className:"flex items-center h-full z-10",children:s.jsxs("div",{className:"flex items-center glass-3 rounded-xl h-full px-2 sm:px-3 lg:px-6 shadow-glass border border-white/20 hover:shadow-glass-lg hover:border-white/30 transition-all duration-300 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 -top-2 -left-2 w-full h-full bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-500 transform -skew-x-12 -translate-x-full hover:translate-x-full"}),s.jsxs("div",{className:"ml-1 sm:ml-2 lg:ml-3 relative z-10",children:[s.jsx("div",{className:"text-white font-bold text-xs sm:text-sm lg:text-lg transition-all duration-300 font-heading text-shadow-sm",children:"RideShare"}),s.jsx("div",{className:"text-white/80 text-xs font-medium font-body text-shadow-sm",children:"South Africa"})]}),s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-white/30 to-transparent opacity-50"})]})})}),s.jsx("nav",{className:"hidden md:flex items-center absolute left-1/2 transform -translate-x-1/2",children:s.jsxs("div",{className:"glass-4 rounded-full shadow-glass px-2 lg:px-4 py-2 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 -top-2 -left-2 w-full h-full bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-500 transform -skew-x-12 -translate-x-full hover:translate-x-full"}),s.jsx("div",{className:"flex items-center justify-center h-[40px] px-2 lg:px-4 relative z-10",children:s.jsx("div",{className:"flex items-center space-x-1",children:g.map((e,t)=>"Host"!==e.name||a?s.jsx(he.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:s.jsxs(h,{to:e.path,className:"flex items-center space-x-1 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-300 font-body "+(p(e.path)?"bg-primary-500/20 text-white border border-primary-500/30 shadow-glow":"text-white/80 hover:text-white hover:bg-white/10"),children:[s.jsx(Z,{name:e.icon,size:"sm"}),s.jsx("span",{children:e.name})]})},e.path):s.jsxs(he.button,{onClick:()=>u("signup"),className:"flex items-center space-x-1 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-300 text-white/80 hover:text-white hover:bg-white/10 font-body",whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:[s.jsx(Z,{name:e.icon,size:"sm"}),s.jsx("span",{children:e.name})]},e.path))})}),s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-white/30 to-transparent opacity-50"})]})}),s.jsx("div",{className:"hidden md:flex items-center space-x-2",children:a?s.jsxs(he.div,{className:"flex items-center space-x-2",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:[s.jsx(ke,{userId:a.id,userRole:"Renter"===a.role?"renter":"Host"===a.role?"host":"admin"}),s.jsx(ae,{onClick:()=>window.location.href="/dashboard",variant:p("/dashboard")||x.pathname.startsWith("/dashboard")?"primary":"secondary",size:"sm",icon:s.jsx(Z,{name:"User",size:"sm"}),className:"hidden sm:flex",children:s.jsx("span",{className:"hidden sm:block",children:"Dashboard"})}),s.jsx(ae,{onClick:i,variant:"ghost",size:"sm",icon:s.jsx(Z,{name:"Logout",size:"sm"}),className:"hidden sm:flex",children:s.jsx("span",{className:"hidden sm:block",children:"Logout"})})]}):s.jsx(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:s.jsx(ae,{onClick:()=>u("signup"),variant:"primary",size:"sm",icon:s.jsx(Z,{name:"Plus",size:"sm"}),glow:!0,children:s.jsx("span",{className:"hidden sm:block",children:"Get Started"})})})}),s.jsxs("div",{className:"md:hidden flex items-center space-x-2",children:[a?s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(h,{to:"/dashboard",className:"flex items-center space-x-1 px-2 py-1.5 rounded-lg text-xs font-medium transition-all duration-300 "+(p("/dashboard")||x.pathname.startsWith("/dashboard")?"glass-button-primary text-white":"glass-button text-white/80 hover:text-white"),children:s.jsx(Z,{name:"User",size:"sm"})}),s.jsx("button",{onClick:i,className:"glass-button flex items-center space-x-1 px-2 py-1.5 text-white/80 hover:text-white transition-all duration-300",children:s.jsx(Z,{name:"Logout",size:"sm"})})]}):s.jsxs("button",{onClick:()=>u("signup"),className:"glass-button-primary flex items-center space-x-1 px-2 py-1.5 rounded-lg text-xs font-medium transition-all duration-300",children:[s.jsx(Z,{name:"Plus",size:"sm"}),s.jsx("span",{className:"hidden xs:block",children:"Start"})]}),s.jsx("button",{onClick:()=>r(!l),className:"glass-button p-1.5 text-white/80 hover:text-white transition-all duration-300",children:s.jsx(Z,{name:"Menu",size:"sm"})})]})]})}),s.jsx(me,{children:l&&s.jsxs(s.Fragment,{children:[s.jsx(he.div,{className:"md:hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:()=>r(!1),variants:ie,initial:"hidden",animate:"visible",exit:"exit"}),s.jsxs(he.div,{className:"md:hidden fixed top-16 sm:top-18 left-2 right-2 sm:left-4 sm:right-4 z-50 glass-4 rounded-2xl shadow-glass-lg px-3 sm:px-4 py-4 max-h-[75vh] overflow-y-auto relative overflow-hidden",variants:le,initial:"closed",animate:"open",exit:"closed",children:[s.jsx("div",{className:"absolute inset-0 -top-2 -left-2 w-full h-full bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-500 transform -skew-x-12 -translate-x-full hover:translate-x-full"}),s.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-white/20 relative z-10",children:[s.jsx("h3",{className:"text-white font-semibold text-base sm:text-lg font-heading text-shadow-sm",children:"Menu"}),s.jsx(he.button,{onClick:()=>r(!1),className:"glass-2 p-1.5 sm:p-2 text-white/80 hover:text-white transition-all duration-300 rounded-lg",whileHover:{scale:1.1},whileTap:{scale:.9},children:s.jsx(Z,{name:"X",size:"sm"})})]}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/10 via-transparent to-black/5 rounded-inherit pointer-events-none"}),s.jsxs("div",{className:"space-y-2 relative z-10",children:[s.jsx("div",{className:"space-y-1",children:g.map(e=>"Host"!==e.name||a?s.jsxs(h,{to:e.path,onClick:()=>r(!1),className:"flex items-center space-x-3 px-3 sm:px-4 py-2.5 sm:py-3 rounded-lg text-sm font-medium transition-all duration-300 w-full "+(p(e.path)?"glass-button-primary text-white":"glass-button text-white/80 hover:text-white"),children:[s.jsx(Z,{name:e.icon,size:"sm"}),s.jsx("span",{children:e.name})]},e.path):s.jsxs("button",{onClick:()=>{u("signup"),r(!1)},className:"flex items-center space-x-3 px-3 sm:px-4 py-2.5 sm:py-3 rounded-lg text-sm font-medium transition-all duration-300 w-full glass-button text-white/80 hover:text-white",children:[s.jsx(Z,{name:e.icon,size:"sm"}),s.jsx("span",{children:e.name})]},e.path))}),s.jsx("div",{className:"pt-3 border-t border-white/20",children:a?s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"px-3 sm:px-4 py-2 text-white/70 text-xs font-medium truncate",children:["Welcome, ",a.email]}),s.jsxs("div",{className:"px-3 sm:px-4 py-1 text-white/50 text-xs",children:["Role: ",a.role]}),s.jsxs(h,{to:"/dashboard",onClick:()=>r(!1),className:"flex items-center space-x-3 px-3 sm:px-4 py-2.5 sm:py-3 rounded-lg text-sm font-medium transition-all duration-300 w-full "+(p("/dashboard")||x.pathname.startsWith("/dashboard")?"glass-button-primary text-white":"glass-button text-white/80 hover:text-white"),children:[s.jsx(Z,{name:"User",size:"sm"}),s.jsx("span",{children:"Dashboard"})]}),s.jsxs("button",{onClick:()=>{i(),r(!1)},className:"glass-button flex items-center space-x-3 w-full px-3 sm:px-4 py-2.5 sm:py-3 text-white/80 hover:text-white transition-all duration-300",children:[s.jsx(Z,{name:"Logout",size:"sm"}),s.jsx("span",{children:"Logout"})]})]}):s.jsxs("div",{className:"space-y-1",children:[s.jsxs("button",{onClick:()=>{u("login"),r(!1)},className:"glass-button flex items-center space-x-3 px-3 sm:px-4 py-2.5 sm:py-3 rounded-lg text-sm font-medium transition-all duration-300 w-full text-white/80 hover:text-white",children:[s.jsx(Z,{name:"Login",size:"sm"}),s.jsx("span",{children:"Login"})]}),s.jsxs("button",{onClick:()=>{u("signup"),r(!1)},className:"glass-button-primary flex items-center space-x-3 px-3 sm:px-4 py-2.5 sm:py-3 w-full",children:[s.jsx(Z,{name:"Plus",size:"sm"}),s.jsx("span",{children:"Sign Up"})]})]})})]}),s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-white/30 to-transparent opacity-50"})]})]})}),s.jsx("main",{className:"pt-16 sm:pt-20",children:t}),s.jsx("footer",{className:"bg-black/50 backdrop-blur-sm border-t border-white/10 py-4",children:s.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center space-y-4 lg:space-y-0",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"logo-footer bg-white/20 backdrop-blur-md rounded-lg p-3 shadow-lg border border-white/40",children:[s.jsx("div",{className:"text-white font-bold text-lg",children:"RideShare"}),s.jsx("div",{className:"text-white/80 text-xs",children:"South Africa"})]}),s.jsx("p",{className:"text-gray-400 text-xs",children:"Â© 2025 RideShare SA. Cape Town, South Africa"})]}),s.jsxs("div",{className:"flex items-center flex-wrap gap-2 sm:gap-4 lg:gap-6 justify-center",children:[s.jsx(h,{to:"/",className:"text-gray-400 hover:text-white transition-colors text-xs",children:"Home"}),s.jsx(h,{to:"/search",className:"text-gray-400 hover:text-white transition-colors text-xs",children:"Browse"}),s.jsx(h,{to:"/about",className:"text-gray-400 hover:text-white transition-colors text-xs",children:"About"}),s.jsx(h,{to:"/contact",className:"text-gray-400 hover:text-white transition-colors text-xs",children:"Contact"}),s.jsx(h,{to:"/faq",className:"text-gray-400 hover:text-white transition-colors text-xs",children:"FAQ"})]}),s.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 flex-wrap gap-2 justify-center lg:justify-end",children:[s.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors","aria-label":"Facebook",children:s.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors","aria-label":"Twitter",children:s.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),s.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors","aria-label":"LinkedIn",children:s.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})})]})]})})}),s.jsx(e.Suspense,{fallback:null,children:s.jsx(Se,{})}),s.jsx(Ce,{isOpen:n,onClose:()=>{c(!1)},initialMode:o})]})},Re=({children:e,requiredRole:t})=>{const{user:a,loading:i}=K(),l=m();return i?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):a?t&&a.role?.toLowerCase()!==t.toLowerCase()?s.jsx(p,{to:"/unauthorized",replace:!0}):s.jsx(s.Fragment,{children:e}):s.jsx(p,{to:"/",state:{from:l},replace:!0})},_e=({children:t})=>{const{user:a}=K(),i=u(),[l,r]=e.useState(null),[n,c]=e.useState(!0);return e.useEffect(()=>{(async()=>{try{if(c(!0),!a)return void i("/login");if("admin"!==a.role?.toLowerCase())return g.error("Admin privileges required"),void i("/login");r(!0)}catch(e){g.error("Failed to verify admin access"),i("/login")}finally{c(!1)}})()},[a,i]),n?s.jsx(pe,{}):l?s.jsx(s.Fragment,{children:t}):s.jsxs("div",{className:"page-background",children:[s.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-red-900/20 via-purple-900/20 to-indigo-900/20 backdrop-blur-sm"}),s.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:s.jsxs(re,{level:3,className:"text-center p-8 max-w-md",children:[s.jsx(Z,{name:"Shield",size:"lg",className:"text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-white/70 mb-4",children:"Admin privileges required"}),s.jsx("button",{onClick:()=>i("/login"),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Login"})]})})]})};function Ae(...e){return je(be(e))}const Ee={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"},Le=({size:e="md",variant:t="spinner",className:a,text:i})=>s.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(()=>{switch(t){case"dots":return s.jsx("div",{className:Ae("flex space-x-1",a),children:[0,1,2].map(t=>s.jsx("div",{className:Ae("rounded-full bg-current animate-pulse","sm"===e?"h-2 w-2":"md"===e?"h-3 w-3":"h-4 w-4"),style:{animationDelay:.2*t+"s",animationDuration:"1s"}},t))});case"pulse":return s.jsx("div",{className:Ae("rounded-full bg-current animate-pulse",Ee[e],a)});case"skeleton":return s.jsxs("div",{className:Ae("animate-pulse",a),children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]});default:return s.jsxs("svg",{className:Ae("animate-spin",Ee[e],a),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}})(),i&&s.jsx("p",{className:"text-sm text-gray-500 animate-pulse",children:i})]}),Ve=({text:e="Loading..."})=>s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Le,{size:"lg"}),s.jsx("p",{className:"mt-4 text-lg text-gray-600",children:e})]})});class De extends e.Component{state={hasError:!1};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){}render(){return this.state.hasError?this.props.fallback?this.props.fallback:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:s.jsx("div",{className:"max-w-md w-full mx-auto p-6",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-8 text-center border border-white/20",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-red-500/20 rounded-full flex items-center justify-center",children:s.jsx(Z,{name:"AlertTriangle",size:"lg",className:"text-red-400"})}),s.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Oops! Something went wrong"}),s.jsx("p",{className:"text-white/70 mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"Refresh Page"}),s.jsx("button",{onClick:()=>window.history.back(),className:"w-full bg-white/10 hover:bg-white/20 text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"Go Back"})]}),!1]})})}):this.props.children}}const Te=[{id:"car",label:"Car",icon:"Car",color:"blue",description:"Sedan, Hatchback, Coupe"},{id:"suv",label:"SUV",icon:"Car",color:"green",description:"Sports Utility Vehicle"},{id:"truck",label:"Truck",icon:"Car",color:"orange",description:"Pickup, Commercial"},{id:"van",label:"Van",icon:"Car",color:"purple",description:"Minivan, Cargo Van"},{id:"motorcycle",label:"Motorcycle",icon:"Car",color:"red",description:"Bike, Scooter"},{id:"luxury",label:"Luxury",icon:"Star",color:"yellow",description:"Premium Vehicles"},{id:"electric",label:"Electric",icon:"Zap",color:"emerald",description:"EV, Hybrid"}],ze=[{category:"Comfort",items:["Air Conditioning","Heated Seats","Leather Seats","Sunroof","Power Windows","Central Locking"]},{category:"Technology",items:["Bluetooth","USB Port","GPS Navigation","Backup Camera","Touchscreen","Wireless Charging"]},{category:"Safety",items:["ABS","Airbags","Stability Control","Blind Spot Monitor","Lane Departure Warning","Parking Sensors"]},{category:"Entertainment",items:["AM/FM Radio","CD Player","Premium Sound","Apple CarPlay","Android Auto","Satellite Radio"]}],Ie=({isOpen:r,onClose:n,onSuccess:c,initialData:d})=>{const[x,m]=e.useState(1),[h,p]=e.useState(!1),[u,D]=e.useState({make:"",model:"",year:(new Date).getFullYear(),type:"car",color:"",mileage:0,transmission:"automatic",fuelType:"petrol",seats:5,doors:4,engineSize:"",vin:"",pricePerDay:0,pricePerWeek:0,pricePerMonth:0,minimumRentalDays:1,maximumRentalDays:30,location:{address:"",city:"",state:"",country:"South Africa",postalCode:"",coordinates:{latitude:0,longitude:0}},features:[],amenities:[],safetyFeatures:[],entertainmentFeatures:[],coverImage:null,images:[],documents:{license:[],registration:[],insurance:[]},description:"",status:"draft",...d}),T=e.useRef({}),z=[{id:1,title:"Vehicle Info",icon:"Car",description:"Basic vehicle details"},{id:2,title:"Pricing",icon:"DollarSign",description:"Set your rates"},{id:3,title:"Location",icon:"MapPin",description:"Where is your vehicle"},{id:4,title:"Features",icon:"Star",description:"What makes it special"},{id:5,title:"Photos",icon:"Camera",description:"Show off your vehicle"},{id:6,title:"Documents",icon:"FileText",description:"Required paperwork"},{id:7,title:"Review",icon:"CheckCircle",description:"Final review"}];return r?s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs(he.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-5xl max-h-[95vh] bg-white/10 backdrop-blur-xl rounded-3xl border border-white/20 overflow-hidden shadow-2xl flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600/30 to-purple-600/30 border-b border-white/20 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Add New Vehicle"}),s.jsxs("p",{className:"text-white/70",children:["Step ",x," of ",z.length,": ",z[x-1]?.title]})]}),s.jsx("button",{onClick:n,className:"w-12 h-12 bg-white/10 hover:bg-white/20 rounded-2xl flex items-center justify-center transition-all hover:scale-105",children:s.jsx(a,{className:"w-6 h-6 text-white"})})]}),s.jsx("div",{className:"mt-6",children:s.jsx("div",{className:"flex items-center space-x-3",children:z.map((e,t)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-sm font-medium transition-all "+(t+1<=x?"bg-blue-500 text-white shadow-lg":"bg-white/20 text-white/60"),children:t+1<x?s.jsx(i,{className:"w-5 h-5"}):t+1}),t<z.length-1&&s.jsx("div",{className:"w-12 h-1 rounded-full transition-all "+(t+1<x?"bg-blue-500":"bg-white/20")})]},e.id))})})]}),s.jsx("div",{className:"p-8 overflow-y-auto flex-1",children:s.jsx(me,{mode:"wait",children:(()=>{switch(x){case 1:return s.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(t,{className:"w-10 h-10 text-white"})}),s.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Vehicle Information"}),s.jsx("p",{className:"text-white/70",children:"Tell us about your vehicle"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-white",children:"Vehicle Type"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Te.map(e=>s.jsxs("button",{onClick:()=>D(s=>({...s,type:e.id})),className:"group p-6 rounded-2xl border-2 transition-all duration-300 "+(u.type===e.id?`border-${e.color}-500 bg-${e.color}-500/20 shadow-lg scale-105`:"border-white/20 bg-white/5 hover:border-white/40 hover:bg-white/10 hover:scale-105"),children:[s.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br from-${e.color}-500 to-${e.color}-600 flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform`,children:s.jsx(Z,{name:e.icon,className:"w-6 h-6 text-white"})}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-semibold text-white mb-1",children:e.label}),s.jsx("div",{className:"text-xs text-white/60",children:e.description})]})]},e.id))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(ne,{label:"Make",value:u.make,onChange:e=>D(s=>({...s,make:e})),placeholder:"e.g., Toyota",required:!0}),s.jsx(ne,{label:"Model",value:u.model,onChange:e=>D(s=>({...s,model:e})),placeholder:"e.g., Corolla",required:!0}),s.jsx(ne,{label:"Year",type:"number",value:u.year.toString(),onChange:e=>D(s=>({...s,year:parseInt(e)||(new Date).getFullYear()})),min:"1990",max:(new Date).getFullYear().toString(),required:!0}),s.jsx(ne,{label:"Color",value:u.color,onChange:e=>D(s=>({...s,color:e})),placeholder:"e.g., White",required:!0}),s.jsx(ne,{label:"Mileage (km)",type:"number",value:u.mileage.toString(),onChange:e=>D(s=>({...s,mileage:parseInt(e)||0})),placeholder:"0"}),s.jsx(ne,{label:"Engine Size",value:u.engineSize,onChange:e=>D(s=>({...s,engineSize:e})),placeholder:"e.g., 1.8L"}),s.jsx(ne,{label:"VIN",value:u.vin,onChange:e=>D(s=>({...s,vin:e})),placeholder:"17-character VIN"}),s.jsx(ne,{label:"Seats",type:"number",value:u.seats.toString(),onChange:e=>D(s=>({...s,seats:parseInt(e)||5})),min:"1",max:"9"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"text-white font-medium",children:"Transmission"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:["manual","automatic","cvt","semi-automatic"].map(e=>s.jsx("button",{onClick:()=>D(s=>({...s,transmission:e})),className:"p-4 rounded-xl border-2 transition-all "+(u.transmission===e?"border-blue-500 bg-blue-500/20 text-blue-300":"border-white/20 bg-white/5 text-white/70 hover:border-white/40 hover:bg-white/10"),children:s.jsxs("div",{className:"text-center",children:[s.jsx(L,{className:"w-6 h-6 mx-auto mb-2"}),s.jsx("div",{className:"text-sm font-medium capitalize",children:e})]})},e))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"text-white font-medium",children:"Fuel Type"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:["petrol","diesel","electric","hybrid","lpg"].map(e=>s.jsx("button",{onClick:()=>D(s=>({...s,fuelType:e})),className:"p-4 rounded-xl border-2 transition-all "+(u.fuelType===e?"border-green-500 bg-green-500/20 text-green-300":"border-white/20 bg-white/5 text-white/70 hover:border-white/40 hover:bg-white/10"),children:s.jsxs("div",{className:"text-center",children:[s.jsx(V,{className:"w-6 h-6 mx-auto mb-2"}),s.jsx("div",{className:"text-sm font-medium capitalize",children:e})]})},e))})]})]})]});case 2:return s.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(w,{className:"w-10 h-10 text-white"})}),s.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Pricing & Availability"}),s.jsx("p",{className:"text-white/70",children:"Set competitive rates for your vehicle"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(re,{className:"p-6 border-2 border-blue-500/30 bg-blue-500/10",children:s.jsxs("div",{className:"text-center",children:[s.jsx(_,{className:"w-8 h-8 text-blue-400 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Daily Rate"}),s.jsx(ne,{label:"Price per Day (R)",type:"number",value:u.pricePerDay.toString(),onChange:e=>D(s=>({...s,pricePerDay:parseInt(e)||0})),placeholder:"250",required:!0}),s.jsx("p",{className:"text-blue-300 text-sm mt-2",children:"Most popular option"})]})}),s.jsx(re,{className:"p-6 border-2 border-purple-500/30 bg-purple-500/10",children:s.jsxs("div",{className:"text-center",children:[s.jsx(A,{className:"w-8 h-8 text-purple-400 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Weekly Rate"}),s.jsx(ne,{label:"Price per Week (R)",type:"number",value:u.pricePerWeek?.toString()||"",onChange:e=>D(s=>({...s,pricePerWeek:parseInt(e)||0})),placeholder:"1500"}),s.jsx("p",{className:"text-purple-300 text-sm mt-2",children:"Save 15% vs daily"})]})}),s.jsx(re,{className:"p-6 border-2 border-emerald-500/30 bg-emerald-500/10",children:s.jsxs("div",{className:"text-center",children:[s.jsx(v,{className:"w-8 h-8 text-emerald-400 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Monthly Rate"}),s.jsx(ne,{label:"Price per Month (R)",type:"number",value:u.pricePerMonth?.toString()||"",onChange:e=>D(s=>({...s,pricePerMonth:parseInt(e)||0})),placeholder:"5000"}),s.jsx("p",{className:"text-emerald-300 text-sm mt-2",children:"Save 25% vs daily"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(ne,{label:"Minimum Rental Days",type:"number",value:u.minimumRentalDays.toString(),onChange:e=>D(s=>({...s,minimumRentalDays:parseInt(e)||1})),min:"1",placeholder:"1"}),s.jsx(ne,{label:"Maximum Rental Days",type:"number",value:u.maximumRentalDays?.toString()||"",onChange:e=>D(s=>({...s,maximumRentalDays:parseInt(e)||30})),min:"1",placeholder:"30"})]}),s.jsx(re,{className:"p-6 bg-gradient-to-r from-blue-500/20 to-purple-500/20 border-blue-500/30",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center",children:s.jsx(E,{className:"w-6 h-6 text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Pricing Tips"}),s.jsxs("ul",{className:"space-y-2 text-white/80 text-sm",children:[s.jsx("li",{children:"â¢ Research similar vehicles in your area for competitive pricing"}),s.jsx("li",{children:"â¢ Consider offering weekly and monthly discounts to attract longer rentals"}),s.jsx("li",{children:"â¢ Factor in maintenance, insurance, and depreciation costs"}),s.jsx("li",{children:"â¢ Start with competitive rates to build reviews and ratings"})]})]})]})})]});case 3:return s.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(f,{className:"w-10 h-10 text-white"})}),s.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Location Details"}),s.jsx("p",{className:"text-white/70",children:"Where is your vehicle located?"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(ne,{label:"Street Address",value:u.location.address,onChange:e=>D(s=>({...s,location:{...s.location,address:e}})),placeholder:"123 Main Street",required:!0}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(ne,{label:"City",value:u.location.city,onChange:e=>D(s=>({...s,location:{...s.location,city:e}})),placeholder:"Cape Town",required:!0}),s.jsx(ne,{label:"State/Province",value:u.location.state,onChange:e=>D(s=>({...s,location:{...s.location,state:e}})),placeholder:"Western Cape",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(ne,{label:"Postal Code",value:u.location.postalCode,onChange:e=>D(s=>({...s,location:{...s.location,postalCode:e}})),placeholder:"8001",required:!0}),s.jsx(ne,{label:"Country",value:u.location.country,onChange:e=>D(s=>({...s,location:{...s.location,country:e}})),placeholder:"South Africa",required:!0})]})]}),s.jsx(re,{className:"p-6 bg-gradient-to-r from-orange-500/20 to-red-500/20 border-orange-500/30",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-500/20 rounded-xl flex items-center justify-center",children:s.jsx(l,{className:"w-6 h-6 text-orange-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Location Tips"}),s.jsxs("ul",{className:"space-y-2 text-white/80 text-sm",children:[s.jsx("li",{children:"â¢ Be specific about pickup and drop-off locations"}),s.jsx("li",{children:"â¢ Mention nearby landmarks for easy finding"}),s.jsx("li",{children:"â¢ Ensure the location is safe and accessible 24/7"}),s.jsx("li",{children:"â¢ Consider parking availability and restrictions"})]})]})]})})]});case 4:return s.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(v,{className:"w-10 h-10 text-white"})}),s.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Features & Amenities"}),s.jsx("p",{className:"text-white/70",children:"What makes your vehicle special?"})]}),s.jsx("div",{className:"space-y-8",children:ze.map((e,t)=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${0===t?"from-blue-500 to-blue-600":1===t?"from-purple-500 to-purple-600":2===t?"from-red-500 to-red-600":"from-green-500 to-green-600"} flex items-center justify-center`,children:s.jsx(Z,{name:0===t?"Zap":1===t?"Settings":2===t?"Shield":"Heart",className:"w-5 h-5 text-white"})}),s.jsx("h3",{className:"text-xl font-semibold text-white",children:e.category})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:e.items.map(e=>s.jsx("button",{onClick:()=>{((e,s)=>{D(t=>({...t,[e]:t[e].includes(s)?t[e].filter(e=>e!==s):[...t[e],s]}))})(0===t?"features":1===t?"amenities":2===t?"safetyFeatures":"entertainmentFeatures",e)},className:"p-4 rounded-xl border-2 transition-all text-left "+((0===t?u.features.includes(e):1===t?u.amenities.includes(e):2===t?u.safetyFeatures.includes(e):u.entertainmentFeatures.includes(e))?`border-${0===t?"blue":1===t?"purple":2===t?"red":"green"}-500 bg-${0===t?"blue":1===t?"purple":2===t?"red":"green"}-500/20 text-${0===t?"blue":1===t?"purple":2===t?"red":"green"}-300`:"border-white/20 bg-white/5 text-white/70 hover:border-white/40 hover:bg-white/10"),children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-lg border-2 flex items-center justify-center "+((0===t?u.features.includes(e):1===t?u.amenities.includes(e):2===t?u.safetyFeatures.includes(e):u.entertainmentFeatures.includes(e))?`border-${0===t?"blue":1===t?"purple":2===t?"red":"green"}-500 bg-${0===t?"blue":1===t?"purple":2===t?"red":"green"}-500`:"border-white/30"),children:(0===t?u.features.includes(e):1===t?u.amenities.includes(e):2===t?u.safetyFeatures.includes(e):u.entertainmentFeatures.includes(e))&&s.jsx(i,{className:"w-4 h-4 text-white"})}),s.jsx("span",{className:"text-sm font-medium",children:e})]})},e))})]},e.category))})]});case 5:return s.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-pink-500 to-rose-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(N,{className:"w-10 h-10 text-white"})}),s.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Vehicle Photos"}),s.jsx("p",{className:"text-white/70",children:"Show off your vehicle with great photos"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-xl font-semibold text-white",children:"Cover Photo"}),s.jsxs("div",{className:"relative",children:[u.coverImage?s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:URL.createObjectURL(u.coverImage),alt:"Cover photo",className:"w-full h-64 object-cover rounded-2xl"}),s.jsx("button",{onClick:()=>D(e=>({...e,coverImage:null})),className:"absolute top-4 right-4 w-8 h-8 bg-red-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(a,{className:"w-4 h-4 text-white"})})]}):s.jsx("div",{className:"w-full h-64 border-2 border-dashed border-white/30 rounded-2xl flex items-center justify-center hover:border-white/50 transition-colors cursor-pointer",onClick:()=>T.current.coverImage?.click(),children:s.jsxs("div",{className:"text-center",children:[s.jsx(S,{className:"w-12 h-12 text-white/60 mx-auto mb-3"}),s.jsx("p",{className:"text-white/60",children:"Click to upload cover photo"}),s.jsx("p",{className:"text-white/40 text-sm",children:"Recommended: 16:9 aspect ratio"})]})}),s.jsx("input",{ref:e=>T.current.coverImage=e,type:"file",accept:"image/*",onChange:e=>e.target.files?.[0]&&D(s=>({...s,coverImage:e.target.files[0]})),className:"hidden"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-xl font-semibold text-white",children:"Additional Photos"}),s.jsxs("span",{className:"text-white/60 text-sm",children:[u.images.length," / 10 photos"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.images.map((e,t)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:URL.createObjectURL(e),alt:`Photo ${t+1}`,className:"w-full h-24 object-cover rounded-xl"}),s.jsx("button",{onClick:()=>((e,s)=>{D(t=>{const a=t[e].filter((e,t)=>t!==s);return{...t,[e]:a}})})("images",t),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(a,{className:"w-4 h-4 text-white"})})]},t)),u.images.length<10&&s.jsx("button",{onClick:()=>T.current.images?.click(),className:"w-full h-24 border-2 border-dashed border-white/30 rounded-xl flex items-center justify-center text-white/60 hover:border-white/50 hover:text-white/80 transition-colors",children:s.jsx(R,{className:"w-6 h-6"})})]}),s.jsx("input",{ref:e=>T.current.images=e,type:"file",multiple:!0,accept:"image/*",onChange:e=>e.target.files&&((e,s)=>{const t=Array.from(e),a=["image/jpeg","image/jpg","image/png","image/webp"],i=t.filter(e=>a.includes(e.type)?!(e.size>10485760&&(g.error(`${e.name} is too large. Maximum size is 10MB.`),1)):(g.error(`${e.name} is not a valid image type. Please use JPEG, PNG, or WebP.`),!1));{const e=10-u.images.length,t=i.slice(0,e);i.length>e&&g.error(`You can only upload ${e} more image(s). Maximum 10 additional photos.`),D(e=>({...e,[s]:[...e.images,...t]}))}})(e.target.files,"images"),className:"hidden"})]}),s.jsx(re,{className:"p-6 bg-gradient-to-r from-pink-500/20 to-rose-500/20 border-pink-500/30",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-pink-500/20 rounded-xl flex items-center justify-center",children:s.jsx(o,{className:"w-6 h-6 text-pink-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Photo Tips"}),s.jsxs("ul",{className:"space-y-2 text-white/80 text-sm",children:[s.jsx("li",{children:"â¢ Use good lighting (natural light is best)"}),s.jsx("li",{children:"â¢ Take photos from multiple angles"}),s.jsx("li",{children:"â¢ Show both interior and exterior details"}),s.jsx("li",{children:"â¢ Include close-ups of important features"}),s.jsx("li",{children:"â¢ Keep photos clear and well-framed"})]})]})]})})]});case 6:return s.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-indigo-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(k,{className:"w-10 h-10 text-white"})}),s.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Required Documents"}),s.jsx("p",{className:"text-white/70",children:"Upload necessary paperwork"})]}),s.jsx("div",{className:"space-y-6",children:[{key:"license",label:"Driver's License",description:"Valid driver's license",icon:"Shield"},{key:"registration",label:"Vehicle Registration",description:"Current registration certificate",icon:"FileText"},{key:"insurance",label:"Insurance Certificate",description:"Valid insurance documentation",icon:"Shield"}].map(e=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-indigo-500/20 rounded-xl flex items-center justify-center",children:s.jsx(Z,{name:e.icon,className:"w-5 h-5 text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:e.label}),s.jsx("p",{className:"text-white/60 text-sm",children:e.description})]}),s.jsxs("span",{className:"text-white/60 text-sm ml-auto",children:[u.documents[e.key].length," files"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[u.documents[e.key].map((t,i)=>s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"w-full h-24 bg-white/10 border border-white/20 rounded-xl flex items-center justify-center",children:s.jsx(k,{className:"w-8 h-8 text-white/60"})}),s.jsx("button",{onClick:()=>((e,s)=>{D(t=>({...t,documents:{...t.documents,[e]:t.documents[e].filter((e,t)=>t!==s)}}))})(e.key,i),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(a,{className:"w-4 h-4 text-white"})}),s.jsx("p",{className:"text-xs text-white/60 mt-2 truncate",children:t.name})]},i)),s.jsx("button",{onClick:()=>T.current[e.key]?.click(),className:"w-full h-24 border-2 border-dashed border-white/30 rounded-xl flex items-center justify-center text-white/60 hover:border-white/50 hover:text-white/80 transition-colors",children:s.jsx(S,{className:"w-6 h-6"})})]}),s.jsx("input",{ref:s=>T.current[e.key]=s,type:"file",multiple:!0,accept:"image/*,.pdf",onChange:s=>s.target.files&&((e,s)=>{const t=Array.from(e);D(e=>({...e,documents:{...e.documents,[s]:t}}))})(s.target.files,e.key),className:"hidden"})]},e.key))}),s.jsx(re,{className:"p-6 bg-gradient-to-r from-indigo-500/20 to-blue-500/20 border-indigo-500/30",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-indigo-500/20 rounded-xl flex items-center justify-center",children:s.jsx(P,{className:"w-6 h-6 text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Document Requirements"}),s.jsxs("ul",{className:"space-y-2 text-white/80 text-sm",children:[s.jsx("li",{children:"â¢ All documents must be current and valid"}),s.jsx("li",{children:"â¢ Photos should be clear and readable"}),s.jsx("li",{children:"â¢ PDF files are preferred for documents"}),s.jsx("li",{children:"â¢ Ensure all personal information is visible"})]})]})]})})]});case 7:return s.jsxs(he.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-emerald-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:s.jsx(i,{className:"w-10 h-10 text-white"})}),s.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Review & Submit"}),s.jsx("p",{className:"text-white/70",children:"Review your listing before submitting"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(re,{className:"p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(t,{className:"w-5 h-5 mr-2"}),"Vehicle Information"]}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-white/60",children:"Make & Model:"}),s.jsxs("span",{className:"text-white",children:[u.make," ",u.model]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-white/60",children:"Year:"}),s.jsx("span",{className:"text-white",children:u.year})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-white/60",children:"Type:"}),s.jsx("span",{className:"text-white capitalize",children:u.type})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-white/60",children:"Color:"}),s.jsx("span",{className:"text-white",children:u.color})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-white/60",children:"Mileage:"}),s.jsxs("span",{className:"text-white",children:[u.mileage.toLocaleString()," km"]})]})]})]}),s.jsxs(re,{className:"p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(w,{className:"w-5 h-5 mr-2"}),"Pricing"]}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-white/60",children:"Per Day:"}),s.jsxs("span",{className:"text-white font-semibold",children:["R",u.pricePerDay]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-white/60",children:"Per Week:"}),s.jsxs("span",{className:"text-white",children:["R",u.pricePerWeek||"N/A"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-white/60",children:"Per Month:"}),s.jsxs("span",{className:"text-white",children:["R",u.pricePerMonth||"N/A"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-white/60",children:"Min Rental:"}),s.jsxs("span",{className:"text-white",children:[u.minimumRentalDays," days"]})]})]})]}),s.jsxs(re,{className:"p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(f,{className:"w-5 h-5 mr-2"}),"Location"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsx("div",{className:"text-white",children:u.location.address}),s.jsxs("div",{className:"text-white/60",children:[u.location.city,", ",u.location.state]}),s.jsxs("div",{className:"text-white/60",children:[u.location.postalCode,", ",u.location.country]})]})]}),s.jsxs(re,{className:"p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(v,{className:"w-5 h-5 mr-2"}),"Features"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-white/60 text-sm",children:"Comfort Features:"}),s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[u.features.slice(0,3).map(e=>s.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-300 rounded text-xs",children:e},e)),u.features.length>3&&s.jsxs("span",{className:"px-2 py-1 bg-white/10 text-white/60 rounded text-xs",children:["+",u.features.length-3," more"]})]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-white/60 text-sm",children:"Safety Features:"}),s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[u.safetyFeatures.slice(0,3).map(e=>s.jsx("span",{className:"px-2 py-1 bg-red-500/20 text-red-300 rounded text-xs",children:e},e)),u.safetyFeatures.length>3&&s.jsxs("span",{className:"px-2 py-1 bg-white/10 text-white/60 rounded text-xs",children:["+",u.safetyFeatures.length-3," more"]})]})]})]})]})]}),s.jsxs(re,{className:"p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[s.jsx(N,{className:"w-5 h-5 mr-2"}),"Media & Documents"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center mx-auto mb-2",children:s.jsx(y,{className:"w-6 h-6 text-green-400"})}),s.jsx("div",{className:"text-white font-medium",children:u.coverImage?"â":"â"}),s.jsx("div",{className:"text-white/60",children:"Cover Photo"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-xl flex items-center justify-center mx-auto mb-2",children:s.jsx(N,{className:"w-6 h-6 text-blue-400"})}),s.jsx("div",{className:"text-white font-medium",children:u.images.length}),s.jsx("div",{className:"text-white/60",children:"Photos"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center mx-auto mb-2",children:s.jsx(k,{className:"w-6 h-6 text-purple-400"})}),s.jsx("div",{className:"text-white font-medium",children:u.documents.license.length+u.documents.registration.length+u.documents.insurance.length}),s.jsx("div",{className:"text-white/60",children:"Documents"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-emerald-500/20 rounded-xl flex items-center justify-center mx-auto mb-2",children:s.jsx(i,{className:"w-6 h-6 text-emerald-400"})}),s.jsx("div",{className:"text-white font-medium",children:"Ready"}),s.jsx("div",{className:"text-white/60",children:"Status"})]})]})]}),s.jsx(re,{className:"p-6 bg-gradient-to-r from-emerald-500/20 to-green-500/20 border-emerald-500/30",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-emerald-500/20 rounded-xl flex items-center justify-center",children:s.jsx(C,{className:"w-6 h-6 text-emerald-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"What Happens Next?"}),s.jsxs("ul",{className:"space-y-2 text-white/80 text-sm",children:[s.jsx("li",{children:"â¢ Your listing will be reviewed by our admin team"}),s.jsx("li",{children:"â¢ You'll receive an email notification once approved"}),s.jsx("li",{children:"â¢ Approved listings become visible to renters"}),s.jsx("li",{children:"â¢ You can manage your listing from your dashboard"})]})]})]})})]});default:return null}})()})}),s.jsx("div",{className:"bg-white/5 border-t border-white/20 p-6 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>{x>1&&m(x-1)},disabled:1===x,className:"px-8 py-4 rounded-2xl font-medium transition-all flex items-center "+(1===x?"bg-white/10 text-white/50 cursor-not-allowed":"bg-white/20 text-white hover:bg-white/30 hover:scale-105"),children:[s.jsx(j,{className:"w-5 h-5 mr-2"}),"Previous"]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:n,className:"px-8 py-4 bg-white/10 text-white rounded-2xl font-medium hover:bg-white/20 transition-all hover:scale-105",children:"Cancel"}),x<z.length?s.jsxs("button",{onClick:()=>{x<z.length&&m(x+1)},className:"px-8 py-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-2xl font-medium hover:from-blue-600 hover:to-purple-700 transition-all hover:scale-105 shadow-lg flex items-center",children:["Next",s.jsx(b,{className:"w-5 h-5 ml-2"})]}):s.jsx("button",{onClick:async()=>{p(!0);try{const e=new FormData;e.append("title",`${u.year} ${u.make} ${u.model}`),e.append("description",u.description||`${u.year} ${u.make} ${u.model} - ${u.type}`),e.append("make",u.make),e.append("model",u.model),e.append("year",u.year.toString()),e.append("vehicle_type",u.type),e.append("category",u.type),e.append("price_per_day",u.pricePerDay.toString()),u.pricePerWeek&&e.append("price_per_week",u.pricePerWeek.toString()),u.pricePerMonth&&e.append("price_per_month",u.pricePerMonth.toString()),e.append("location",JSON.stringify(u.location)),e.append("fuel_type",u.fuelType),e.append("transmission",u.transmission),e.append("seats",u.seats.toString()),e.append("mileage",u.mileage.toString()),e.append("minimum_rental_days",u.minimumRentalDays.toString()),e.append("features",JSON.stringify([...u.features,...u.amenities,...u.safetyFeatures,...u.entertainmentFeatures])),u.coverImage&&e.append("coverImage",u.coverImage),u.images.forEach(s=>{e.append("images",s)}),e.append("category",u.type||"uncategorized");const s=localStorage.getItem("accessToken")||localStorage.getItem("token"),{getApiBaseUrl:t}=await se(async()=>{const{getApiBaseUrl:e}=await import("./dashboard-pages-BRwvhXFz.js").then(e=>e.b);return{getApiBaseUrl:e}},__vite__mapDeps([7,1,2,0,3,4,5]),import.meta.url),a=t(),i=await fetch(`${a}/enhanced-vehicles`,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:e});if(!i.ok){const e=await i.json();throw new Error(e.error||"Failed to create vehicle listing")}const l=await i.json();c(l.vehicle||u),g.success("Vehicle listing created successfully! It will be reviewed by admin before going live."),n()}catch(e){g.error(e instanceof Error?e.message:"Failed to create listing. Please try again.")}finally{p(!1)}},disabled:h,className:"px-8 py-4 rounded-2xl font-medium transition-all shadow-lg "+(h?"bg-white/20 text-white/50 cursor-not-allowed":"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 hover:scale-105"),children:h?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin inline mr-2"}),"Submitting..."]}):s.jsxs(s.Fragment,{children:["Submit for Approval",s.jsx(i,{className:"w-5 h-5 inline ml-2"})]})})]})]})})]})}):null},Fe=({className:a=""})=>{const{user:i}=K(),[l,r]=e.useState(!1),[n,c]=e.useState([]),[d,x]=e.useState(!0),[m,h]=e.useState({totalListings:0,activeListings:0,pendingListings:0,totalEarnings:0,totalViews:0,totalBookings:0,averageRating:0,monthlyEarnings:0,weeklyEarnings:0}),[p,u]=e.useState("all"),[j,b]=e.useState(""),[N,y]=e.useState("grid");e.useEffect(()=>{i?.uid&&k()},[i?.uid]);const k=async()=>{try{if(!i?.uid)return void x(!1);x(!0);const e=await i.getIdToken(),s=ue(),t=await fetch(`${s}/listings/host/${i.uid}`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json();if(e.success){const s=e.data.map(e=>({id:e.id,make:e.make,model:e.model,year:e.year,type:e.vehicle_type||e.type||"car",color:e.color||"Unknown",pricePerDay:e.price_per_day||e.pricePerDay||0,city:e.city||"Unknown",status:e.status||"pending",image:e.image||"",images:e.images?Array.isArray(e.images)?e.images:[e.images]:e.image?[e.image]:[],features:e.features?Array.isArray(e.features)?e.features:JSON.parse(e.features||"[]"):[],createdAt:e.created_at||e.createdAt||(new Date).toISOString(),views:e.view_count||0,bookings:e.total_bookings||0,rating:e.rating_average||e.rating||0,earnings:e.total_earnings||0,lastUpdated:e.updated_at||e.createdAt||(new Date).toISOString()}));c(s);const t={totalListings:s.length,activeListings:s.filter(e=>"approved"===e.status).length,pendingListings:s.filter(e=>"pending"===e.status).length,totalEarnings:s.reduce((e,s)=>e+(s.earnings||0),0),totalViews:s.reduce((e,s)=>e+(s.views||0),0),totalBookings:s.reduce((e,s)=>e+(s.bookings||0),0),averageRating:s.length>0?s.reduce((e,s)=>e+(s.rating||0),0)/s.length:0,monthlyEarnings:.8*s.reduce((e,s)=>e+(s.earnings||0),0),weeklyEarnings:.2*s.reduce((e,s)=>e+(s.earnings||0),0)};h(t)}}const a=await fetch(`${s}/host/earnings`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(a.ok){const e=await a.json();e.success&&e.data&&h(s=>({...s,totalEarnings:e.data.totalEarnings||s.totalEarnings}))}}catch(e){g.error("Failed to load dashboard data")}finally{x(!1)}},C=n.filter(e=>{const s="all"===p||e.status===p,t=""===j||`${e.make} ${e.model}`.toLowerCase().includes(j.toLowerCase())||(e.city||"").toLowerCase().includes(j.toLowerCase());return s&&t}),S=e=>{switch(e){case"approved":return"text-green-400 bg-green-500/20 border-green-500/30";case"pending":return"text-yellow-400 bg-yellow-500/20 border-yellow-500/30";case"rejected":return"text-red-400 bg-red-500/20 border-red-500/30";case"draft":case"inactive":default:return"text-gray-400 bg-gray-500/20 border-gray-500/30";case"active":return"text-blue-400 bg-blue-500/20 border-blue-500/30"}},P=e=>{switch(e){case"approved":return"CheckCircle";case"pending":return"Clock";case"rejected":return"XCircle";case"draft":return"Edit";case"active":return"Zap";default:return"AlertCircle"}};return d?s.jsx("div",{className:`space-y-8 ${a}`,children:s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})})}):s.jsxs("div",{className:`space-y-8 ${a}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Host Dashboard"}),s.jsx("p",{className:"text-white/70 text-lg",children:"Manage your vehicle listings and earnings"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(ae,{onClick:()=>r(!0),className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 shadow-lg hover:scale-105 transition-all",children:[s.jsx(R,{className:"w-5 h-5 mr-2"}),"Add New Vehicle"]}),s.jsxs(ae,{variant:"outline",className:"hover:scale-105 transition-all",children:[s.jsx(D,{className:"w-5 h-5 mr-2"}),"Export Data"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(re,{className:"p-6 hover:scale-105 transition-transform",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/60 text-sm font-medium",children:"Total Listings"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:m.totalListings}),s.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[s.jsxs("span",{className:"text-green-400",children:[m.activeListings," active"]}),s.jsx("span",{className:"text-white/40 mx-2",children:"â¢"}),s.jsxs("span",{className:"text-yellow-400",children:[m.pendingListings," pending"]})]})]}),s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg",children:s.jsx(t,{className:"w-8 h-8 text-white"})})]})}),s.jsx(re,{className:"p-6 hover:scale-105 transition-transform",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/60 text-sm font-medium",children:"Total Earnings"}),s.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:["R",m.totalEarnings.toLocaleString()]}),s.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[s.jsx(A,{className:"w-4 h-4 text-green-400 mr-1"}),s.jsx("span",{className:"text-green-400",children:"+12% this month"})]})]}),s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center shadow-lg",children:s.jsx(w,{className:"w-8 h-8 text-white"})})]})}),s.jsx(re,{className:"p-6 hover:scale-105 transition-transform",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/60 text-sm font-medium",children:"Total Views"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:m.totalViews}),s.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[s.jsx(T,{className:"w-4 h-4 text-purple-400 mr-1"}),s.jsxs("span",{className:"text-purple-400",children:[m.totalBookings," bookings"]})]})]}),s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",children:s.jsx(o,{className:"w-8 h-8 text-white"})})]})}),s.jsx(re,{className:"p-6 hover:scale-105 transition-transform",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/60 text-sm font-medium",children:"Average Rating"}),s.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:m.averageRating.toFixed(1)}),s.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[s.jsx(v,{className:"w-4 h-4 text-yellow-400 mr-1"}),s.jsxs("span",{className:"text-yellow-400",children:["Based on ",m.totalBookings," reviews"]})]})]}),s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-2xl flex items-center justify-center shadow-lg",children:s.jsx(v,{className:"w-8 h-8 text-white"})})]})})]}),s.jsxs(re,{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("button",{className:"p-4 bg-gradient-to-br from-blue-500/20 to-blue-600/20 border border-blue-500/30 rounded-xl hover:scale-105 transition-all group",children:[s.jsx(z,{className:"w-8 h-8 text-blue-400 mx-auto mb-2 group-hover:scale-110 transition-transform"}),s.jsx("div",{className:"text-white font-medium text-sm",children:"Analytics"})]}),s.jsxs("button",{className:"p-4 bg-gradient-to-br from-green-500/20 to-green-600/20 border border-green-500/30 rounded-xl hover:scale-105 transition-all group",children:[s.jsx(_,{className:"w-8 h-8 text-green-400 mx-auto mb-2 group-hover:scale-110 transition-transform"}),s.jsx("div",{className:"text-white font-medium text-sm",children:"Bookings"})]}),s.jsxs("button",{className:"p-4 bg-gradient-to-br from-purple-500/20 to-purple-600/20 border border-purple-500/30 rounded-xl hover:scale-105 transition-all group",children:[s.jsx(I,{className:"w-8 h-8 text-purple-400 mx-auto mb-2 group-hover:scale-110 transition-transform"}),s.jsx("div",{className:"text-white font-medium text-sm",children:"Reports"})]}),s.jsxs("button",{className:"p-4 bg-gradient-to-br from-orange-500/20 to-orange-600/20 border border-orange-500/30 rounded-xl hover:scale-105 transition-all group",children:[s.jsx(L,{className:"w-8 h-8 text-orange-400 mx-auto mb-2 group-hover:scale-110 transition-transform"}),s.jsx("div",{className:"text-white font-medium text-sm",children:"Settings"})]})]})]}),s.jsx(re,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx(ne,{placeholder:"Search vehicles...",value:j,onChange:e=>b(e),icon:"Search"})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("select",{value:p,onChange:e=>u(e.target.value),className:"px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",className:"bg-gray-800",children:"All Status"}),s.jsx("option",{value:"approved",className:"bg-gray-800",children:"Approved"}),s.jsx("option",{value:"pending",className:"bg-gray-800",children:"Pending"}),s.jsx("option",{value:"rejected",className:"bg-gray-800",children:"Rejected"}),s.jsx("option",{value:"draft",className:"bg-gray-800",children:"Draft"})]}),s.jsxs("div",{className:"flex bg-white/10 rounded-xl p-1",children:[s.jsx("button",{onClick:()=>y("grid"),className:"p-2 rounded-lg transition-all "+("grid"===N?"bg-white/20":"hover:bg-white/10"),children:s.jsx(z,{className:"w-4 h-4 text-white"})}),s.jsx("button",{onClick:()=>y("list"),className:"p-2 rounded-lg transition-all "+("list"===N?"bg-white/20":"hover:bg-white/10"),children:s.jsx(F,{className:"w-4 h-4 text-white"})})]}),s.jsx("button",{className:"px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white hover:bg-white/20 transition-colors",children:s.jsx($,{className:"w-4 h-4"})})]})]})}),s.jsx("div",{className:"grid gap-6 "+("grid"===N?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),children:C.map(e=>s.jsx(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group",children:s.jsxs(re,{className:"p-0 overflow-hidden hover:scale-105 transition-all duration-300 "+("list"===N?"flex":""),children:[s.jsxs("div",{className:"relative bg-gradient-to-br from-gray-600 to-gray-800 "+("list"===N?"w-80 h-48":"h-48"),children:[e.images&&e.images.length>0||e.image?s.jsx("img",{src:e.images&&e.images.length>0?e.images[0]:e.image,alt:`${e.make} ${e.model}`,className:"w-full h-full object-cover",onError:e=>{e.target.src="",e.target.style.display="none"}}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(t,{className:"w-16 h-16 text-white/40"})}),s.jsxs("div",{className:`absolute top-4 left-4 px-3 py-1 rounded-full text-xs font-medium border ${S(e.status)}`,children:[s.jsx(Z,{name:P(e.status),className:"w-3 h-3 inline mr-1"}),e.status.charAt(0).toUpperCase()+e.status.slice(1)]}),s.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white/30 transition-colors",children:s.jsx(B,{className:"w-4 h-4 text-white"})}),s.jsx("button",{className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white/30 transition-colors",children:s.jsx(M,{className:"w-4 h-4 text-white"})})]})}),s.jsxs("div",{className:"absolute bottom-4 left-4 bg-black/50 backdrop-blur-sm rounded-xl px-3 py-2",children:[s.jsxs("p",{className:"text-white font-bold text-lg",children:["R",e.pricePerDay||e.price_per_day||0]}),s.jsx("p",{className:"text-white/60 text-xs",children:"per day"})]})]}),s.jsxs("div",{className:"p-6 "+("list"===N?"flex-1":""),children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-semibold text-white mb-1",children:[e.make," ",e.model]}),s.jsxs("p",{className:"text-white/60 text-sm",children:[e.year," â¢ ",e.color]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(v,{className:"w-4 h-4 text-yellow-400 fill-current"}),s.jsx("span",{className:"text-white font-medium",children:(e.rating||0).toFixed(1)}),s.jsxs("span",{className:"text-white/60 text-sm",children:["(",e.bookings||0,")"]})]})]}),s.jsxs("div",{className:"flex items-center text-white/60 text-sm mb-4",children:[s.jsx(f,{className:"w-4 h-4 mr-2"}),e.city||"Unknown Location"]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm mb-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-white font-semibold",children:e.views||0}),s.jsx("div",{className:"text-white/60 text-xs",children:"Views"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-white font-semibold",children:e.bookings||0}),s.jsx("div",{className:"text-white/60 text-xs",children:"Bookings"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-green-400 font-semibold",children:["R",(e.earnings||0).toLocaleString()]}),s.jsx("div",{className:"text-white/60 text-xs",children:"Earnings"})]})]}),e.features&&Array.isArray(e.features)&&e.features.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.features.slice(0,3).map((e,t)=>s.jsx("span",{className:"px-2 py-1 bg-white/10 text-white/80 rounded-lg text-xs",children:e},t)),e.features.length>3&&s.jsxs("span",{className:"px-2 py-1 bg-white/10 text-white/80 rounded-lg text-xs",children:["+",e.features.length-3," more"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ae,{className:"flex-1 bg-blue-500/20 text-blue-300 border-blue-500/30 hover:bg-blue-500/30",children:[s.jsx(o,{className:"w-4 h-4 mr-2"}),"View"]}),s.jsxs(ae,{className:"flex-1 bg-green-500/20 text-green-300 border-green-500/30 hover:bg-green-500/30",children:[s.jsx(B,{className:"w-4 h-4 mr-2"}),"Edit"]})]})]})]})},e.id))}),0===C.length&&s.jsxs(re,{className:"p-12 text-center",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-gray-500 to-gray-600 rounded-3xl flex items-center justify-center mx-auto mb-6",children:s.jsx(t,{className:"w-12 h-12 text-white/60"})}),s.jsx("h3",{className:"text-2xl font-semibold text-white mb-3",children:"No vehicles found"}),s.jsx("p",{className:"text-white/60 mb-8 text-lg",children:j||"all"!==p?"Try adjusting your search or filter criteria":"Get started by listing your first vehicle"}),!j&&"all"===p&&s.jsxs(ae,{onClick:()=>r(!0),className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 shadow-lg hover:scale-105 transition-all",children:[s.jsx(R,{className:"w-5 h-5 mr-2"}),"List Your First Vehicle"]})]}),s.jsx(Ie,{isOpen:l,onClose:()=>r(!1),onSuccess:e=>{k(),g.success("Vehicle listing created successfully!")}})]})},$e=()=>{const{user:t}=K(),[a,i]=e.useState({pendingUsers:0,pendingVehicles:0,pendingBookings:0,totalRevenue:0,activeUsers:0}),[l,r]=e.useState(!0);e.useEffect(()=>{n()},[]);const n=async()=>{try{const e=await fetch("/api/admin/stats",{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(e.ok){const s=await e.json();i({pendingUsers:s.data.overview.pendingUsers||0,pendingVehicles:s.data.overview.pendingVehicles||0,pendingBookings:s.data.overview.pendingBookings||0,totalRevenue:s.data.overview.totalRevenue||0,activeUsers:s.data.overview.totalUsers||0})}}catch(e){}finally{r(!1)}},c=[{id:"approve-users",title:"Approve Users",description:"Review and approve pending user registrations",icon:"UserCheck",color:"blue",count:a.pendingUsers,action:()=>{}},{id:"approve-vehicles",title:"Approve Vehicles",description:"Review and approve pending vehicle listings",icon:"Car",color:"green",count:a.pendingVehicles,action:()=>{}},{id:"manage-bookings",title:"Manage Bookings",description:"Monitor and manage booking requests",icon:"Calendar",color:"purple",count:a.pendingBookings,action:()=>{}},{id:"view-analytics",title:"View Analytics",description:"Access platform analytics and reports",icon:"BarChart",color:"yellow",count:null,action:()=>{}},{id:"system-settings",title:"System Settings",description:"Configure platform settings and features",icon:"Settings",color:"gray",count:null,action:()=>{}},{id:"support-tickets",title:"Support Tickets",description:"Handle user support requests",icon:"MessageCircle",color:"red",count:null,action:()=>{}}];return l?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-4 border border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Pending Users"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:a.pendingUsers})]}),s.jsx(Z,{name:"Users",className:"h-8 w-8 text-blue-400"})]})}),s.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-4 border border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Pending Vehicles"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:a.pendingVehicles})]}),s.jsx(Z,{name:"Car",className:"h-8 w-8 text-green-400"})]})}),s.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-4 border border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Pending Bookings"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:a.pendingBookings})]}),s.jsx(Z,{name:"Calendar",className:"h-8 w-8 text-purple-400"})]})}),s.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-4 border border-white/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",a.totalRevenue.toLocaleString()]})]}),s.jsx(Z,{name:"DollarSign",className:"h-8 w-8 text-yellow-400"})]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(e=>s.jsx("button",{onClick:e.action,className:"p-4 bg-white/10 backdrop-blur-md rounded-lg border border-white/20 hover:bg-white/20 transition-all duration-300 text-left group",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`p-2 rounded-lg bg-${e.color}-500/20`,children:s.jsx(Z,{name:e.icon,className:`h-6 w-6 text-${e.color}-400`})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-white font-semibold group-hover:text-white transition-colors",children:e.title}),null!==e.count&&s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(e.count>0?"bg-red-500/20 text-red-200 border border-red-400/30":"bg-green-500/20 text-green-200 border border-green-400/30"),children:e.count})]}),s.jsx("p",{className:"text-white/70 text-sm",children:e.description})]})]})},e.id))}),s.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Activity"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white/5 rounded-lg",children:[s.jsx(Z,{name:"UserPlus",className:"h-5 w-5 text-green-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white text-sm",children:"New user registration"}),s.jsx("p",{className:"text-white/70 text-xs",children:"2 minutes ago"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white/5 rounded-lg",children:[s.jsx(Z,{name:"Car",className:"h-5 w-5 text-blue-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white text-sm",children:"New vehicle listing submitted"}),s.jsx("p",{className:"text-white/70 text-xs",children:"5 minutes ago"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white/5 rounded-lg",children:[s.jsx(Z,{name:"Calendar",className:"h-5 w-5 text-purple-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white text-sm",children:"New booking request"}),s.jsx("p",{className:"text-white/70 text-xs",children:"10 minutes ago"})]})]})]})]})]})},Be=()=>{const{user:t}=K(),a=m(),i=u(),[l,r]=e.useState("renter"),[n,c]=e.useState(!1),o=t?.role?.toLowerCase(),d="admin"===o||"admin"===t?.role?.toLowerCase(),x=(()=>{const e=a.pathname;return e.includes("/host")?"host":e.includes("/renter")?"renter":e.includes("/admin")?"admin":o||"renter"})();if(U.useEffect(()=>{if(d){const e=a.pathname;e.includes("/admin")?r("admin"):e.includes("/host")?r("host"):e.includes("/renter")?r("renter"):r(o||"renter")}else a.pathname.includes("/admin")&&i("/dashboard",{replace:!0})},[a.pathname,d,o,i]),!t)return s.jsx("div",{className:"page-background",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}),s.jsx("span",{className:"ml-3 text-white",children:"Loading dashboard..."})]})})});const h=e=>{c(!0),r(e),i("admin"===e?"/admin-dashboard":`/dashboard/${e}`,{replace:!0}),setTimeout(()=>c(!1),300)};return s.jsx("div",{className:"page-background",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 lg:py-8",children:[s.jsxs("div",{className:"mb-6 lg:mb-8",children:[s.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-white mb-2",children:"Dashboard"}),s.jsx("p",{className:"text-gray-300 text-sm lg:text-base",children:"Welcome to your dashboard!"}),d&&s.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-2 sm:gap-2",children:[s.jsx("button",{onClick:()=>h("renter"),className:"px-3 lg:px-4 py-2 rounded-lg text-xs lg:text-sm font-medium transition-all "+("renter"===l?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:"Renter View"}),s.jsx("button",{onClick:()=>h("host"),className:"px-3 lg:px-4 py-2 rounded-lg text-xs lg:text-sm font-medium transition-all "+("host"===l?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:"Host View"}),s.jsx("button",{onClick:()=>h("admin"),className:"px-3 lg:px-4 py-2 rounded-lg text-xs lg:text-sm font-medium transition-all "+("admin"===l?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:"Admin Panel"})]})]}),s.jsx("div",{className:"space-y-6",children:n?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}),s.jsx("span",{className:"ml-3 text-white",children:"Switching dashboard..."})]}):d?s.jsxs(s.Fragment,{children:["renter"===l&&s.jsx(ge,{}),"host"===l&&s.jsx(Fe,{}),"admin"===l&&s.jsxs("div",{className:"space-y-6",children:[s.jsx($e,{}),s.jsx(ce,{})]})]}):s.jsxs(s.Fragment,{children:["renter"===x&&s.jsx(ge,{}),"host"===x&&s.jsx(Fe,{})]})})]})})},Me=({className:a=""})=>{const{user:l,logout:r}=K(),[n,c]=e.useState("overview"),[x,m]=e.useState(!0),[h,p]=e.useState(!1),[u,j]=e.useState([]),[b,f]=e.useState({totalUsers:0,totalHosts:0,totalVehicles:0,pendingVehicles:0,approvedVehicles:0,rejectedVehicles:0,totalBookings:0,activeBookings:0,totalRevenue:0,monthlyRevenue:0,averageBookingValue:0,userGrowthRate:0,vehicleGrowthRate:0,bookingGrowthRate:0}),[v,N]=e.useState("pending"),[y,k]=e.useState(""),[C,S]=e.useState(null),[P,R]=e.useState(!1),[E,V]=e.useState("approve"),[I,F]=e.useState(""),$=async()=>{try{p(!0);try{const e=await oe.get("/admin/vehicles/pending");j(e.data.vehicles||e.data.data||[])}catch(e){}try{const e=(await oe.get("/admin/dashboard-stats")).data,s=e.stats||e.data;s&&f({totalUsers:s.users?.total||s.totalUsers||0,totalHosts:s.users?.hosts||s.totalHosts||0,totalVehicles:s.vehicles?.total||s.totalVehicles||0,pendingVehicles:s.vehicles?.pending||s.pendingVehicles||0,approvedVehicles:s.vehicles?.approved||s.approvedVehicles||0,rejectedVehicles:0,totalBookings:s.bookings?.total||s.totalBookings||0,activeBookings:s.bookings?.active||s.activeBookings||0,totalRevenue:s.revenue?.total||s.totalRevenue||0,monthlyRevenue:s.revenue?.monthly||0,averageBookingValue:0,userGrowthRate:s.growth?.users||0,vehicleGrowthRate:0,bookingGrowthRate:s.growth?.bookings||0})}catch(e){try{const e=(await oe.get("/admin/stats")).data.data;e&&f({totalUsers:e.overview?.totalUsers||0,totalHosts:0,totalVehicles:e.overview?.totalListings||0,pendingVehicles:e.overview?.pendingListings||0,approvedVehicles:0,rejectedVehicles:0,totalBookings:e.overview?.totalBookings||0,activeBookings:e.overview?.activeBookings||0,totalRevenue:e.revenue?.total||0,monthlyRevenue:e.revenue?.monthly||0,averageBookingValue:0,userGrowthRate:e.growth?.users||0,vehicleGrowthRate:0,bookingGrowthRate:e.growth?.bookings||0})}catch(s){}}}catch(e){g.error("Failed to load dashboard data")}finally{m(!1),p(!1)}};return e.useEffect(()=>{$();const e=setInterval($,3e4);return()=>clearInterval(e)},[]),x?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),s.jsx("p",{className:"text-white/70",children:"Loading dashboard..."})]})}):s.jsxs("div",{className:`space-y-6 ${a}`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(ae,{variant:"outline",onClick:()=>window.location.href="/",className:"flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),s.jsx("span",{children:"Home"})]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Admin Dashboard"}),s.jsxs("p",{className:"text-white/70",children:["Welcome back, ",l?.name||l?.email||"Admin"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs(ae,{variant:"outline",onClick:$,disabled:h,children:[s.jsx(O,{className:"w-4 h-4 mr-2 "+(h?"animate-spin":"")}),"Refresh"]}),s.jsxs(ae,{variant:"outline",children:[s.jsx(D,{className:"w-4 h-4 mr-2"}),"Export"]}),s.jsxs(ae,{children:[s.jsx(L,{className:"w-4 h-4 mr-2"}),"Settings"]}),s.jsxs(ae,{variant:"outline",onClick:async()=>{try{await r(),window.location.href="/"}catch(e){window.location.href="/"}},className:"bg-red-600/20 border-red-500/30 text-red-300 hover:bg-red-600/30",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Exit Admin"]})]})]}),s.jsx(re,{className:"p-0 overflow-hidden",children:s.jsx("div",{className:"flex border-b border-white/10",children:[{id:"overview",label:"Overview",icon:z},{id:"vehicles",label:"Vehicles",icon:t},{id:"users",label:"Users",icon:T},{id:"bookings",label:"Bookings",icon:_},{id:"analytics",label:"Analytics",icon:A},{id:"settings",label:"Settings",icon:L}].map(e=>s.jsxs("button",{onClick:()=>c(e.id),className:"flex items-center px-6 py-4 text-sm font-medium transition-all "+(n===e.id?"text-blue-400 border-b-2 border-blue-400 bg-blue-500/10":"text-white/70 hover:text-white hover:bg-white/5"),children:[s.jsx(e.icon,{className:"w-4 h-4 mr-2"}),e.label]},e.id))})}),s.jsxs(me,{mode:"wait",children:["overview"===n&&s.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(re,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/60 text-sm",children:"Total Users"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:b.totalUsers}),s.jsxs("p",{className:"text-green-400 text-xs",children:["+",b.userGrowthRate,"% this month"]})]}),s.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center",children:s.jsx(T,{className:"w-6 h-6 text-blue-400"})})]})}),s.jsx(re,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/60 text-sm",children:"Total Vehicles"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:b.totalVehicles}),s.jsxs("p",{className:"text-green-400 text-xs",children:["+",b.vehicleGrowthRate,"% this month"]})]}),s.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-full flex items-center justify-center",children:s.jsx(t,{className:"w-6 h-6 text-green-400"})})]})}),s.jsx(re,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/60 text-sm",children:"Active Bookings"}),s.jsx("p",{className:"text-2xl font-bold text-white",children:b.activeBookings}),s.jsxs("p",{className:"text-green-400 text-xs",children:["+",b.bookingGrowthRate,"% this month"]})]}),s.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-full flex items-center justify-center",children:s.jsx(_,{className:"w-6 h-6 text-purple-400"})})]})}),s.jsx(re,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white/60 text-sm",children:"Monthly Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",b.monthlyRevenue.toLocaleString()]}),s.jsx("p",{className:"text-green-400 text-xs",children:"+12.5% from last month"})]}),s.jsx("div",{className:"w-12 h-12 bg-yellow-500/20 rounded-full flex items-center justify-center",children:s.jsx(w,{className:"w-6 h-6 text-yellow-400"})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(re,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Pending Vehicle Approvals"}),s.jsxs("span",{className:"px-2 py-1 bg-yellow-500/20 text-yellow-400 rounded-full text-xs font-medium",children:[b.pendingVehicles," pending"]})]}),s.jsxs("div",{className:"space-y-3",children:[u.slice(0,3).map(e=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-600 to-gray-800 rounded-lg flex items-center justify-center",children:s.jsx(t,{className:"w-5 h-5 text-white/60"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-medium",children:e.title}),s.jsxs("p",{className:"text-white/60 text-sm",children:[e.host.first_name," ",e.host.last_name]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>{S(e),V("approve"),R(!0)},className:"w-8 h-8 bg-green-500/20 hover:bg-green-500/30 rounded-lg flex items-center justify-center transition-colors",children:s.jsx(i,{className:"w-4 h-4 text-green-400"})}),s.jsx("button",{onClick:()=>{S(e),V("reject"),R(!0)},className:"w-8 h-8 bg-red-500/20 hover:bg-red-500/30 rounded-lg flex items-center justify-center transition-colors",children:s.jsx(q,{className:"w-4 h-4 text-red-400"})})]})]},e.id)),0===u.length&&s.jsxs("div",{className:"text-center py-4",children:[s.jsx(i,{className:"w-8 h-8 text-green-400 mx-auto mb-2"}),s.jsx("p",{className:"text-white/70",children:"No pending vehicle approvals"})]})]})]}),s.jsxs(re,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Recent Activity"}),s.jsx(H,{className:"w-5 h-5 text-white/60"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white/5 rounded-lg",children:[s.jsx("div",{className:"w-8 h-8 bg-green-500/20 rounded-full flex items-center justify-center",children:s.jsx(i,{className:"w-4 h-4 text-green-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white text-sm",children:'Vehicle "Toyota Corolla" approved'}),s.jsx("p",{className:"text-white/60 text-xs",children:"2 minutes ago"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white/5 rounded-lg",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded-full flex items-center justify-center",children:s.jsx(d,{className:"w-4 h-4 text-blue-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white text-sm",children:"New user registration"}),s.jsx("p",{className:"text-white/60 text-xs",children:"5 minutes ago"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-white/5 rounded-lg",children:[s.jsx("div",{className:"w-8 h-8 bg-purple-500/20 rounded-full flex items-center justify-center",children:s.jsx(_,{className:"w-4 h-4 text-purple-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white text-sm",children:"New booking created"}),s.jsx("p",{className:"text-white/60 text-xs",children:"10 minutes ago"})]})]})]})]})]})]},"overview"),"vehicles"===n&&s.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[s.jsx(re,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx(ne,{placeholder:"Search vehicles...",value:y,onChange:e=>k(e),icon:"Search"})}),s.jsx("div",{className:"flex gap-2",children:["all","pending","approved","rejected"].map(e=>s.jsx("button",{onClick:()=>N(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+(v===e?"bg-blue-500/20 text-blue-400":"bg-white/10 text-white/70 hover:bg-white/20"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})}),s.jsxs(re,{className:"p-0 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-white/5 border-b border-white/10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-white/60 font-medium",children:"Vehicle"}),s.jsx("th",{className:"px-6 py-4 text-left text-white/60 font-medium",children:"Host"}),s.jsx("th",{className:"px-6 py-4 text-left text-white/60 font-medium",children:"Price"}),s.jsx("th",{className:"px-6 py-4 text-left text-white/60 font-medium",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-left text-white/60 font-medium",children:"Created"}),s.jsx("th",{className:"px-6 py-4 text-left text-white/60 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:u.map(e=>s.jsxs(he.tr,{initial:{opacity:0},animate:{opacity:1},className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-600 to-gray-800 rounded-lg flex items-center justify-center",children:s.jsx(t,{className:"w-6 h-6 text-white/60"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-medium",children:e.title}),s.jsxs("p",{className:"text-white/60 text-sm",children:[e.year," â¢ ",e.vehicle_type]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsxs("p",{className:"text-white font-medium",children:[e.host.first_name," ",e.host.last_name]}),s.jsx("p",{className:"text-white/60 text-sm",children:e.host.email})]})}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsxs("p",{className:"text-white font-medium",children:["R",e.price_per_day]}),s.jsx("p",{className:"text-white/60 text-sm",children:"per day"})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("approved"===e.status?"text-green-400 bg-green-500/20":"rejected"===e.status?"text-red-400 bg-red-500/20":"text-yellow-400 bg-yellow-500/20"),children:e.status})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("p",{className:"text-white/80 text-sm",children:new Date(e.created_at).toLocaleDateString()})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>{S(e),alert(`Vehicle: ${e.title}\nHost: ${e.host.first_name} ${e.host.last_name}\nPrice: R${e.price_per_day}/day\nStatus: ${e.status}`)},className:"w-8 h-8 bg-blue-500/20 hover:bg-blue-500/30 rounded-lg flex items-center justify-center transition-colors",children:s.jsx(o,{className:"w-4 h-4 text-blue-400"})}),"pending"===e.status&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>{S(e),V("approve"),R(!0)},className:"w-8 h-8 bg-green-500/20 hover:bg-green-500/30 rounded-lg flex items-center justify-center transition-colors",children:s.jsx(i,{className:"w-4 h-4 text-green-400"})}),s.jsx("button",{onClick:()=>{S(e),V("reject"),R(!0)},className:"w-8 h-8 bg-red-500/20 hover:bg-red-500/30 rounded-lg flex items-center justify-center transition-colors",children:s.jsx(q,{className:"w-4 h-4 text-red-400"})})]})]})})]},e.id))})]})}),0===u.length&&s.jsxs("div",{className:"p-12 text-center",children:[s.jsx(t,{className:"w-16 h-16 text-white/40 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No vehicles found"}),s.jsx("p",{className:"text-white/60",children:"No vehicles match your current filters"})]})]})]},"vehicles")]}),s.jsx(me,{children:P&&C&&s.jsx(he.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs(he.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-md bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"approve"===E?"Approve Vehicle":"Reject Vehicle"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-white/70 mb-2",children:"approve"===E?`Are you sure you want to approve "${C.title}"?`:`Are you sure you want to reject "${C.title}"?`}),"reject"===E&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Rejection Reason (Optional)"}),s.jsx("textarea",{value:I,onChange:e=>F(e.target.value),placeholder:"Enter reason for rejection...",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{R(!1),S(null),F("")},className:"flex-1 px-4 py-2 bg-white/10 text-white/70 rounded-lg hover:bg-white/20 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:()=>(async(e,s,t)=>{try{let i;try{i=await oe.patch(`/admin/vehicles/${e}/approve`,{status:"approve"===s?"approved":"rejected",reason:t||void 0})}catch(a){i=await oe.patch(`/vehicles/${e}/approve`,{status:"approve"===s?"approved":"rejected",reason:t||void 0})}200===i.status?(j(a=>a.map(a=>a.id===e?{...a,status:"approve"===s?"approved":"rejected",rejection_reason:t}:a)),R(!1),S(null),F(""),g.success(`Vehicle ${"approve"===s?"approved":"rejected"} successfully`),$()):g.error(i.data?.error||"Failed to update vehicle status")}catch(a){g.error("Error updating vehicle status")}})(C.id,E,I),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-colors "+("approve"===E?"bg-green-500 text-white hover:bg-green-600":"bg-red-500 text-white hover:bg-red-600"),children:"approve"===E?"Approve":"Reject"})]})]})})})]})},Ue=e.lazy(()=>se(()=>import("./Home-CkSkdPHV.js"),__vite__mapDeps([8,1,2,0,3,4,5,9]),import.meta.url)),Oe=e.lazy(()=>se(()=>import("./Search-CBP6MFeb.js"),__vite__mapDeps([10,1,2,0,3,4,5,7]),import.meta.url)),qe=e.lazy(()=>se(()=>import("./VehicleDetail-DOFV41nR.js"),__vite__mapDeps([11,1,2,0,3,4,5]),import.meta.url)),He=e.lazy(()=>se(()=>import("./UnifiedCheckout-BVgG6pDw.js"),__vite__mapDeps([12,1,2,0,3,4,5]),import.meta.url)),We=e.lazy(()=>se(()=>import("./About-Yrt5Fjn7.js"),__vite__mapDeps([13,1,2,0,3,4,5]),import.meta.url)),Ge=e.lazy(()=>se(()=>import("./Contact-nkxukP09.js"),__vite__mapDeps([14,1,2,0,3,4,5]),import.meta.url)),Ye=e.lazy(()=>se(()=>import("./admin-pages-BP3oSTfT.js").then(e=>e.q),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),Je=e.lazy(()=>se(()=>import("./FAQ-C7BY7rGY.js"),__vite__mapDeps([15,1,2,0,3,4,5]),import.meta.url)),Xe=e.lazy(()=>se(()=>import("./Pricing-CyixrE79.js"),__vite__mapDeps([16,1,2,0,3,4,5,9]),import.meta.url)),Qe=e.lazy(()=>se(()=>import("./Login-yw2Gs-oK.js"),__vite__mapDeps([17,1,2,0,3,4,5]),import.meta.url)),Ze=e.lazy(()=>se(()=>import("./Signup-BnQ4K24E.js"),__vite__mapDeps([18,1,2,0,3,4,5,7]),import.meta.url)),Ke=e.lazy(()=>se(()=>import("./Unauthorized-B2sR8zxb.js"),__vite__mapDeps([19,1,2,0,3,4,5]),import.meta.url)),es=e.lazy(()=>se(()=>import("./NotFound-DQT5l-nI.js"),__vite__mapDeps([20,1,2]),import.meta.url)),ss=new xe({defaultOptions:{queries:{staleTime:6e5,gcTime:18e5,retry:1,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1},mutations:{retry:1}}});function ts(){const s=u();return e.useEffect(()=>{const e=sessionStorage.getItem("redirect");e&&(sessionStorage.removeItem("redirect"),s(e,{replace:!0}))},[s]),null}function as(){return e.useEffect(()=>{const e=e=>{if(e.message&&(e.message.includes("message channel closed")||e.message.includes("listener indicated an asynchronous response")))return e.preventDefault(),e.stopPropagation(),!1},s=e=>{if(e.reason&&e.reason.message&&(e.reason.message.includes("message channel closed")||e.reason.message.includes("listener indicated an asynchronous response")))return e.preventDefault(),e.stopPropagation(),!1};return window.addEventListener("error",e,!0),window.addEventListener("unhandledrejection",s,!0),()=>{window.removeEventListener("error",e,!0),window.removeEventListener("unhandledrejection",s,!0)}},[]),s.jsx(W,{children:s.jsx(G,{client:ss,children:s.jsx(ye,{children:s.jsx(De,{children:s.jsxs(Y,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[s.jsx(ts,{}),s.jsx(de,{children:s.jsx(fe,{children:s.jsx("div",{className:"App",children:s.jsx(e.Suspense,{fallback:s.jsx(Ve,{text:"Loading RideShare SA..."}),children:s.jsxs(J,{children:[s.jsx(X,{path:"/",element:s.jsx(Pe,{children:s.jsx(Ue,{})})}),s.jsx(X,{path:"/search",element:s.jsx(Pe,{children:s.jsx(Oe,{})})}),s.jsx(X,{path:"/vehicle/:id",element:s.jsx(Pe,{children:s.jsx(qe,{})})}),s.jsx(X,{path:"/checkout/:listingId",element:s.jsx(Re,{children:s.jsx(Pe,{children:s.jsx(He,{})})})}),s.jsx(X,{path:"/about",element:s.jsx(Pe,{children:s.jsx(We,{})})}),s.jsx(X,{path:"/contact",element:s.jsx(Pe,{children:s.jsx(Ge,{})})}),s.jsx(X,{path:"/faq",element:s.jsx(Pe,{children:s.jsx(Je,{})})}),s.jsx(X,{path:"/pricing",element:s.jsx(Pe,{children:s.jsx(Xe,{})})}),s.jsx(X,{path:"/login",element:s.jsx(Qe,{})}),s.jsx(X,{path:"/signup",element:s.jsx(Ze,{})}),s.jsx(X,{path:"/register",element:s.jsx(Ze,{})}),s.jsx(X,{path:"/unauthorized",element:s.jsx(Ke,{})}),s.jsx(X,{path:"/dashboard/*",element:s.jsx(Re,{children:s.jsx(Pe,{children:s.jsx(Be,{})})})}),s.jsx(X,{path:"/admin-dashboard/*",element:s.jsx(_e,{children:s.jsx(Me,{})})}),s.jsx(X,{path:"/legacy-admin-dashboard",element:s.jsx(Ye,{})}),s.jsx(X,{path:"*",element:s.jsx(Pe,{children:s.jsx(es,{})})})]})})})})})]})})})})})}Q.createRoot(document.getElementById("root")).render(s.jsx(U.StrictMode,{children:s.jsx(as,{})}));
