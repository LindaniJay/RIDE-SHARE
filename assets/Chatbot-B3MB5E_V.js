import{r as e,j as t}from"./react-vendor-DFf_48ct.js";import{I as r}from"./admin-pages-DaMQ-yF4.js";import{m as s,A as o}from"./ui-libs-CFQMNqiz.js";import"./vendor-eiHq4GmM.js";import"./firebase-B6ibEfTD.js";import"./utils-Bi8vyz5k.js";const a=()=>{const[a,n]=e.useState(!1),[i,l]=e.useState([{id:"1",text:"Hi! I'm your RideShare SA assistant. How can I help you today?",isUser:!1,timestamp:new Date,type:"text"}]),[d,c]=e.useState(""),[h,u]=e.useState(!1),[p,m]=e.useState({conversationHistory:[],userPreferences:{}}),y=e.useRef(null),x=[{keywords:["hello","hi","hey","good morning","good afternoon","good evening"],synonyms:["greetings","salutations","howdy"],response:"Hello! Welcome to RideShare SA! I'm here to help you with bookings, listings, and any questions you might have. What can I assist you with today?",followUp:["How do I book a vehicle?","How do I list my car?","What are your prices?"],priority:1},{keywords:["book","rent","reserve","hire","rental"],synonyms:["reservation","booking","renting","hiring"],response:'Great! To book a vehicle:\n\n1. Go to "Browse Rentals" in the menu\n2. Search by location and dates\n3. Filter by vehicle type and features\n4. Click "Book Now" on your chosen vehicle\n5. Complete the booking process\n\nNeed help with any of these steps?',followUp:["What documents do I need?","How do I cancel a booking?","What if the car breaks down?"],priority:2},{keywords:["list","host","earn","money","income"],synonyms:["hosting","listing","earning","revenue"],response:'Perfect! To list your vehicle and start earning:\n\n1. Click "List Your Vehicle" in the menu\n2. Create a host account (if you haven\'t already)\n3. Add vehicle details, photos, and description\n4. Set your availability and pricing\n5. Submit for approval\n\nOur hosts typically earn R200-800 per day!',followUp:["What are the requirements?","How much can I earn?","What insurance do I need?"],priority:2},{keywords:["price","cost","expensive","cheap","affordable"],synonyms:["pricing","rates","fees","costs"],response:"Our pricing is competitive and varies by vehicle:\n\nâ€¢ Economy cars: R150-300/day\nâ€¢ SUVs: R300-500/day\nâ€¢ Luxury vehicles: R500+/day\nâ€¢ Bakkies: R200-400/day\n\nAll prices include basic insurance. You can see exact pricing when browsing vehicles!",followUp:["Are there any hidden fees?","Do you offer discounts?","What payment methods do you accept?"],priority:3},{keywords:["safe","insurance","secure","protection"],synonyms:["safety","security","insured","protected"],response:"Safety is our #1 priority!\n\nâ€¢ All vehicles are fully insured\nâ€¢ Hosts are verified and background checked\nâ€¢ 24/7 support team\nâ€¢ Secure payment processing\nâ€¢ Vehicle condition checks\n\nYou can read reviews and safety guidelines before booking.",followUp:["What insurance is included?","How do you verify hosts?","What if there's an accident?"],priority:3},{keywords:["pay","payment","eft","card","money"],synonyms:["paying","billing","transaction","checkout"],response:"We accept multiple payment methods:\n\nâ€¢ Credit/Debit cards\nâ€¢ EFT transfers\nâ€¢ Payfast (South African)\nâ€¢ Bank transfers\n\nPayment is 100% secure and processed when you confirm your booking. No hidden fees!",followUp:["When do I get charged?","Can I get a refund?","Do you accept cash?"],priority:3},{keywords:["where","location","city","area"],synonyms:["place","region","town","province"],response:"We operate across South Africa! ðŸ‡¿ðŸ‡¦\n\nMajor cities:\nâ€¢ Cape Town (Western Cape)\nâ€¢ Johannesburg (Gauteng)\nâ€¢ Durban (KwaZulu-Natal)\nâ€¢ Pretoria (Gauteng)\nâ€¢ Port Elizabeth (Eastern Cape)\nâ€¢ Bloemfontein (Free State)\nâ€¢ Nelspruit (Mpumalanga)\nâ€¢ Polokwane (Limpopo)\nâ€¢ Kimberley (Northern Cape)\n\nUse the location filter to find vehicles near you!",followUp:["Do you deliver to my area?","Can I pick up from the airport?","Are there any restrictions?"],priority:3},{keywords:["help","support","problem","issue","trouble"],synonyms:["assistance","aid","support","problem"],response:"I'm here to help! ðŸ¤\n\nFor additional support:\nâ€¢ FAQ page: /faq\nâ€¢ Email: support@rideshare-sa.co.za\nâ€¢ Phone: +27 21 123 4567\nâ€¢ Live chat: Right here!\nâ€¢ WhatsApp: +27 82 123 4567\n\nWhat specific issue can I help you with?",followUp:["How do I contact support?","What are your hours?","Can you escalate my issue?"],priority:4}];e.useEffect(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[i]);const g=e.useCallback(e=>{const t=e.toLowerCase(),r=t.split(/\s+/);let s=null,o=0;for(const a of x){let e=0;for(const r of a.keywords)t.includes(r)&&(e+=2);for(const r of a.synonyms)t.includes(r)&&(e+=1.5);for(const t of r)for(const r of a.keywords)(r.includes(t)||t.includes(r))&&(e+=.5);e*=1+.1*a.priority,e>o&&(o=e,s=a)}return o>1?s:null},[]),f=e.useCallback(e=>{const t=g(e);return t?(m(r=>({...r,lastIntent:t.keywords[0],conversationHistory:[...r.conversationHistory.slice(-4),e]})),{response:t.response,followUp:t.followUp}):p.conversationHistory.slice(-3).some(e=>e.toLowerCase().includes("book")||e.toLowerCase().includes("rent"))?{response:"I see you're interested in booking!\n\nI can help with:\nâ€¢ Finding the right vehicle\nâ€¢ Booking process\nâ€¢ Payment options\nâ€¢ Pickup locations\n\nWhat specific aspect would you like to know more about?",followUp:["What documents do I need?","How do I cancel?","What if there's a problem?"]}:{response:`I understand you're asking about: "${e}"\n\nI can help with:\nâ€¢ Booking vehicles\nâ€¢ Listing your car\nâ€¢ Pricing information\nâ€¢ Safety & insurance\nâ€¢ Payment methods\nâ€¢ Locations\nâ€¢ General support\n\nWhat would you like to know more about?`,followUp:["How do I book a vehicle?","How do I list my car?","What are your prices?","Is it safe?"]}},[g,p.conversationHistory]),b=async e=>{const t=e||d.trim();if(!t)return;const r={id:Date.now().toString(),text:t,isUser:!0,timestamp:new Date,type:"text"};l(e=>[...e,r]),c(""),u(!0);const s=800+1200*Math.random();setTimeout(()=>{const e=f(t),r={id:(Date.now()+1).toString(),text:e.response,isUser:!1,timestamp:new Date,type:"text"};l(e=>[...e,r]),u(!1)},s)};return t.jsxs(t.Fragment,{children:[t.jsx(s.button,{onClick:()=>n(!a),className:"fixed bottom-6 right-6 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white p-4 rounded-full shadow-2xl z-50 transition-all duration-300 hover:shadow-blue-500/25",whileHover:{scale:1.1,rotate:5},whileTap:{scale:.95},"aria-label":"Open chat",children:t.jsxs("div",{className:"relative",children:[t.jsx(o,{mode:"wait",children:a?t.jsx(s.svg,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})},"close"):t.jsx(s.svg,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})},"chat")}),!a&&t.jsx(s.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"})]})}),t.jsx(o,{children:a&&t.jsxs(s.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.8},transition:{duration:.3,type:"spring",damping:25,stiffness:500},className:"fixed bottom-20 right-4 w-80 h-[400px] bg-white dark:bg-gray-900 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 z-50 flex flex-col backdrop-blur-sm bg-white/95 dark:bg-gray-900/95",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-3 rounded-t-xl flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center mr-2 backdrop-blur-sm",children:t.jsx("span",{className:"text-sm",children:"ðŸ¤–"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-sm",children:"RideShare Assistant"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-1.5 h-1.5 bg-green-400 rounded-full mr-1 animate-pulse"}),t.jsx("p",{className:"text-xs text-blue-100",children:"Online"})]})]})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(s.button,{onClick:()=>{l([{id:"1",text:"Hi! I'm your RideShare SA assistant. How can I help you today?",isUser:!1,timestamp:new Date,type:"text"}]),m({conversationHistory:[],userPreferences:{}})},className:"text-white hover:text-blue-200 transition-colors p-1.5 rounded hover:bg-white/10",title:"Start new conversation",whileHover:{scale:1.1},whileTap:{scale:.9},children:t.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),t.jsx(s.button,{onClick:()=>n(!1),className:"text-white hover:text-blue-200 transition-colors p-1.5 rounded hover:bg-white/10",whileHover:{scale:1.1},whileTap:{scale:.9},children:t.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 bg-gray-50 dark:bg-gray-800",children:[i.map(e=>t.jsx(s.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.2},className:"flex "+(e.isUser?"justify-end":"justify-start"),children:t.jsxs("div",{className:"flex items-end space-x-1 "+(e.isUser?"flex-row-reverse space-x-reverse":""),children:[!e.isUser&&t.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"ðŸ¤–"}),t.jsxs("div",{className:"max-w-[200px] px-3 py-2 rounded-lg shadow-sm "+(e.isUser?"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-br-sm":"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600 rounded-bl-sm"),children:[t.jsx("div",{className:"text-xs whitespace-pre-line leading-relaxed",children:e.text}),t.jsx("p",{className:"text-[10px] mt-1 "+(e.isUser?"text-blue-100":"text-gray-500 dark:text-gray-400"),children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.isUser&&t.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:t.jsx(r,{name:"User",size:"sm"})})]})},e.id)),h&&t.jsx(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex justify-start",children:t.jsxs("div",{className:"flex items-end space-x-1",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"ðŸ¤–"}),t.jsx("div",{className:"bg-white dark:bg-gray-700 px-3 py-2 rounded-lg rounded-bl-sm border border-gray-200 dark:border-gray-600 shadow-sm",children:t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full animate-bounce"}),t.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),t.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),t.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:"typing..."})]})})]})}),t.jsx("div",{ref:y})]}),1===i.length&&t.jsxs("div",{className:"px-4 pb-2 bg-gray-50 dark:bg-gray-800",children:[t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3 font-medium",children:"Quick questions:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:[{text:"How do I book a vehicle?",icon:"Car"},{text:"How do I list my car?",icon:"DollarSign"},{text:"What are your prices?",icon:"DollarSign"},{text:"Is it safe?",icon:"Shield"},{text:"Contact support",icon:"Phone"}].map((e,o)=>t.jsxs(s.button,{onClick:()=>{return t=e.text,void b(t);var t},className:"text-xs bg-white dark:bg-gray-700 hover:bg-blue-50 dark:hover:bg-gray-600 px-3 py-2 rounded-full transition-all duration-200 border border-gray-200 dark:border-gray-600 hover:border-blue-300 dark:hover:border-gray-500 flex items-center space-x-1 shadow-sm hover:shadow-md",whileHover:{scale:1.05},whileTap:{scale:.95},children:[t.jsx(r,{name:e.icon,size:"sm"}),t.jsx("span",{children:e.text})]},o))})]}),t.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx("input",{type:"text",value:d,onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b())},placeholder:"Type your message...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-1 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white text-xs placeholder-gray-500 dark:placeholder-gray-400 transition-all duration-200 shadow-sm focus:shadow-md"}),d&&t.jsx(s.div,{initial:{scale:0},animate:{scale:1},className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:t.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"})})]}),t.jsx(s.button,{onClick:()=>b(),disabled:!d.trim()||h,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 disabled:from-gray-300 disabled:to-gray-300 disabled:cursor-not-allowed text-white px-3 py-2 rounded-lg transition-all duration-200 flex items-center justify-center shadow-lg hover:shadow-xl disabled:shadow-none",whileHover:{scale:d.trim()&&!h?1.05:1},whileTap:{scale:d.trim()&&!h?.95:1},children:h?t.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}):t.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})})]})};export{a as default};
