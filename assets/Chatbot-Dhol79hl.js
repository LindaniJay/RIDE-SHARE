import{r as e,j as t}from"./react-vendor-CKnA8pDM.js";import{I as a}from"./admin-pages-BP3oSTfT.js";import{m as i,A as r}from"./ui-libs-BJqHVFID.js";import"./vendor-CqouD_UJ.js";import"./firebase-R_5bE8qc.js";import"./utils-Bi8vyz5k.js";const n=()=>{const[n,s]=e.useState(!1),[o,l]=e.useState([{id:"1",text:"Hello! ðŸ‘‹ Welcome to RideShare SA! I'm your intelligent assistant, ready to help you with bookings, listings, and any questions you might have. How can I assist you today?",isUser:!1,timestamp:new Date,type:"text",context:{intent:"greeting",confidence:1,sentiment:"positive",language:"en"}}]),[d,c]=e.useState(""),[u,p]=e.useState(!1),[m,h]=e.useState({flowHistory:[],userData:{},preferences:{language:"en",notifications:!0,voiceEnabled:!1},sessionData:{startTime:new Date,lastActivity:new Date,messageCount:0},analytics:{intents:[],sentiments:[],languages:[],topics:[]}}),y=e.useRef(null),g={booking_wizard:{id:"booking_wizard",name:"Smart Booking Assistant",description:"Intelligent vehicle booking with personalized recommendations",startNode:"welcome",variables:{},metadata:{category:"booking",priority:1,estimatedDuration:5,requiredPermissions:["location","calendar"]},nodes:{welcome:{id:"welcome",type:"question",content:{text:"ðŸš— Great! Let's find you the perfect vehicle! I'll guide you through our smart booking process.\n\nFirst, where would you like to pick up your vehicle?",options:[{id:"current_location",text:"Use my current location",action:"get_location",next:"dates"},{id:"search_location",text:"Search for a location",action:"search_location",next:"location_search"},{id:"popular_locations",text:"Choose from popular locations",action:"show_popular",next:"popular_locations"}]},next:"dates"},location_search:{id:"location_search",type:"question",content:{text:"ðŸ“ Please enter the city or area where you'd like to pick up your vehicle:",form:[{id:"location",type:"text",label:"Pickup Location",placeholder:"e.g., Cape Town, Johannesburg, Durban...",required:!0,validation:[{field:"location",type:"required",message:"Please enter a location"},{field:"location",type:"min",value:2,message:"Location must be at least 2 characters"}]}]},next:"dates"},popular_locations:{id:"popular_locations",type:"question",content:{text:"ðŸ“ Choose from our popular pickup locations:",options:[{id:"cape_town",text:"Cape Town",data:{city:"Cape Town",province:"Western Cape"},next:"dates"},{id:"johannesburg",text:"Johannesburg",data:{city:"Johannesburg",province:"Gauteng"},next:"dates"},{id:"durban",text:"Durban",data:{city:"Durban",province:"KwaZulu-Natal"},next:"dates"},{id:"pretoria",text:"Pretoria",data:{city:"Pretoria",province:"Gauteng"},next:"dates"},{id:"port_elizabeth",text:"Port Elizabeth",data:{city:"Port Elizabeth",province:"Eastern Cape"},next:"dates"}]},next:"dates"},dates:{id:"dates",type:"question",content:{text:"ðŸ“… When do you need the vehicle?",form:[{id:"start_date",type:"date",label:"Pickup Date",required:!0,validation:[{field:"start_date",type:"required",message:"Please select a pickup date"},{field:"start_date",type:"date",message:"Please select a valid date"}]},{id:"end_date",type:"date",label:"Return Date",required:!0,validation:[{field:"end_date",type:"required",message:"Please select a return date"},{field:"end_date",type:"date",message:"Please select a valid date"}]}]},next:"vehicle_preferences"},vehicle_preferences:{id:"vehicle_preferences",type:"question",content:{text:"ðŸš™ What type of vehicle are you looking for?",options:[{id:"economy",text:"Economy Car",data:{type:"economy",price_range:"150-300"},next:"passengers"},{id:"suv",text:"SUV",data:{type:"suv",price_range:"300-500"},next:"passengers"},{id:"luxury",text:"Luxury Vehicle",data:{type:"luxury",price_range:"500+"},next:"passengers"},{id:"bakkie",text:"Bakkie",data:{type:"bakkie",price_range:"200-400"},next:"passengers"},{id:"van",text:"Van",data:{type:"van",price_range:"250-450"},next:"passengers"},{id:"motorcycle",text:"Motorcycle",data:{type:"motorcycle",price_range:"100-200"},next:"passengers"}]},next:"passengers"},passengers:{id:"passengers",type:"question",content:{text:"ðŸ‘¥ How many passengers will be traveling?",form:[{id:"passenger_count",type:"number",label:"Number of Passengers",placeholder:"1-8",required:!0,validation:[{field:"passenger_count",type:"required",message:"Please enter number of passengers"},{field:"passenger_count",type:"min",value:1,message:"Must be at least 1 passenger"},{field:"passenger_count",type:"max",value:8,message:"Maximum 8 passengers"}]}]},next:"additional_preferences"},additional_preferences:{id:"additional_preferences",type:"question",content:{text:"âš™ï¸ Any additional preferences or requirements?",options:[{id:"automatic",text:"Automatic transmission",data:{transmission:"automatic"},next:"search_vehicles"},{id:"manual",text:"Manual transmission",data:{transmission:"manual"},next:"search_vehicles"},{id:"no_preference",text:"No preference",data:{transmission:"any"},next:"search_vehicles"},{id:"add_requirements",text:"Add more requirements",action:"show_requirements_form",next:"requirements_form"}]},next:"search_vehicles"},requirements_form:{id:"requirements_form",type:"question",content:{text:"ðŸ“‹ Please specify any additional requirements:",form:[{id:"transmission",type:"select",label:"Transmission",options:["Automatic","Manual","No Preference"],required:!1},{id:"fuel_type",type:"select",label:"Fuel Type",options:["Petrol","Diesel","Electric","Hybrid","No Preference"],required:!1},{id:"features",type:"multiselect",label:"Desired Features",options:["GPS","Bluetooth","Air Conditioning","USB Ports","Backup Camera","Sunroof"],required:!1}]},next:"search_vehicles"},search_vehicles:{id:"search_vehicles",type:"action",content:{text:"ðŸ” Searching for the perfect vehicle for you...",conditions:[{field:"passenger_count",operator:"greater",value:4,next:"large_vehicle_search"},{field:"vehicle_type",operator:"equals",value:"luxury",next:"luxury_vehicle_search"}]},next:"vehicle_results"},vehicle_results:{id:"vehicle_results",type:"carousel",content:{text:"ðŸŽ¯ Here are the best matches for your requirements:",carouselItems:[{id:"vehicle_1",title:"Toyota Corolla 2023",description:"Economy â€¢ Automatic â€¢ 4 passengers â€¢ R180/day",image:"/images/vehicles/corolla.jpg",action:"select_vehicle",data:{id:"vehicle_1",price:180,features:["GPS","Bluetooth","AC"]}},{id:"vehicle_2",title:"Honda Civic 2023",description:"Economy â€¢ Manual â€¢ 4 passengers â€¢ R160/day",image:"/images/vehicles/civic.jpg",action:"select_vehicle",data:{id:"vehicle_2",price:160,features:["GPS","Bluetooth"]}}]},next:"booking_confirmation"},booking_confirmation:{id:"booking_confirmation",type:"confirmation",content:{text:"âœ… Perfect! Let's confirm your booking details:",form:[{id:"driver_license",type:"text",label:"Driver's License Number",required:!0,validation:[{field:"driver_license",type:"required",message:"Driver's license is required"}]},{id:"phone",type:"phone",label:"Contact Number",required:!0,validation:[{field:"phone",type:"required",message:"Contact number is required"},{field:"phone",type:"phone",message:"Please enter a valid phone number"}]},{id:"email",type:"email",label:"Email Address",required:!0,validation:[{field:"email",type:"required",message:"Email is required"},{field:"email",type:"email",message:"Please enter a valid email"}]}]},next:"payment_method"},payment_method:{id:"payment_method",type:"question",content:{text:"ðŸ’³ How would you like to pay?",options:[{id:"credit_card",text:"Credit/Debit Card",data:{method:"card"},next:"payment_details"},{id:"eft",text:"EFT Transfer",data:{method:"eft"},next:"booking_summary"},{id:"payfast",text:"PayFast",data:{method:"payfast"},next:"booking_summary"}]},next:"booking_summary"},booking_summary:{id:"booking_summary",type:"confirmation",content:{text:"ðŸŽ‰ Congratulations! Your booking is confirmed!\n\nðŸ“‹ Booking Summary:\nâ€¢ Vehicle: [Vehicle Name]\nâ€¢ Dates: [Start Date] - [End Date]\nâ€¢ Location: [Pickup Location]\nâ€¢ Total: R[Total Amount]\n\nðŸ“± You'll receive a confirmation email shortly with all the details.\n\nIs there anything else I can help you with?"},next:"end"}}},listing_wizard:{id:"listing_wizard",name:"Host Onboarding Assistant",description:"Complete vehicle listing setup with verification",startNode:"welcome",variables:{},metadata:{category:"listing",priority:2,estimatedDuration:10,requiredPermissions:["camera","storage"]},nodes:{welcome:{id:"welcome",type:"question",content:{text:"ðŸ’° Welcome to RideShare SA Host Program! I'll help you list your vehicle and start earning money.\n\nLet's start with some basic information about your vehicle:"},next:"vehicle_basic_info"},vehicle_basic_info:{id:"vehicle_basic_info",type:"question",content:{text:"ðŸš— Tell me about your vehicle:",form:[{id:"vehicle_type",type:"select",label:"Vehicle Type",options:["Economy Car","SUV","Luxury Vehicle","Bakkie","Van","Motorcycle"],required:!0},{id:"make",type:"text",label:"Make",placeholder:"e.g., Toyota, BMW, Ford...",required:!0},{id:"model",type:"text",label:"Model",placeholder:"e.g., Corolla, X3, Ranger...",required:!0},{id:"year",type:"number",label:"Year",placeholder:"e.g., 2020",required:!0,validation:[{field:"year",type:"min",value:2e3,message:"Year must be 2000 or later"},{field:"year",type:"max",value:(new Date).getFullYear()+1,message:"Year cannot be in the future"}]}]},next:"vehicle_details"},vehicle_details:{id:"vehicle_details",type:"question",content:{text:"ðŸ“‹ Additional vehicle details:",form:[{id:"mileage",type:"number",label:"Mileage (km)",required:!0,validation:[{field:"mileage",type:"min",value:0,message:"Mileage cannot be negative"}]},{id:"transmission",type:"select",label:"Transmission",options:["Automatic","Manual"],required:!0},{id:"fuel_type",type:"select",label:"Fuel Type",options:["Petrol","Diesel","Electric","Hybrid"],required:!0},{id:"seats",type:"number",label:"Number of Seats",required:!0,validation:[{field:"seats",type:"min",value:1,message:"Must have at least 1 seat"},{field:"seats",type:"max",value:8,message:"Maximum 8 seats"}]}]},next:"location_pricing"},location_pricing:{id:"location_pricing",type:"question",content:{text:"ðŸ“ Where is your vehicle located and what's your pricing?",form:[{id:"location",type:"location",label:"Vehicle Location",required:!0},{id:"daily_rate",type:"number",label:"Daily Rate (ZAR)",placeholder:"e.g., 250",required:!0,validation:[{field:"daily_rate",type:"min",value:50,message:"Minimum rate is R50/day"},{field:"daily_rate",type:"max",value:2e3,message:"Maximum rate is R2000/day"}]},{id:"availability",type:"multiselect",label:"Available Days",options:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],required:!0}]},next:"document_upload"},document_upload:{id:"document_upload",type:"question",content:{text:"ðŸ“„ Please upload your required documents:",form:[{id:"id_document",type:"file",label:"ID Document",required:!0},{id:"drivers_license",type:"file",label:"Driver's License",required:!0},{id:"vehicle_registration",type:"file",label:"Vehicle Registration (NATIS)",required:!0},{id:"roadworthy_certificate",type:"file",label:"Roadworthy Certificate",required:!0},{id:"insurance_certificate",type:"file",label:"Insurance Certificate",required:!0}]},next:"listing_confirmation"},listing_confirmation:{id:"listing_confirmation",type:"confirmation",content:{text:"ðŸŽ‰ Excellent! Your vehicle listing has been submitted for review!\n\nðŸ“‹ Listing Summary:\nâ€¢ Vehicle: [Make] [Model] ([Year])\nâ€¢ Location: [Location]\nâ€¢ Daily Rate: R[Rate]\nâ€¢ Availability: [Days]\n\nâ° Our team will review your listing within 24-48 hours. You'll receive an email notification once approved.\n\nðŸ’° Once approved, you can start earning money immediately!\n\nIs there anything else I can help you with?"},next:"end"}}}},x=[{keywords:["hello","hi","hey","good morning","good afternoon","good evening","hallo","sawubona"],synonyms:["greetings","salutations","howdy","welcome"],response:"Hello! ðŸ‘‹ Welcome to RideShare SA! I'm your intelligent assistant, ready to help you with bookings, listings, and any questions you might have. How can I assist you today?",followUp:["Start booking wizard","Start listing wizard","What are your prices?","Find vehicles near me"],priority:1,confidence:.95,category:"general"},{keywords:["book","rent","reserve","hire","rental","start booking","booking wizard","bespreek","qala i-booking"],synonyms:["reservation","booking","renting","hiring","bespreking"],response:"Perfect! Let's find you the perfect vehicle! ðŸš— I'll guide you through our smart booking process with personalized recommendations.",followUp:["Start booking wizard","What documents do I need?","How do I cancel a booking?"],priority:2,flow:"booking_wizard",confidence:.9,category:"booking"},{keywords:["list","host","earn","money","income","start listing","listing wizard","lys","qala i-listing"],synonyms:["hosting","listing","earning","revenue","verdien"],response:"Excellent! Let's get you started as a host! ðŸ’° I'll guide you through our complete listing process to help you set up your vehicle and start earning money.",followUp:["Start listing wizard","What documents do I need?","How much can I earn?"],priority:2,flow:"listing_wizard",confidence:.9,category:"listing"},{keywords:["price","cost","expensive","cheap","affordable","rates","prys","amanani"],synonyms:["pricing","rates","fees","costs","tariewe"],response:"Our pricing is competitive and varies by vehicle type and location! ðŸ’°\n\n**Daily Rates:**\nâ€¢ Economy cars: R150-300/day\nâ€¢ SUVs: R300-500/day\nâ€¢ Luxury vehicles: R500+/day\nâ€¢ Bakkies: R200-400/day\nâ€¢ Vans: R250-450/day\n\nAll prices include basic insurance. You can see exact pricing when browsing vehicles!",followUp:["Are there any hidden fees?","Do you offer discounts?","What payment methods do you accept?"],priority:3,confidence:.85,category:"pricing"},{keywords:["safe","insurance","secure","protection","safety","veilig","uphephile"],synonyms:["safety","security","insured","protected","sekuriteit"],response:"Safety is our #1 priority! ðŸ›¡ï¸\n\n**Security Features:**\nâ€¢ All vehicles are fully insured\nâ€¢ Hosts are verified and background checked\nâ€¢ 24/7 support team\nâ€¢ Secure payment processing\nâ€¢ Vehicle condition checks\nâ€¢ Emergency roadside assistance\n\nYou can read reviews and safety guidelines before booking.",followUp:["What insurance is included?","How do you verify hosts?","What if there's an accident?"],priority:3,confidence:.85,category:"safety"},{keywords:["help","support","problem","issue","trouble","contact","hulp","usizo"],synonyms:["assistance","aid","support","problem","ondersteuning"],response:"I'm here to help! ðŸ¤\n\n**Support Options:**\nâ€¢ FAQ page: /faq\nâ€¢ Email: support@rideshare-sa.co.za\nâ€¢ Phone: +27 21 123 4567\nâ€¢ Live chat: Right here!\nâ€¢ WhatsApp: +27 82 123 4567\nâ€¢ Emergency: +27 82 999 8888\n\nWhat specific issue can I help you with?",followUp:["How do I contact support?","What are your hours?","Can you escalate my issue?"],priority:4,confidence:.8,category:"support"}];e.useEffect(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[o]);const f=e.useCallback(e=>{const t=g[e];if(!t)return;const a={...t,variables:{}};h(i=>({...i,currentFlow:a,currentNode:t.startNode,flowHistory:[...i.flowHistory,e]}));const i=t.nodes[t.startNode],r={id:Date.now().toString(),text:i.content.text,isUser:!1,timestamp:new Date,type:"booking_step",metadata:{step:i.id,data:i,options:i.content.options,formData:i.content.form,validation:i.validation}};l(e=>[...e,r])},[]),b=e.useCallback((e,t)=>{if(!m.currentFlow||!m.currentNode)return!1;const a=m.currentFlow,i=a.nodes[m.currentNode];if(!i)return!1;switch(i.type){case"question":return v(e,t,i,a);case"action":return w(i,a);case"confirmation":return k(e,i,a);case"branch":return j(e,i,a);default:return _(e,i,a)}},[m.currentFlow,m.currentNode]),v=(e,t,a,i)=>{if(a.content.form){const t=S(e,a.content.form,a.validation);if(!t.isValid){const e={id:Date.now().toString(),text:`âŒ ${t.errors.join("\n")}\n\n${a.content.text}`,isUser:!1,timestamp:new Date,type:"booking_step",metadata:{step:a.id,data:a}};return l(t=>[...t,e]),!0}}const r=t?.data||{input:e};h(e=>({...e,userData:{...e.userData,...r}}));const n=t?.next||a.next;return!(!n||!i.nodes[n]||(N(n,i),0))},w=(e,t)=>{const a=e.content.text;setTimeout(()=>{const a=e.next;a&&t.nodes[a]&&N(a,t)},2e3);const i={id:Date.now().toString(),text:a,isUser:!1,timestamp:new Date,type:"system"};return l(e=>[...e,i]),!0},k=(e,t,a)=>{const i={id:Date.now().toString(),text:t.content.text,isUser:!1,timestamp:new Date,type:"confirmation",metadata:{step:t.id,data:t}};l(e=>[...e,i]);const r=t.next;return"end"===r?q():r&&a.nodes[r]&&N(r,a),!0},j=(e,t,a)=>{if(t.content.conditions)for(const r of t.content.conditions)if(D(r,m.userData))return N(r.next,a),!0;const i=t.next;return!(!i||!a.nodes[i]||(N(i,a),0))},_=(e,t,a)=>{const i=t.next;return!(!i||!a.nodes[i]||(N(i,a),0))},N=(e,t)=>{const a=t.nodes[e];if(!a)return;h(t=>({...t,currentNode:e}));const i={id:Date.now().toString(),text:a.content.text,isUser:!1,timestamp:new Date,type:"booking_step",metadata:{step:a.id,data:a,options:a.content.options,formData:a.content.form,carouselItems:a.content.carouselItems,validation:a.validation}};l(e=>[...e,i])},q=()=>{h(e=>({...e,currentFlow:void 0,currentNode:void 0}))},S=(e,t,a)=>{const i=[];return!e.trim()&&t.some(e=>e.required)&&i.push("Please provide the required information"),{isValid:0===i.length,errors:i}},D=(e,t)=>{const a=t[e.field];switch(e.operator){case"equals":return a===e.value;case"contains":return a&&a.toString().toLowerCase().includes(e.value.toString().toLowerCase());case"greater":return a>e.value;case"less":return a<e.value;case"exists":return null!=a;default:return!1}},C=e.useCallback(e=>{const t=e.toLowerCase(),a=t.split(/\s+/);let i=null,r=0;for(const n of x){let e=0;for(const a of n.keywords)t.includes(a)&&(e+=2);for(const a of n.synonyms)t.includes(a)&&(e+=1.5);for(const t of a)for(const a of n.keywords)(a.includes(t)||t.includes(a))&&(e+=.5);e*=(1+.1*n.priority)*(n.confidence||.8),e>r&&(r=e,i=n)}return r>1?i:null},[]),L=e.useCallback(e=>{if(m.currentFlow&&b(e))return{response:"",followUp:[]};const t=C(e);return t?t.flow&&!m.currentFlow?(f(t.flow),{response:"",followUp:[]}):(h(e=>({...e,analytics:{...e.analytics,intents:[...e.analytics.intents,t.category],topics:[...e.analytics.topics,t.category]}})),{response:t.response,followUp:t.followUp}):m.analytics.intents.slice(-3).includes("booking")?{response:"I see you're interested in booking! ðŸš—\n\nI can help with:\nâ€¢ Finding the right vehicle\nâ€¢ Booking process\nâ€¢ Payment options\nâ€¢ Pickup locations\nâ€¢ Document requirements\n\nWhat specific aspect would you like to know more about?",followUp:["Start booking wizard","What documents do I need?","How do I cancel?","What if there's a problem?"]}:{response:`I understand you're asking about: "${e}" ðŸ¤”\n\nI can help you with:\nâ€¢ Booking vehicles (start booking wizard)\nâ€¢ Listing your car (start listing wizard)\nâ€¢ Pricing information\nâ€¢ Safety & insurance\nâ€¢ Payment methods\nâ€¢ Locations\nâ€¢ Document requirements\nâ€¢ General support\n\nWhat would you like to know more about?`,followUp:["Start booking wizard","Start listing wizard","What are your prices?","Is it safe?"]}},[C,m.currentFlow,b,f,m.analytics.intents]),P=async(e,t)=>{const a=e||d.trim();if(!a)return;const i={id:Date.now().toString(),text:a,isUser:!0,timestamp:new Date,type:"text",context:{intent:"user_input",confidence:1,sentiment:"neutral",language:m.preferences.language}};l(e=>[...e,i]),c(""),p(!0),h(e=>({...e,sessionData:{...e.sessionData,lastActivity:new Date,messageCount:e.sessionData.messageCount+1}}));const r=800+1200*Math.random();setTimeout(()=>{const e=L(a);if(e.response){const t={id:(Date.now()+1).toString(),text:e.response,isUser:!1,timestamp:new Date,type:"text",context:{intent:"bot_response",confidence:.9,sentiment:"positive",language:m.preferences.language}};l(e=>[...e,t])}p(!1)},r)};return t.jsxs(t.Fragment,{children:[t.jsx(i.button,{onClick:()=>s(!n),className:"fixed bottom-6 right-6 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white p-4 rounded-full shadow-2xl z-50 transition-all duration-300 hover:shadow-blue-500/25",whileHover:{scale:1.1,rotate:5},whileTap:{scale:.95},"aria-label":"Open chat",children:t.jsxs("div",{className:"relative",children:[t.jsx(r,{mode:"wait",children:n?t.jsx(i.svg,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})},"close"):t.jsx(i.svg,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})},"chat")}),!n&&t.jsx(i.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"})]})}),t.jsx(r,{children:n&&t.jsxs(i.div,{initial:{opacity:0,y:20,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.8},transition:{duration:.3,type:"spring",damping:25,stiffness:500},className:"fixed bottom-20 right-4 w-80 h-[450px] bg-white dark:bg-gray-900 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 z-50 flex flex-col backdrop-blur-sm bg-white/95 dark:bg-gray-900/95",children:[t.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-3 rounded-t-xl flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center mr-2 backdrop-blur-sm",children:t.jsx("span",{className:"text-sm",children:"ðŸ¤–"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-sm",children:"RideShare Assistant"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-1.5 h-1.5 bg-green-400 rounded-full mr-1 animate-pulse"}),t.jsx("p",{className:"text-xs text-blue-100",children:"Online"}),m.currentFlow&&t.jsx("span",{className:"ml-2 text-xs bg-blue-500 px-1 rounded",children:m.currentFlow.name})]})]})]}),t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(i.button,{onClick:()=>{const e=["en","af","zu"],t=e.indexOf(m.preferences.language),a=e[(t+1)%e.length];h(e=>({...e,preferences:{...e.preferences,language:a}}))},className:"text-white hover:text-blue-200 transition-colors p-1.5 rounded hover:bg-white/10",title:`Current language: ${m.preferences.language.toUpperCase()}`,whileHover:{scale:1.1},whileTap:{scale:.9},children:t.jsx("span",{className:"text-xs font-bold",children:"af"===m.preferences.language?"AF":"zu"===m.preferences.language?"ZU":"EN"})}),t.jsx(i.button,{onClick:()=>{l([{id:"1",text:"Hello! ðŸ‘‹ Welcome to RideShare SA! I'm your intelligent assistant, ready to help you with bookings, listings, and any questions you might have. How can I assist you today?",isUser:!1,timestamp:new Date,type:"text",context:{intent:"greeting",confidence:1,sentiment:"positive",language:"en"}}]),h({flowHistory:[],userData:{},preferences:{language:"en",notifications:!0,voiceEnabled:!1},sessionData:{startTime:new Date,lastActivity:new Date,messageCount:0},analytics:{intents:[],sentiments:[],languages:[],topics:[]}})},className:"text-white hover:text-blue-200 transition-colors p-1.5 rounded hover:bg-white/10",title:"Start new conversation",whileHover:{scale:1.1},whileTap:{scale:.9},children:t.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),t.jsx(i.button,{onClick:()=>s(!1),className:"text-white hover:text-blue-200 transition-colors p-1.5 rounded hover:bg-white/10",whileHover:{scale:1.1},whileTap:{scale:.9},children:t.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 bg-gray-50 dark:bg-gray-800",children:[o.map(e=>(e=>{switch(e.type){case"booking_step":return(e=>t.jsx(i.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.2},className:"flex justify-start",children:t.jsxs("div",{className:"flex items-end space-x-1",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"ðŸ¤–"}),t.jsxs("div",{className:"bg-white dark:bg-gray-700 px-3 py-2 rounded-lg rounded-bl-sm border border-gray-200 dark:border-gray-600 shadow-sm max-w-[200px]",children:[t.jsx("div",{className:"text-xs whitespace-pre-line leading-relaxed",children:e.text}),e.metadata?.options&&t.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.metadata.options.map((e,a)=>t.jsx(i.button,{onClick:()=>P(e.text),className:"text-[10px] bg-blue-100 dark:bg-blue-900 hover:bg-blue-200 dark:hover:bg-blue-800 px-2 py-1 rounded-full transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.text},a))}),t.jsx("p",{className:"text-[10px] mt-1 text-gray-500 dark:text-gray-400",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},e.id))(e);case"carousel":return(e=>t.jsx(i.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.2},className:"flex justify-start",children:t.jsxs("div",{className:"flex items-end space-x-1",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"ðŸ¤–"}),t.jsxs("div",{className:"bg-white dark:bg-gray-700 px-3 py-2 rounded-lg rounded-bl-sm border border-gray-200 dark:border-gray-600 shadow-sm max-w-[250px]",children:[t.jsx("div",{className:"text-xs whitespace-pre-line leading-relaxed",children:e.text}),e.metadata?.carouselItems&&t.jsx("div",{className:"mt-2 space-y-2",children:e.metadata.carouselItems.map((e,a)=>t.jsxs(i.div,{className:"bg-gray-50 dark:bg-gray-600 p-2 rounded-lg border border-gray-200 dark:border-gray-500",whileHover:{scale:1.02},children:[t.jsx("div",{className:"font-medium text-xs",children:e.title}),t.jsx("div",{className:"text-[10px] text-gray-600 dark:text-gray-300",children:e.description}),t.jsx(i.button,{onClick:()=>P(`Select ${e.title}`),className:"mt-1 text-[10px] bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Select"})]},a))}),t.jsx("p",{className:"text-[10px] mt-1 text-gray-500 dark:text-gray-400",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},e.id))(e);case"form":return(e=>t.jsx(i.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.2},className:"flex justify-start",children:t.jsxs("div",{className:"flex items-end space-x-1",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"ðŸ¤–"}),t.jsxs("div",{className:"bg-white dark:bg-gray-700 px-3 py-2 rounded-lg rounded-bl-sm border border-gray-200 dark:border-gray-600 shadow-sm max-w-[250px]",children:[t.jsx("div",{className:"text-xs whitespace-pre-line leading-relaxed",children:e.text}),e.metadata?.formData&&t.jsxs("div",{className:"mt-2 space-y-2",children:[e.metadata.formData.map((e,a)=>t.jsxs("div",{children:[t.jsxs("label",{className:"text-[10px] font-medium text-gray-700 dark:text-gray-300",children:[e.label," ",e.required&&"*"]}),"select"===e.type?t.jsxs("select",{className:"w-full text-[10px] border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-800",children:[t.jsxs("option",{value:"",children:["Select ",e.label]}),e.options?.map((e,a)=>t.jsx("option",{value:e,children:e},a))]}):t.jsx("input",{type:e.type,placeholder:e.placeholder,className:"w-full text-[10px] border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-800"})]},a)),t.jsx(i.button,{onClick:()=>P("Submit form"),className:"w-full text-[10px] bg-green-500 hover:bg-green-600 text-white px-2 py-1 rounded transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},children:"Submit"})]}),t.jsx("p",{className:"text-[10px] mt-1 text-gray-500 dark:text-gray-400",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},e.id))(e);case"confirmation":return(e=>t.jsx(i.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.2},className:"flex justify-start",children:t.jsxs("div",{className:"flex items-end space-x-1",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-green-500 to-green-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"âœ…"}),t.jsxs("div",{className:"bg-green-50 dark:bg-green-900 px-3 py-2 rounded-lg rounded-bl-sm border border-green-200 dark:border-green-700 shadow-sm max-w-[250px]",children:[t.jsx("div",{className:"text-xs whitespace-pre-line leading-relaxed text-green-800 dark:text-green-200",children:e.text}),t.jsx("p",{className:"text-[10px] mt-1 text-green-600 dark:text-green-400",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},e.id))(e);default:return(e=>t.jsx(i.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.2},className:"flex "+(e.isUser?"justify-end":"justify-start"),children:t.jsxs("div",{className:"flex items-end space-x-1 "+(e.isUser?"flex-row-reverse space-x-reverse":""),children:[!e.isUser&&t.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"ðŸ¤–"}),t.jsxs("div",{className:"max-w-[200px] px-3 py-2 rounded-lg shadow-sm "+(e.isUser?"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-br-sm":"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600 rounded-bl-sm"),children:[t.jsx("div",{className:"text-xs whitespace-pre-line leading-relaxed",children:e.text}),t.jsx("p",{className:"text-[10px] mt-1 "+(e.isUser?"text-blue-100":"text-gray-500 dark:text-gray-400"),children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.isUser&&t.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:t.jsx(a,{name:"User",size:"sm"})})]})},e.id))(e)}})(e)),u&&t.jsx(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex justify-start",children:t.jsxs("div",{className:"flex items-end space-x-1",children:[t.jsx("div",{className:"w-6 h-6 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:"ðŸ¤–"}),t.jsx("div",{className:"bg-white dark:bg-gray-700 px-3 py-2 rounded-lg rounded-bl-sm border border-gray-200 dark:border-gray-600 shadow-sm",children:t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full animate-bounce"}),t.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),t.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),t.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:"typing..."})]})})]})}),t.jsx("div",{ref:y})]}),1===o.length&&t.jsxs("div",{className:"px-4 pb-2 bg-gray-50 dark:bg-gray-800",children:[t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3 font-medium",children:"Quick questions:"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:[{text:"Start booking wizard",icon:"Car"},{text:"Start listing wizard",icon:"DollarSign"},{text:"What are your prices?",icon:"DollarSign"},{text:"Is it safe?",icon:"Shield"},{text:"Contact support",icon:"Phone"}].map((e,r)=>t.jsxs(i.button,{onClick:()=>{return t=e.text,void P(t);var t},className:"text-xs bg-white dark:bg-gray-700 hover:bg-blue-50 dark:hover:bg-gray-600 px-3 py-2 rounded-full transition-all duration-200 border border-gray-200 dark:border-gray-600 hover:border-blue-300 dark:hover:border-gray-500 flex items-center space-x-1 shadow-sm hover:shadow-md",whileHover:{scale:1.05},whileTap:{scale:.95},children:[t.jsx(a,{name:e.icon,size:"sm"}),t.jsx("span",{children:e.text})]},r))})]}),t.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:t.jsxs("div",{className:"flex space-x-2",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx("input",{type:"text",value:d,onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),P())},placeholder:"Type your message...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-1 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:text-white text-xs placeholder-gray-500 dark:placeholder-gray-400 transition-all duration-200 shadow-sm focus:shadow-md"}),d&&t.jsx(i.div,{initial:{scale:0},animate:{scale:1},className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:t.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"})})]}),t.jsx(i.button,{onClick:()=>P(),disabled:!d.trim()||u,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 disabled:from-gray-300 disabled:to-gray-300 disabled:cursor-not-allowed text-white px-3 py-2 rounded-lg transition-all duration-200 flex items-center justify-center shadow-lg hover:shadow-xl disabled:shadow-none",whileHover:{scale:d.trim()&&!u?1.05:1},whileTap:{scale:d.trim()&&!u?.95:1},children:u?t.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}):t.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})})]})};export{n as default};
