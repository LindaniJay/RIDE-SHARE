const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["/assets/firebase-DEdgpkbI.js","/assets/vendor-BDlGQTAF.js","/assets/react-vendor-R_lWSjNG.js","/assets/dashboard-pages-C6IO1YEK.js","/assets/ui-libs-BTnp6TS4.js"])))=>i.map(i=>d[i]);
import{r as e,u as t,a as s,j as a,n as i,C as r,A as n,b as o,D as l,R as c,S as d,E as h,M as m,c as x,d as u,e as p,B as g,f as b,X as j,g as v}from"./react-vendor-R_lWSjNG.js";import{f,a as w}from"./firebase-DEdgpkbI.js";import{a as N}from"./utils-Bi8vyz5k.js";import{m as y}from"./ui-libs-BTnp6TS4.js";import{l as k}from"./vendor-BDlGQTAF.js";const S={},C=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),r=i?.nonce||i?.getAttribute("nonce");a=Promise.allSettled(t.map(t=>{if(t=function(e,t){return new URL(e,t).href}(t,s),t in S)return;S[t]=!0;const a=t.endsWith(".css"),i=a?'[rel="stylesheet"]':"";if(s)for(let s=e.length-1;s>=0;s--){const i=e[s];if(i.href===t&&(!a||"stylesheet"===i.rel))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;const n=document.createElement("link");return n.rel=a?"stylesheet":"modulepreload",a||(n.as="script"),n.crossOrigin="",n.href=t,r&&n.setAttribute("nonce",r),document.head.appendChild(n),a?new Promise((e,s)=>{n.addEventListener("load",e),n.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${t}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})},$=e.createContext(void 0),L=()=>{const t=e.useContext($);if(void 0===t)throw new Error("useAuth must be used within an AuthProvider");return t},A=({children:i})=>{const[r,n]=e.useState(null),[o,l]=e.useState(!0),[c,d]=e.useState(!0),h=t(),m=s();e.useEffect(()=>f.onAuthStateChange(e=>{n(e),c?(d(!1),l(!1)):l(!1),e?"admin"===e.role?.toLowerCase()?m.pathname.startsWith("/admin")||m.pathname.startsWith("/admin-dashboard")||"/"===m.pathname||h("/admin-dashboard",{replace:!0}):m.pathname.startsWith("/admin")||m.pathname.includes("admin")?m.pathname.startsWith("/admin"):m.pathname.startsWith("/dashboard")||h("/dashboard",{replace:!0}):"/"!==m.pathname&&h("/",{replace:!0})}),[h,m.pathname,c]);const x={user:r,loading:o,signup:async(e,t,s,a,i,r)=>{try{await f.signupUser({email:e,password:t,firstName:s,lastName:a,phone:i,role:r})}catch(n){throw n}},login:async(e,t)=>{try{await f.loginUser({email:e,password:t})}catch(s){throw s}},logout:async()=>{try{await f.logoutUser()}catch(e){throw e}}};return a.jsx($.Provider,{value:x,children:i})},M=({name:e,size:t="md",className:s=""})=>{const i={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"},r={Home:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Search:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Car:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7v8a2 2 0 002 2h4a2 2 0 002-2V7M8 7a2 2 0 00-2 2v6a2 2 0 002 2M8 7V5a2 2 0 012-2h4a2 2 0 012 2v2m-6 0h6"})}),Info:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Phone:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),User:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Logout:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Login:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),Plus:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),Menu:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),Sun:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),Moon:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),CheckCircle:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),XCircle:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),AlertTriangle:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})}),Clock:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),FileText:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),CreditCard:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),DollarSign:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),MapPin:a.jsxs("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),Star:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"currentColor",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),Mail:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),Lock:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Shield:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),BarChart:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),TrendingUp:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Upload:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),Download:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Edit:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Trash:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Heart:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"currentColor",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),Calendar:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Clipboard:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),Users:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),Gift:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})}),Calculator:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),Bell:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM4.828 7l2.586 2.586a2 2 0 002.828 0L12.828 7H4.828zM4 12h16M4 16h16M4 20h16"})}),Scale:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l-2.83 2.83M6 7l2.83 2.83m6.17-2.83l-3 9m3-9l3 1m-3-1l-2.83 2.83M18 7l2.83 2.83M18 7l-3 9m3-9l3 1m-3-1l-2.83 2.83"})}),Settings:a.jsxs("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Play:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"currentColor",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h1m4 0h1m-6-8h8a2 2 0 012 2v8a2 2 0 01-2 2H8a2 2 0 01-2-2V6a2 2 0 012-2z"})}),Pause:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"currentColor",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Zap:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),Eye:a.jsxs("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),Motorcycle:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),Truck:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),Van:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),Bus:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),Send:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),MessageCircle:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),Link:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),X:a.jsx("svg",{className:`${i[t]} ${s}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})};return a.jsx(a.Fragment,{children:r[e]||null})},R=new class{socket=null;baseUrl;connecting=!1;constructor(){this.baseUrl="ws://localhost:5001"}async connect(e){if(this.socket?.connected)return;if(this.connecting)return;this.connecting=!0;let t=e||null;if(!t)try{const{getFirebaseToken:e}=await C(async()=>{const{getFirebaseToken:e}=await import("./firebase-DEdgpkbI.js").then(e=>e.c);return{getFirebaseToken:e}},__vite__mapDeps([0,1,2]),import.meta.url);t=await e()}catch(s){}this.socket&&(this.socket.disconnect(),this.socket=null),this.socket=k(this.baseUrl,{transports:["websocket","polling"],timeout:2e4,reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5,auth:{token:t}}),this.socket.on("connect",()=>{this.connecting=!1}),this.socket.on("disconnect",e=>{this.connecting=!1,"io server disconnect"===e&&this.socket?.connect()}),this.socket.on("error",e=>{this.connecting=!1}),this.socket.on("reconnect",e=>{}),this.socket.on("reconnect_error",e=>{this.connecting=!1}),this.socket.on("reconnect_failed",()=>{this.connecting=!1})}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}subscribeToNotifications(e){this.socket&&(this.socket.on("notification",e),this.socket.on("user:notification",e))}subscribeToAdminUpdates(e){this.socket&&(this.socket.on("admin:new-user",e),this.socket.on("admin:new-vehicle",e),this.socket.on("admin:new-booking",e),this.socket.on("admin:dashboard-update",e))}subscribeToRenterUpdates(e){this.socket&&(this.socket.on("renter:booking-update",e),this.socket.on("renter:payment-update",e),this.socket.on("renter:vehicle-available",e))}subscribeToHostUpdates(e){this.socket&&(this.socket.on("host:booking-request",e),this.socket.on("host:vehicle-approval",e),this.socket.on("host:payment-received",e))}subscribeToUserUpdates(e,t){this.socket&&(this.socket.on(`user:${e}:profile-update`,t),this.socket.on(`user:${e}:vehicle-update`,t),this.socket.on(`user:${e}:booking-update`,t))}sendMessage(e){this.socket&&this.socket.emit("message",e)}joinRoom(e){this.socket&&this.socket.emit("join_room",e)}leaveRoom(e){this.socket&&this.socket.emit("leave_room",e)}joinBookingRoom(e){this.socket&&this.socket.connected&&this.socket.emit("join-booking",{bookingId:e})}leaveBookingRoom(e){this.socket&&this.socket.connected&&this.socket.emit("leave-booking",{bookingId:e})}sendChatMessage(e,t,s){this.socket&&this.socket.connected&&this.socket.emit("send-message",{bookingId:e,message:t,recipientId:s,timestamp:(new Date).toISOString()})}startTyping(e,t){this.socket&&this.socket.connected&&this.socket.emit("typing-start",{bookingId:e,recipientId:t})}stopTyping(e,t){this.socket&&this.socket.connected&&this.socket.emit("typing-stop",{bookingId:e,recipientId:t})}on(e,t){this.socket&&this.socket.on(e,t)}off(e,t){this.socket&&this.socket.off(e,t)}onChatMessage(e){this.socket&&this.socket.on("chat-message",e)}offChatMessage(e){this.socket&&this.socket.off("chat-message",e)}onBookingUpdate(e){this.socket&&this.socket.on("booking-update",e)}offBookingUpdate(e){this.socket&&this.socket.off("booking-update",e)}onNotification(e){this.socket&&this.socket.on("notification",e)}offNotification(e){this.socket&&this.socket.off("notification",e)}getConnectionStatus(){return{connected:this.socket?.connected||!1,connecting:this.connecting}}},B={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},T={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},z={rest:{scale:1,y:0,boxShadow:"0 8px 32px 0 rgba(31, 38, 135, 0.37)"},hover:{scale:1.02,y:-5,boxShadow:"0 12px 40px 0 rgba(31, 38, 135, 0.5)",transition:{duration:.3,ease:"easeOut"}},tap:{scale:.98,transition:{duration:.1}}},_={rest:{scale:1,boxShadow:"0 4px 16px 0 rgba(0, 166, 81, 0.2)"},hover:{scale:1.05,boxShadow:"0 8px 24px 0 rgba(0, 166, 81, 0.4)",transition:{duration:.2}},tap:{scale:.95,transition:{duration:.1}}},P={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.2}}},U={hidden:{opacity:0,y:-20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}},I={closed:{opacity:0,x:"100%",transition:{duration:.3,ease:"easeInOut"}},open:{opacity:1,x:0,transition:{duration:.3,ease:"easeInOut"}}},E={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut"}}},F={hidden:{opacity:0,y:20,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:"easeOut"}}},D={focus:{scale:1.02,boxShadow:"0 0 0 3px rgba(0, 166, 81, 0.2)",transition:{duration:.2}},blur:{scale:1,boxShadow:"0 0 0 0px rgba(0, 166, 81, 0)",transition:{duration:.2}}},V=({children:e,onClick:t,type:s="button",variant:i="primary",size:r="md",disabled:n=!1,loading:o=!1,icon:l,iconPosition:c="left",className:d="",animated:h=!0,glow:m=!1,fullWidth:x=!1})=>{const u=`\n    ${(()=>{switch(i){case"primary":default:return"bg-primary-500/20 hover:bg-primary-500/30 text-white border-primary-500/30 hover:border-primary-500/50";case"secondary":return"bg-white/10 hover:bg-white/20 text-white border-white/20 hover:border-white/30";case"accent":return"bg-accent-500/20 hover:bg-accent-500/30 text-white border-accent-500/30 hover:border-accent-500/50";case"ghost":return"bg-transparent hover:bg-white/10 text-white border-white/10 hover:border-white/20";case"danger":return"bg-red-500/20 hover:bg-red-500/30 text-white border-red-500/30 hover:border-red-500/50";case"outline":return"bg-transparent hover:bg-white/10 text-white border-white/30 hover:border-white/50"}})()}\n    ${(()=>{switch(r){case"sm":return"px-3 py-1.5 text-sm";case"md":default:return"px-4 py-2 text-base";case"lg":return"px-6 py-3 text-lg";case"xl":return"px-8 py-4 text-xl"}})()}\n    ${x?"w-full":""}\n    ${m?"shadow-glow":"shadow-glass"}\n    backdrop-blur-md\n    border\n    rounded-xl\n    font-medium\n    font-heading\n    transition-all\n    duration-300\n    ease-in-out\n    relative\n    overflow-hidden\n    disabled:opacity-50\n    disabled:cursor-not-allowed\n    disabled:hover:scale-100\n    disabled:hover:shadow-glass\n    ${d}\n  `,p=h?y.button:"button",g=h?{variants:_,initial:"rest",whileHover:n?"rest":"hover",whileTap:n?"rest":"tap",onClick:n?void 0:t}:{onClick:n?void 0:t};return a.jsxs(p,{type:s,disabled:n||o,className:u,...g,children:[h&&!n&&a.jsx("div",{className:"absolute inset-0 -top-2 -left-2 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-500 transform -skew-x-12 -translate-x-full hover:translate-x-full"}),a.jsxs("div",{className:"relative z-10 flex items-center justify-center gap-2",children:[o&&a.jsx(y.div,{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),!o&&l&&"left"===c&&a.jsx("span",{className:"flex-shrink-0",children:l}),a.jsx("span",{className:"text-shadow-sm",children:e}),!o&&l&&"right"===c&&a.jsx("span",{className:"flex-shrink-0",children:l})]}),h&&a.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-white/30 to-transparent opacity-50"})]})},W=({children:e,className:t="",title:s,subtitle:i,icon:r,level:n=3,hover:o=!0,clickable:l=!1,onClick:c,gradient:d=!1,glow:h=!1,animated:m=!0})=>{const x=`\n    ${(()=>{switch(n){case 1:return"glass-1";case 2:return"glass-2";case 3:default:return"glass-3";case 4:return"glass-4";case 5:return"glass-5"}})()}\n    rounded-2xl p-6\n    ${o?"hover:scale-105 hover:shadow-glass-lg":""}\n    ${l?"cursor-pointer":""}\n    ${h?"shadow-glow":"shadow-glass"}\n    ${d?"bg-gradient-to-br from-white/20 to-white/10":""}\n    transition-all duration-300 ease-in-out\n    relative overflow-hidden\n    ${t}\n  `,u=m?y.div:"div",p=m?{variants:z,initial:"rest",whileHover:o?"hover":"rest",whileTap:l?"tap":void 0,onClick:l?c:void 0}:{};return a.jsxs(u,{className:x,...p,children:[m&&a.jsx("div",{className:"absolute inset-0 -top-2 -left-2 w-full h-full bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-500 transform -skew-x-12 -translate-x-full hover:translate-x-full"}),a.jsxs("div",{className:"relative z-10",children:[(s||i||r)&&a.jsxs("div",{className:"flex items-center mb-4",children:[r&&a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center mr-4 backdrop-blur-sm border border-white/30 shadow-lg",children:r}),a.jsxs("div",{children:[s&&a.jsx("h3",{className:"text-lg font-semibold text-white mb-1 text-shadow-md font-heading",children:s}),i&&a.jsx("p",{className:"text-white/90 text-sm text-shadow-sm font-body",children:i})]})]}),a.jsx("div",{className:"text-shadow-sm font-body",children:e})]}),m&&a.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-white/30 to-transparent opacity-50"})]})};class q{static baseUrl="/api/admin";static async getAuthToken(){try{const e=w.currentUser;if(!e)throw new Error("No authenticated user found");return await e.getIdToken()}catch(e){throw new Error("Failed to get authentication token")}}static async getStats(){try{const e=await this.getAuthToken(),t=await fetch(`${this.baseUrl}/dashboard-stats`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch admin stats");return(await t.json()).stats}catch(e){throw e}}static async getUsers(e=1,t=10,s,a){try{const i=await this.getAuthToken(),r=new URLSearchParams({page:e.toString(),limit:t.toString(),...s&&{status:s},...a&&{role:a}}),n=await fetch(`${this.baseUrl}/users?${r}`,{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(!n.ok)throw new Error("Failed to fetch users");return await n.json()}catch(i){throw i}}static async approveUser(e,t,s){try{const a=await this.getAuthToken(),i=await fetch(`${this.baseUrl}/users/${e}/approve`,{method:"PATCH",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({status:t,reason:s})});if(!i.ok)throw new Error("Failed to update user status");return await i.json()}catch(a){throw a}}static async getVehicles(e=1,t=10,s){try{const a=await this.getAuthToken(),i=new URLSearchParams({page:e.toString(),limit:t.toString(),...s&&{status:s}}),r=await fetch(`${this.baseUrl}/vehicles?${i}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error("Failed to fetch vehicles");return await r.json()}catch(a){throw a}}static async approveVehicle(e,t,s){try{const a=await this.getAuthToken(),i=await fetch(`${this.baseUrl}/vehicles/${e}/approve`,{method:"PATCH",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({status:t,reason:s})});if(!i.ok)throw new Error("Failed to update vehicle status");return await i.json()}catch(a){throw a}}static async getBookings(e=1,t=10,s){try{const a=await this.getAuthToken(),i=new URLSearchParams({page:e.toString(),limit:t.toString(),...s&&{status:s}}),r=await fetch(`${this.baseUrl}/bookings?${i}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error("Failed to fetch bookings");return await r.json()}catch(a){throw a}}static async getReviews(e=1,t=10){try{const s=await this.getAuthToken(),a=new URLSearchParams({page:e.toString(),limit:t.toString()}),i=await fetch(`${this.baseUrl}/reviews?${a}`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error("Failed to fetch reviews");return await i.json()}catch(s){throw s}}static async getDocuments(e=1,t=10,s){try{const a=await this.getAuthToken(),i=new URLSearchParams({page:e.toString(),limit:t.toString(),...s&&{status:s}}),r=await fetch(`${this.baseUrl}/documents?${i}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error("Failed to fetch documents");return await r.json()}catch(a){throw a}}static async getDisputes(e=1,t=10,s){try{const a=await this.getAuthToken(),i=new URLSearchParams({page:e.toString(),limit:t.toString(),...s&&{status:s}}),r=await fetch(`${this.baseUrl}/disputes?${i}`,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error("Failed to fetch disputes");return await r.json()}catch(a){throw a}}static async approveBooking(e,t,s){try{const a=await this.getAuthToken(),i=await fetch(`${this.baseUrl}/bookings/${e}/approve`,{method:"PATCH",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({status:t,reason:s})});if(!i.ok)throw new Error("Failed to update booking status");return await i.json()}catch(a){throw a}}}const H=({status:e,className:t=""})=>{const s=(e=>{switch(e.toLowerCase()){case"approved":case"active":case"verified":return{bg:"bg-green-500/20",text:"text-green-400",border:"border-green-400/30",label:"Approved"};case"pending":case"waiting":return{bg:"bg-yellow-500/20",text:"text-yellow-400",border:"border-yellow-400/30",label:"Pending"};case"declined":case"rejected":case"inactive":return{bg:"bg-red-500/20",text:"text-red-400",border:"border-red-400/30",label:"Declined"};case"cancelled":return{bg:"bg-gray-500/20",text:"text-gray-400",border:"border-gray-400/30",label:"Cancelled"};default:return{bg:"bg-gray-500/20",text:"text-gray-400",border:"border-gray-400/30",label:e}}})(e);return a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${s.bg} ${s.text} ${s.border} ${t}`,children:s.label})},O=()=>{const{user:t}=L(),[s,i]=e.useState([]),[r,n]=e.useState(!0),[o,l]=e.useState("pending"),[c,d]=e.useState(null),[h,m]=e.useState(!1),[x,u]=e.useState("approve"),[p,g]=e.useState("");e.useEffect(()=>{b()},[o]);const b=async()=>{try{const e=await fetch(`/api/admin/users?status=${o}&page=1&limit=50`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(e.ok){const t=await e.json();i(t.data?.users||t.users||[])}}catch(e){}finally{n(!1)}},j=(e,t)=>{d(e),u(t),m(!0)};return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"User Approvals"}),a.jsx("div",{className:"flex space-x-2",children:["all","pending","approved","rejected"].map(e=>a.jsx("button",{onClick:()=>l(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+(o===e?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),a.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[s.map(e=>a.jsx("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:a.jsxs("span",{className:"text-white font-semibold text-sm",children:[e.first_name[0],e.last_name[0]]})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-white font-semibold",children:[e.first_name," ",e.last_name]}),a.jsx("p",{className:"text-white/70 text-sm",children:e.email})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white/70",children:"Role"}),a.jsx("p",{className:"text-white capitalize",children:e.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white/70",children:"Phone"}),a.jsx("p",{className:"text-white",children:e.phone_number||"Not provided"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white/70",children:"Joined"}),a.jsx("p",{className:"text-white",children:new Date(e.created_at).toLocaleDateString()})]})]}),e.documents&&e.documents.length>0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Documents:"}),a.jsx("div",{className:"flex space-x-2",children:e.documents.map((e,t)=>a.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-200 rounded text-xs",children:e.type},t))})]}),e.rejection_reason&&a.jsx("div",{className:"mt-3 p-3 bg-red-500/10 border border-red-400/30 rounded-lg",children:a.jsxs("p",{className:"text-red-200 text-sm",children:[a.jsx("strong",{children:"Rejection Reason:"})," ",e.rejection_reason]})})]}),a.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(H,{status:e.approval_status}),a.jsx(H,{status:e.document_status})]}),"pending"===e.approval_status&&a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>j(e,"approve"),className:"px-3 py-1 bg-green-500/20 text-green-200 rounded-lg text-sm hover:bg-green-500/30 transition-colors",children:"Approve"}),a.jsx("button",{onClick:()=>j(e,"reject"),className:"px-3 py-1 bg-red-500/20 text-red-200 rounded-lg text-sm hover:bg-red-500/30 transition-colors",children:"Reject"})]})]})]})},e.id)),0===s.length&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(M,{name:"Users",size:"lg",className:"text-white/50 mx-auto mb-4"}),a.jsx("p",{className:"text-white/70",children:"No users found"})]})]})})}),h&&c&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"approve"===x?"Approve User":"Reject User"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-white/70 mb-2",children:"approve"===x?`Are you sure you want to approve ${c.first_name} ${c.last_name}?`:`Are you sure you want to reject ${c.first_name} ${c.last_name}?`}),"reject"===x&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Rejection Reason (Optional)"}),a.jsx("textarea",{value:p,onChange:e=>g(e.target.value),placeholder:"Enter reason for rejection...",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>{m(!1),d(null),g("")},className:"flex-1 px-4 py-2 bg-white/10 text-white/70 rounded-lg hover:bg-white/20 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>(async(e,t,s)=>{try{(await fetch(`/api/admin/users/${e}/approve`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({status:"approve"===t?"approved":"rejected",reason:s||void 0})})).ok?(i(a=>a.map(a=>a.id===e?{...a,approval_status:"approve"===t?"approved":"rejected",rejection_reason:s}:a)),m(!1),d(null),g(""),alert(`User ${"approve"===t?"approved":"rejected"} successfully`)):alert("Failed to update user status")}catch(a){alert("Error updating user status")}})(c.id,x,p),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-colors "+("approve"===x?"bg-green-500 text-white hover:bg-green-600":"bg-red-500 text-white hover:bg-red-600"),children:"approve"===x?"Approve":"Reject"})]})]})})]})},J=()=>{const{user:t}=L(),[s,i]=e.useState([]),[r,n]=e.useState(!0),[o,l]=e.useState("pending"),[c,d]=e.useState(null),[h,m]=e.useState(!1),[x,u]=e.useState("approve"),[p,g]=e.useState("");e.useEffect(()=>{b()},[o]);const b=async()=>{try{const e=await fetch(`/api/admin/vehicles?status=${o}&page=1&limit=50`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(e.ok){const t=await e.json();i(t.data.vehicles||[])}}catch(e){}finally{n(!1)}},j=(e,t)=>{d(e),u(t),m(!0)};return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Vehicle Approvals"}),a.jsx("div",{className:"flex space-x-2",children:["all","pending","approved","rejected"].map(e=>a.jsx("button",{onClick:()=>l(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all "+(o===e?"bg-white/20 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]}),a.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl border border-white/20",children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[s.map(e=>a.jsx("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gray-300 rounded-lg flex items-center justify-center",children:e.images&&e.images.length>0?a.jsx("img",{src:e.images[0],alt:e.title,className:"w-full h-full object-cover rounded-lg"}):a.jsx(M,{name:"Car",size:"lg",className:"text-gray-500"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-white font-semibold text-lg",children:e.title}),a.jsxs("p",{className:"text-white/70 text-sm mb-2",children:[e.make," ",e.model," (",e.year,") â€¢ ",e.vehicle_type]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white/70",children:"Price"}),a.jsxs("p",{className:"text-white font-semibold",children:["R",e.price_per_day,"/day"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white/70",children:"Location"}),a.jsx("p",{className:"text-white",children:"string"==typeof e.location?e.location:e.location?.address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white/70",children:"Host"}),a.jsxs("p",{className:"text-white",children:[e.host.first_name," ",e.host.last_name]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white/70",children:"Listed"}),a.jsx("p",{className:"text-white",children:new Date(e.created_at).toLocaleDateString()})]})]}),e.features&&e.features.length>0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("p",{className:"text-white/70 text-sm mb-2",children:"Features:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.features.map((e,t)=>a.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-200 rounded text-xs",children:e},t))})]}),e.rejection_reason&&a.jsx("div",{className:"mt-3 p-3 bg-red-500/10 border border-red-400/30 rounded-lg",children:a.jsxs("p",{className:"text-red-200 text-sm",children:[a.jsx("strong",{children:"Rejection Reason:"})," ",e.rejection_reason]})})]})]})}),a.jsxs("div",{className:"flex flex-col space-y-2 ml-4",children:[a.jsx(H,{status:e.status}),"pending"===e.status&&a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>j(e,"approve"),className:"px-3 py-1 bg-green-500/20 text-green-200 rounded-lg text-sm hover:bg-green-500/30 transition-colors",children:"Approve"}),a.jsx("button",{onClick:()=>j(e,"reject"),className:"px-3 py-1 bg-red-500/20 text-red-200 rounded-lg text-sm hover:bg-red-500/30 transition-colors",children:"Reject"})]})]})]})},e.id)),0===s.length&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(M,{name:"Car",size:"lg",className:"text-white/50 mx-auto mb-4"}),a.jsx("p",{className:"text-white/70",children:"No vehicles found"})]})]})})}),h&&c&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"approve"===x?"Approve Vehicle":"Reject Vehicle"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-white/70 mb-2",children:"approve"===x?`Are you sure you want to approve "${c.title}"?`:`Are you sure you want to reject "${c.title}"?`}),"reject"===x&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Rejection Reason (Optional)"}),a.jsx("textarea",{value:p,onChange:e=>g(e.target.value),placeholder:"Enter reason for rejection...",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>{m(!1),d(null),g("")},className:"flex-1 px-4 py-2 bg-white/10 text-white/70 rounded-lg hover:bg-white/20 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>(async(e,t,s)=>{try{(await fetch(`/api/admin/vehicles/${e}/approve`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("accessToken")}`},body:JSON.stringify({status:"approve"===t?"approved":"declined",reason:s||void 0})})).ok?(i(a=>a.map(a=>a.id===e?{...a,status:"approve"===t?"approved":"rejected",rejection_reason:s}:a)),m(!1),d(null),g(""),alert(`Vehicle ${"approve"===t?"approved":"rejected"} successfully`)):alert("Failed to update vehicle status")}catch(a){alert("Error updating vehicle status")}})(c.id,x,p),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-colors "+("approve"===x?"bg-green-500 text-white hover:bg-green-600":"bg-red-500 text-white hover:bg-red-600"),children:"approve"===x?"Approve":"Reject"})]})]})})]})},X=()=>{const{user:t}=L(),[s,i]=e.useState(null),[r,n]=e.useState(!0),[o,l]=e.useState("month"),[c,d]=e.useState("overview");e.useEffect(()=>{h()},[o]);const h=async()=>{try{const e=await fetch(`/api/analytics/platform?period=${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}});if(e.ok){const t=await e.json();i(t.analytics)}}catch(e){}finally{n(!1)}};return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Analytics Dashboard"}),a.jsx("div",{className:"flex space-x-2",children:a.jsxs("select",{value:o,onChange:e=>l(e.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white",children:[a.jsx("option",{value:"week",children:"This Week"}),a.jsx("option",{value:"month",children:"This Month"}),a.jsx("option",{value:"year",children:"This Year"})]})})]}),a.jsx("div",{className:"flex space-x-1 bg-white/10 backdrop-blur-md rounded-lg p-1 border border-white/20",children:[{id:"overview",label:"Overview",icon:"bar-chart"},{id:"users",label:"Users",icon:"users"},{id:"vehicles",label:"Vehicles",icon:"car"},{id:"revenue",label:"Revenue",icon:"dollar-sign"}].map(e=>a.jsxs("button",{onClick:()=>d(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-md transition-all "+(c===e.id?"bg-white/20 text-white":"text-gray-300 hover:text-white hover:bg-white/10"),children:[a.jsx(M,{name:e.icon,className:"h-4 w-4"}),a.jsx("span",{children:e.label})]},e.id))}),"overview"===c&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:s.overview.totalUsers.toLocaleString()})]}),a.jsx(M,{name:"users",className:"h-8 w-8 text-blue-400"})]}),a.jsx("div",{className:"mt-2",children:a.jsxs("span",{className:"text-green-400 text-sm",children:["+",s.growth.users," this ",o]})})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Vehicles"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:s.overview.totalVehicles.toLocaleString()})]}),a.jsx(M,{name:"car",className:"h-8 w-8 text-green-400"})]}),a.jsx("div",{className:"mt-2",children:a.jsxs("span",{className:"text-green-400 text-sm",children:["+",s.growth.vehicles," this ",o]})})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Bookings"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:s.overview.totalBookings.toLocaleString()})]}),a.jsx(M,{name:"calendar",className:"h-8 w-8 text-purple-400"})]}),a.jsx("div",{className:"mt-2",children:a.jsxs("span",{className:"text-green-400 text-sm",children:["+",s.growth.bookings," this ",o]})})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",s.overview.totalRevenue.toLocaleString()]})]}),a.jsx(M,{name:"dollar-sign",className:"h-8 w-8 text-yellow-400"})]}),a.jsx("div",{className:"mt-2",children:a.jsxs("span",{className:"text-green-400 text-sm",children:["+R",s.growth.revenue.toLocaleString()," this ",o]})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Conversion Rates"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-white/70",children:"Renter to Booking"}),a.jsxs("span",{className:"text-white font-semibold",children:[s.conversionRates.renterToBooking.toFixed(1),"%"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-white/70",children:"Host to Listing"}),a.jsxs("span",{className:"text-white font-semibold",children:[s.conversionRates.hostToListing.toFixed(1),"%"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-white/70",children:"Average Booking Value"}),a.jsxs("span",{className:"text-white font-semibold",children:["R",s.averageBookingValue.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-white/70",children:"User Retention"}),a.jsxs("span",{className:"text-white font-semibold",children:[s.userRetention,"%"]})]})]})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Booking Status"}),a.jsx("div",{className:"space-y-3",children:s.bookingStatusDistribution.map(e=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-white/70 capitalize",children:e.status}),a.jsx("span",{className:"text-white font-semibold",children:e.count})]},e.status))})]})]})]}),"users"===c&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"User Activity"}),a.jsx("div",{className:"space-y-3",children:s.userActivity.slice(0,10).map((e,t)=>a.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",children:[a.jsx("div",{children:a.jsx("p",{className:"text-white font-medium",children:new Date(e.date).toLocaleDateString()})}),a.jsxs("span",{className:"text-white font-semibold",children:[e.count," new users"]})]},t))})]})}),"vehicles"===c&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Performing Vehicles"}),a.jsx("div",{className:"space-y-3",children:s.topVehicles.map((e,t)=>a.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:e.vehicle.title}),a.jsxs("p",{className:"text-white/70 text-sm",children:[e.vehicle.make," ",e.vehicle.model]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-white font-semibold",children:[e.bookingCount," bookings"]}),a.jsxs("p",{className:"text-white/70 text-sm",children:["R",parseFloat(e.totalRevenue).toLocaleString()]})]})]},t))})]})}),"revenue"===c&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Revenue by Month"}),a.jsx("div",{className:"space-y-3",children:s.revenueByMonth.map((e,t)=>a.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",children:[a.jsx("div",{children:a.jsx("p",{className:"text-white font-medium",children:new Date(e.month).toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),a.jsxs("span",{className:"text-white font-semibold",children:["R",parseFloat(e.revenue).toLocaleString()]})]},t))})]})})]}):a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-white/70",children:"No analytics data available"})})},Y=()=>{const[t,s]=e.useState({platformName:"RideShare SA",maintenanceMode:!1,registrationEnabled:!0,emailNotifications:!0,smsNotifications:!0,maxFileSize:5,sessionTimeout:30,apiRateLimit:100}),[i,r]=e.useState({enableMessaging:!0,enablePayments:!0,enableAnalytics:!0,enableReviews:!0,enableNotifications:!0,enableMobileApp:!1}),[n,o]=e.useState("settings"),[l,c]=e.useState(!1);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"System Administration"}),a.jsx("div",{className:"flex space-x-2",children:a.jsx("button",{onClick:()=>{t.maintenanceMode?confirm("Are you sure you want to disable maintenance mode? This will make the platform accessible to all users.")&&s(e=>({...e,maintenanceMode:!1})):confirm("Are you sure you want to enable maintenance mode? This will restrict access to the platform.")&&s(e=>({...e,maintenanceMode:!0}))},className:"px-4 py-2 rounded-lg font-medium transition-all "+(t.maintenanceMode?"bg-red-500/20 text-red-200 border border-red-400/30":"bg-green-500/20 text-green-200 border border-green-400/30"),children:t.maintenanceMode?"Disable Maintenance":"Enable Maintenance"})})]}),a.jsx("div",{className:"flex space-x-1 bg-white/10 backdrop-blur-md rounded-lg p-1 border border-white/20",children:[{id:"settings",label:"System Settings",icon:"Settings"},{id:"features",label:"Feature Flags",icon:"Flag"},{id:"security",label:"Security",icon:"Shield"},{id:"monitoring",label:"Monitoring",icon:"Activity"}].map(e=>a.jsxs("button",{onClick:()=>o(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-md transition-all "+(n===e.id?"bg-white/20 text-white":"text-gray-300 hover:text-white hover:bg-white/10"),children:[a.jsx(M,{name:e.icon,className:"h-4 w-4"}),a.jsx("span",{children:e.label})]},e.id))}),"settings"===n&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"General Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Platform Name"}),a.jsx("input",{type:"text",value:t.platformName,onChange:e=>s(t=>({...t,platformName:e.target.value})),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Max File Size (MB)"}),a.jsx("input",{type:"number",value:t.maxFileSize,onChange:e=>s(t=>({...t,maxFileSize:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"Session Timeout (minutes)"}),a.jsx("input",{type:"number",value:t.sessionTimeout,onChange:e=>s(t=>({...t,sessionTimeout:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-white/70 text-sm font-medium mb-2",children:"API Rate Limit (requests per 15min)"}),a.jsx("input",{type:"number",value:t.apiRateLimit,onChange:e=>s(t=>({...t,apiRateLimit:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Access Control"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:"Registration Enabled"}),a.jsx("p",{className:"text-white/70 text-sm",children:"Allow new user registrations"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:t.registrationEnabled,onChange:e=>s(t=>({...t,registrationEnabled:e.target.checked})),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:"Email Notifications"}),a.jsx("p",{className:"text-white/70 text-sm",children:"Send email notifications to users"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:t.emailNotifications,onChange:e=>s(t=>({...t,emailNotifications:e.target.checked})),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:"SMS Notifications"}),a.jsx("p",{className:"text-white/70 text-sm",children:"Send SMS notifications to users"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:t.smsNotifications,onChange:e=>s(t=>({...t,smsNotifications:e.target.checked})),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:async()=>{c(!0);try{alert("Settings saved successfully!")}catch(e){alert("Failed to save settings")}finally{c(!1)}},disabled:l,className:"px-6 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Saving...":"Save Settings"})})]}),"features"===n&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Feature Flags"}),a.jsx("div",{className:"space-y-4",children:Object.entries(i).map(([e,t])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium capitalize",children:e.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase())}),a.jsx("p",{className:"text-white/70 text-sm",children:t?"Feature is enabled":"Feature is disabled"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:t,onChange:t=>r(s=>({...s,[e]:t.target.checked})),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},e))})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:async()=>{c(!0);try{alert("Feature flags updated successfully!")}catch(e){alert("Failed to save feature flags")}finally{c(!1)}},disabled:l,className:"px-6 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Saving...":"Save Feature Flags"})})]}),"security"===n&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Security Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("div",{className:"p-4 bg-green-500/10 border border-green-400/30 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(M,{name:"Shield",size:"lg",className:"text-green-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-semibold",children:"SSL/TLS Enabled"}),a.jsx("p",{className:"text-white/70 text-sm",children:"All connections are encrypted"})]})]})}),a.jsx("div",{className:"p-4 bg-blue-500/10 border border-blue-400/30 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(M,{name:"Lock",size:"lg",className:"text-blue-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-semibold",children:"JWT Authentication"}),a.jsx("p",{className:"text-white/70 text-sm",children:"Secure token-based auth"})]})]})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",children:[a.jsx("span",{className:"text-white",children:"Password Requirements"}),a.jsx("span",{className:"text-green-400 text-sm",children:"Strong"})]}),a.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",children:[a.jsx("span",{className:"text-white",children:"Rate Limiting"}),a.jsx("span",{className:"text-green-400 text-sm",children:"Active"})]}),a.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/5 rounded-lg",children:[a.jsx("span",{className:"text-white",children:"CORS Protection"}),a.jsx("span",{className:"text-green-400 text-sm",children:"Enabled"})]})]})]})]})}),"monitoring"===n&&a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 border border-white/20",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"System Monitoring"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"p-4 bg-green-500/10 border border-green-400/30 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(M,{name:"Server",size:"lg",className:"text-green-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-semibold",children:"Server Status"}),a.jsx("p",{className:"text-green-400 text-sm",children:"Online"})]})]})}),a.jsx("div",{className:"p-4 bg-blue-500/10 border border-blue-400/30 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(M,{name:"Database",size:"lg",className:"text-blue-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-semibold",children:"Database"}),a.jsx("p",{className:"text-blue-400 text-sm",children:"Connected"})]})]})}),a.jsx("div",{className:"p-4 bg-purple-500/10 border border-purple-400/30 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(M,{name:"Activity",size:"lg",className:"text-purple-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-semibold",children:"API Health"}),a.jsx("p",{className:"text-purple-400 text-sm",children:"Healthy"})]})]})})]})]})})]})},G={}?.VITE_API_URL||"/api",Z=N.create({baseURL:G,headers:{"Content-Type":"application/json"}});Z.interceptors.request.use(e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const K={getAll:e=>Z.get("/vehicles",{params:e}),getById:e=>Z.get(`/vehicles/${e}`),create:e=>Z.post("/vehicles",e),update:(e,t)=>Z.put(`/vehicles/${e}`,t),delete:e=>Z.delete(`/vehicles/${e}`),search:e=>Z.get("/vehicles/search",{params:e})},Q={createPaymentIntent:(e,t)=>Z.post("/payments/create-payment-intent",{bookingId:e,amount:t}),confirmPayment:e=>Z.post("/payments/confirm-payment",{paymentIntentId:e}),refund:e=>Z.post("/payments/refund",{paymentId:e}),createPayfastPayment:e=>Z.post("/payments/create-payfast-payment",e),getPaymentMethods:()=>Z.get("/payments/methods")},ee={create:e=>Z.post("/approval-requests",e),getMyRequests:e=>Z.get("/approval-requests/my-requests",{params:e}),getAll:e=>Z.get("/approval-requests",{params:e}),getPending:e=>Z.get("/approval-requests/pending",{params:e}),update:(e,t)=>Z.patch(`/approval-requests/${e}`,t),getById:e=>Z.get(`/approval-requests/${e}`),getStats:()=>Z.get("/approval-requests/stats/overview"),bulkUpdate:e=>Z.patch("/approval-requests/bulk",e)},te=new class{permission="default";registration=null;async initialize(){if(!("Notification"in window))return!1;if(!("serviceWorker"in navigator))return!1;try{return this.registration=await navigator.serviceWorker.register("/sw.js"),this.permission=await Notification.requestPermission(),"granted"===this.permission}catch(e){return!1}}async showNotification(e){if("granted"===this.permission)try{this.registration?await this.registration.showNotification(e.title,{body:e.body,icon:e.icon||"/android-chrome-192x192.png",badge:e.badge||"/favicon-32x32.png",tag:e.tag,data:e.data,requireInteraction:!0,silent:!1}):new Notification(e.title,{body:e.body,icon:e.icon||"/android-chrome-192x192.png",tag:e.tag})}catch(t){i(e.title,{duration:5e3})}}async showBookingNotification(e,t){const s={created:{title:"Booking Request Sent",body:`Your booking request for ${t.vehicleName} has been sent to the host.`,tag:"booking-created",data:{type:"booking",action:"view-booking",bookingId:t.id}},confirmed:{title:"Booking Confirmed! ðŸŽ‰",body:`Your booking for ${t.vehicleName} has been confirmed. Pickup: ${t.pickupDate}`,tag:"booking-confirmed",data:{type:"booking",action:"view-booking",bookingId:t.id}},cancelled:{title:"Booking Cancelled",body:`Your booking for ${t.vehicleName} has been cancelled.`,tag:"booking-cancelled",data:{type:"booking",action:"view-bookings",bookingId:t.id}},reminder:{title:"Booking Reminder",body:`Don't forget! Your booking for ${t.vehicleName} starts tomorrow.`,tag:"booking-reminder",data:{type:"booking",action:"view-booking",bookingId:t.id}}}[e];await this.showNotification(s)}async showMessageNotification(e,t,s){await this.showNotification({title:`New message from ${e}`,body:t,tag:`message-${s}`,data:{type:"message",action:"open-conversation",conversationId:s},actions:[{action:"reply",title:"Reply"},{action:"view",title:"View Conversation"}]})}async showPaymentNotification(e,t,s="ZAR"){const a={success:{title:"Payment Successful",body:`Payment of ${s} ${t.toLocaleString()} has been processed successfully.`,tag:"payment-success"},failed:{title:"Payment Failed",body:`Payment of ${s} ${t.toLocaleString()} could not be processed. Please try again.`,tag:"payment-failed"},refund:{title:"Refund Processed",body:`Refund of ${s} ${t.toLocaleString()} has been processed.`,tag:"payment-refund"}}[e];await this.showNotification(a)}async showSystemNotification(e,t,s="info"){await this.showNotification({title:e,body:t,tag:`system-${s}`,data:{type:"system",notificationType:s}})}async scheduleBookingReminder(e,t,s){const a=new Date,i=s.getTime()-a.getTime();i>0&&setTimeout(async()=>{await this.showBookingNotification("reminder",{id:e,vehicleName:t})},i)}setupNotificationClickHandler(){this.registration&&this.registration.addEventListener("notificationclick",e=>{e.notification.close();const t=e.notification.data;"view-booking"===t?.action?window.open(`/dashboard?booking=${t.bookingId}`,"_blank"):"open-conversation"===t?.action?window.open(`/dashboard?messages=${t.conversationId}`,"_blank"):"view-bookings"===t?.action?window.open("/dashboard","_blank"):window.open("/","_blank")})}getPermission(){return this.permission}isSupported(){return"Notification"in window&&"serviceWorker"in navigator}async success(e){i.success(e)}async error(e){i.error(e)}async approvalSubmitted(e){i.success(e)}subscribe(e){}async markAsRead(e){}async markAllAsRead(){}async removeNotification(e){}},se=({selectedRequests:t,onBulkActionComplete:s,onClearSelection:i})=>{const[r,n]=e.useState(!1),[o,l]=e.useState(!1),[c,d]=e.useState(null),[h,m]=e.useState(""),x=e=>{d(e),l(!0)};return 0===t.length?null:a.jsxs(a.Fragment,{children:[a.jsx(W,{title:"Bulk Actions",icon:"Settings",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-white/70",children:[t.length," request",t.length>1?"s":""," selected"]}),a.jsx("button",{onClick:i,className:"text-blue-400 hover:text-blue-300 transition-colors text-sm",children:"Clear Selection"})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{onClick:()=>x("approve"),className:"flex-1 px-4 py-2 bg-green-500/20 text-green-200 rounded-lg hover:bg-green-500/30 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(M,{name:"Check",size:"sm"}),a.jsx("span",{children:"Approve All"})]}),a.jsxs("button",{onClick:()=>x("decline"),className:"flex-1 px-4 py-2 bg-red-500/20 text-red-200 rounded-lg hover:bg-red-500/30 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(M,{name:"X",size:"sm"}),a.jsx("span",{children:"Decline All"})]})]})]})}),o&&c&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"w-full max-w-md",children:a.jsx(W,{title:`Bulk ${"approve"===c?"Approve":"Decline"} Requests`,icon:"approve"===c?"Check":"X",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-white/70 text-sm",children:["You are about to ",c," ",t.length," request",t.length>1?"s":"",". This action cannot be undone."]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:"Review Notes (Optional)"}),a.jsx("textarea",{value:h,onChange:e=>m(e.target.value),placeholder:"Add notes for all requests...",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>(async e=>{if(0!==t.length)try{n(!0);const a=await ee.bulkUpdate({requestIds:t,status:e,reviewNotes:h.trim()||void 0});a.data.success&&(te.success(`Bulk Action Completed - ${a.data.data.updatedCount} requests ${e.toLowerCase()} successfully`),s(),l(!1),m(""))}catch(a){te.error("Bulk Action Failed - Failed to process bulk action. Please try again.")}finally{n(!1)}})("approve"===c?"Approved":"Declined"),disabled:r,className:"flex-1 px-4 py-2 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 "+("approve"===c?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"),children:r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:"Processing..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(M,{name:"approve"===c?"Check":"X",size:"sm"}),a.jsxs("span",{children:["approve"===c?"Approve":"Decline"," All"]})]})}),a.jsx("button",{onClick:()=>{l(!1),d(null),m("")},className:"px-4 py-2 bg-white/10 text-white/70 rounded-lg hover:bg-white/20 transition-colors",children:"Cancel"})]})]})})})})]})},ae=({userRole:t,showActions:s=!1,limit:i=5})=>{const[r,n]=e.useState([]),[o,l]=e.useState(!0),[c,d]=e.useState(null),[h,m]=e.useState([]);e.useEffect(()=>{x()},[t]);const x=async()=>{try{let e;l(!0),e="admin"===t?await ee.getPending({limit:i}):await ee.getMyRequests({limit:i}),e.data.success?n(e.data.data.requests||[]):d("Failed to fetch approval requests")}catch(e){d("Failed to fetch approval requests")}finally{l(!1)}},u=e=>{switch(e){case"Pending":return"yellow";case"UnderReview":return"blue";case"Approved":return"green";case"Declined":return"red";case"RequiresMoreInfo":return"orange";default:return"gray"}};return o?a.jsx(W,{title:"Approval Requests",icon:"Clock",children:a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})}):c?a.jsx(W,{title:"Approval Requests",icon:"Clock",children:a.jsxs("div",{className:"text-center py-8",children:[a.jsx(M,{name:"AlertCircle",size:"lg",className:"text-red-400 mx-auto mb-4"}),a.jsx("p",{className:"text-red-400",children:c})]})}):a.jsxs("div",{className:"space-y-6",children:["admin"===t&&s&&a.jsx(se,{selectedRequests:h,onBulkActionComplete:()=>{m([]),x()},onClearSelection:()=>{m([])}}),a.jsx(W,{title:"admin"===t?"Pending Approvals":"My Approval Requests",icon:"Clock",children:a.jsx("div",{className:"space-y-4",children:0===r.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(M,{name:"CheckCircle",size:"lg",className:"text-green-400 mx-auto mb-4"}),a.jsx("p",{className:"text-white/70",children:"admin"===t?"No pending approvals":"No approval requests"})]}):r.map(e=>{return a.jsxs("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:["admin"===t&&s&&a.jsx("input",{type:"checkbox",checked:h.includes(e.id),onChange:()=>{return t=e.id,void m(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"mr-3 mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("h4",{className:"text-white font-semibold",children:(i=e.requestType,{DocumentVerification:"Document Verification",VehicleListing:"Vehicle Listing",InsuranceVerification:"Insurance Verification",ProfileVerification:"Profile Verification",VehicleApproval:"Vehicle Approval"}[i]||i)}),a.jsx(H,{status:u(e.status)})]}),a.jsxs("p",{className:"text-white/70 text-sm",children:["Submitted by: ",e.submittedByUser.firstName," ",e.submittedByUser.lastName]}),a.jsx("p",{className:"text-white/70 text-sm",children:new Date(e.createdAt).toLocaleDateString()}),e.reviewedAt&&a.jsxs("p",{className:"text-white/70 text-sm",children:["Reviewed: ",new Date(e.reviewedAt).toLocaleDateString()]})]})]}),e.reviewNotes&&a.jsx("div",{className:"mb-3 p-3 bg-white/5 rounded-lg",children:a.jsxs("p",{className:"text-white/80 text-sm",children:[a.jsx("strong",{children:"Review Notes:"})," ",e.reviewNotes]})}),s&&"Pending"===e.status&&a.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[a.jsxs("button",{onClick:()=>(async e=>{try{(await ee.update(e,{status:"Approved",reviewNotes:void 0})).data.success&&(te.success("Request Approved - The approval request has been approved successfully."),x())}catch(t){te.error("Approval Failed - Failed to approve the request. Please try again.")}})(e.id),className:"flex-1 px-3 py-2 bg-green-500/20 text-green-200 rounded-lg hover:bg-green-500/30 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(M,{name:"Check",size:"sm"}),a.jsx("span",{className:"text-sm sm:text-base",children:"Approve"})]}),a.jsxs("button",{onClick:()=>(async e=>{try{(await ee.update(e,{status:"Declined",reviewNotes:void 0})).data.success&&(te.success("Request Declined - The approval request has been declined."),x())}catch(t){te.error("Decline Failed - Failed to decline the request. Please try again.")}})(e.id),className:"flex-1 px-3 py-2 bg-red-500/20 text-red-200 rounded-lg hover:bg-red-500/30 transition-colors flex items-center justify-center space-x-2",children:[a.jsx(M,{name:"X",size:"sm"}),a.jsx("span",{className:"text-sm sm:text-base",children:"Decline"})]})]})]},e.id);var i})})})]})},ie=()=>{const[t,s]=e.useState(null),[i,r]=e.useState(!0);e.useEffect(()=>{n()},[]);const n=async()=>{try{const e=await ee.getStats();e.data.success&&s(e.data.data)}catch(e){}finally{r(!1)}};return i?a.jsx(W,{title:"Approval Analytics",icon:"BarChart",children:a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(W,{title:"Status Distribution",icon:"PieChart",children:a.jsx("div",{className:"space-y-3",children:t?.statusStats.map(e=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-white/70 capitalize",children:e.status}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-20 bg-white/10 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:e.count/(t?.statusStats.reduce((e,t)=>e+t.count,0)||1)*100+"%"}})}),a.jsx("span",{className:"text-white font-semibold",children:e.count})]})]},e.status))})}),a.jsx(W,{title:"Request Types",icon:"FileText",children:a.jsx("div",{className:"space-y-3",children:t?.requestTypeStats.map(e=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-white/70",children:e.requestType}),a.jsx("span",{className:"text-white font-semibold",children:e.count})]},e.requestType))})})]})},re=({label:t,placeholder:s,value:i="",onChange:r,type:n="text",disabled:o=!1,error:l,success:c,icon:d,iconPosition:h="left",size:m="md",variant:x="default",className:u="",animated:p=!0,required:g=!1,autoFocus:b=!1,maxLength:j,minLength:v,pattern:f,title:w,id:N,name:k,min:S,max:C,onKeyPress:$})=>{const[L,A]=e.useState(!1),[M,R]=e.useState(!!i),B=e.useRef(null);e.useEffect(()=>{R(!!i)},[i]);const T=`\n    ${(()=>{switch(m){case"sm":return"px-3 py-2 text-sm";case"md":default:return"px-4 py-3 text-base";case"lg":return"px-5 py-4 text-lg"}})()}\n    ${(()=>{switch(x){case"floating":return"bg-transparent border-0 border-b-2 border-white/20 focus:border-primary-500 rounded-none";case"outlined":return"bg-transparent border-2 border-white/20 focus:border-primary-500 rounded-xl";default:return"glass-2 border border-white/20 focus:border-primary-500/50 rounded-xl"}})()}\n    ${l?"border-red-500/50 focus:border-red-500":c?"border-green-500/50 focus:border-green-500":""}\n    ${o?"opacity-50 cursor-not-allowed":""}\n    text-white\n    placeholder-white/50\n    backdrop-blur-md\n    transition-all\n    duration-300\n    ease-in-out\n    w-full\n    focus:outline-none\n    focus:ring-2\n    focus:ring-primary-500/20\n    ${u}\n  `,z=p?y.input:"input",_=p?{variants:D,animate:L?"focus":"blur"}:{};return a.jsxs("div",{className:"relative",children:["floating"===x&&t&&a.jsxs(y.label,{className:`\n            absolute left-4 transition-all duration-300 ease-in-out pointer-events-none\n            ${L||M?"top-1 text-xs text-primary-400":"top-1/2 -translate-y-1/2 text-white/70"}\n          `,animate:{y:L||M?-8:0,scale:L||M?.85:1},transition:{duration:.2},children:[t,g&&a.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),"floating"!==x&&t&&a.jsxs("label",{className:"block text-white text-sm font-medium mb-2 text-shadow-sm",children:[t,g&&a.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),a.jsxs("div",{className:"relative",children:[d&&"left"===h&&a.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/50",children:d}),a.jsx(z,{ref:B,id:N,name:k,type:n,value:i,onChange:e=>{const t=e.target.value;R(!!t),r?.(t)},onFocus:()=>{A(!0)},onBlur:()=>{A(!1)},onKeyPress:$,placeholder:"floating"===x?"":s,disabled:o,required:g,autoFocus:b,maxLength:j,minLength:v,pattern:f,title:w,min:S,max:C,className:`\n            ${T}\n            ${d&&"left"===h?"pl-10":""}\n            ${d&&"right"===h?"pr-10":""}\n          `,..._}),d&&"right"===h&&a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-white/50",children:d}),p&&L&&a.jsx(y.div,{className:"absolute inset-0 rounded-xl border-2 border-primary-500/50 pointer-events-none",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{duration:.2}})]}),a.jsxs("div",{className:"mt-2 min-h-[1.25rem]",children:[l&&a.jsx(y.p,{className:"text-red-400 text-sm text-shadow-sm",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:l}),c&&a.jsx(y.p,{className:"text-green-400 text-sm text-shadow-sm",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:c})]}),p&&L&&a.jsx("div",{className:"absolute inset-0 rounded-xl bg-gradient-to-r from-transparent via-primary-500/10 to-transparent opacity-0 animate-shimmer pointer-events-none"})]})},ne=({userRole:t,userId:s})=>{const{user:u}=L(),[p,g]=e.useState([]),[b,j]=e.useState([]),[v,f]=e.useState(!0),[w,N]=e.useState(null),[k,S]=e.useState(!1),[C,$]=e.useState({status:"",paymentStatus:"",dateRange:"",search:""}),[A,M]=e.useState({total:0,pending:0,approved:0,active:0,completed:0,cancelled:0,totalRevenue:0});e.useEffect(()=>{T(),B()},[t,s]),e.useEffect(()=>{_()},[p,C]);const B=()=>{const e=e=>{g(t=>t.map(t=>t.id===e.bookingId?{...t,status:e.status,updatedAt:e.timestamp.toISOString()}:t)),i.success(`Booking ${e.bookingId} status updated: ${e.message}`)},t=e=>{e.type.includes("booking")&&(T(),i.success(e.message))};return R.onBookingUpdate(e),R.onNotification(t),()=>{R.offBookingUpdate(e),R.offNotification(t)}},T=async()=>{try{f(!0);const e="admin"===t?"http://localhost:5001/api/admin/bookings":"host"===t?`http://localhost:5001/api/bookings/host/${u?.uid}`:`http://localhost:5001/api/bookings/user/${u?.uid}`,s=await fetch(e,{headers:{Authorization:`Bearer ${await(u?.getIdToken())}`}});if(s.ok){const e=await s.json();g(e.data||[]),z(e.data||[])}else i.error("Failed to load bookings")}catch(e){i.error("Failed to load bookings")}finally{f(!1)}},z=e=>{const t={total:e.length,pending:e.filter(e=>"pending"===e.status).length,approved:e.filter(e=>"approved"===e.status).length,active:e.filter(e=>"active"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,cancelled:e.filter(e=>"cancelled"===e.status).length,totalRevenue:e.filter(e=>"completed"===e.status).reduce((e,t)=>e+t.totalPrice,0)};M(t)},_=()=>{let e=[...p];if(C.status&&(e=e.filter(e=>e.status===C.status)),C.paymentStatus&&(e=e.filter(e=>e.paymentStatus===C.paymentStatus)),C.search){const t=C.search.toLowerCase();e=e.filter(e=>e.booking_id.toLowerCase().includes(t)||e.renter?.firstName?.toLowerCase().includes(t)||e.renter?.lastName?.toLowerCase().includes(t)||e.vehicle?.make?.toLowerCase().includes(t)||e.vehicle?.model?.toLowerCase().includes(t))}j(e)},P=e=>{switch(e){case"pending":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"approved":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"active":return"bg-green-500/20 text-green-400 border-green-500/30";case"completed":return"bg-emerald-500/20 text-emerald-400 border-emerald-500/30";case"cancelled":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},U=e=>{switch(e){case"paid":return"bg-green-500/20 text-green-400 border-green-500/30";case"pending":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"failed":return"bg-red-500/20 text-red-400 border-red-500/30";case"refunded":return"bg-blue-500/20 text-blue-400 border-blue-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}};return v?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(W,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Total Bookings"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:A.total})]}),a.jsx(r,{className:"w-8 h-8 text-blue-400"})]})}),a.jsx(W,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Active Bookings"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:A.active})]}),a.jsx(n,{className:"w-8 h-8 text-green-400"})]})}),a.jsx(W,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Pending Approval"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:A.pending})]}),a.jsx(o,{className:"w-8 h-8 text-yellow-400"})]})}),a.jsx(W,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Total Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",A.totalRevenue.toFixed(2)]})]}),a.jsx(l,{className:"w-8 h-8 text-emerald-400"})]})})]}),a.jsx(W,{className:"p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),a.jsxs("select",{value:C.status,onChange:e=>$(t=>({...t,status:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"All Statuses"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Payment Status"}),a.jsxs("select",{value:C.paymentStatus,onChange:e=>$(t=>({...t,paymentStatus:e.target.value})),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"All Payment Statuses"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"paid",children:"Paid"}),a.jsx("option",{value:"failed",children:"Failed"}),a.jsx("option",{value:"refunded",children:"Refunded"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search"}),a.jsx(re,{value:C.search,onChange:e=>$(t=>({...t,search:e})),placeholder:"Search bookings...",className:"w-full"})]}),a.jsxs("div",{className:"flex items-end space-x-2",children:[a.jsx(V,{onClick:T,variant:"outline",size:"sm",children:a.jsx(c,{className:"w-4 h-4"})}),a.jsx(V,{onClick:()=>$({status:"",paymentStatus:"",dateRange:"",search:""}),variant:"outline",size:"sm",children:"Clear"})]})]})}),a.jsx("div",{className:"space-y-4",children:0===b.length?a.jsxs(W,{className:"p-8 text-center",children:[a.jsx(r,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No Bookings Found"}),a.jsx("p",{className:"text-gray-400",children:"No bookings match your current filters."})]}):b.map(e=>a.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/5 backdrop-blur-xl rounded-xl border border-white/10 p-6 hover:bg-white/10 transition-all duration-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Booking #",e.booking_id]}),a.jsxs("p",{className:"text-sm text-gray-400",children:[e.vehicle?.make," ",e.vehicle?.model," (",e.vehicle?.year,")"]})]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(H,{status:e.status,className:P(e.status)}),a.jsx(H,{status:e.paymentStatus,className:U(e.paymentStatus)})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Renter"}),a.jsxs("p",{className:"text-white font-medium",children:[e.renter?.firstName," ",e.renter?.lastName]}),a.jsx("p",{className:"text-sm text-gray-400",children:e.renter?.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Host"}),a.jsxs("p",{className:"text-white font-medium",children:[e.host?.firstName," ",e.host?.lastName]}),a.jsx("p",{className:"text-sm text-gray-400",children:e.host?.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Rental Period"}),a.jsxs("p",{className:"text-white font-medium",children:[new Date(e.startDate).toLocaleDateString()," - ",new Date(e.endDate).toLocaleDateString()]}),a.jsxs("p",{className:"text-sm text-gray-400",children:[Math.ceil((new Date(e.endDate).getTime()-new Date(e.startDate).getTime())/864e5)," days"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Total Amount"}),a.jsxs("p",{className:"text-lg font-bold text-green-400",children:["R",e.totalPrice.toFixed(2)]})]}),e.selfie_verified&&a.jsxs("div",{className:"flex items-center space-x-1 text-green-400",children:[a.jsx(d,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:"Verified"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(V,{onClick:()=>{N(e),S(!0)},size:"sm",variant:"outline",children:a.jsx(h,{className:"w-4 h-4"})}),a.jsx(V,{onClick:()=>{},size:"sm",variant:"outline",children:a.jsx(m,{className:"w-4 h-4"})}),"admin"===t&&a.jsx("div",{className:"relative",children:a.jsx(V,{size:"sm",variant:"outline",children:a.jsx(x,{className:"w-4 h-4"})})})]})]})]},e.id))}),k&&w&&a.jsx(oe,{booking:w,onClose:()=>S(!1),onStatusChange:async(e,t,s)=>{try{(await fetch(`http://localhost:5001/api/bookings/${e}/status`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await(u?.getIdToken())}`},body:JSON.stringify({status:t,admin_notes:s})})).ok?(i.success(`Booking status updated to ${t}`),T()):i.error("Failed to update booking status")}catch(a){i.error("Failed to update booking status")}},onRefund:async(e,t)=>{try{(await fetch(`http://localhost:5001/api/bookings/${e}/refund`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await(u?.getIdToken())}`},body:JSON.stringify({amount:t})})).ok?(i.success("Refund processed successfully"),T()):i.error("Failed to process refund")}catch(s){i.error("Failed to process refund")}},userRole:t})]})},oe=({booking:t,onClose:s,onStatusChange:i,onRefund:r,userRole:n})=>{const[o,l]=e.useState(t.admin_notes||""),[c]=e.useState(t.totalPrice);return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:a.jsxs(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-gray-900/90 backdrop-blur-xl rounded-2xl border border-white/20 w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-white/10",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Booking Details"}),a.jsx("button",{onClick:s,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:a.jsx(u,{className:"w-6 h-6 text-gray-400"})})]})}),a.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Booking Information"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Booking ID:"}),a.jsxs("span",{className:"text-white font-mono",children:["#",t.booking_id]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Status:"}),a.jsx(H,{status:t.status})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Payment Status:"}),a.jsx(H,{status:t.paymentStatus})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Total Amount:"}),a.jsxs("span",{className:"text-green-400 font-semibold",children:["R",t.totalPrice.toFixed(2)]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:"Verification Status"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Selfie Verified:"}),a.jsx("div",{className:"flex items-center space-x-2",children:t.selfie_verified?a.jsx(p,{className:"w-5 h-5 text-green-400"}):a.jsx(u,{className:"w-5 h-5 text-red-400"})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"ID Verified:"}),a.jsx("div",{className:"flex items-center space-x-2",children:t.id_verified?a.jsx(p,{className:"w-5 h-5 text-green-400"}):a.jsx(u,{className:"w-5 h-5 text-red-400"})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Contract Signed:"}),a.jsx("div",{className:"flex items-center space-x-2",children:t.contract_signed?a.jsx(p,{className:"w-5 h-5 text-green-400"}):a.jsx(u,{className:"w-5 h-5 text-red-400"})})]})]})]})]}),"admin"===n&&a.jsxs("div",{className:"mt-6 p-4 bg-white/5 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Admin Actions"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Admin Notes"}),a.jsx("textarea",{value:o,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3,placeholder:"Add admin notes..."})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(V,{onClick:()=>i(t.id,"approved",o),disabled:"pending"!==t.status,size:"sm",children:"Approve"}),a.jsx(V,{onClick:()=>i(t.id,"cancelled",o),disabled:"cancelled"===t.status,size:"sm",variant:"outline",children:"Cancel"}),a.jsx(V,{onClick:()=>r(t.id,c),disabled:"paid"!==t.paymentStatus,size:"sm",variant:"outline",children:"Refund"})]})]})]})]})]})})},le=new class{socket=null;reconnectAttempts=0;maxReconnectAttempts=5;reconnectDelay=1e3;connecting=!1;async connect(e){return new Promise(async(t,s)=>{try{if(this.socket?.connected)return t(this.socket);if(this.connecting){const e=setInterval(()=>{this.socket?.connected&&(clearInterval(e),t(this.socket))},200);return}let i=e||null;if(!i)try{const{getFirebaseToken:e}=await C(async()=>{const{getFirebaseToken:e}=await import("./firebase-DEdgpkbI.js").then(e=>e.c);return{getFirebaseToken:e}},__vite__mapDeps([0,1,2]),import.meta.url);i=await e()}catch(a){}const r="http://localhost:5001";this.connecting=!0,this.socket=k(r,{transports:["websocket","polling"],timeout:2e4,auth:{token:i}}),this.socket.on("connect",()=>{this.reconnectAttempts=0,this.reconnectDelay=1e3,this.connecting=!1,t(this.socket)}),this.socket.on("connect_error",e=>{this.connecting=!1,s(e)}),this.socket.on("disconnect",e=>{this.connecting=!1,"io server disconnect"===e&&this.handleReconnect()}),this.socket.on("error",e=>{this.connecting=!1}),this.socket.on("reconnect",e=>{this.reconnectAttempts=0,this.reconnectDelay=1e3}),this.socket.on("reconnect_error",e=>{this.handleReconnect()}),this.socket.on("reconnect_failed",()=>{this.reconnectAttempts=this.maxReconnectAttempts,this.connecting=!1})}catch(a){s(a)}})}handleReconnect(){this.reconnectAttempts<this.maxReconnectAttempts&&(this.reconnectAttempts++,setTimeout(()=>{this.socket&&this.socket.connect()},this.reconnectDelay),this.reconnectDelay=Math.min(2*this.reconnectDelay,3e4))}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null)}getSocket(){return this.socket}isConnected(){return this.socket?.connected||!1}onNotification(e){this.socket&&this.socket.on("notification",e)}onBookingUpdate(e){this.socket&&this.socket.on("booking_update",e)}onSystemAnnouncement(e){this.socket&&this.socket.on("system_announcement",e)}joinChat(e){this.socket&&this.socket.emit("join_chat",e)}leaveChat(e){this.socket&&this.socket.emit("leave_chat",e)}sendMessage(e){this.socket&&this.socket.emit("send_message",e)}onNewMessage(e){this.socket&&this.socket.on("new_message",e)}onUserTyping(e){this.socket&&this.socket.on("user_typing",e)}startTyping(e){this.socket&&this.socket.emit("typing_start",e)}stopTyping(e){this.socket&&this.socket.emit("typing_stop",e)}setOnline(){this.socket&&this.socket.emit("set_online")}setOffline(){this.socket&&this.socket.emit("set_offline")}onUserOnline(e){this.socket&&this.socket.on("user_online",e)}onUserOffline(e){this.socket&&this.socket.on("user_offline",e)}onError(e){this.socket&&this.socket.on("error",e)}removeAllListeners(){this.socket&&this.socket.removeAllListeners()}},ce=(()=>{const e=N.create({baseURL:"/api",timeout:1e4,headers:{"Content-Type":"application/json"}});return e.interceptors.request.use(async e=>{try{const{auth:t}=await C(async()=>{const{auth:e}=await import("./firebase-DEdgpkbI.js").then(e=>e.b);return{auth:e}},__vite__mapDeps([0,1,2]),import.meta.url),s=t.currentUser;if(s){const t=await s.getIdToken();e.headers.Authorization=`Bearer ${t}`}}catch(t){}return e},e=>Promise.reject(e)),e.interceptors.response.use(e=>e,async t=>{const s=t.config,{isConnectionRefusedError:a,getApiErrorMessage:i}=await C(async()=>{const{isConnectionRefusedError:e,getApiErrorMessage:t}=await import("./dashboard-pages-C6IO1YEK.js").then(e=>e.b);return{isConnectionRefusedError:e,getApiErrorMessage:t}},__vite__mapDeps([3,2,1,4]),import.meta.url);if(a(t))return t.userMessage=i(t),Promise.reject(t);if(401===t.response?.status&&!s._retry){s._retry=!0;try{const{auth:t}=await C(async()=>{const{auth:e}=await import("./firebase-DEdgpkbI.js").then(e=>e.b);return{auth:e}},__vite__mapDeps([0,1,2]),import.meta.url),a=t.currentUser;if(a){const t=await a.getIdToken(!0);return s.headers.Authorization=`Bearer ${t}`,e(s)}}catch(r){window.location.href="/login"}}return t.userMessage||(t.userMessage=i(t)),Promise.reject(t)}),e})(),de=Object.freeze(Object.defineProperty({__proto__:null,apiClient:ce},Symbol.toStringTag,{value:"Module"})),he=({userRole:t,userId:s,onNotificationClick:i,onMarkAsRead:n,onMarkAllAsRead:o})=>{const[l,d]=e.useState([]),[h,m]=e.useState(!1),[x,f]=e.useState(!0),[w,N]=e.useState(!1),y=async()=>{try{N(!0);const{data:e}=await ce.get("notifications/booking",{params:{userRole:t,userId:s}});if(!e.success||!e.notifications)throw new Error(e.message||"Failed to fetch notifications");d(e.notifications)}catch(e){e instanceof Error&&(e.message.includes("Server unavailable")||e.message.includes("authentication")),d([])}finally{N(!1)}};e.useEffect(()=>(y(),(async()=>{try{x&&(await le.connect(),le.onNotification(e=>{d(t=>[e,...t])}),le.onBookingUpdate(e=>{y()}),le.onError(e=>{}))}catch(e){const t=setInterval(()=>{x&&y()},3e4);return()=>clearInterval(t)}})(),()=>{le.removeAllListeners()}),[s,x]);const k=e=>{switch(e){case"booking_created":return a.jsx(r,{className:"w-5 h-5 text-blue-600"});case"booking_approved":case"booking_completed":case"payment_received":return a.jsx(p,{className:"w-5 h-5 text-green-600"});case"booking_declined":case"booking_cancelled":return a.jsx(u,{className:"w-5 h-5 text-red-600"});case"payment_failed":return a.jsx(v,{className:"w-5 h-5 text-red-600"});default:return a.jsx(g,{className:"w-5 h-5 text-gray-600"})}},S=e=>{switch(e){case"urgent":return"border-red-500 bg-red-50";case"high":return"border-orange-500 bg-orange-50";case"medium":return"border-blue-500 bg-blue-50";default:return"border-gray-500 bg-gray-50"}},C=e=>{if(!e)return"Unknown time";const t=e instanceof Date?e:new Date(e);if(isNaN(t.getTime()))return"Invalid time";const s=(new Date).getTime()-t.getTime(),a=Math.floor(s/6e4),i=Math.floor(s/36e5),r=Math.floor(s/864e5);return a<1?"Just now":a<60?`${a}m ago`:i<24?`${i}h ago`:`${r}d ago`},$=l.filter(e=>!e.read).length,L=l.filter(e=>e.actionRequired&&!e.read).length;return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>m(!h),className:"relative p-2 text-gray-600 hover:text-gray-800 transition-colors",children:[a.jsx(g,{className:"w-6 h-6"}),$>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:$})]}),h&&a.jsxs("div",{className:"absolute right-0 top-12 w-96 bg-white rounded-lg shadow-lg border z-50 max-h-96 overflow-y-auto",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Notifications"}),a.jsxs("div",{className:"flex items-center gap-2",children:[L>0&&a.jsxs("span",{className:"text-sm text-orange-600 font-medium",children:[L," action required"]}),a.jsx("button",{onClick:()=>f(!x),className:"p-1 rounded "+(x?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-50"),children:x?a.jsx(g,{className:"w-4 h-4"}):a.jsx(b,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>m(!1),className:"p-1 text-gray-400 hover:bg-gray-50 rounded",children:a.jsx(j,{className:"w-4 h-4"})})]})]}),$>0&&a.jsx("button",{onClick:()=>{d(e=>e.map(e=>({...e,read:!0}))),o?.()},className:"mt-2 text-sm text-blue-600 hover:text-blue-800",children:"Mark all as read"})]}),a.jsx("div",{className:"p-4",children:w?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(c,{className:"w-6 h-6 animate-spin text-gray-400"})}):0===l.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(g,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No notifications yet"})]}):a.jsx("div",{className:"space-y-3",children:l.map(e=>a.jsx("div",{onClick:()=>(e=>{e.read||(d(t=>t.map(t=>t.id===e.id?{...t,read:!0}:t)),n?.(e.id)),i?.(e),e.actionUrl&&(window.location.href=e.actionUrl)})(e),className:`p-3 rounded-lg border cursor-pointer transition-all hover:shadow-md ${e.read?"bg-gray-50":"bg-white"} ${S(e.priority)}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:k(e.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-medium "+(e.read?"text-gray-600":"text-gray-800"),children:e.title}),!e.read&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.actionRequired&&a.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded",children:"Action Required"})]}),a.jsx("p",{className:"text-sm "+(e.read?"text-gray-500":"text-gray-700"),children:e.message}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsx("span",{className:"text-xs text-gray-500",children:C(e.timestamp)}),e.amount&&a.jsxs("span",{className:"text-xs font-medium text-green-600",children:["R ",(e.amount||0).toLocaleString()]})]})]})]})},e.id))})})]}),h&&a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>m(!1)})]})},me=()=>{const{user:t,logout:s}=L(),[i,r]=e.useState(null),[n,o]=e.useState(!0),[l,c]=e.useState("overview");e.useEffect(()=>{d();const e=setInterval(d,3e4);return()=>clearInterval(e)},[]);const d=async()=>{try{const e=await q.getStats();r(e)}catch(e){}finally{o(!1)}};return n?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):a.jsx("div",{className:"min-h-screen p-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Admin Dashboard"}),a.jsx("p",{className:"text-gray-300",children:"Real-time management of RideShare SA platform"}),a.jsxs("div",{className:"mt-4 text-sm text-gray-400",children:["Welcome, ",t?.firstName," ",t?.lastName]})]}),a.jsxs("button",{onClick:async()=>{try{await s(),window.location.href="/"}catch(e){window.location.href="/"}},className:"flex items-center space-x-2 px-4 py-2 bg-red-600/80 backdrop-blur-md rounded-lg border border-red-500/30 text-white hover:bg-red-600 transition-all",children:[a.jsx(M,{name:"log-out",className:"h-4 w-4"}),a.jsx("span",{children:"Exit Admin"})]})]})}),i&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Users"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:i.overview.totalUsers})]}),a.jsx(M,{name:"users",className:"h-8 w-8 text-blue-400"})]}),a.jsx("div",{className:"mt-2",children:a.jsxs("span",{className:"text-red-400 text-sm",children:[i.overview.pendingUsers," pending approval"]})})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Vehicles"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:i.overview.totalVehicles})]}),a.jsx(M,{name:"car",className:"h-8 w-8 text-green-400"})]}),a.jsx("div",{className:"mt-2",children:a.jsxs("span",{className:"text-red-400 text-sm",children:[i.overview.pendingVehicles," pending approval"]})})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Bookings"}),a.jsx("p",{className:"text-2xl font-bold text-white",children:i.overview.totalBookings})]}),a.jsx(M,{name:"calendar",className:"h-8 w-8 text-purple-400"})]}),a.jsx("div",{className:"mt-2",children:a.jsxs("span",{className:"text-yellow-400 text-sm",children:[i.overview.pendingBookings," pending"]})})]}),a.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-lg p-6 border border-white/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",i.overview.totalRevenue.toLocaleString()]})]}),a.jsx(M,{name:"dollar-sign",className:"h-8 w-8 text-yellow-400"})]})})]}),a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"flex space-x-1 bg-white/10 backdrop-blur-md rounded-lg p-1 border border-white/20",children:[{id:"overview",label:"Overview",icon:"bar-chart"},{id:"bookings",label:"Bookings",icon:"calendar"},{id:"approvals",label:"Approval Queue",icon:"clock"},{id:"users",label:"User Approvals",icon:"users"},{id:"vehicles",label:"Vehicle Approvals",icon:"car"},{id:"analytics",label:"Analytics",icon:"trending-up"},{id:"system",label:"System Admin",icon:"settings"}].map(e=>a.jsxs("button",{onClick:()=>c(e.id),className:"flex items-center space-x-2 px-4 py-2 rounded-md transition-all "+(l===e.id?"bg-white/20 text-white":"text-gray-300 hover:text-white hover:bg-white/10"),children:[a.jsx(M,{name:e.icon,className:"h-4 w-4"}),a.jsx("span",{children:e.label})]},e.id))})}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-lg border border-white/20",children:["overview"===l&&a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Platform Overview"}),a.jsx(he,{userRole:"admin",userId:t?.id||"0",onNotificationClick:e=>{e.actionUrl&&(window.location.href=e.actionUrl)},onMarkAsRead:e=>{},onMarkAllAsRead:()=>{}})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Recent User Registrations"}),a.jsx("div",{className:"space-y-2",children:i?.recentActivity.recentUsers.slice(0,5).map(e=>a.jsxs("div",{className:"flex items-center justify-between bg-white/5 rounded-lg p-3",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-white font-medium",children:[e.firstName," ",e.lastName]}),a.jsx("p",{className:"text-gray-400 text-sm",children:e.email})]}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("pending"===e.approvalStatus?"bg-yellow-500/20 text-yellow-400":"approved"===e.approvalStatus?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:e.approvalStatus})]},e.id))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"Recent Vehicle Listings"}),a.jsx("div",{className:"space-y-2",children:i?.recentActivity.recentVehicles.slice(0,5).map(e=>a.jsxs("div",{className:"flex items-center justify-between bg-white/5 rounded-lg p-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:e.title}),a.jsxs("p",{className:"text-gray-400 text-sm",children:[e.make," ",e.model]})]}),a.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("pending"===e.status?"bg-yellow-500/20 text-yellow-400":"approved"===e.status?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:e.status})]},e.id))})]})]})]}),"bookings"===l&&a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Booking Management"}),a.jsx(ne,{userRole:"admin",userId:parseInt(t?.id||"0"),onBookingAction:(e,t,s)=>{d()},onRefresh:d})]}),"approvals"===l&&a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx(ie,{}),a.jsx(ae,{userRole:"admin",showActions:!0})]}),"users"===l&&a.jsx("div",{className:"p-6",children:a.jsx(O,{})}),"vehicles"===l&&a.jsx("div",{className:"p-6",children:a.jsx(J,{})}),"analytics"===l&&a.jsx("div",{className:"p-6",children:a.jsx(X,{})}),"system"===l&&a.jsx("div",{className:"p-6",children:a.jsx(Y,{})})]})]})})},xe=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"}));export{X as A,W as G,M as I,me as R,H as S,C as _,ee as a,V as b,B as c,F as d,ae as e,U as f,P as g,re as h,T as i,ce as j,A as k,E as l,I as m,te as n,de as o,Q as p,xe as q,L as u,K as v,R as w};
